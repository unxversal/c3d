(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function TR(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var _g={exports:{}},ao={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function SR(){if(jy)return ao;jy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var f in i)f!=="key"&&(o[f]=i[f])}else o=i;return i=o.ref,{$$typeof:t,type:r,key:u,ref:i!==void 0?i:null,props:o}}return ao.Fragment=e,ao.jsx=n,ao.jsxs=n,ao}var Ky;function xR(){return Ky||(Ky=1,_g.exports=SR()),_g.exports}var fe=xR(),Lg={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function CR(){if(Xy)return Se;Xy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,S={};function C(B,q,ae){this.props=B,this.context=q,this.refs=S,this.updater=ae||T}C.prototype.isReactComponent={},C.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function R(){}R.prototype=C.prototype;function D(B,q,ae){this.props=B,this.context=q,this.refs=S,this.updater=ae||T}var w=D.prototype=new R;w.constructor=D,E(w,C.prototype),w.isPureReactComponent=!0;var O=Array.isArray,m={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function U(B,q,ae,J,ue,pe){return ae=pe.ref,{$$typeof:t,type:B,key:q,ref:ae!==void 0?ae:null,props:pe}}function b(B,q){return U(B.type,q,void 0,void 0,void 0,B.props)}function j(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function z(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ae){return q[ae]})}var A=/\/+/g;function K(B,q){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):q.toString(36)}function Y(){}function Z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Y,Y):(B.status="pending",B.then(function(q){B.status==="pending"&&(B.status="fulfilled",B.value=q)},function(q){B.status==="pending"&&(B.status="rejected",B.reason=q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function se(B,q,ae,J,ue){var pe=typeof B;(pe==="undefined"||pe==="boolean")&&(B=null);var oe=!1;if(B===null)oe=!0;else switch(pe){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(B.$$typeof){case t:case e:oe=!0;break;case d:return oe=B._init,se(oe(B._payload),q,ae,J,ue)}}if(oe)return ue=ue(B),oe=J===""?"."+K(B,0):J,O(ue)?(ae="",oe!=null&&(ae=oe.replace(A,"$&/")+"/"),se(ue,q,ae,"",function(et){return et})):ue!=null&&(j(ue)&&(ue=b(ue,ae+(ue.key==null||B&&B.key===ue.key?"":(""+ue.key).replace(A,"$&/")+"/")+oe)),q.push(ue)),1;oe=0;var ze=J===""?".":J+":";if(O(B))for(var Ve=0;Ve<B.length;Ve++)J=B[Ve],pe=ze+K(J,Ve),oe+=se(J,q,ae,pe,ue);else if(Ve=v(B),typeof Ve=="function")for(B=Ve.call(B),Ve=0;!(J=B.next()).done;)J=J.value,pe=ze+K(J,Ve++),oe+=se(J,q,ae,pe,ue);else if(pe==="object"){if(typeof B.then=="function")return se(Z(B),q,ae,J,ue);throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return oe}function F(B,q,ae){if(B==null)return B;var J=[],ue=0;return se(B,J,"","",function(pe){return q.call(ae,pe,ue++)}),J}function P(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(ae){(B._status===0||B._status===-1)&&(B._status=1,B._result=ae)},function(ae){(B._status===0||B._status===-1)&&(B._status=2,B._result=ae)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var ie=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function I(){}return Se.Children={map:F,forEach:function(B,q,ae){F(B,function(){q.apply(this,arguments)},ae)},count:function(B){var q=0;return F(B,function(){q++}),q},toArray:function(B){return F(B,function(q){return q})||[]},only:function(B){if(!j(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Se.Component=C,Se.Fragment=n,Se.Profiler=i,Se.PureComponent=D,Se.StrictMode=r,Se.Suspense=l,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=m,Se.__COMPILER_RUNTIME={__proto__:null,c:function(B){return m.H.useMemoCache(B)}},Se.cache=function(B){return function(){return B.apply(null,arguments)}},Se.cloneElement=function(B,q,ae){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var J=E({},B.props),ue=B.key,pe=void 0;if(q!=null)for(oe in q.ref!==void 0&&(pe=void 0),q.key!==void 0&&(ue=""+q.key),q)!M.call(q,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&q.ref===void 0||(J[oe]=q[oe]);var oe=arguments.length-2;if(oe===1)J.children=ae;else if(1<oe){for(var ze=Array(oe),Ve=0;Ve<oe;Ve++)ze[Ve]=arguments[Ve+2];J.children=ze}return U(B.type,ue,void 0,void 0,pe,J)},Se.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Se.createElement=function(B,q,ae){var J,ue={},pe=null;if(q!=null)for(J in q.key!==void 0&&(pe=""+q.key),q)M.call(q,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ue[J]=q[J]);var oe=arguments.length-2;if(oe===1)ue.children=ae;else if(1<oe){for(var ze=Array(oe),Ve=0;Ve<oe;Ve++)ze[Ve]=arguments[Ve+2];ue.children=ze}if(B&&B.defaultProps)for(J in oe=B.defaultProps,oe)ue[J]===void 0&&(ue[J]=oe[J]);return U(B,pe,void 0,void 0,null,ue)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(B){return{$$typeof:f,render:B}},Se.isValidElement=j,Se.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:P}},Se.memo=function(B,q){return{$$typeof:g,type:B,compare:q===void 0?null:q}},Se.startTransition=function(B){var q=m.T,ae={};m.T=ae;try{var J=B(),ue=m.S;ue!==null&&ue(ae,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(I,ie)}catch(pe){ie(pe)}finally{m.T=q}},Se.unstable_useCacheRefresh=function(){return m.H.useCacheRefresh()},Se.use=function(B){return m.H.use(B)},Se.useActionState=function(B,q,ae){return m.H.useActionState(B,q,ae)},Se.useCallback=function(B,q){return m.H.useCallback(B,q)},Se.useContext=function(B){return m.H.useContext(B)},Se.useDebugValue=function(){},Se.useDeferredValue=function(B,q){return m.H.useDeferredValue(B,q)},Se.useEffect=function(B,q,ae){var J=m.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(B,q)},Se.useId=function(){return m.H.useId()},Se.useImperativeHandle=function(B,q,ae){return m.H.useImperativeHandle(B,q,ae)},Se.useInsertionEffect=function(B,q){return m.H.useInsertionEffect(B,q)},Se.useLayoutEffect=function(B,q){return m.H.useLayoutEffect(B,q)},Se.useMemo=function(B,q){return m.H.useMemo(B,q)},Se.useOptimistic=function(B,q){return m.H.useOptimistic(B,q)},Se.useReducer=function(B,q,ae){return m.H.useReducer(B,q,ae)},Se.useRef=function(B){return m.H.useRef(B)},Se.useState=function(B){return m.H.useState(B)},Se.useSyncExternalStore=function(B,q,ae){return m.H.useSyncExternalStore(B,q,ae)},Se.useTransition=function(){return m.H.useTransition()},Se.version="19.1.1",Se}var qy;function ah(){return qy||(qy=1,Lg.exports=CR()),Lg.exports}var un=ah(),Vg={exports:{}},io={},Bg={exports:{}},Ug={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function ER(){return Yy||(Yy=1,function(t){function e(F,P){var ie=F.length;F.push(P);e:for(;0<ie;){var I=ie-1>>>1,B=F[I];if(0<i(B,P))F[I]=P,F[ie]=B,ie=I;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var P=F[0],ie=F.pop();if(ie!==P){F[0]=ie;e:for(var I=0,B=F.length,q=B>>>1;I<q;){var ae=2*(I+1)-1,J=F[ae],ue=ae+1,pe=F[ue];if(0>i(J,ie))ue<B&&0>i(pe,J)?(F[I]=pe,F[ue]=ie,I=ue):(F[I]=J,F[ae]=ie,I=ae);else if(ue<B&&0>i(pe,ie))F[I]=pe,F[ue]=ie,I=ue;else break e}}return P}function i(F,P){var ie=F.sortIndex-P.sortIndex;return ie!==0?ie:F.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var l=[],g=[],d=1,p=null,v=3,T=!1,E=!1,S=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function O(F){for(var P=n(g);P!==null;){if(P.callback===null)r(g);else if(P.startTime<=F)r(g),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(g)}}function m(F){if(S=!1,O(F),!E)if(n(l)!==null)E=!0,M||(M=!0,K());else{var P=n(g);P!==null&&se(m,P.startTime-F)}}var M=!1,U=-1,b=5,j=-1;function z(){return C?!0:!(t.unstable_now()-j<b)}function A(){if(C=!1,M){var F=t.unstable_now();j=F;var P=!0;try{e:{E=!1,S&&(S=!1,D(U),U=-1),T=!0;var ie=v;try{t:{for(O(F),p=n(l);p!==null&&!(p.expirationTime>F&&z());){var I=p.callback;if(typeof I=="function"){p.callback=null,v=p.priorityLevel;var B=I(p.expirationTime<=F);if(F=t.unstable_now(),typeof B=="function"){p.callback=B,O(F),P=!0;break t}p===n(l)&&r(l),O(F)}else r(l);p=n(l)}if(p!==null)P=!0;else{var q=n(g);q!==null&&se(m,q.startTime-F),P=!1}}break e}finally{p=null,v=ie,T=!1}P=void 0}}finally{P?K():M=!1}}}var K;if(typeof w=="function")K=function(){w(A)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=A,K=function(){Z.postMessage(null)}}else K=function(){R(A,0)};function se(F,P){U=R(function(){F(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(F){switch(v){case 1:case 2:case 3:var P=3;break;default:P=v}var ie=v;v=P;try{return F()}finally{v=ie}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(F,P){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ie=v;v=F;try{return P()}finally{v=ie}},t.unstable_scheduleCallback=function(F,P,ie){var I=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?I+ie:I):ie=I,F){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ie+B,F={id:d++,callback:P,priorityLevel:F,startTime:ie,expirationTime:B,sortIndex:-1},ie>I?(F.sortIndex=ie,e(g,F),n(l)===null&&F===n(g)&&(S?(D(U),U=-1):S=!0,se(m,ie-I))):(F.sortIndex=B,e(l,F),E||T||(E=!0,M||(M=!0,K()))),F},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(F){var P=v;return function(){var ie=v;v=P;try{return F.apply(this,arguments)}finally{v=ie}}}}(Ug)),Ug}var Qy;function wR(){return Qy||(Qy=1,Bg.exports=ER()),Bg.exports}var Ng={exports:{}},bt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function OR(){if(Zy)return bt;Zy=1;var t=ah();function e(l){var g="https://react.dev/errors/"+l;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)g+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(l,g,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:l,containerInfo:g,implementation:d}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(l,g){if(l==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,bt.createPortal=function(l,g){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return o(l,g,null,d)},bt.flushSync=function(l){var g=u.T,d=r.p;try{if(u.T=null,r.p=2,l)return l()}finally{u.T=g,r.p=d,r.d.f()}},bt.preconnect=function(l,g){typeof l=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(l,g))},bt.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},bt.preinit=function(l,g){if(typeof l=="string"&&g&&typeof g.as=="string"){var d=g.as,p=f(d,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,T=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;d==="style"?r.d.S(l,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:T}):d==="script"&&r.d.X(l,{crossOrigin:p,integrity:v,fetchPriority:T,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},bt.preinitModule=function(l,g){if(typeof l=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var d=f(g.as,g.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(l)},bt.preload=function(l,g){if(typeof l=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var d=g.as,p=f(d,g.crossOrigin);r.d.L(l,d,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},bt.preloadModule=function(l,g){if(typeof l=="string")if(g){var d=f(g.as,g.crossOrigin);r.d.m(l,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:d,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(l)},bt.requestFormReset=function(l){r.d.r(l)},bt.unstable_batchedUpdates=function(l,g){return l(g)},bt.useFormState=function(l,g,d){return u.H.useFormState(l,g,d)},bt.useFormStatus=function(){return u.H.useHostTransitionStatus()},bt.version="19.1.1",bt}var Jy;function RR(){if(Jy)return Ng.exports;Jy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ng.exports=OR(),Ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function mR(){if(Py)return io;Py=1;var t=wR(),e=ah(),n=RR();function r(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var s=a,c=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(c=s.return),a=s.return;while(a)}return s.tag===3?c:null}function u(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function f(a){if(o(a)!==a)throw Error(r(188))}function l(a){var s=a.alternate;if(!s){if(s=o(a),s===null)throw Error(r(188));return s!==a?null:a}for(var c=a,h=s;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(h=y.return,h!==null){c=h;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return f(y),a;if(x===h)return f(y),s;x=x.sibling}throw Error(r(188))}if(c.return!==h.return)c=y,h=x;else{for(var _=!1,V=y.child;V;){if(V===c){_=!0,c=y,h=x;break}if(V===h){_=!0,h=y,c=x;break}V=V.sibling}if(!_){for(V=x.child;V;){if(V===c){_=!0,c=x,h=y;break}if(V===h){_=!0,h=x,c=y;break}V=V.sibling}if(!_)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?a:s}function g(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=g(a),s!==null)return s;a=a.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),w=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function K(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}var Y=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Y?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case E:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case m:return"Suspense";case M:return"SuspenseList";case j:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case T:return"Portal";case w:return(a.displayName||"Context")+".Provider";case D:return(a._context.displayName||"Context")+".Consumer";case O:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case U:return s=a.displayName||null,s!==null?s:Z(a.type)||"Memo";case b:s=a._payload,a=a._init;try{return Z(a(s))}catch{}}return null}var se=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},I=[],B=-1;function q(a){return{current:a}}function ae(a){0>B||(a.current=I[B],I[B]=null,B--)}function J(a,s){B++,I[B]=a.current,a.current=s}var ue=q(null),pe=q(null),oe=q(null),ze=q(null);function Ve(a,s){switch(J(oe,s),J(pe,a),J(ue,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?Ty(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=Ty(s),a=Sy(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae(ue),J(ue,a)}function et(){ae(ue),ae(pe),ae(oe)}function Bt(a){a.memoizedState!==null&&J(ze,a);var s=ue.current,c=Sy(s,a.type);s!==c&&(J(pe,a),J(ue,c))}function cn(a){pe.current===a&&(ae(ue),ae(pe)),ze.current===a&&(ae(ze),Ps._currentValue=ie)}var fa=Object.prototype.hasOwnProperty,tr=t.unstable_scheduleCallback,vf=t.unstable_cancelCallback,ZE=t.unstable_shouldYield,JE=t.unstable_requestPaint,Fn=t.unstable_now,PE=t.unstable_getCurrentPriorityLevel,Ph=t.unstable_ImmediatePriority,Ih=t.unstable_UserBlockingPriority,ko=t.unstable_NormalPriority,IE=t.unstable_LowPriority,ep=t.unstable_IdlePriority,ew=t.log,tw=t.unstable_setDisableYieldValue,ss=null,Pt=null;function Rr(a){if(typeof ew=="function"&&tw(a),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(ss,a)}catch{}}var It=Math.clz32?Math.clz32:aw,nw=Math.log,rw=Math.LN2;function aw(a){return a>>>=0,a===0?32:31-(nw(a)/rw|0)|0}var zo=256,Ao=4194304;function la(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ho(a,s,c){var h=a.pendingLanes;if(h===0)return 0;var y=0,x=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var V=h&134217727;return V!==0?(h=V&~x,h!==0?y=la(h):(_&=V,_!==0?y=la(_):c||(c=V&~a,c!==0&&(y=la(c))))):(V=h&~x,V!==0?y=la(V):_!==0?y=la(_):c||(c=h&~a,c!==0&&(y=la(c)))),y===0?0:s!==0&&s!==y&&(s&x)===0&&(x=y&-y,c=s&-s,x>=c||x===32&&(c&4194048)!==0)?s:y}function os(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function iw(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(){var a=zo;return zo<<=1,(zo&4194048)===0&&(zo=256),a}function np(){var a=Ao;return Ao<<=1,(Ao&62914560)===0&&(Ao=4194304),a}function Tf(a){for(var s=[],c=0;31>c;c++)s.push(a);return s}function us(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function sw(a,s,c,h,y,x){var _=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var V=a.entanglements,N=a.expirationTimes,$=a.hiddenUpdates;for(c=_&~c;0<c;){var ee=31-It(c),ne=1<<ee;V[ee]=0,N[ee]=-1;var W=$[ee];if(W!==null)for($[ee]=null,ee=0;ee<W.length;ee++){var X=W[ee];X!==null&&(X.lane&=-536870913)}c&=~ne}h!==0&&rp(a,h,0),x!==0&&y===0&&a.tag!==0&&(a.suspendedLanes|=x&~(_&~s))}function rp(a,s,c){a.pendingLanes|=s,a.suspendedLanes&=~s;var h=31-It(s);a.entangledLanes|=s,a.entanglements[h]=a.entanglements[h]|1073741824|c&4194090}function ap(a,s){var c=a.entangledLanes|=s;for(a=a.entanglements;c;){var h=31-It(c),y=1<<h;y&s|a[h]&s&&(a[h]|=s),c&=~y}}function Sf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function xf(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ip(){var a=P.p;return a!==0?a:(a=window.event,a===void 0?32:ky(a.type))}function ow(a,s){var c=P.p;try{return P.p=a,s()}finally{P.p=c}}var mr=Math.random().toString(36).slice(2),Ut="__reactFiber$"+mr,jt="__reactProps$"+mr,ti="__reactContainer$"+mr,Cf="__reactEvents$"+mr,uw="__reactListeners$"+mr,cw="__reactHandles$"+mr,sp="__reactResources$"+mr,cs="__reactMarker$"+mr;function Ef(a){delete a[Ut],delete a[jt],delete a[Cf],delete a[uw],delete a[cw]}function ni(a){var s=a[Ut];if(s)return s;for(var c=a.parentNode;c;){if(s=c[ti]||c[Ut]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(a=wy(a);a!==null;){if(c=a[Ut])return c;a=wy(a)}return s}a=c,c=a.parentNode}return null}function ri(a){if(a=a[Ut]||a[ti]){var s=a.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return a}return null}function fs(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(r(33))}function ai(a){var s=a[sp];return s||(s=a[sp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(a){a[cs]=!0}var op=new Set,up={};function ga(a,s){ii(a,s),ii(a+"Capture",s)}function ii(a,s){for(up[a]=s,a=0;a<s.length;a++)op.add(s[a])}var fw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cp={},fp={};function lw(a){return fa.call(fp,a)?!0:fa.call(cp,a)?!1:fw.test(a)?fp[a]=!0:(cp[a]=!0,!1)}function $o(a,s,c){if(lw(s))if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var h=s.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+c)}}function Wo(a,s,c){if(c===null)a.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+c)}}function nr(a,s,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(s,c,""+h)}}var wf,lp;function si(a){if(wf===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);wf=s&&s[1]||"",lp=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wf+a+lp}var Of=!1;function Rf(a,s){if(!a||Of)return"";Of=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(X){var W=X}Reflect.construct(a,[],ne)}else{try{ne.call()}catch(X){W=X}a.call(ne.prototype)}}else{try{throw Error()}catch(X){W=X}(ne=a())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(X){if(X&&W&&typeof X.stack=="string")return[X.stack,W.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=h.DetermineComponentFrameRoot(),_=x[0],V=x[1];if(_&&V){var N=_.split(`
`),$=V.split(`
`);for(y=h=0;h<N.length&&!N[h].includes("DetermineComponentFrameRoot");)h++;for(;y<$.length&&!$[y].includes("DetermineComponentFrameRoot");)y++;if(h===N.length||y===$.length)for(h=N.length-1,y=$.length-1;1<=h&&0<=y&&N[h]!==$[y];)y--;for(;1<=h&&0<=y;h--,y--)if(N[h]!==$[y]){if(h!==1||y!==1)do if(h--,y--,0>y||N[h]!==$[y]){var ee=`
`+N[h].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=h&&0<=y);break}}}finally{Of=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?si(c):""}function gw(a){switch(a.tag){case 26:case 27:case 5:return si(a.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return Rf(a.type,!1);case 11:return Rf(a.type.render,!1);case 1:return Rf(a.type,!0);case 31:return si("Activity");default:return""}}function gp(a){try{var s="";do s+=gw(a),a=a.return;while(a);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function fn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function hp(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hw(a){var s=hp(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),h=""+a[s];if(!a.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return y.call(this)},set:function(_){h=""+_,x.call(this,_)}}),Object.defineProperty(a,s,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function jo(a){a._valueTracker||(a._valueTracker=hw(a))}function pp(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var c=s.getValue(),h="";return a&&(h=hp(a)?a.checked?"true":"false":a.value),a=h,a!==c?(s.setValue(a),!0):!1}function Ko(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var pw=/[\n"\\]/g;function ln(a){return a.replace(pw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mf(a,s,c,h,y,x,_,V){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),s!=null?_==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+fn(s)):a.value!==""+fn(s)&&(a.value=""+fn(s)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),s!=null?Mf(a,_,fn(s)):c!=null?Mf(a,_,fn(c)):h!=null&&a.removeAttribute("value"),y==null&&x!=null&&(a.defaultChecked=!!x),y!=null&&(a.checked=y&&typeof y!="function"&&typeof y!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?a.name=""+fn(V):a.removeAttribute("name")}function dp(a,s,c,h,y,x,_,V){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(a.type=x),s!=null||c!=null){if(!(x!=="submit"&&x!=="reset"||s!=null))return;c=c!=null?""+fn(c):"",s=s!=null?""+fn(s):c,V||s===a.value||(a.value=s),a.defaultValue=s}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,a.checked=V?a.checked:!!h,a.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_)}function Mf(a,s,c){s==="number"&&Ko(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function oi(a,s,c,h){if(a=a.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=s.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&h&&(a[c].defaultSelected=!0)}else{for(c=""+fn(c),s=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,h&&(a[y].defaultSelected=!0);return}s!==null||a[y].disabled||(s=a[y])}s!==null&&(s.selected=!0)}}function yp(a,s,c){if(s!=null&&(s=""+fn(s),s!==a.value&&(a.value=s),c==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=c!=null?""+fn(c):""}function vp(a,s,c,h){if(s==null){if(h!=null){if(c!=null)throw Error(r(92));if(se(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),s=c}c=fn(s),a.defaultValue=c,h=a.textContent,h===c&&h!==""&&h!==null&&(a.value=h)}function ui(a,s){if(s){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=s;return}}a.textContent=s}var dw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tp(a,s,c){var h=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":h?a.setProperty(s,c):typeof c!="number"||c===0||dw.has(s)?s==="float"?a.cssFloat=c:a[s]=(""+c).trim():a[s]=c+"px"}function Sp(a,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(a=a.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||s!=null&&s.hasOwnProperty(h)||(h.indexOf("--")===0?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="");for(var y in s)h=s[y],s.hasOwnProperty(y)&&c[y]!==h&&Tp(a,y,h)}else for(var x in s)s.hasOwnProperty(x)&&Tp(a,x,s[x])}function Df(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(a){return vw.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var _f=null;function Lf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ci=null,fi=null;function xp(a){var s=ri(a);if(s&&(a=s.stateNode)){var c=a[jt]||null;e:switch(a=s.stateNode,s.type){case"input":if(mf(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+ln(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var h=c[s];if(h!==a&&h.form===a.form){var y=h[jt]||null;if(!y)throw Error(r(90));mf(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)h=c[s],h.form===a.form&&pp(h)}break e;case"textarea":yp(a,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&oi(a,!!c.multiple,s,!1)}}}var Vf=!1;function Cp(a,s,c){if(Vf)return a(s,c);Vf=!0;try{var h=a(s);return h}finally{if(Vf=!1,(ci!==null||fi!==null)&&(Vu(),ci&&(s=ci,a=fi,fi=ci=null,xp(s),a)))for(s=0;s<a.length;s++)xp(a[s])}}function ls(a,s){var c=a.stateNode;if(c===null)return null;var h=c[jt]||null;if(h===null)return null;c=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(a=a.type,h=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!h;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bf=!1;if(rr)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){Bf=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{Bf=!1}var Mr=null,Uf=null,qo=null;function Ep(){if(qo)return qo;var a,s=Uf,c=s.length,h,y="value"in Mr?Mr.value:Mr.textContent,x=y.length;for(a=0;a<c&&s[a]===y[a];a++);var _=c-a;for(h=1;h<=_&&s[c-h]===y[x-h];h++);return qo=y.slice(a,1<h?1-h:void 0)}function Yo(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Qo(){return!0}function wp(){return!1}function Kt(a){function s(c,h,y,x,_){this._reactName=c,this._targetInst=y,this.type=h,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(c=a[V],this[V]=c?c(x):x[V]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Qo:wp,this.isPropagationStopped=wp,this}return d(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),s}var ha={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zo=Kt(ha),hs=d({},ha,{view:0,detail:0}),Tw=Kt(hs),Nf,bf,ps,Jo=d({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ff,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ps&&(ps&&a.type==="mousemove"?(Nf=a.screenX-ps.screenX,bf=a.screenY-ps.screenY):bf=Nf=0,ps=a),Nf)},movementY:function(a){return"movementY"in a?a.movementY:bf}}),Op=Kt(Jo),Sw=d({},Jo,{dataTransfer:0}),xw=Kt(Sw),Cw=d({},hs,{relatedTarget:0}),Gf=Kt(Cw),Ew=d({},ha,{animationName:0,elapsedTime:0,pseudoElement:0}),ww=Kt(Ew),Ow=d({},ha,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Rw=Kt(Ow),mw=d({},ha,{data:0}),Rp=Kt(mw),Mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lw(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=_w[a])?!!s[a]:!1}function Ff(){return Lw}var Vw=d({},hs,{key:function(a){if(a.key){var s=Mw[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Yo(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Dw[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ff,charCode:function(a){return a.type==="keypress"?Yo(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Yo(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Bw=Kt(Vw),Uw=d({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Kt(Uw),Nw=d({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ff}),bw=Kt(Nw),Gw=d({},ha,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=Kt(Gw),kw=d({},Jo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zw=Kt(kw),Aw=d({},ha,{newState:0,oldState:0}),Hw=Kt(Aw),$w=[9,13,27,32],kf=rr&&"CompositionEvent"in window,ds=null;rr&&"documentMode"in document&&(ds=document.documentMode);var Ww=rr&&"TextEvent"in window&&!ds,Mp=rr&&(!kf||ds&&8<ds&&11>=ds),Dp=" ",_p=!1;function Lp(a,s){switch(a){case"keyup":return $w.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var li=!1;function jw(a,s){switch(a){case"compositionend":return Vp(s);case"keypress":return s.which!==32?null:(_p=!0,Dp);case"textInput":return a=s.data,a===Dp&&_p?null:a;default:return null}}function Kw(a,s){if(li)return a==="compositionend"||!kf&&Lp(a,s)?(a=Ep(),qo=Uf=Mr=null,li=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mp&&s.locale!=="ko"?null:s.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!Xw[a.type]:s==="textarea"}function Up(a,s,c,h){ci?fi?fi.push(h):fi=[h]:ci=h,s=Fu(s,"onChange"),0<s.length&&(c=new Zo("onChange","change",null,c,h),a.push({event:c,listeners:s}))}var ys=null,vs=null;function qw(a){hy(a,0)}function Po(a){var s=fs(a);if(pp(s))return a}function Np(a,s){if(a==="change")return s}var bp=!1;if(rr){var zf;if(rr){var Af="oninput"in document;if(!Af){var Gp=document.createElement("div");Gp.setAttribute("oninput","return;"),Af=typeof Gp.oninput=="function"}zf=Af}else zf=!1;bp=zf&&(!document.documentMode||9<document.documentMode)}function Fp(){ys&&(ys.detachEvent("onpropertychange",kp),vs=ys=null)}function kp(a){if(a.propertyName==="value"&&Po(vs)){var s=[];Up(s,vs,a,Lf(a)),Cp(qw,s)}}function Yw(a,s,c){a==="focusin"?(Fp(),ys=s,vs=c,ys.attachEvent("onpropertychange",kp)):a==="focusout"&&Fp()}function Qw(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Po(vs)}function Zw(a,s){if(a==="click")return Po(s)}function Jw(a,s){if(a==="input"||a==="change")return Po(s)}function Pw(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var en=typeof Object.is=="function"?Object.is:Pw;function Ts(a,s){if(en(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var c=Object.keys(a),h=Object.keys(s);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var y=c[h];if(!fa.call(s,y)||!en(a[y],s[y]))return!1}return!0}function zp(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ap(a,s){var c=zp(a);a=0;for(var h;c;){if(c.nodeType===3){if(h=a+c.textContent.length,a<=s&&h>=s)return{node:c,offset:s-a};a=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=zp(c)}}function Hp(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Hp(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function $p(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Ko(a.document);s instanceof a.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)a=s.contentWindow;else break;s=Ko(a.document)}return s}function Hf(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var Iw=rr&&"documentMode"in document&&11>=document.documentMode,gi=null,$f=null,Ss=null,Wf=!1;function Wp(a,s,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Wf||gi==null||gi!==Ko(h)||(h=gi,"selectionStart"in h&&Hf(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ss&&Ts(Ss,h)||(Ss=h,h=Fu($f,"onSelect"),0<h.length&&(s=new Zo("onSelect","select",null,s,c),a.push({event:s,listeners:h}),s.target=gi)))}function pa(a,s){var c={};return c[a.toLowerCase()]=s.toLowerCase(),c["Webkit"+a]="webkit"+s,c["Moz"+a]="moz"+s,c}var hi={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionrun:pa("Transition","TransitionRun"),transitionstart:pa("Transition","TransitionStart"),transitioncancel:pa("Transition","TransitionCancel"),transitionend:pa("Transition","TransitionEnd")},jf={},jp={};rr&&(jp=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function da(a){if(jf[a])return jf[a];if(!hi[a])return a;var s=hi[a],c;for(c in s)if(s.hasOwnProperty(c)&&c in jp)return jf[a]=s[c];return a}var Kp=da("animationend"),Xp=da("animationiteration"),qp=da("animationstart"),eO=da("transitionrun"),tO=da("transitionstart"),nO=da("transitioncancel"),Yp=da("transitionend"),Qp=new Map,Kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kf.push("scrollEnd");function On(a,s){Qp.set(a,s),ga(s,[a])}var Zp=new WeakMap;function gn(a,s){if(typeof a=="object"&&a!==null){var c=Zp.get(a);return c!==void 0?c:(s={value:a,source:s,stack:gp(s)},Zp.set(a,s),s)}return{value:a,source:s,stack:gp(s)}}var hn=[],pi=0,Xf=0;function Io(){for(var a=pi,s=Xf=pi=0;s<a;){var c=hn[s];hn[s++]=null;var h=hn[s];hn[s++]=null;var y=hn[s];hn[s++]=null;var x=hn[s];if(hn[s++]=null,h!==null&&y!==null){var _=h.pending;_===null?y.next=y:(y.next=_.next,_.next=y),h.pending=y}x!==0&&Jp(c,y,x)}}function eu(a,s,c,h){hn[pi++]=a,hn[pi++]=s,hn[pi++]=c,hn[pi++]=h,Xf|=h,a.lanes|=h,a=a.alternate,a!==null&&(a.lanes|=h)}function qf(a,s,c,h){return eu(a,s,c,h),tu(a)}function di(a,s){return eu(a,null,null,s),tu(a)}function Jp(a,s,c){a.lanes|=c;var h=a.alternate;h!==null&&(h.lanes|=c);for(var y=!1,x=a.return;x!==null;)x.childLanes|=c,h=x.alternate,h!==null&&(h.childLanes|=c),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(y=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,y&&s!==null&&(y=31-It(c),a=x.hiddenUpdates,h=a[y],h===null?a[y]=[s]:h.push(s),s.lane=c|536870912),x):null}function tu(a){if(50<js)throw js=0,Il=null,Error(r(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var yi={};function rO(a,s,c,h){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(a,s,c,h){return new rO(a,s,c,h)}function Yf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ar(a,s){var c=a.alternate;return c===null?(c=tn(a.tag,s,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=s,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,s=a.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function Pp(a,s){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,s=c.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function nu(a,s,c,h,y,x){var _=0;if(h=a,typeof a=="function")Yf(a)&&(_=1);else if(typeof a=="string")_=iR(a,c,ue.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case j:return a=tn(31,c,s,y),a.elementType=j,a.lanes=x,a;case E:return ya(c.children,y,x,s);case S:_=8,y|=24;break;case C:return a=tn(12,c,s,y|2),a.elementType=C,a.lanes=x,a;case m:return a=tn(13,c,s,y),a.elementType=m,a.lanes=x,a;case M:return a=tn(19,c,s,y),a.elementType=M,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case R:case w:_=10;break e;case D:_=9;break e;case O:_=11;break e;case U:_=14;break e;case b:_=16,h=null;break e}_=29,c=Error(r(130,a===null?"null":typeof a,"")),h=null}return s=tn(_,c,s,y),s.elementType=a,s.type=h,s.lanes=x,s}function ya(a,s,c,h){return a=tn(7,a,h,s),a.lanes=c,a}function Qf(a,s,c){return a=tn(6,a,null,s),a.lanes=c,a}function Zf(a,s,c){return s=tn(4,a.children!==null?a.children:[],a.key,s),s.lanes=c,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var vi=[],Ti=0,ru=null,au=0,pn=[],dn=0,va=null,ir=1,sr="";function Ta(a,s){vi[Ti++]=au,vi[Ti++]=ru,ru=a,au=s}function Ip(a,s,c){pn[dn++]=ir,pn[dn++]=sr,pn[dn++]=va,va=a;var h=ir;a=sr;var y=32-It(h)-1;h&=~(1<<y),c+=1;var x=32-It(s)+y;if(30<x){var _=y-y%5;x=(h&(1<<_)-1).toString(32),h>>=_,y-=_,ir=1<<32-It(s)+y|c<<y|h,sr=x+a}else ir=1<<x|c<<y|h,sr=a}function Jf(a){a.return!==null&&(Ta(a,1),Ip(a,1,0))}function Pf(a){for(;a===ru;)ru=vi[--Ti],vi[Ti]=null,au=vi[--Ti],vi[Ti]=null;for(;a===va;)va=pn[--dn],pn[dn]=null,sr=pn[--dn],pn[dn]=null,ir=pn[--dn],pn[dn]=null}var Ft=null,tt=null,Ne=!1,Sa=null,kn=!1,If=Error(r(519));function xa(a){var s=Error(r(418,""));throw Es(gn(s,a)),If}function ed(a){var s=a.stateNode,c=a.type,h=a.memoizedProps;switch(s[Ut]=a,s[jt]=h,c){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(c=0;c<Xs.length;c++)De(Xs[c],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":De("invalid",s),dp(s,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),jo(s);break;case"select":De("invalid",s);break;case"textarea":De("invalid",s),vp(s,h.value,h.defaultValue,h.children),jo(s)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||h.suppressHydrationWarning===!0||vy(s.textContent,c)?(h.popover!=null&&(De("beforetoggle",s),De("toggle",s)),h.onScroll!=null&&De("scroll",s),h.onScrollEnd!=null&&De("scrollend",s),h.onClick!=null&&(s.onclick=ku),s=!0):s=!1,s||xa(a)}function td(a){for(Ft=a.return;Ft;)switch(Ft.tag){case 5:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Ft=Ft.return}}function xs(a){if(a!==Ft)return!1;if(!Ne)return td(a),Ne=!0,!1;var s=a.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||dg(a.type,a.memoizedProps)),c=!c),c&&tt&&xa(a),td(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8)if(c=a.data,c==="/$"){if(s===0){tt=mn(a.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;a=a.nextSibling}tt=null}}else s===27?(s=tt,Wr(a.type)?(a=Sg,Sg=null,tt=a):tt=s):tt=Ft?mn(a.stateNode.nextSibling):null;return!0}function Cs(){tt=Ft=null,Ne=!1}function nd(){var a=Sa;return a!==null&&(Yt===null?Yt=a:Yt.push.apply(Yt,a),Sa=null),a}function Es(a){Sa===null?Sa=[a]:Sa.push(a)}var el=q(null),Ca=null,or=null;function Dr(a,s,c){J(el,s._currentValue),s._currentValue=c}function ur(a){a._currentValue=el.current,ae(el)}function tl(a,s,c){for(;a!==null;){var h=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),a===c)break;a=a.return}}function nl(a,s,c,h){var y=a.child;for(y!==null&&(y.return=a);y!==null;){var x=y.dependencies;if(x!==null){var _=y.child;x=x.firstContext;e:for(;x!==null;){var V=x;x=y;for(var N=0;N<s.length;N++)if(V.context===s[N]){x.lanes|=c,V=x.alternate,V!==null&&(V.lanes|=c),tl(x.return,c,a),h||(_=null);break e}x=V.next}}else if(y.tag===18){if(_=y.return,_===null)throw Error(r(341));_.lanes|=c,x=_.alternate,x!==null&&(x.lanes|=c),tl(_,c,a),_=null}else _=y.child;if(_!==null)_.return=y;else for(_=y;_!==null;){if(_===a){_=null;break}if(y=_.sibling,y!==null){y.return=_.return,_=y;break}_=_.return}y=_}}function ws(a,s,c,h){a=null;for(var y=s,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var _=y.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var V=y.type;en(y.pendingProps.value,_.value)||(a!==null?a.push(V):a=[V])}}else if(y===ze.current){if(_=y.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(a!==null?a.push(Ps):a=[Ps])}y=y.return}a!==null&&nl(s,a,c,h),s.flags|=262144}function iu(a){for(a=a.firstContext;a!==null;){if(!en(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ea(a){Ca=a,or=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Nt(a){return rd(Ca,a)}function su(a,s){return Ca===null&&Ea(a),rd(a,s)}function rd(a,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},or===null){if(a===null)throw Error(r(308));or=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else or=or.next=s;return c}var aO=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(c,h){a.push(h)}};this.abort=function(){s.aborted=!0,a.forEach(function(c){return c()})}},iO=t.unstable_scheduleCallback,sO=t.unstable_NormalPriority,ht={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rl(){return{controller:new aO,data:new Map,refCount:0}}function Os(a){a.refCount--,a.refCount===0&&iO(sO,function(){a.controller.abort()})}var Rs=null,al=0,Si=0,xi=null;function oO(a,s){if(Rs===null){var c=Rs=[];al=0,Si=sg(),xi={status:"pending",value:void 0,then:function(h){c.push(h)}}}return al++,s.then(ad,ad),s}function ad(){if(--al===0&&Rs!==null){xi!==null&&(xi.status="fulfilled");var a=Rs;Rs=null,Si=0,xi=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function uO(a,s){var c=[],h={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return a.then(function(){h.status="fulfilled",h.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(h.status="rejected",h.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),h}var id=F.S;F.S=function(a,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&oO(a,s),id!==null&&id(a,s)};var wa=q(null);function il(){var a=wa.current;return a!==null?a:qe.pooledCache}function ou(a,s){s===null?J(wa,wa.current):J(wa,s.pool)}function sd(){var a=il();return a===null?null:{parent:ht._currentValue,pool:a}}var ms=Error(r(460)),od=Error(r(474)),uu=Error(r(542)),sl={then:function(){}};function ud(a){return a=a.status,a==="fulfilled"||a==="rejected"}function cu(){}function cd(a,s,c){switch(c=a[c],c===void 0?a.push(s):c!==s&&(s.then(cu,cu),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,ld(a),a;default:if(typeof s.status=="string")s.then(cu,cu);else{if(a=qe,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=s,a.status="pending",a.then(function(h){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=h}},function(h){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=h}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,ld(a),a}throw Ms=s,ms}}var Ms=null;function fd(){if(Ms===null)throw Error(r(459));var a=Ms;return Ms=null,a}function ld(a){if(a===ms||a===uu)throw Error(r(483))}var _r=!1;function ol(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ul(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Lr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Vr(a,s,c){var h=a.updateQueue;if(h===null)return null;if(h=h.shared,(Fe&2)!==0){var y=h.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),h.pending=s,s=tu(a),Jp(a,null,c),s}return eu(a,h,s,c),tu(a)}function Ds(a,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var h=s.lanes;h&=a.pendingLanes,c|=h,s.lanes=c,ap(a,c)}}function cl(a,s){var c=a.updateQueue,h=a.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var _={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};x===null?y=x=_:x=x.next=_,c=c.next}while(c!==null);x===null?y=x=s:x=x.next=s}else y=x=s;c={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:h.shared,callbacks:h.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=s:a.next=s,c.lastBaseUpdate=s}var fl=!1;function _s(){if(fl){var a=xi;if(a!==null)throw a}}function Ls(a,s,c,h){fl=!1;var y=a.updateQueue;_r=!1;var x=y.firstBaseUpdate,_=y.lastBaseUpdate,V=y.shared.pending;if(V!==null){y.shared.pending=null;var N=V,$=N.next;N.next=null,_===null?x=$:_.next=$,_=N;var ee=a.alternate;ee!==null&&(ee=ee.updateQueue,V=ee.lastBaseUpdate,V!==_&&(V===null?ee.firstBaseUpdate=$:V.next=$,ee.lastBaseUpdate=N))}if(x!==null){var ne=y.baseState;_=0,ee=$=N=null,V=x;do{var W=V.lane&-536870913,X=W!==V.lane;if(X?(Le&W)===W:(h&W)===W){W!==0&&W===Si&&(fl=!0),ee!==null&&(ee=ee.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var de=a,ge=V;W=s;var $e=c;switch(ge.tag){case 1:if(de=ge.payload,typeof de=="function"){ne=de.call($e,ne,W);break e}ne=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ge.payload,W=typeof de=="function"?de.call($e,ne,W):de,W==null)break e;ne=d({},ne,W);break e;case 2:_r=!0}}W=V.callback,W!==null&&(a.flags|=64,X&&(a.flags|=8192),X=y.callbacks,X===null?y.callbacks=[W]:X.push(W))}else X={lane:W,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ee===null?($=ee=X,N=ne):ee=ee.next=X,_|=W;if(V=V.next,V===null){if(V=y.shared.pending,V===null)break;X=V,V=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);ee===null&&(N=ne),y.baseState=N,y.firstBaseUpdate=$,y.lastBaseUpdate=ee,x===null&&(y.shared.lanes=0),zr|=_,a.lanes=_,a.memoizedState=ne}}function gd(a,s){if(typeof a!="function")throw Error(r(191,a));a.call(s)}function hd(a,s){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)gd(c[a],s)}var Ci=q(null),fu=q(0);function pd(a,s){a=dr,J(fu,a),J(Ci,s),dr=a|s.baseLanes}function ll(){J(fu,dr),J(Ci,Ci.current)}function gl(){dr=fu.current,ae(Ci),ae(fu)}var Br=0,Ce=null,Ae=null,ft=null,lu=!1,Ei=!1,Oa=!1,gu=0,Vs=0,wi=null,cO=0;function it(){throw Error(r(321))}function hl(a,s){if(s===null)return!1;for(var c=0;c<s.length&&c<a.length;c++)if(!en(a[c],s[c]))return!1;return!0}function pl(a,s,c,h,y,x){return Br=x,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,F.H=a===null||a.memoizedState===null?Jd:Pd,Oa=!1,x=c(h,y),Oa=!1,Ei&&(x=yd(s,c,h,y)),dd(a),x}function dd(a){F.H=Tu;var s=Ae!==null&&Ae.next!==null;if(Br=0,ft=Ae=Ce=null,lu=!1,Vs=0,wi=null,s)throw Error(r(300));a===null||St||(a=a.dependencies,a!==null&&iu(a)&&(St=!0))}function yd(a,s,c,h){Ce=a;var y=0;do{if(Ei&&(wi=null),Vs=0,Ei=!1,25<=y)throw Error(r(301));if(y+=1,ft=Ae=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}F.H=yO,x=s(c,h)}while(Ei);return x}function fO(){var a=F.H,s=a.useState()[0];return s=typeof s.then=="function"?Bs(s):s,a=a.useState()[0],(Ae!==null?Ae.memoizedState:null)!==a&&(Ce.flags|=1024),s}function dl(){var a=gu!==0;return gu=0,a}function yl(a,s,c){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~c}function vl(a){if(lu){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}lu=!1}Br=0,ft=Ae=Ce=null,Ei=!1,Vs=gu=0,wi=null}function Xt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Ce.memoizedState=ft=a:ft=ft.next=a,ft}function lt(){if(Ae===null){var a=Ce.alternate;a=a!==null?a.memoizedState:null}else a=Ae.next;var s=ft===null?Ce.memoizedState:ft.next;if(s!==null)ft=s,Ae=a;else{if(a===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));Ae=a,a={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},ft===null?Ce.memoizedState=ft=a:ft=ft.next=a}return ft}function Tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bs(a){var s=Vs;return Vs+=1,wi===null&&(wi=[]),a=cd(wi,a,s),s=Ce,(ft===null?s.memoizedState:ft.next)===null&&(s=s.alternate,F.H=s===null||s.memoizedState===null?Jd:Pd),a}function hu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Bs(a);if(a.$$typeof===w)return Nt(a)}throw Error(r(438,String(a)))}function Sl(a){var s=null,c=Ce.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var h=Ce.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(s={data:h.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Tl(),Ce.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(a),h=0;h<a;h++)c[h]=z;return s.index++,c}function cr(a,s){return typeof s=="function"?s(a):s}function pu(a){var s=lt();return xl(s,Ae,a)}function xl(a,s,c){var h=a.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var y=a.baseQueue,x=h.pending;if(x!==null){if(y!==null){var _=y.next;y.next=x.next,x.next=_}s.baseQueue=y=x,h.pending=null}if(x=a.baseState,y===null)a.memoizedState=x;else{s=y.next;var V=_=null,N=null,$=s,ee=!1;do{var ne=$.lane&-536870913;if(ne!==$.lane?(Le&ne)===ne:(Br&ne)===ne){var W=$.revertLane;if(W===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ne===Si&&(ee=!0);else if((Br&W)===W){$=$.next,W===Si&&(ee=!0);continue}else ne={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(V=N=ne,_=x):N=N.next=ne,Ce.lanes|=W,zr|=W;ne=$.action,Oa&&c(x,ne),x=$.hasEagerState?$.eagerState:c(x,ne)}else W={lane:ne,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},N===null?(V=N=W,_=x):N=N.next=W,Ce.lanes|=ne,zr|=ne;$=$.next}while($!==null&&$!==s);if(N===null?_=x:N.next=V,!en(x,a.memoizedState)&&(St=!0,ee&&(c=xi,c!==null)))throw c;a.memoizedState=x,a.baseState=_,a.baseQueue=N,h.lastRenderedState=x}return y===null&&(h.lanes=0),[a.memoizedState,h.dispatch]}function Cl(a){var s=lt(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var h=c.dispatch,y=c.pending,x=s.memoizedState;if(y!==null){c.pending=null;var _=y=y.next;do x=a(x,_.action),_=_.next;while(_!==y);en(x,s.memoizedState)||(St=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),c.lastRenderedState=x}return[x,h]}function vd(a,s,c){var h=Ce,y=lt(),x=Ne;if(x){if(c===void 0)throw Error(r(407));c=c()}else c=s();var _=!en((Ae||y).memoizedState,c);_&&(y.memoizedState=c,St=!0),y=y.queue;var V=xd.bind(null,h,y,a);if(Us(2048,8,V,[a]),y.getSnapshot!==s||_||ft!==null&&ft.memoizedState.tag&1){if(h.flags|=2048,Oi(9,du(),Sd.bind(null,h,y,c,s),null),qe===null)throw Error(r(349));x||(Br&124)!==0||Td(h,s,c)}return c}function Td(a,s,c){a.flags|=16384,a={getSnapshot:s,value:c},s=Ce.updateQueue,s===null?(s=Tl(),Ce.updateQueue=s,s.stores=[a]):(c=s.stores,c===null?s.stores=[a]:c.push(a))}function Sd(a,s,c,h){s.value=c,s.getSnapshot=h,Cd(s)&&Ed(a)}function xd(a,s,c){return c(function(){Cd(s)&&Ed(a)})}function Cd(a){var s=a.getSnapshot;a=a.value;try{var c=s();return!en(a,c)}catch{return!0}}function Ed(a){var s=di(a,2);s!==null&&on(s,a,2)}function El(a){var s=Xt();if(typeof a=="function"){var c=a;if(a=c(),Oa){Rr(!0);try{c()}finally{Rr(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},s}function wd(a,s,c,h){return a.baseState=c,xl(a,Ae,typeof h=="function"?h:cr)}function lO(a,s,c,h,y){if(vu(a))throw Error(r(485));if(a=s.action,a!==null){var x={payload:y,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};F.T!==null?c(!0):x.isTransition=!1,h(x),c=s.pending,c===null?(x.next=s.pending=x,Od(s,x)):(x.next=c.next,s.pending=c.next=x)}}function Od(a,s){var c=s.action,h=s.payload,y=a.state;if(s.isTransition){var x=F.T,_={};F.T=_;try{var V=c(y,h),N=F.S;N!==null&&N(_,V),Rd(a,s,V)}catch($){wl(a,s,$)}finally{F.T=x}}else try{x=c(y,h),Rd(a,s,x)}catch($){wl(a,s,$)}}function Rd(a,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){md(a,s,h)},function(h){return wl(a,s,h)}):md(a,s,c)}function md(a,s,c){s.status="fulfilled",s.value=c,Md(s),a.state=c,s=a.pending,s!==null&&(c=s.next,c===s?a.pending=null:(c=c.next,s.next=c,Od(a,c)))}function wl(a,s,c){var h=a.pending;if(a.pending=null,h!==null){h=h.next;do s.status="rejected",s.reason=c,Md(s),s=s.next;while(s!==h)}a.action=null}function Md(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function Dd(a,s){return s}function _d(a,s){if(Ne){var c=qe.formState;if(c!==null){e:{var h=Ce;if(Ne){if(tt){t:{for(var y=tt,x=kn;y.nodeType!==8;){if(!x){y=null;break t}if(y=mn(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){tt=mn(y.nextSibling),h=y.data==="F!";break e}}xa(h)}h=!1}h&&(s=c[0])}}return c=Xt(),c.memoizedState=c.baseState=s,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:s},c.queue=h,c=Yd.bind(null,Ce,h),h.dispatch=c,h=El(!1),x=Dl.bind(null,Ce,!1,h.queue),h=Xt(),y={state:s,dispatch:null,action:a,pending:null},h.queue=y,c=lO.bind(null,Ce,y,x,c),y.dispatch=c,h.memoizedState=a,[s,c,!1]}function Ld(a){var s=lt();return Vd(s,Ae,a)}function Vd(a,s,c){if(s=xl(a,s,Dd)[0],a=pu(cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var h=Bs(s)}catch(_){throw _===ms?uu:_}else h=s;s=lt();var y=s.queue,x=y.dispatch;return c!==s.memoizedState&&(Ce.flags|=2048,Oi(9,du(),gO.bind(null,y,c),null)),[h,x,a]}function gO(a,s){a.action=s}function Bd(a){var s=lt(),c=Ae;if(c!==null)return Vd(s,c,a);lt(),s=s.memoizedState,c=lt();var h=c.queue.dispatch;return c.memoizedState=a,[s,h,!1]}function Oi(a,s,c,h){return a={tag:a,create:c,deps:h,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=Tl(),Ce.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=a.next=a:(h=c.next,c.next=a,a.next=h,s.lastEffect=a),a}function du(){return{destroy:void 0,resource:void 0}}function Ud(){return lt().memoizedState}function yu(a,s,c,h){var y=Xt();h=h===void 0?null:h,Ce.flags|=a,y.memoizedState=Oi(1|s,du(),c,h)}function Us(a,s,c,h){var y=lt();h=h===void 0?null:h;var x=y.memoizedState.inst;Ae!==null&&h!==null&&hl(h,Ae.memoizedState.deps)?y.memoizedState=Oi(s,x,c,h):(Ce.flags|=a,y.memoizedState=Oi(1|s,x,c,h))}function Nd(a,s){yu(8390656,8,a,s)}function bd(a,s){Us(2048,8,a,s)}function Gd(a,s){return Us(4,2,a,s)}function Fd(a,s){return Us(4,4,a,s)}function kd(a,s){if(typeof s=="function"){a=a();var c=s(a);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function zd(a,s,c){c=c!=null?c.concat([a]):null,Us(4,4,kd.bind(null,s,a),c)}function Ol(){}function Ad(a,s){var c=lt();s=s===void 0?null:s;var h=c.memoizedState;return s!==null&&hl(s,h[1])?h[0]:(c.memoizedState=[a,s],a)}function Hd(a,s){var c=lt();s=s===void 0?null:s;var h=c.memoizedState;if(s!==null&&hl(s,h[1]))return h[0];if(h=a(),Oa){Rr(!0);try{a()}finally{Rr(!1)}}return c.memoizedState=[h,s],h}function Rl(a,s,c){return c===void 0||(Br&1073741824)!==0?a.memoizedState=s:(a.memoizedState=c,a=j1(),Ce.lanes|=a,zr|=a,c)}function $d(a,s,c,h){return en(c,s)?c:Ci.current!==null?(a=Rl(a,c,h),en(a,s)||(St=!0),a):(Br&42)===0?(St=!0,a.memoizedState=c):(a=j1(),Ce.lanes|=a,zr|=a,s)}function Wd(a,s,c,h,y){var x=P.p;P.p=x!==0&&8>x?x:8;var _=F.T,V={};F.T=V,Dl(a,!1,s,c);try{var N=y(),$=F.S;if($!==null&&$(V,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var ee=uO(N,h);Ns(a,s,ee,sn(a))}else Ns(a,s,h,sn(a))}catch(ne){Ns(a,s,{then:function(){},status:"rejected",reason:ne},sn())}finally{P.p=x,F.T=_}}function hO(){}function ml(a,s,c,h){if(a.tag!==5)throw Error(r(476));var y=jd(a).queue;Wd(a,y,s,ie,c===null?hO:function(){return Kd(a),c(h)})}function jd(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ie},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:c},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function Kd(a){var s=jd(a).next.queue;Ns(a,s,{},sn())}function Ml(){return Nt(Ps)}function Xd(){return lt().memoizedState}function qd(){return lt().memoizedState}function pO(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var c=sn();a=Lr(c);var h=Vr(s,a,c);h!==null&&(on(h,s,c),Ds(h,s,c)),s={cache:rl()},a.payload=s;return}s=s.return}}function dO(a,s,c){var h=sn();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},vu(a)?Qd(s,c):(c=qf(a,s,c,h),c!==null&&(on(c,a,h),Zd(c,s,h)))}function Yd(a,s,c){var h=sn();Ns(a,s,c,h)}function Ns(a,s,c,h){var y={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(vu(a))Qd(s,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var _=s.lastRenderedState,V=x(_,c);if(y.hasEagerState=!0,y.eagerState=V,en(V,_))return eu(a,s,y,0),qe===null&&Io(),!1}catch{}finally{}if(c=qf(a,s,y,h),c!==null)return on(c,a,h),Zd(c,s,h),!0}return!1}function Dl(a,s,c,h){if(h={lane:2,revertLane:sg(),action:h,hasEagerState:!1,eagerState:null,next:null},vu(a)){if(s)throw Error(r(479))}else s=qf(a,c,h,2),s!==null&&on(s,a,2)}function vu(a){var s=a.alternate;return a===Ce||s!==null&&s===Ce}function Qd(a,s){Ei=lu=!0;var c=a.pending;c===null?s.next=s:(s.next=c.next,c.next=s),a.pending=s}function Zd(a,s,c){if((c&4194048)!==0){var h=s.lanes;h&=a.pendingLanes,c|=h,s.lanes=c,ap(a,c)}}var Tu={readContext:Nt,use:hu,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it},Jd={readContext:Nt,use:hu,useCallback:function(a,s){return Xt().memoizedState=[a,s===void 0?null:s],a},useContext:Nt,useEffect:Nd,useImperativeHandle:function(a,s,c){c=c!=null?c.concat([a]):null,yu(4194308,4,kd.bind(null,s,a),c)},useLayoutEffect:function(a,s){return yu(4194308,4,a,s)},useInsertionEffect:function(a,s){yu(4,2,a,s)},useMemo:function(a,s){var c=Xt();s=s===void 0?null:s;var h=a();if(Oa){Rr(!0);try{a()}finally{Rr(!1)}}return c.memoizedState=[h,s],h},useReducer:function(a,s,c){var h=Xt();if(c!==void 0){var y=c(s);if(Oa){Rr(!0);try{c(s)}finally{Rr(!1)}}}else y=s;return h.memoizedState=h.baseState=y,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:y},h.queue=a,a=a.dispatch=dO.bind(null,Ce,a),[h.memoizedState,a]},useRef:function(a){var s=Xt();return a={current:a},s.memoizedState=a},useState:function(a){a=El(a);var s=a.queue,c=Yd.bind(null,Ce,s);return s.dispatch=c,[a.memoizedState,c]},useDebugValue:Ol,useDeferredValue:function(a,s){var c=Xt();return Rl(c,a,s)},useTransition:function(){var a=El(!1);return a=Wd.bind(null,Ce,a.queue,!0,!1),Xt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,c){var h=Ce,y=Xt();if(Ne){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),qe===null)throw Error(r(349));(Le&124)!==0||Td(h,s,c)}y.memoizedState=c;var x={value:c,getSnapshot:s};return y.queue=x,Nd(xd.bind(null,h,x,a),[a]),h.flags|=2048,Oi(9,du(),Sd.bind(null,h,x,c,s),null),c},useId:function(){var a=Xt(),s=qe.identifierPrefix;if(Ne){var c=sr,h=ir;c=(h&~(1<<32-It(h)-1)).toString(32)+c,s=""+s+"R"+c,c=gu++,0<c&&(s+="H"+c.toString(32)),s+=""}else c=cO++,s=""+s+"r"+c.toString(32)+"";return a.memoizedState=s},useHostTransitionStatus:Ml,useFormState:_d,useActionState:_d,useOptimistic:function(a){var s=Xt();s.memoizedState=s.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Dl.bind(null,Ce,!0,c),c.dispatch=s,[a,s]},useMemoCache:Sl,useCacheRefresh:function(){return Xt().memoizedState=pO.bind(null,Ce)}},Pd={readContext:Nt,use:hu,useCallback:Ad,useContext:Nt,useEffect:bd,useImperativeHandle:zd,useInsertionEffect:Gd,useLayoutEffect:Fd,useMemo:Hd,useReducer:pu,useRef:Ud,useState:function(){return pu(cr)},useDebugValue:Ol,useDeferredValue:function(a,s){var c=lt();return $d(c,Ae.memoizedState,a,s)},useTransition:function(){var a=pu(cr)[0],s=lt().memoizedState;return[typeof a=="boolean"?a:Bs(a),s]},useSyncExternalStore:vd,useId:Xd,useHostTransitionStatus:Ml,useFormState:Ld,useActionState:Ld,useOptimistic:function(a,s){var c=lt();return wd(c,Ae,a,s)},useMemoCache:Sl,useCacheRefresh:qd},yO={readContext:Nt,use:hu,useCallback:Ad,useContext:Nt,useEffect:bd,useImperativeHandle:zd,useInsertionEffect:Gd,useLayoutEffect:Fd,useMemo:Hd,useReducer:Cl,useRef:Ud,useState:function(){return Cl(cr)},useDebugValue:Ol,useDeferredValue:function(a,s){var c=lt();return Ae===null?Rl(c,a,s):$d(c,Ae.memoizedState,a,s)},useTransition:function(){var a=Cl(cr)[0],s=lt().memoizedState;return[typeof a=="boolean"?a:Bs(a),s]},useSyncExternalStore:vd,useId:Xd,useHostTransitionStatus:Ml,useFormState:Bd,useActionState:Bd,useOptimistic:function(a,s){var c=lt();return Ae!==null?wd(c,Ae,a,s):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:Sl,useCacheRefresh:qd},Ri=null,bs=0;function Su(a){var s=bs;return bs+=1,Ri===null&&(Ri=[]),cd(Ri,a,s)}function Gs(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function xu(a,s){throw s.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(s),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function Id(a){var s=a._init;return s(a._payload)}function e1(a){function s(k,G){if(a){var H=k.deletions;H===null?(k.deletions=[G],k.flags|=16):H.push(G)}}function c(k,G){if(!a)return null;for(;G!==null;)s(k,G),G=G.sibling;return null}function h(k){for(var G=new Map;k!==null;)k.key!==null?G.set(k.key,k):G.set(k.index,k),k=k.sibling;return G}function y(k,G){return k=ar(k,G),k.index=0,k.sibling=null,k}function x(k,G,H){return k.index=H,a?(H=k.alternate,H!==null?(H=H.index,H<G?(k.flags|=67108866,G):H):(k.flags|=67108866,G)):(k.flags|=1048576,G)}function _(k){return a&&k.alternate===null&&(k.flags|=67108866),k}function V(k,G,H,te){return G===null||G.tag!==6?(G=Qf(H,k.mode,te),G.return=k,G):(G=y(G,H),G.return=k,G)}function N(k,G,H,te){var ce=H.type;return ce===E?ee(k,G,H.props.children,te,H.key):G!==null&&(G.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===b&&Id(ce)===G.type)?(G=y(G,H.props),Gs(G,H),G.return=k,G):(G=nu(H.type,H.key,H.props,null,k.mode,te),Gs(G,H),G.return=k,G)}function $(k,G,H,te){return G===null||G.tag!==4||G.stateNode.containerInfo!==H.containerInfo||G.stateNode.implementation!==H.implementation?(G=Zf(H,k.mode,te),G.return=k,G):(G=y(G,H.children||[]),G.return=k,G)}function ee(k,G,H,te,ce){return G===null||G.tag!==7?(G=ya(H,k.mode,te,ce),G.return=k,G):(G=y(G,H),G.return=k,G)}function ne(k,G,H){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Qf(""+G,k.mode,H),G.return=k,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case v:return H=nu(G.type,G.key,G.props,null,k.mode,H),Gs(H,G),H.return=k,H;case T:return G=Zf(G,k.mode,H),G.return=k,G;case b:var te=G._init;return G=te(G._payload),ne(k,G,H)}if(se(G)||K(G))return G=ya(G,k.mode,H,null),G.return=k,G;if(typeof G.then=="function")return ne(k,Su(G),H);if(G.$$typeof===w)return ne(k,su(k,G),H);xu(k,G)}return null}function W(k,G,H,te){var ce=G!==null?G.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ce!==null?null:V(k,G,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return H.key===ce?N(k,G,H,te):null;case T:return H.key===ce?$(k,G,H,te):null;case b:return ce=H._init,H=ce(H._payload),W(k,G,H,te)}if(se(H)||K(H))return ce!==null?null:ee(k,G,H,te,null);if(typeof H.then=="function")return W(k,G,Su(H),te);if(H.$$typeof===w)return W(k,G,su(k,H),te);xu(k,H)}return null}function X(k,G,H,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return k=k.get(H)||null,V(G,k,""+te,ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case v:return k=k.get(te.key===null?H:te.key)||null,N(G,k,te,ce);case T:return k=k.get(te.key===null?H:te.key)||null,$(G,k,te,ce);case b:var we=te._init;return te=we(te._payload),X(k,G,H,te,ce)}if(se(te)||K(te))return k=k.get(H)||null,ee(G,k,te,ce,null);if(typeof te.then=="function")return X(k,G,H,Su(te),ce);if(te.$$typeof===w)return X(k,G,H,su(G,te),ce);xu(G,te)}return null}function de(k,G,H,te){for(var ce=null,we=null,le=G,he=G=0,Ct=null;le!==null&&he<H.length;he++){le.index>he?(Ct=le,le=null):Ct=le.sibling;var Ue=W(k,le,H[he],te);if(Ue===null){le===null&&(le=Ct);break}a&&le&&Ue.alternate===null&&s(k,le),G=x(Ue,G,he),we===null?ce=Ue:we.sibling=Ue,we=Ue,le=Ct}if(he===H.length)return c(k,le),Ne&&Ta(k,he),ce;if(le===null){for(;he<H.length;he++)le=ne(k,H[he],te),le!==null&&(G=x(le,G,he),we===null?ce=le:we.sibling=le,we=le);return Ne&&Ta(k,he),ce}for(le=h(le);he<H.length;he++)Ct=X(le,k,he,H[he],te),Ct!==null&&(a&&Ct.alternate!==null&&le.delete(Ct.key===null?he:Ct.key),G=x(Ct,G,he),we===null?ce=Ct:we.sibling=Ct,we=Ct);return a&&le.forEach(function(Yr){return s(k,Yr)}),Ne&&Ta(k,he),ce}function ge(k,G,H,te){if(H==null)throw Error(r(151));for(var ce=null,we=null,le=G,he=G=0,Ct=null,Ue=H.next();le!==null&&!Ue.done;he++,Ue=H.next()){le.index>he?(Ct=le,le=null):Ct=le.sibling;var Yr=W(k,le,Ue.value,te);if(Yr===null){le===null&&(le=Ct);break}a&&le&&Yr.alternate===null&&s(k,le),G=x(Yr,G,he),we===null?ce=Yr:we.sibling=Yr,we=Yr,le=Ct}if(Ue.done)return c(k,le),Ne&&Ta(k,he),ce;if(le===null){for(;!Ue.done;he++,Ue=H.next())Ue=ne(k,Ue.value,te),Ue!==null&&(G=x(Ue,G,he),we===null?ce=Ue:we.sibling=Ue,we=Ue);return Ne&&Ta(k,he),ce}for(le=h(le);!Ue.done;he++,Ue=H.next())Ue=X(le,k,he,Ue.value,te),Ue!==null&&(a&&Ue.alternate!==null&&le.delete(Ue.key===null?he:Ue.key),G=x(Ue,G,he),we===null?ce=Ue:we.sibling=Ue,we=Ue);return a&&le.forEach(function(vR){return s(k,vR)}),Ne&&Ta(k,he),ce}function $e(k,G,H,te){if(typeof H=="object"&&H!==null&&H.type===E&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case v:e:{for(var ce=H.key;G!==null;){if(G.key===ce){if(ce=H.type,ce===E){if(G.tag===7){c(k,G.sibling),te=y(G,H.props.children),te.return=k,k=te;break e}}else if(G.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===b&&Id(ce)===G.type){c(k,G.sibling),te=y(G,H.props),Gs(te,H),te.return=k,k=te;break e}c(k,G);break}else s(k,G);G=G.sibling}H.type===E?(te=ya(H.props.children,k.mode,te,H.key),te.return=k,k=te):(te=nu(H.type,H.key,H.props,null,k.mode,te),Gs(te,H),te.return=k,k=te)}return _(k);case T:e:{for(ce=H.key;G!==null;){if(G.key===ce)if(G.tag===4&&G.stateNode.containerInfo===H.containerInfo&&G.stateNode.implementation===H.implementation){c(k,G.sibling),te=y(G,H.children||[]),te.return=k,k=te;break e}else{c(k,G);break}else s(k,G);G=G.sibling}te=Zf(H,k.mode,te),te.return=k,k=te}return _(k);case b:return ce=H._init,H=ce(H._payload),$e(k,G,H,te)}if(se(H))return de(k,G,H,te);if(K(H)){if(ce=K(H),typeof ce!="function")throw Error(r(150));return H=ce.call(H),ge(k,G,H,te)}if(typeof H.then=="function")return $e(k,G,Su(H),te);if(H.$$typeof===w)return $e(k,G,su(k,H),te);xu(k,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,G!==null&&G.tag===6?(c(k,G.sibling),te=y(G,H),te.return=k,k=te):(c(k,G),te=Qf(H,k.mode,te),te.return=k,k=te),_(k)):c(k,G)}return function(k,G,H,te){try{bs=0;var ce=$e(k,G,H,te);return Ri=null,ce}catch(le){if(le===ms||le===uu)throw le;var we=tn(29,le,null,k.mode);return we.lanes=te,we.return=k,we}finally{}}}var mi=e1(!0),t1=e1(!1),yn=q(null),zn=null;function Ur(a){var s=a.alternate;J(pt,pt.current&1),J(yn,a),zn===null&&(s===null||Ci.current!==null||s.memoizedState!==null)&&(zn=a)}function n1(a){if(a.tag===22){if(J(pt,pt.current),J(yn,a),zn===null){var s=a.alternate;s!==null&&s.memoizedState!==null&&(zn=a)}}else Nr()}function Nr(){J(pt,pt.current),J(yn,yn.current)}function fr(a){ae(yn),zn===a&&(zn=null),ae(pt)}var pt=q(0);function Cu(a){for(var s=a;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Tg(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function _l(a,s,c,h){s=a.memoizedState,c=c(h,s),c=c==null?s:d({},s,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ll={enqueueSetState:function(a,s,c){a=a._reactInternals;var h=sn(),y=Lr(h);y.payload=s,c!=null&&(y.callback=c),s=Vr(a,y,h),s!==null&&(on(s,a,h),Ds(s,a,h))},enqueueReplaceState:function(a,s,c){a=a._reactInternals;var h=sn(),y=Lr(h);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=Vr(a,y,h),s!==null&&(on(s,a,h),Ds(s,a,h))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var c=sn(),h=Lr(c);h.tag=2,s!=null&&(h.callback=s),s=Vr(a,h,c),s!==null&&(on(s,a,c),Ds(s,a,c))}};function r1(a,s,c,h,y,x,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(h,x,_):s.prototype&&s.prototype.isPureReactComponent?!Ts(c,h)||!Ts(y,x):!0}function a1(a,s,c,h){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,h),s.state!==a&&Ll.enqueueReplaceState(s,s.state,null)}function Ra(a,s){var c=s;if("ref"in s){c={};for(var h in s)h!=="ref"&&(c[h]=s[h])}if(a=a.defaultProps){c===s&&(c=d({},c));for(var y in a)c[y]===void 0&&(c[y]=a[y])}return c}var Eu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function i1(a){Eu(a)}function s1(a){console.error(a)}function o1(a){Eu(a)}function wu(a,s){try{var c=a.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(h){setTimeout(function(){throw h})}}function u1(a,s,c){try{var h=a.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Vl(a,s,c){return c=Lr(c),c.tag=3,c.payload={element:null},c.callback=function(){wu(a,s)},c}function c1(a){return a=Lr(a),a.tag=3,a}function f1(a,s,c,h){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var x=h.value;a.payload=function(){return y(x)},a.callback=function(){u1(s,c,h)}}var _=c.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){u1(s,c,h),typeof y!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var V=h.stack;this.componentDidCatch(h.value,{componentStack:V!==null?V:""})})}function vO(a,s,c,h,y){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(s=c.alternate,s!==null&&ws(s,c,y,!0),c=yn.current,c!==null){switch(c.tag){case 13:return zn===null?tg():c.alternate===null&&nt===0&&(nt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,h===sl?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([h]):s.add(h),rg(a,h,y)),!1;case 22:return c.flags|=65536,h===sl?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([h]):c.add(h)),rg(a,h,y)),!1}throw Error(r(435,c.tag))}return rg(a,h,y),tg(),!1}if(Ne)return s=yn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,h!==If&&(a=Error(r(422),{cause:h}),Es(gn(a,c)))):(h!==If&&(s=Error(r(423),{cause:h}),Es(gn(s,c))),a=a.current.alternate,a.flags|=65536,y&=-y,a.lanes|=y,h=gn(h,c),y=Vl(a.stateNode,h,y),cl(a,y),nt!==4&&(nt=2)),!1;var x=Error(r(520),{cause:h});if(x=gn(x,c),Ws===null?Ws=[x]:Ws.push(x),nt!==4&&(nt=2),s===null)return!0;h=gn(h,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,a=y&-y,c.lanes|=a,a=Vl(c.stateNode,h,a),cl(c,a),!1;case 1:if(s=c.type,x=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ar===null||!Ar.has(x))))return c.flags|=65536,y&=-y,c.lanes|=y,y=c1(y),f1(y,a,c,h),cl(c,y),!1}c=c.return}while(c!==null);return!1}var l1=Error(r(461)),St=!1;function Mt(a,s,c,h){s.child=a===null?t1(s,null,c,h):mi(s,a.child,c,h)}function g1(a,s,c,h,y){c=c.render;var x=s.ref;if("ref"in h){var _={};for(var V in h)V!=="ref"&&(_[V]=h[V])}else _=h;return Ea(s),h=pl(a,s,c,_,x,y),V=dl(),a!==null&&!St?(yl(a,s,y),lr(a,s,y)):(Ne&&V&&Jf(s),s.flags|=1,Mt(a,s,h,y),s.child)}function h1(a,s,c,h,y){if(a===null){var x=c.type;return typeof x=="function"&&!Yf(x)&&x.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=x,p1(a,s,x,h,y)):(a=nu(c.type,null,h,s,s.mode,y),a.ref=s.ref,a.return=s,s.child=a)}if(x=a.child,!zl(a,y)){var _=x.memoizedProps;if(c=c.compare,c=c!==null?c:Ts,c(_,h)&&a.ref===s.ref)return lr(a,s,y)}return s.flags|=1,a=ar(x,h),a.ref=s.ref,a.return=s,s.child=a}function p1(a,s,c,h,y){if(a!==null){var x=a.memoizedProps;if(Ts(x,h)&&a.ref===s.ref)if(St=!1,s.pendingProps=h=x,zl(a,y))(a.flags&131072)!==0&&(St=!0);else return s.lanes=a.lanes,lr(a,s,y)}return Bl(a,s,c,h,y)}function d1(a,s,c){var h=s.pendingProps,y=h.children,x=a!==null?a.memoizedState:null;if(h.mode==="hidden"){if((s.flags&128)!==0){if(h=x!==null?x.baseLanes|c:c,a!==null){for(y=s.child=a.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;s.childLanes=x&~h}else s.childLanes=0,s.child=null;return y1(a,s,h,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&ou(s,x!==null?x.cachePool:null),x!==null?pd(s,x):ll(),n1(s);else return s.lanes=s.childLanes=536870912,y1(a,s,x!==null?x.baseLanes|c:c,c)}else x!==null?(ou(s,x.cachePool),pd(s,x),Nr(),s.memoizedState=null):(a!==null&&ou(s,null),ll(),Nr());return Mt(a,s,y,c),s.child}function y1(a,s,c,h){var y=il();return y=y===null?null:{parent:ht._currentValue,pool:y},s.memoizedState={baseLanes:c,cachePool:y},a!==null&&ou(s,null),ll(),n1(s),a!==null&&ws(a,s,h,!0),null}function Ou(a,s){var c=s.ref;if(c===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(a===null||a.ref!==c)&&(s.flags|=4194816)}}function Bl(a,s,c,h,y){return Ea(s),c=pl(a,s,c,h,void 0,y),h=dl(),a!==null&&!St?(yl(a,s,y),lr(a,s,y)):(Ne&&h&&Jf(s),s.flags|=1,Mt(a,s,c,y),s.child)}function v1(a,s,c,h,y,x){return Ea(s),s.updateQueue=null,c=yd(s,h,c,y),dd(a),h=dl(),a!==null&&!St?(yl(a,s,x),lr(a,s,x)):(Ne&&h&&Jf(s),s.flags|=1,Mt(a,s,c,x),s.child)}function T1(a,s,c,h,y){if(Ea(s),s.stateNode===null){var x=yi,_=c.contextType;typeof _=="object"&&_!==null&&(x=Nt(_)),x=new c(h,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ll,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=h,x.state=s.memoizedState,x.refs={},ol(s),_=c.contextType,x.context=typeof _=="object"&&_!==null?Nt(_):yi,x.state=s.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(_l(s,c,_,h),x.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&Ll.enqueueReplaceState(x,x.state,null),Ls(s,h,x,y),_s(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!0}else if(a===null){x=s.stateNode;var V=s.memoizedProps,N=Ra(c,V);x.props=N;var $=x.context,ee=c.contextType;_=yi,typeof ee=="object"&&ee!==null&&(_=Nt(ee));var ne=c.getDerivedStateFromProps;ee=typeof ne=="function"||typeof x.getSnapshotBeforeUpdate=="function",V=s.pendingProps!==V,ee||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(V||$!==_)&&a1(s,x,h,_),_r=!1;var W=s.memoizedState;x.state=W,Ls(s,h,x,y),_s(),$=s.memoizedState,V||W!==$||_r?(typeof ne=="function"&&(_l(s,c,ne,h),$=s.memoizedState),(N=_r||r1(s,c,N,h,W,$,_))?(ee||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=$),x.props=h,x.state=$,x.context=_,h=N):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{x=s.stateNode,ul(a,s),_=s.memoizedProps,ee=Ra(c,_),x.props=ee,ne=s.pendingProps,W=x.context,$=c.contextType,N=yi,typeof $=="object"&&$!==null&&(N=Nt($)),V=c.getDerivedStateFromProps,($=typeof V=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==ne||W!==N)&&a1(s,x,h,N),_r=!1,W=s.memoizedState,x.state=W,Ls(s,h,x,y),_s();var X=s.memoizedState;_!==ne||W!==X||_r||a!==null&&a.dependencies!==null&&iu(a.dependencies)?(typeof V=="function"&&(_l(s,c,V,h),X=s.memoizedState),(ee=_r||r1(s,c,ee,h,W,X,N)||a!==null&&a.dependencies!==null&&iu(a.dependencies))?($||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,X,N),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,X,N)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===a.memoizedProps&&W===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&W===a.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=X),x.props=h,x.state=X,x.context=N,h=ee):(typeof x.componentDidUpdate!="function"||_===a.memoizedProps&&W===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&W===a.memoizedState||(s.flags|=1024),h=!1)}return x=h,Ou(a,s),h=(s.flags&128)!==0,x||h?(x=s.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,a!==null&&h?(s.child=mi(s,a.child,null,y),s.child=mi(s,null,c,y)):Mt(a,s,c,y),s.memoizedState=x.state,a=s.child):a=lr(a,s,y),a}function S1(a,s,c,h){return Cs(),s.flags|=256,Mt(a,s,c,h),s.child}var Ul={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nl(a){return{baseLanes:a,cachePool:sd()}}function bl(a,s,c){return a=a!==null?a.childLanes&~c:0,s&&(a|=vn),a}function x1(a,s,c){var h=s.pendingProps,y=!1,x=(s.flags&128)!==0,_;if((_=x)||(_=a!==null&&a.memoizedState===null?!1:(pt.current&2)!==0),_&&(y=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,a===null){if(Ne){if(y?Ur(s):Nr(),Ne){var V=tt,N;if(N=V){e:{for(N=V,V=kn;N.nodeType!==8;){if(!V){V=null;break e}if(N=mn(N.nextSibling),N===null){V=null;break e}}V=N}V!==null?(s.memoizedState={dehydrated:V,treeContext:va!==null?{id:ir,overflow:sr}:null,retryLane:536870912,hydrationErrors:null},N=tn(18,null,null,0),N.stateNode=V,N.return=s,s.child=N,Ft=s,tt=null,N=!0):N=!1}N||xa(s)}if(V=s.memoizedState,V!==null&&(V=V.dehydrated,V!==null))return Tg(V)?s.lanes=32:s.lanes=536870912,null;fr(s)}return V=h.children,h=h.fallback,y?(Nr(),y=s.mode,V=Ru({mode:"hidden",children:V},y),h=ya(h,y,c,null),V.return=s,h.return=s,V.sibling=h,s.child=V,y=s.child,y.memoizedState=Nl(c),y.childLanes=bl(a,_,c),s.memoizedState=Ul,h):(Ur(s),Gl(s,V))}if(N=a.memoizedState,N!==null&&(V=N.dehydrated,V!==null)){if(x)s.flags&256?(Ur(s),s.flags&=-257,s=Fl(a,s,c)):s.memoizedState!==null?(Nr(),s.child=a.child,s.flags|=128,s=null):(Nr(),y=h.fallback,V=s.mode,h=Ru({mode:"visible",children:h.children},V),y=ya(y,V,c,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,mi(s,a.child,null,c),h=s.child,h.memoizedState=Nl(c),h.childLanes=bl(a,_,c),s.memoizedState=Ul,s=y);else if(Ur(s),Tg(V)){if(_=V.nextSibling&&V.nextSibling.dataset,_)var $=_.dgst;_=$,h=Error(r(419)),h.stack="",h.digest=_,Es({value:h,source:null,stack:null}),s=Fl(a,s,c)}else if(St||ws(a,s,c,!1),_=(c&a.childLanes)!==0,St||_){if(_=qe,_!==null&&(h=c&-c,h=(h&42)!==0?1:Sf(h),h=(h&(_.suspendedLanes|c))!==0?0:h,h!==0&&h!==N.retryLane))throw N.retryLane=h,di(a,h),on(_,a,h),l1;V.data==="$?"||tg(),s=Fl(a,s,c)}else V.data==="$?"?(s.flags|=192,s.child=a.child,s=null):(a=N.treeContext,tt=mn(V.nextSibling),Ft=s,Ne=!0,Sa=null,kn=!1,a!==null&&(pn[dn++]=ir,pn[dn++]=sr,pn[dn++]=va,ir=a.id,sr=a.overflow,va=s),s=Gl(s,h.children),s.flags|=4096);return s}return y?(Nr(),y=h.fallback,V=s.mode,N=a.child,$=N.sibling,h=ar(N,{mode:"hidden",children:h.children}),h.subtreeFlags=N.subtreeFlags&65011712,$!==null?y=ar($,y):(y=ya(y,V,c,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,V=a.child.memoizedState,V===null?V=Nl(c):(N=V.cachePool,N!==null?($=ht._currentValue,N=N.parent!==$?{parent:$,pool:$}:N):N=sd(),V={baseLanes:V.baseLanes|c,cachePool:N}),y.memoizedState=V,y.childLanes=bl(a,_,c),s.memoizedState=Ul,h):(Ur(s),c=a.child,a=c.sibling,c=ar(c,{mode:"visible",children:h.children}),c.return=s,c.sibling=null,a!==null&&(_=s.deletions,_===null?(s.deletions=[a],s.flags|=16):_.push(a)),s.child=c,s.memoizedState=null,c)}function Gl(a,s){return s=Ru({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function Ru(a,s){return a=tn(22,a,null,s),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Fl(a,s,c){return mi(s,a.child,null,c),a=Gl(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function C1(a,s,c){a.lanes|=s;var h=a.alternate;h!==null&&(h.lanes|=s),tl(a.return,s,c)}function kl(a,s,c,h,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:y}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=c,x.tailMode=y)}function E1(a,s,c){var h=s.pendingProps,y=h.revealOrder,x=h.tail;if(Mt(a,s,h.children,c),h=pt.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&C1(a,c,s);else if(a.tag===19)C1(a,c,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}h&=1}switch(J(pt,h),y){case"forwards":for(c=s.child,y=null;c!==null;)a=c.alternate,a!==null&&Cu(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),kl(s,!1,y,c,x);break;case"backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(a=y.alternate,a!==null&&Cu(a)===null){s.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}kl(s,!0,c,null,x);break;case"together":kl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function lr(a,s,c){if(a!==null&&(s.dependencies=a.dependencies),zr|=s.lanes,(c&s.childLanes)===0)if(a!==null){if(ws(a,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(r(153));if(s.child!==null){for(a=s.child,c=ar(a,a.pendingProps),s.child=c,c.return=s;a.sibling!==null;)a=a.sibling,c=c.sibling=ar(a,a.pendingProps),c.return=s;c.sibling=null}return s.child}function zl(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&iu(a)))}function TO(a,s,c){switch(s.tag){case 3:Ve(s,s.stateNode.containerInfo),Dr(s,ht,a.memoizedState.cache),Cs();break;case 27:case 5:Bt(s);break;case 4:Ve(s,s.stateNode.containerInfo);break;case 10:Dr(s,s.type,s.memoizedProps.value);break;case 13:var h=s.memoizedState;if(h!==null)return h.dehydrated!==null?(Ur(s),s.flags|=128,null):(c&s.child.childLanes)!==0?x1(a,s,c):(Ur(s),a=lr(a,s,c),a!==null?a.sibling:null);Ur(s);break;case 19:var y=(a.flags&128)!==0;if(h=(c&s.childLanes)!==0,h||(ws(a,s,c,!1),h=(c&s.childLanes)!==0),y){if(h)return E1(a,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),J(pt,pt.current),h)break;return null;case 22:case 23:return s.lanes=0,d1(a,s,c);case 24:Dr(s,ht,a.memoizedState.cache)}return lr(a,s,c)}function w1(a,s,c){if(a!==null)if(a.memoizedProps!==s.pendingProps)St=!0;else{if(!zl(a,c)&&(s.flags&128)===0)return St=!1,TO(a,s,c);St=(a.flags&131072)!==0}else St=!1,Ne&&(s.flags&1048576)!==0&&Ip(s,au,s.index);switch(s.lanes=0,s.tag){case 16:e:{a=s.pendingProps;var h=s.elementType,y=h._init;if(h=y(h._payload),s.type=h,typeof h=="function")Yf(h)?(a=Ra(h,a),s.tag=1,s=T1(null,s,h,a,c)):(s.tag=0,s=Bl(null,s,h,a,c));else{if(h!=null){if(y=h.$$typeof,y===O){s.tag=11,s=g1(null,s,h,a,c);break e}else if(y===U){s.tag=14,s=h1(null,s,h,a,c);break e}}throw s=Z(h)||h,Error(r(306,s,""))}}return s;case 0:return Bl(a,s,s.type,s.pendingProps,c);case 1:return h=s.type,y=Ra(h,s.pendingProps),T1(a,s,h,y,c);case 3:e:{if(Ve(s,s.stateNode.containerInfo),a===null)throw Error(r(387));h=s.pendingProps;var x=s.memoizedState;y=x.element,ul(a,s),Ls(s,h,null,c);var _=s.memoizedState;if(h=_.cache,Dr(s,ht,h),h!==x.cache&&nl(s,[ht],c,!0),_s(),h=_.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=S1(a,s,h,c);break e}else if(h!==y){y=gn(Error(r(424)),s),Es(y),s=S1(a,s,h,c);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(tt=mn(a.firstChild),Ft=s,Ne=!0,Sa=null,kn=!0,c=t1(s,null,h,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Cs(),h===y){s=lr(a,s,c);break e}Mt(a,s,h,c)}s=s.child}return s;case 26:return Ou(a,s),a===null?(c=My(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ne||(c=s.type,a=s.pendingProps,h=zu(oe.current).createElement(c),h[Ut]=s,h[jt]=a,_t(h,c,a),Tt(h),s.stateNode=h):s.memoizedState=My(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return Bt(s),a===null&&Ne&&(h=s.stateNode=Oy(s.type,s.pendingProps,oe.current),Ft=s,kn=!0,y=tt,Wr(s.type)?(Sg=y,tt=mn(h.firstChild)):tt=y),Mt(a,s,s.pendingProps.children,c),Ou(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Ne&&((y=h=tt)&&(h=XO(h,s.type,s.pendingProps,kn),h!==null?(s.stateNode=h,Ft=s,tt=mn(h.firstChild),kn=!1,y=!0):y=!1),y||xa(s)),Bt(s),y=s.type,x=s.pendingProps,_=a!==null?a.memoizedProps:null,h=x.children,dg(y,x)?h=null:_!==null&&dg(y,_)&&(s.flags|=32),s.memoizedState!==null&&(y=pl(a,s,fO,null,null,c),Ps._currentValue=y),Ou(a,s),Mt(a,s,h,c),s.child;case 6:return a===null&&Ne&&((a=c=tt)&&(c=qO(c,s.pendingProps,kn),c!==null?(s.stateNode=c,Ft=s,tt=null,a=!0):a=!1),a||xa(s)),null;case 13:return x1(a,s,c);case 4:return Ve(s,s.stateNode.containerInfo),h=s.pendingProps,a===null?s.child=mi(s,null,h,c):Mt(a,s,h,c),s.child;case 11:return g1(a,s,s.type,s.pendingProps,c);case 7:return Mt(a,s,s.pendingProps,c),s.child;case 8:return Mt(a,s,s.pendingProps.children,c),s.child;case 12:return Mt(a,s,s.pendingProps.children,c),s.child;case 10:return h=s.pendingProps,Dr(s,s.type,h.value),Mt(a,s,h.children,c),s.child;case 9:return y=s.type._context,h=s.pendingProps.children,Ea(s),y=Nt(y),h=h(y),s.flags|=1,Mt(a,s,h,c),s.child;case 14:return h1(a,s,s.type,s.pendingProps,c);case 15:return p1(a,s,s.type,s.pendingProps,c);case 19:return E1(a,s,c);case 31:return h=s.pendingProps,c=s.mode,h={mode:h.mode,children:h.children},a===null?(c=Ru(h,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=ar(a.child,h),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return d1(a,s,c);case 24:return Ea(s),h=Nt(ht),a===null?(y=il(),y===null&&(y=qe,x=rl(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=c),y=x),s.memoizedState={parent:h,cache:y},ol(s),Dr(s,ht,y)):((a.lanes&c)!==0&&(ul(a,s),Ls(s,null,null,c),_s()),y=a.memoizedState,x=s.memoizedState,y.parent!==h?(y={parent:h,cache:h},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Dr(s,ht,h)):(h=x.cache,Dr(s,ht,h),h!==y.cache&&nl(s,[ht],c,!0))),Mt(a,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function gr(a){a.flags|=4}function O1(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!By(s)){if(s=yn.current,s!==null&&((Le&4194048)===Le?zn!==null:(Le&62914560)!==Le&&(Le&536870912)===0||s!==zn))throw Ms=sl,od;a.flags|=8192}}function mu(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?np():536870912,a.lanes|=s,Li|=s)}function Fs(a,s){if(!Ne)switch(a.tailMode){case"hidden":s=a.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:h.sibling=null}}function Ie(a){var s=a.alternate!==null&&a.alternate.child===a.child,c=0,h=0;if(s)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=h,a.childLanes=c,s}function SO(a,s,c){var h=s.pendingProps;switch(Pf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(s),null;case 1:return Ie(s),null;case 3:return c=s.stateNode,h=null,a!==null&&(h=a.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),ur(ht),et(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(xs(s)?gr(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nd())),Ie(s),null;case 26:return c=s.memoizedState,a===null?(gr(s),c!==null?(Ie(s),O1(s,c)):(Ie(s),s.flags&=-16777217)):c?c!==a.memoizedState?(gr(s),Ie(s),O1(s,c)):(Ie(s),s.flags&=-16777217):(a.memoizedProps!==h&&gr(s),Ie(s),s.flags&=-16777217),null;case 27:cn(s),c=oe.current;var y=s.type;if(a!==null&&s.stateNode!=null)a.memoizedProps!==h&&gr(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ie(s),null}a=ue.current,xs(s)?ed(s):(a=Oy(y,h,c),s.stateNode=a,gr(s))}return Ie(s),null;case 5:if(cn(s),c=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==h&&gr(s);else{if(!h){if(s.stateNode===null)throw Error(r(166));return Ie(s),null}if(a=ue.current,xs(s))ed(s);else{switch(y=zu(oe.current),a){case 1:a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":a=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":a=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":a=y.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?a.multiple=!0:h.size&&(a.size=h.size);break;default:a=typeof h.is=="string"?y.createElement(c,{is:h.is}):y.createElement(c)}}a[Ut]=s,a[jt]=h;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)a.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=a;e:switch(_t(a,c,h),c){case"button":case"input":case"select":case"textarea":a=!!h.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&gr(s)}}return Ie(s),s.flags&=-16777217,null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==h&&gr(s);else{if(typeof h!="string"&&s.stateNode===null)throw Error(r(166));if(a=oe.current,xs(s)){if(a=s.stateNode,c=s.memoizedProps,h=null,y=Ft,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}a[Ut]=s,a=!!(a.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||vy(a.nodeValue,c)),a||xa(s)}else a=zu(a).createTextNode(h),a[Ut]=s,s.stateNode=a}return Ie(s),null;case 13:if(h=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(y=xs(s),h!==null&&h.dehydrated!==null){if(a===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Ut]=s}else Cs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ie(s),y=!1}else y=nd(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(fr(s),s):(fr(s),null)}if(fr(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=h!==null,a=a!==null&&a.memoizedState!==null,c){h=s.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var x=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==y&&(h.flags|=2048)}return c!==a&&c&&(s.child.flags|=8192),mu(s,s.updateQueue),Ie(s),null;case 4:return et(),a===null&&fg(s.stateNode.containerInfo),Ie(s),null;case 10:return ur(s.type),Ie(s),null;case 19:if(ae(pt),y=s.memoizedState,y===null)return Ie(s),null;if(h=(s.flags&128)!==0,x=y.rendering,x===null)if(h)Fs(y,!1);else{if(nt!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(x=Cu(a),x!==null){for(s.flags|=128,Fs(y,!1),a=x.updateQueue,s.updateQueue=a,mu(s,a),s.subtreeFlags=0,a=c,c=s.child;c!==null;)Pp(c,a),c=c.sibling;return J(pt,pt.current&1|2),s.child}a=a.sibling}y.tail!==null&&Fn()>_u&&(s.flags|=128,h=!0,Fs(y,!1),s.lanes=4194304)}else{if(!h)if(a=Cu(x),a!==null){if(s.flags|=128,h=!0,a=a.updateQueue,s.updateQueue=a,mu(s,a),Fs(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Ne)return Ie(s),null}else 2*Fn()-y.renderingStartTime>_u&&c!==536870912&&(s.flags|=128,h=!0,Fs(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Fn(),s.sibling=null,a=pt.current,J(pt,h?a&1|2:a&1),s):(Ie(s),null);case 22:case 23:return fr(s),gl(),h=s.memoizedState!==null,a!==null?a.memoizedState!==null!==h&&(s.flags|=8192):h&&(s.flags|=8192),h?(c&536870912)!==0&&(s.flags&128)===0&&(Ie(s),s.subtreeFlags&6&&(s.flags|=8192)):Ie(s),c=s.updateQueue,c!==null&&mu(s,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==c&&(s.flags|=2048),a!==null&&ae(wa),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ur(ht),Ie(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function xO(a,s){switch(Pf(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ur(ht),et(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return cn(s),null;case 13:if(fr(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Cs()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return ae(pt),null;case 4:return et(),null;case 10:return ur(s.type),null;case 22:case 23:return fr(s),gl(),a!==null&&ae(wa),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return ur(ht),null;case 25:return null;default:return null}}function R1(a,s){switch(Pf(s),s.tag){case 3:ur(ht),et();break;case 26:case 27:case 5:cn(s);break;case 4:et();break;case 13:fr(s);break;case 19:ae(pt);break;case 10:ur(s.type);break;case 22:case 23:fr(s),gl(),a!==null&&ae(wa);break;case 24:ur(ht)}}function ks(a,s){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var y=h.next;c=y;do{if((c.tag&a)===a){h=void 0;var x=c.create,_=c.inst;h=x(),_.destroy=h}c=c.next}while(c!==y)}}catch(V){Ke(s,s.return,V)}}function br(a,s,c){try{var h=s.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&a)===a){var _=h.inst,V=_.destroy;if(V!==void 0){_.destroy=void 0,y=s;var N=c,$=V;try{$()}catch(ee){Ke(y,N,ee)}}}h=h.next}while(h!==x)}}catch(ee){Ke(s,s.return,ee)}}function m1(a){var s=a.updateQueue;if(s!==null){var c=a.stateNode;try{hd(s,c)}catch(h){Ke(a,a.return,h)}}}function M1(a,s,c){c.props=Ra(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(h){Ke(a,s,h)}}function zs(a,s){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var h=a.stateNode;break;case 30:h=a.stateNode;break;default:h=a.stateNode}typeof c=="function"?a.refCleanup=c(h):c.current=h}}catch(y){Ke(a,s,y)}}function An(a,s){var c=a.ref,h=a.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(y){Ke(a,s,y)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Ke(a,s,y)}else c.current=null}function D1(a){var s=a.type,c=a.memoizedProps,h=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(y){Ke(a,a.return,y)}}function Al(a,s,c){try{var h=a.stateNode;HO(h,a.type,c,s),h[jt]=s}catch(y){Ke(a,a.return,y)}}function _1(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Wr(a.type)||a.tag===4}function Hl(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||_1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Wr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function $l(a,s,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(a),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=ku));else if(h!==4&&(h===27&&Wr(a.type)&&(c=a.stateNode,s=null),a=a.child,a!==null))for($l(a,s,c),a=a.sibling;a!==null;)$l(a,s,c),a=a.sibling}function Mu(a,s,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,s?c.insertBefore(a,s):c.appendChild(a);else if(h!==4&&(h===27&&Wr(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(Mu(a,s,c),a=a.sibling;a!==null;)Mu(a,s,c),a=a.sibling}function L1(a){var s=a.stateNode,c=a.memoizedProps;try{for(var h=a.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);_t(s,h,c),s[Ut]=a,s[jt]=c}catch(x){Ke(a,a.return,x)}}var hr=!1,st=!1,Wl=!1,V1=typeof WeakSet=="function"?WeakSet:Set,xt=null;function CO(a,s){if(a=a.containerInfo,hg=Ku,a=$p(a),Hf(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var y=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var _=0,V=-1,N=-1,$=0,ee=0,ne=a,W=null;t:for(;;){for(var X;ne!==c||y!==0&&ne.nodeType!==3||(V=_+y),ne!==x||h!==0&&ne.nodeType!==3||(N=_+h),ne.nodeType===3&&(_+=ne.nodeValue.length),(X=ne.firstChild)!==null;)W=ne,ne=X;for(;;){if(ne===a)break t;if(W===c&&++$===y&&(V=_),W===x&&++ee===h&&(N=_),(X=ne.nextSibling)!==null)break;ne=W,W=ne.parentNode}ne=X}c=V===-1||N===-1?null:{start:V,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(pg={focusedElem:a,selectionRange:c},Ku=!1,xt=s;xt!==null;)if(s=xt,a=s.child,(s.subtreeFlags&1024)!==0&&a!==null)a.return=s,xt=a;else for(;xt!==null;){switch(s=xt,x=s.alternate,a=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&x!==null){a=void 0,c=s,y=x.memoizedProps,x=x.memoizedState,h=c.stateNode;try{var de=Ra(c.type,y,c.elementType===c.type);a=h.getSnapshotBeforeUpdate(de,x),h.__reactInternalSnapshotBeforeUpdate=a}catch(ge){Ke(c,c.return,ge)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,c=a.nodeType,c===9)vg(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":vg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=s.sibling,a!==null){a.return=s.return,xt=a;break}xt=s.return}}function B1(a,s,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Gr(a,c),h&4&&ks(5,c);break;case 1:if(Gr(a,c),h&4)if(a=c.stateNode,s===null)try{a.componentDidMount()}catch(_){Ke(c,c.return,_)}else{var y=Ra(c.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(y,s,a.__reactInternalSnapshotBeforeUpdate)}catch(_){Ke(c,c.return,_)}}h&64&&m1(c),h&512&&zs(c,c.return);break;case 3:if(Gr(a,c),h&64&&(a=c.updateQueue,a!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{hd(a,s)}catch(_){Ke(c,c.return,_)}}break;case 27:s===null&&h&4&&L1(c);case 26:case 5:Gr(a,c),s===null&&h&4&&D1(c),h&512&&zs(c,c.return);break;case 12:Gr(a,c);break;case 13:Gr(a,c),h&4&&b1(a,c),h&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=LO.bind(null,c),YO(a,c))));break;case 22:if(h=c.memoizedState!==null||hr,!h){s=s!==null&&s.memoizedState!==null||st,y=hr;var x=st;hr=h,(st=s)&&!x?Fr(a,c,(c.subtreeFlags&8772)!==0):Gr(a,c),hr=y,st=x}break;case 30:break;default:Gr(a,c)}}function U1(a){var s=a.alternate;s!==null&&(a.alternate=null,U1(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&Ef(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ze=null,qt=!1;function pr(a,s,c){for(c=c.child;c!==null;)N1(a,s,c),c=c.sibling}function N1(a,s,c){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(ss,c)}catch{}switch(c.tag){case 26:st||An(c,s),pr(a,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:st||An(c,s);var h=Ze,y=qt;Wr(c.type)&&(Ze=c.stateNode,qt=!1),pr(a,s,c),Ys(c.stateNode),Ze=h,qt=y;break;case 5:st||An(c,s);case 6:if(h=Ze,y=qt,Ze=null,pr(a,s,c),Ze=h,qt=y,Ze!==null)if(qt)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(c.stateNode)}catch(x){Ke(c,s,x)}else try{Ze.removeChild(c.stateNode)}catch(x){Ke(c,s,x)}break;case 18:Ze!==null&&(qt?(a=Ze,Ey(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),no(a)):Ey(Ze,c.stateNode));break;case 4:h=Ze,y=qt,Ze=c.stateNode.containerInfo,qt=!0,pr(a,s,c),Ze=h,qt=y;break;case 0:case 11:case 14:case 15:st||br(2,c,s),st||br(4,c,s),pr(a,s,c);break;case 1:st||(An(c,s),h=c.stateNode,typeof h.componentWillUnmount=="function"&&M1(c,s,h)),pr(a,s,c);break;case 21:pr(a,s,c);break;case 22:st=(h=st)||c.memoizedState!==null,pr(a,s,c),st=h;break;default:pr(a,s,c)}}function b1(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{no(a)}catch(c){Ke(s,s.return,c)}}function EO(a){switch(a.tag){case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new V1),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new V1),s;default:throw Error(r(435,a.tag))}}function jl(a,s){var c=EO(a);s.forEach(function(h){var y=VO.bind(null,a,h);c.has(h)||(c.add(h),h.then(y,y))})}function nn(a,s){var c=s.deletions;if(c!==null)for(var h=0;h<c.length;h++){var y=c[h],x=a,_=s,V=_;e:for(;V!==null;){switch(V.tag){case 27:if(Wr(V.type)){Ze=V.stateNode,qt=!1;break e}break;case 5:Ze=V.stateNode,qt=!1;break e;case 3:case 4:Ze=V.stateNode.containerInfo,qt=!0;break e}V=V.return}if(Ze===null)throw Error(r(160));N1(x,_,y),Ze=null,qt=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)G1(s,a),s=s.sibling}var Rn=null;function G1(a,s){var c=a.alternate,h=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:nn(s,a),rn(a),h&4&&(br(3,a,a.return),ks(3,a),br(5,a,a.return));break;case 1:nn(s,a),rn(a),h&512&&(st||c===null||An(c,c.return)),h&64&&hr&&(a=a.updateQueue,a!==null&&(h=a.callbacks,h!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var y=Rn;if(nn(s,a),rn(a),h&512&&(st||c===null||An(c,c.return)),h&4){var x=c!==null?c.memoizedState:null;if(h=a.memoizedState,c===null)if(h===null)if(a.stateNode===null){e:{h=a.type,c=a.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":x=y.getElementsByTagName("title")[0],(!x||x[cs]||x[Ut]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(h),y.head.insertBefore(x,y.querySelector("head > title"))),_t(x,h,c),x[Ut]=a,Tt(x),h=x;break e;case"link":var _=Ly("link","href",y).get(h+(c.href||""));if(_){for(var V=0;V<_.length;V++)if(x=_[V],x.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&x.getAttribute("rel")===(c.rel==null?null:c.rel)&&x.getAttribute("title")===(c.title==null?null:c.title)&&x.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){_.splice(V,1);break t}}x=y.createElement(h),_t(x,h,c),y.head.appendChild(x);break;case"meta":if(_=Ly("meta","content",y).get(h+(c.content||""))){for(V=0;V<_.length;V++)if(x=_[V],x.getAttribute("content")===(c.content==null?null:""+c.content)&&x.getAttribute("name")===(c.name==null?null:c.name)&&x.getAttribute("property")===(c.property==null?null:c.property)&&x.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&x.getAttribute("charset")===(c.charSet==null?null:c.charSet)){_.splice(V,1);break t}}x=y.createElement(h),_t(x,h,c),y.head.appendChild(x);break;default:throw Error(r(468,h))}x[Ut]=a,Tt(x),h=x}a.stateNode=h}else Vy(y,a.type,a.stateNode);else a.stateNode=_y(y,h,a.memoizedProps);else x!==h?(x===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):x.count--,h===null?Vy(y,a.type,a.stateNode):_y(y,h,a.memoizedProps)):h===null&&a.stateNode!==null&&Al(a,a.memoizedProps,c.memoizedProps)}break;case 27:nn(s,a),rn(a),h&512&&(st||c===null||An(c,c.return)),c!==null&&h&4&&Al(a,a.memoizedProps,c.memoizedProps);break;case 5:if(nn(s,a),rn(a),h&512&&(st||c===null||An(c,c.return)),a.flags&32){y=a.stateNode;try{ui(y,"")}catch(X){Ke(a,a.return,X)}}h&4&&a.stateNode!=null&&(y=a.memoizedProps,Al(a,y,c!==null?c.memoizedProps:y)),h&1024&&(Wl=!0);break;case 6:if(nn(s,a),rn(a),h&4){if(a.stateNode===null)throw Error(r(162));h=a.memoizedProps,c=a.stateNode;try{c.nodeValue=h}catch(X){Ke(a,a.return,X)}}break;case 3:if($u=null,y=Rn,Rn=Au(s.containerInfo),nn(s,a),Rn=y,rn(a),h&4&&c!==null&&c.memoizedState.isDehydrated)try{no(s.containerInfo)}catch(X){Ke(a,a.return,X)}Wl&&(Wl=!1,F1(a));break;case 4:h=Rn,Rn=Au(a.stateNode.containerInfo),nn(s,a),rn(a),Rn=h;break;case 12:nn(s,a),rn(a);break;case 13:nn(s,a),rn(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Zl=Fn()),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,jl(a,h)));break;case 22:y=a.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,$=hr,ee=st;if(hr=$||y,st=ee||N,nn(s,a),st=ee,hr=$,rn(a),h&8192)e:for(s=a.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||N||hr||st||ma(a)),c=null,s=a;;){if(s.tag===5||s.tag===26){if(c===null){N=c=s;try{if(x=N.stateNode,y)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{V=N.stateNode;var ne=N.memoizedProps.style,W=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;V.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(X){Ke(N,N.return,X)}}}else if(s.tag===6){if(c===null){N=s;try{N.stateNode.nodeValue=y?"":N.memoizedProps}catch(X){Ke(N,N.return,X)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}h&4&&(h=a.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,jl(a,c))));break;case 19:nn(s,a),rn(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,jl(a,h)));break;case 30:break;case 21:break;default:nn(s,a),rn(a)}}function rn(a){var s=a.flags;if(s&2){try{for(var c,h=a.return;h!==null;){if(_1(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,x=Hl(a);Mu(a,x,y);break;case 5:var _=c.stateNode;c.flags&32&&(ui(_,""),c.flags&=-33);var V=Hl(a);Mu(a,V,_);break;case 3:case 4:var N=c.stateNode.containerInfo,$=Hl(a);$l(a,$,N);break;default:throw Error(r(161))}}catch(ee){Ke(a,a.return,ee)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function F1(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;F1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function Gr(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)B1(a,s.alternate,s),s=s.sibling}function ma(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:br(4,s,s.return),ma(s);break;case 1:An(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&M1(s,s.return,c),ma(s);break;case 27:Ys(s.stateNode);case 26:case 5:An(s,s.return),ma(s);break;case 22:s.memoizedState===null&&ma(s);break;case 30:ma(s);break;default:ma(s)}a=a.sibling}}function Fr(a,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var h=s.alternate,y=a,x=s,_=x.flags;switch(x.tag){case 0:case 11:case 15:Fr(y,x,c),ks(4,x);break;case 1:if(Fr(y,x,c),h=x,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch($){Ke(h,h.return,$)}if(h=x,y=h.updateQueue,y!==null){var V=h.stateNode;try{var N=y.shared.hiddenCallbacks;if(N!==null)for(y.shared.hiddenCallbacks=null,y=0;y<N.length;y++)gd(N[y],V)}catch($){Ke(h,h.return,$)}}c&&_&64&&m1(x),zs(x,x.return);break;case 27:L1(x);case 26:case 5:Fr(y,x,c),c&&h===null&&_&4&&D1(x),zs(x,x.return);break;case 12:Fr(y,x,c);break;case 13:Fr(y,x,c),c&&_&4&&b1(y,x);break;case 22:x.memoizedState===null&&Fr(y,x,c),zs(x,x.return);break;case 30:break;default:Fr(y,x,c)}s=s.sibling}}function Kl(a,s){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&Os(c))}function Xl(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Os(a))}function Hn(a,s,c,h){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)k1(a,s,c,h),s=s.sibling}function k1(a,s,c,h){var y=s.flags;switch(s.tag){case 0:case 11:case 15:Hn(a,s,c,h),y&2048&&ks(9,s);break;case 1:Hn(a,s,c,h);break;case 3:Hn(a,s,c,h),y&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Os(a)));break;case 12:if(y&2048){Hn(a,s,c,h),a=s.stateNode;try{var x=s.memoizedProps,_=x.id,V=x.onPostCommit;typeof V=="function"&&V(_,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(N){Ke(s,s.return,N)}}else Hn(a,s,c,h);break;case 13:Hn(a,s,c,h);break;case 23:break;case 22:x=s.stateNode,_=s.alternate,s.memoizedState!==null?x._visibility&2?Hn(a,s,c,h):As(a,s):x._visibility&2?Hn(a,s,c,h):(x._visibility|=2,Mi(a,s,c,h,(s.subtreeFlags&10256)!==0)),y&2048&&Kl(_,s);break;case 24:Hn(a,s,c,h),y&2048&&Xl(s.alternate,s);break;default:Hn(a,s,c,h)}}function Mi(a,s,c,h,y){for(y=y&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var x=a,_=s,V=c,N=h,$=_.flags;switch(_.tag){case 0:case 11:case 15:Mi(x,_,V,N,y),ks(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?Mi(x,_,V,N,y):As(x,_):(ee._visibility|=2,Mi(x,_,V,N,y)),y&&$&2048&&Kl(_.alternate,_);break;case 24:Mi(x,_,V,N,y),y&&$&2048&&Xl(_.alternate,_);break;default:Mi(x,_,V,N,y)}s=s.sibling}}function As(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=a,h=s,y=h.flags;switch(h.tag){case 22:As(c,h),y&2048&&Kl(h.alternate,h);break;case 24:As(c,h),y&2048&&Xl(h.alternate,h);break;default:As(c,h)}s=s.sibling}}var Hs=8192;function Di(a){if(a.subtreeFlags&Hs)for(a=a.child;a!==null;)z1(a),a=a.sibling}function z1(a){switch(a.tag){case 26:Di(a),a.flags&Hs&&a.memoizedState!==null&&oR(Rn,a.memoizedState,a.memoizedProps);break;case 5:Di(a);break;case 3:case 4:var s=Rn;Rn=Au(a.stateNode.containerInfo),Di(a),Rn=s;break;case 22:a.memoizedState===null&&(s=a.alternate,s!==null&&s.memoizedState!==null?(s=Hs,Hs=16777216,Di(a),Hs=s):Di(a));break;default:Di(a)}}function A1(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function $s(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];xt=h,$1(h,a)}A1(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)H1(a),a=a.sibling}function H1(a){switch(a.tag){case 0:case 11:case 15:$s(a),a.flags&2048&&br(9,a,a.return);break;case 3:$s(a);break;case 12:$s(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Du(a)):$s(a);break;default:$s(a)}}function Du(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var h=s[c];xt=h,$1(h,a)}A1(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:br(8,s,s.return),Du(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Du(s));break;default:Du(s)}a=a.sibling}}function $1(a,s){for(;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:br(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Os(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,xt=h;else e:for(c=a;xt!==null;){h=xt;var y=h.sibling,x=h.return;if(U1(h),h===c){xt=null;break e}if(y!==null){y.return=x,xt=y;break e}xt=x}}}var wO={getCacheForType:function(a){var s=Nt(ht),c=s.data.get(a);return c===void 0&&(c=a(),s.data.set(a,c)),c}},OO=typeof WeakMap=="function"?WeakMap:Map,Fe=0,qe=null,Me=null,Le=0,ke=0,an=null,kr=!1,_i=!1,ql=!1,dr=0,nt=0,zr=0,Ma=0,Yl=0,vn=0,Li=0,Ws=null,Yt=null,Ql=!1,Zl=0,_u=1/0,Lu=null,Ar=null,Dt=0,Hr=null,Vi=null,Bi=0,Jl=0,Pl=null,W1=null,js=0,Il=null;function sn(){if((Fe&2)!==0&&Le!==0)return Le&-Le;if(F.T!==null){var a=Si;return a!==0?a:sg()}return ip()}function j1(){vn===0&&(vn=(Le&536870912)===0||Ne?tp():536870912);var a=yn.current;return a!==null&&(a.flags|=32),vn}function on(a,s,c){(a===qe&&(ke===2||ke===9)||a.cancelPendingCommit!==null)&&(Ui(a,0),$r(a,Le,vn,!1)),us(a,c),((Fe&2)===0||a!==qe)&&(a===qe&&((Fe&2)===0&&(Ma|=c),nt===4&&$r(a,Le,vn,!1)),$n(a))}function K1(a,s,c){if((Fe&6)!==0)throw Error(r(327));var h=!c&&(s&124)===0&&(s&a.expiredLanes)===0||os(a,s),y=h?MO(a,s):ng(a,s,!0),x=h;do{if(y===0){_i&&!h&&$r(a,s,0,!1);break}else{if(c=a.current.alternate,x&&!RO(c)){y=ng(a,s,!1),x=!1;continue}if(y===2){if(x=s,a.errorRecoveryDisabledLanes&x)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var V=a;y=Ws;var N=V.current.memoizedState.isDehydrated;if(N&&(Ui(V,_).flags|=256),_=ng(V,_,!1),_!==2){if(ql&&!N){V.errorRecoveryDisabledLanes|=x,Ma|=x,y=4;break e}x=Yt,Yt=y,x!==null&&(Yt===null?Yt=x:Yt.push.apply(Yt,x))}y=_}if(x=!1,y!==2)continue}}if(y===1){Ui(a,0),$r(a,s,0,!0);break}e:{switch(h=a,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:$r(h,s,vn,!kr);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(y=Zl+300-Fn(),10<y)){if($r(h,s,vn,!kr),Ho(h,0,!0)!==0)break e;h.timeoutHandle=xy(X1.bind(null,h,c,Yt,Lu,Ql,s,vn,Ma,Li,kr,x,2,-0,0),y);break e}X1(h,c,Yt,Lu,Ql,s,vn,Ma,Li,kr,x,0,-0,0)}}break}while(!0);$n(a)}function X1(a,s,c,h,y,x,_,V,N,$,ee,ne,W,X){if(a.timeoutHandle=-1,ne=s.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Js={stylesheets:null,count:0,unsuspend:sR},z1(s),ne=uR(),ne!==null)){a.cancelPendingCommit=ne(I1.bind(null,a,s,x,c,h,y,_,V,N,ee,1,W,X)),$r(a,x,_,!$);return}I1(a,s,x,c,h,y,_,V,N)}function RO(a){for(var s=a;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var y=c[h],x=y.getSnapshot;y=y.value;try{if(!en(x(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $r(a,s,c,h){s&=~Yl,s&=~Ma,a.suspendedLanes|=s,a.pingedLanes&=~s,h&&(a.warmLanes|=s),h=a.expirationTimes;for(var y=s;0<y;){var x=31-It(y),_=1<<x;h[x]=-1,y&=~_}c!==0&&rp(a,c,s)}function Vu(){return(Fe&6)===0?(Ks(0),!1):!0}function eg(){if(Me!==null){if(ke===0)var a=Me.return;else a=Me,or=Ca=null,vl(a),Ri=null,bs=0,a=Me;for(;a!==null;)R1(a.alternate,a),a=a.return;Me=null}}function Ui(a,s){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,WO(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),eg(),qe=a,Me=c=ar(a.current,null),Le=s,ke=0,an=null,kr=!1,_i=os(a,s),ql=!1,Li=vn=Yl=Ma=zr=nt=0,Yt=Ws=null,Ql=!1,(s&8)!==0&&(s|=s&32);var h=a.entangledLanes;if(h!==0)for(a=a.entanglements,h&=s;0<h;){var y=31-It(h),x=1<<y;s|=a[y],h&=~x}return dr=s,Io(),c}function q1(a,s){Ce=null,F.H=Tu,s===ms||s===uu?(s=fd(),ke=3):s===od?(s=fd(),ke=4):ke=s===l1?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,an=s,Me===null&&(nt=1,wu(a,gn(s,a.current)))}function Y1(){var a=F.H;return F.H=Tu,a===null?Tu:a}function Q1(){var a=F.A;return F.A=wO,a}function tg(){nt=4,kr||(Le&4194048)!==Le&&yn.current!==null||(_i=!0),(zr&134217727)===0&&(Ma&134217727)===0||qe===null||$r(qe,Le,vn,!1)}function ng(a,s,c){var h=Fe;Fe|=2;var y=Y1(),x=Q1();(qe!==a||Le!==s)&&(Lu=null,Ui(a,s)),s=!1;var _=nt;e:do try{if(ke!==0&&Me!==null){var V=Me,N=an;switch(ke){case 8:eg(),_=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(s=!0);var $=ke;if(ke=0,an=null,Ni(a,V,N,$),c&&_i){_=0;break e}break;default:$=ke,ke=0,an=null,Ni(a,V,N,$)}}mO(),_=nt;break}catch(ee){q1(a,ee)}while(!0);return s&&a.shellSuspendCounter++,or=Ca=null,Fe=h,F.H=y,F.A=x,Me===null&&(qe=null,Le=0,Io()),_}function mO(){for(;Me!==null;)Z1(Me)}function MO(a,s){var c=Fe;Fe|=2;var h=Y1(),y=Q1();qe!==a||Le!==s?(Lu=null,_u=Fn()+500,Ui(a,s)):_i=os(a,s);e:do try{if(ke!==0&&Me!==null){s=Me;var x=an;t:switch(ke){case 1:ke=0,an=null,Ni(a,s,x,1);break;case 2:case 9:if(ud(x)){ke=0,an=null,J1(s);break}s=function(){ke!==2&&ke!==9||qe!==a||(ke=7),$n(a)},x.then(s,s);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:ud(x)?(ke=0,an=null,J1(s)):(ke=0,an=null,Ni(a,s,x,7));break;case 5:var _=null;switch(Me.tag){case 26:_=Me.memoizedState;case 5:case 27:var V=Me;if(!_||By(_)){ke=0,an=null;var N=V.sibling;if(N!==null)Me=N;else{var $=V.return;$!==null?(Me=$,Bu($)):Me=null}break t}}ke=0,an=null,Ni(a,s,x,5);break;case 6:ke=0,an=null,Ni(a,s,x,6);break;case 8:eg(),nt=6;break e;default:throw Error(r(462))}}DO();break}catch(ee){q1(a,ee)}while(!0);return or=Ca=null,F.H=h,F.A=y,Fe=c,Me!==null?0:(qe=null,Le=0,Io(),nt)}function DO(){for(;Me!==null&&!ZE();)Z1(Me)}function Z1(a){var s=w1(a.alternate,a,dr);a.memoizedProps=a.pendingProps,s===null?Bu(a):Me=s}function J1(a){var s=a,c=s.alternate;switch(s.tag){case 15:case 0:s=v1(c,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=v1(c,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:vl(s);default:R1(c,s),s=Me=Pp(s,dr),s=w1(c,s,dr)}a.memoizedProps=a.pendingProps,s===null?Bu(a):Me=s}function Ni(a,s,c,h){or=Ca=null,vl(s),Ri=null,bs=0;var y=s.return;try{if(vO(a,y,s,c,Le)){nt=1,wu(a,gn(c,a.current)),Me=null;return}}catch(x){if(y!==null)throw Me=y,x;nt=1,wu(a,gn(c,a.current)),Me=null;return}s.flags&32768?(Ne||h===1?a=!0:_i||(Le&536870912)!==0?a=!1:(kr=a=!0,(h===2||h===9||h===3||h===6)&&(h=yn.current,h!==null&&h.tag===13&&(h.flags|=16384))),P1(s,a)):Bu(s)}function Bu(a){var s=a;do{if((s.flags&32768)!==0){P1(s,kr);return}a=s.return;var c=SO(s.alternate,s,dr);if(c!==null){Me=c;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=a}while(s!==null);nt===0&&(nt=5)}function P1(a,s){do{var c=xO(a.alternate,a);if(c!==null){c.flags&=32767,Me=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(a=a.sibling,a!==null)){Me=a;return}Me=a=c}while(a!==null);nt=6,Me=null}function I1(a,s,c,h,y,x,_,V,N){a.cancelPendingCommit=null;do Uu();while(Dt!==0);if((Fe&6)!==0)throw Error(r(327));if(s!==null){if(s===a.current)throw Error(r(177));if(x=s.lanes|s.childLanes,x|=Xf,sw(a,c,x,_,V,N),a===qe&&(Me=qe=null,Le=0),Vi=s,Hr=a,Bi=c,Jl=x,Pl=y,W1=h,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,BO(ko,function(){return ay(),null})):(a.callbackNode=null,a.callbackPriority=0),h=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,y=P.p,P.p=2,_=Fe,Fe|=4;try{CO(a,s,c)}finally{Fe=_,P.p=y,F.T=h}}Dt=1,ey(),ty(),ny()}}function ey(){if(Dt===1){Dt=0;var a=Hr,s=Vi,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=F.T,F.T=null;var h=P.p;P.p=2;var y=Fe;Fe|=4;try{G1(s,a);var x=pg,_=$p(a.containerInfo),V=x.focusedElem,N=x.selectionRange;if(_!==V&&V&&V.ownerDocument&&Hp(V.ownerDocument.documentElement,V)){if(N!==null&&Hf(V)){var $=N.start,ee=N.end;if(ee===void 0&&(ee=$),"selectionStart"in V)V.selectionStart=$,V.selectionEnd=Math.min(ee,V.value.length);else{var ne=V.ownerDocument||document,W=ne&&ne.defaultView||window;if(W.getSelection){var X=W.getSelection(),de=V.textContent.length,ge=Math.min(N.start,de),$e=N.end===void 0?ge:Math.min(N.end,de);!X.extend&&ge>$e&&(_=$e,$e=ge,ge=_);var k=Ap(V,ge),G=Ap(V,$e);if(k&&G&&(X.rangeCount!==1||X.anchorNode!==k.node||X.anchorOffset!==k.offset||X.focusNode!==G.node||X.focusOffset!==G.offset)){var H=ne.createRange();H.setStart(k.node,k.offset),X.removeAllRanges(),ge>$e?(X.addRange(H),X.extend(G.node,G.offset)):(H.setEnd(G.node,G.offset),X.addRange(H))}}}}for(ne=[],X=V;X=X.parentNode;)X.nodeType===1&&ne.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<ne.length;V++){var te=ne[V];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Ku=!!hg,pg=hg=null}finally{Fe=y,P.p=h,F.T=c}}a.current=s,Dt=2}}function ty(){if(Dt===2){Dt=0;var a=Hr,s=Vi,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=F.T,F.T=null;var h=P.p;P.p=2;var y=Fe;Fe|=4;try{B1(a,s.alternate,s)}finally{Fe=y,P.p=h,F.T=c}}Dt=3}}function ny(){if(Dt===4||Dt===3){Dt=0,JE();var a=Hr,s=Vi,c=Bi,h=W1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Dt=5:(Dt=0,Vi=Hr=null,ry(a,a.pendingLanes));var y=a.pendingLanes;if(y===0&&(Ar=null),xf(c),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(ss,s,void 0,(s.current.flags&128)===128)}catch{}if(h!==null){s=F.T,y=P.p,P.p=2,F.T=null;try{for(var x=a.onRecoverableError,_=0;_<h.length;_++){var V=h[_];x(V.value,{componentStack:V.stack})}}finally{F.T=s,P.p=y}}(Bi&3)!==0&&Uu(),$n(a),y=a.pendingLanes,(c&4194090)!==0&&(y&42)!==0?a===Il?js++:(js=0,Il=a):js=0,Ks(0)}}function ry(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Os(s)))}function Uu(a){return ey(),ty(),ny(),ay()}function ay(){if(Dt!==5)return!1;var a=Hr,s=Jl;Jl=0;var c=xf(Bi),h=F.T,y=P.p;try{P.p=32>c?32:c,F.T=null,c=Pl,Pl=null;var x=Hr,_=Bi;if(Dt=0,Vi=Hr=null,Bi=0,(Fe&6)!==0)throw Error(r(331));var V=Fe;if(Fe|=4,H1(x.current),k1(x,x.current,_,c),Fe=V,Ks(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(ss,x)}catch{}return!0}finally{P.p=y,F.T=h,ry(a,s)}}function iy(a,s,c){s=gn(c,s),s=Vl(a.stateNode,s,2),a=Vr(a,s,2),a!==null&&(us(a,2),$n(a))}function Ke(a,s,c){if(a.tag===3)iy(a,a,c);else for(;s!==null;){if(s.tag===3){iy(s,a,c);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ar===null||!Ar.has(h))){a=gn(c,a),c=c1(2),h=Vr(s,c,2),h!==null&&(f1(c,h,s,a),us(h,2),$n(h));break}}s=s.return}}function rg(a,s,c){var h=a.pingCache;if(h===null){h=a.pingCache=new OO;var y=new Set;h.set(s,y)}else y=h.get(s),y===void 0&&(y=new Set,h.set(s,y));y.has(c)||(ql=!0,y.add(c),a=_O.bind(null,a,s,c),s.then(a,a))}function _O(a,s,c){var h=a.pingCache;h!==null&&h.delete(s),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,qe===a&&(Le&c)===c&&(nt===4||nt===3&&(Le&62914560)===Le&&300>Fn()-Zl?(Fe&2)===0&&Ui(a,0):Yl|=c,Li===Le&&(Li=0)),$n(a)}function sy(a,s){s===0&&(s=np()),a=di(a,s),a!==null&&(us(a,s),$n(a))}function LO(a){var s=a.memoizedState,c=0;s!==null&&(c=s.retryLane),sy(a,c)}function VO(a,s){var c=0;switch(a.tag){case 13:var h=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:h=a.stateNode;break;case 22:h=a.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(s),sy(a,c)}function BO(a,s){return tr(a,s)}var Nu=null,bi=null,ag=!1,bu=!1,ig=!1,Da=0;function $n(a){a!==bi&&a.next===null&&(bi===null?Nu=bi=a:bi=bi.next=a),bu=!0,ag||(ag=!0,NO())}function Ks(a,s){if(!ig&&bu){ig=!0;do for(var c=!1,h=Nu;h!==null;){if(a!==0){var y=h.pendingLanes;if(y===0)var x=0;else{var _=h.suspendedLanes,V=h.pingedLanes;x=(1<<31-It(42|a)+1)-1,x&=y&~(_&~V),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(c=!0,fy(h,x))}else x=Le,x=Ho(h,h===qe?x:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(x&3)===0||os(h,x)||(c=!0,fy(h,x));h=h.next}while(c);ig=!1}}function UO(){oy()}function oy(){bu=ag=!1;var a=0;Da!==0&&($O()&&(a=Da),Da=0);for(var s=Fn(),c=null,h=Nu;h!==null;){var y=h.next,x=uy(h,s);x===0?(h.next=null,c===null?Nu=y:c.next=y,y===null&&(bi=c)):(c=h,(a!==0||(x&3)!==0)&&(bu=!0)),h=y}Ks(a)}function uy(a,s){for(var c=a.suspendedLanes,h=a.pingedLanes,y=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var _=31-It(x),V=1<<_,N=y[_];N===-1?((V&c)===0||(V&h)!==0)&&(y[_]=iw(V,s)):N<=s&&(a.expiredLanes|=V),x&=~V}if(s=qe,c=Le,c=Ho(a,a===s?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h=a.callbackNode,c===0||a===s&&(ke===2||ke===9)||a.cancelPendingCommit!==null)return h!==null&&h!==null&&vf(h),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||os(a,c)){if(s=c&-c,s===a.callbackPriority)return s;switch(h!==null&&vf(h),xf(c)){case 2:case 8:c=Ih;break;case 32:c=ko;break;case 268435456:c=ep;break;default:c=ko}return h=cy.bind(null,a),c=tr(c,h),a.callbackPriority=s,a.callbackNode=c,s}return h!==null&&h!==null&&vf(h),a.callbackPriority=2,a.callbackNode=null,2}function cy(a,s){if(Dt!==0&&Dt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(Uu()&&a.callbackNode!==c)return null;var h=Le;return h=Ho(a,a===qe?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h===0?null:(K1(a,h,s),uy(a,Fn()),a.callbackNode!=null&&a.callbackNode===c?cy.bind(null,a):null)}function fy(a,s){if(Uu())return null;K1(a,s,!0)}function NO(){jO(function(){(Fe&6)!==0?tr(Ph,UO):oy()})}function sg(){return Da===0&&(Da=tp()),Da}function ly(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Xo(""+a)}function gy(a,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,a.id&&c.setAttribute("form",a.id),s.parentNode.insertBefore(c,s),a=new FormData(a),c.parentNode.removeChild(c),a}function bO(a,s,c,h,y){if(s==="submit"&&c&&c.stateNode===y){var x=ly((y[jt]||null).action),_=h.submitter;_&&(s=(s=_[jt]||null)?ly(s.formAction):_.getAttribute("formAction"),s!==null&&(x=s,_=null));var V=new Zo("action","action",null,h,y);a.push({event:V,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Da!==0){var N=_?gy(y,_):new FormData(y);ml(c,{pending:!0,data:N,method:y.method,action:x},null,N)}}else typeof x=="function"&&(V.preventDefault(),N=_?gy(y,_):new FormData(y),ml(c,{pending:!0,data:N,method:y.method,action:x},x,N))},currentTarget:y}]})}}for(var og=0;og<Kf.length;og++){var ug=Kf[og],GO=ug.toLowerCase(),FO=ug[0].toUpperCase()+ug.slice(1);On(GO,"on"+FO)}On(Kp,"onAnimationEnd"),On(Xp,"onAnimationIteration"),On(qp,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(eO,"onTransitionRun"),On(tO,"onTransitionStart"),On(nO,"onTransitionCancel"),On(Yp,"onTransitionEnd"),ii("onMouseEnter",["mouseout","mouseover"]),ii("onMouseLeave",["mouseout","mouseover"]),ii("onPointerEnter",["pointerout","pointerover"]),ii("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xs));function hy(a,s){s=(s&4)!==0;for(var c=0;c<a.length;c++){var h=a[c],y=h.event;h=h.listeners;e:{var x=void 0;if(s)for(var _=h.length-1;0<=_;_--){var V=h[_],N=V.instance,$=V.currentTarget;if(V=V.listener,N!==x&&y.isPropagationStopped())break e;x=V,y.currentTarget=$;try{x(y)}catch(ee){Eu(ee)}y.currentTarget=null,x=N}else for(_=0;_<h.length;_++){if(V=h[_],N=V.instance,$=V.currentTarget,V=V.listener,N!==x&&y.isPropagationStopped())break e;x=V,y.currentTarget=$;try{x(y)}catch(ee){Eu(ee)}y.currentTarget=null,x=N}}}}function De(a,s){var c=s[Cf];c===void 0&&(c=s[Cf]=new Set);var h=a+"__bubble";c.has(h)||(py(s,a,2,!1),c.add(h))}function cg(a,s,c){var h=0;s&&(h|=4),py(c,a,h,s)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function fg(a){if(!a[Gu]){a[Gu]=!0,op.forEach(function(c){c!=="selectionchange"&&(kO.has(c)||cg(c,!1,a),cg(c,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Gu]||(s[Gu]=!0,cg("selectionchange",!1,s))}}function py(a,s,c,h){switch(ky(s)){case 2:var y=lR;break;case 8:y=gR;break;default:y=Og}c=y.bind(null,s,c,a),y=void 0,!Bf||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),h?y!==void 0?a.addEventListener(s,c,{capture:!0,passive:y}):a.addEventListener(s,c,!0):y!==void 0?a.addEventListener(s,c,{passive:y}):a.addEventListener(s,c,!1)}function lg(a,s,c,h,y){var x=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var V=h.stateNode.containerInfo;if(V===y)break;if(_===4)for(_=h.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===y)return;_=_.return}for(;V!==null;){if(_=ni(V),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){h=x=_;continue e}V=V.parentNode}}h=h.return}Cp(function(){var $=x,ee=Lf(c),ne=[];e:{var W=Qp.get(a);if(W!==void 0){var X=Zo,de=a;switch(a){case"keypress":if(Yo(c)===0)break e;case"keydown":case"keyup":X=Bw;break;case"focusin":de="focus",X=Gf;break;case"focusout":de="blur",X=Gf;break;case"beforeblur":case"afterblur":X=Gf;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=xw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=bw;break;case Kp:case Xp:case qp:X=ww;break;case Yp:X=Fw;break;case"scroll":case"scrollend":X=Tw;break;case"wheel":X=zw;break;case"copy":case"cut":case"paste":X=Rw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=mp;break;case"toggle":case"beforetoggle":X=Hw}var ge=(s&4)!==0,$e=!ge&&(a==="scroll"||a==="scrollend"),k=ge?W!==null?W+"Capture":null:W;ge=[];for(var G=$,H;G!==null;){var te=G;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||k===null||(te=ls(G,k),te!=null&&ge.push(qs(G,te,H))),$e)break;G=G.return}0<ge.length&&(W=new X(W,de,null,c,ee),ne.push({event:W,listeners:ge}))}}if((s&7)===0){e:{if(W=a==="mouseover"||a==="pointerover",X=a==="mouseout"||a==="pointerout",W&&c!==_f&&(de=c.relatedTarget||c.fromElement)&&(ni(de)||de[ti]))break e;if((X||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,X?(de=c.relatedTarget||c.toElement,X=$,de=de?ni(de):null,de!==null&&($e=o(de),ge=de.tag,de!==$e||ge!==5&&ge!==27&&ge!==6)&&(de=null)):(X=null,de=$),X!==de)){if(ge=Op,te="onMouseLeave",k="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(ge=mp,te="onPointerLeave",k="onPointerEnter",G="pointer"),$e=X==null?W:fs(X),H=de==null?W:fs(de),W=new ge(te,G+"leave",X,c,ee),W.target=$e,W.relatedTarget=H,te=null,ni(ee)===$&&(ge=new ge(k,G+"enter",de,c,ee),ge.target=H,ge.relatedTarget=$e,te=ge),$e=te,X&&de)t:{for(ge=X,k=de,G=0,H=ge;H;H=Gi(H))G++;for(H=0,te=k;te;te=Gi(te))H++;for(;0<G-H;)ge=Gi(ge),G--;for(;0<H-G;)k=Gi(k),H--;for(;G--;){if(ge===k||k!==null&&ge===k.alternate)break t;ge=Gi(ge),k=Gi(k)}ge=null}else ge=null;X!==null&&dy(ne,W,X,ge,!1),de!==null&&$e!==null&&dy(ne,$e,de,ge,!0)}}e:{if(W=$?fs($):window,X=W.nodeName&&W.nodeName.toLowerCase(),X==="select"||X==="input"&&W.type==="file")var ce=Np;else if(Bp(W))if(bp)ce=Jw;else{ce=Qw;var we=Yw}else X=W.nodeName,!X||X.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?$&&Df($.elementType)&&(ce=Np):ce=Zw;if(ce&&(ce=ce(a,$))){Up(ne,ce,c,ee);break e}we&&we(a,W,$),a==="focusout"&&$&&W.type==="number"&&$.memoizedProps.value!=null&&Mf(W,"number",W.value)}switch(we=$?fs($):window,a){case"focusin":(Bp(we)||we.contentEditable==="true")&&(gi=we,$f=$,Ss=null);break;case"focusout":Ss=$f=gi=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Wp(ne,c,ee);break;case"selectionchange":if(Iw)break;case"keydown":case"keyup":Wp(ne,c,ee)}var le;if(kf)e:{switch(a){case"compositionstart":var he="onCompositionStart";break e;case"compositionend":he="onCompositionEnd";break e;case"compositionupdate":he="onCompositionUpdate";break e}he=void 0}else li?Lp(a,c)&&(he="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(he="onCompositionStart");he&&(Mp&&c.locale!=="ko"&&(li||he!=="onCompositionStart"?he==="onCompositionEnd"&&li&&(le=Ep()):(Mr=ee,Uf="value"in Mr?Mr.value:Mr.textContent,li=!0)),we=Fu($,he),0<we.length&&(he=new Rp(he,a,null,c,ee),ne.push({event:he,listeners:we}),le?he.data=le:(le=Vp(c),le!==null&&(he.data=le)))),(le=Ww?jw(a,c):Kw(a,c))&&(he=Fu($,"onBeforeInput"),0<he.length&&(we=new Rp("onBeforeInput","beforeinput",null,c,ee),ne.push({event:we,listeners:he}),we.data=le)),bO(ne,a,$,c,ee)}hy(ne,s)})}function qs(a,s,c){return{instance:a,listener:s,currentTarget:c}}function Fu(a,s){for(var c=s+"Capture",h=[];a!==null;){var y=a,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=ls(a,c),y!=null&&h.unshift(qs(a,y,x)),y=ls(a,s),y!=null&&h.push(qs(a,y,x))),a.tag===3)return h;a=a.return}return[]}function Gi(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function dy(a,s,c,h,y){for(var x=s._reactName,_=[];c!==null&&c!==h;){var V=c,N=V.alternate,$=V.stateNode;if(V=V.tag,N!==null&&N===h)break;V!==5&&V!==26&&V!==27||$===null||(N=$,y?($=ls(c,x),$!=null&&_.unshift(qs(c,$,N))):y||($=ls(c,x),$!=null&&_.push(qs(c,$,N)))),c=c.return}_.length!==0&&a.push({event:s,listeners:_})}var zO=/\r\n?/g,AO=/\u0000|\uFFFD/g;function yy(a){return(typeof a=="string"?a:""+a).replace(zO,`
`).replace(AO,"")}function vy(a,s){return s=yy(s),yy(a)===s}function ku(){}function He(a,s,c,h,y,x){switch(c){case"children":typeof h=="string"?s==="body"||s==="textarea"&&h===""||ui(a,h):(typeof h=="number"||typeof h=="bigint")&&s!=="body"&&ui(a,""+h);break;case"className":Wo(a,"class",h);break;case"tabIndex":Wo(a,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Wo(a,c,h);break;case"style":Sp(a,h,x);break;case"data":if(s!=="object"){Wo(a,"data",h);break}case"src":case"href":if(h===""&&(s!=="a"||c!=="href")){a.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=Xo(""+h),a.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(c==="formAction"?(s!=="input"&&He(a,s,"name",y.name,y,null),He(a,s,"formEncType",y.formEncType,y,null),He(a,s,"formMethod",y.formMethod,y,null),He(a,s,"formTarget",y.formTarget,y,null)):(He(a,s,"encType",y.encType,y,null),He(a,s,"method",y.method,y,null),He(a,s,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=Xo(""+h),a.setAttribute(c,h);break;case"onClick":h!=null&&(a.onclick=ku);break;case"onScroll":h!=null&&De("scroll",a);break;case"onScrollEnd":h!=null&&De("scrollend",a);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"multiple":a.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":a.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){a.removeAttribute("xlink:href");break}c=Xo(""+h),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""+h):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":h===!0?a.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,h):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?a.setAttribute(c,h):a.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?a.removeAttribute(c):a.setAttribute(c,h);break;case"popover":De("beforetoggle",a),De("toggle",a),$o(a,"popover",h);break;case"xlinkActuate":nr(a,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":nr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":nr(a,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":nr(a,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":nr(a,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":nr(a,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":nr(a,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":nr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":nr(a,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":$o(a,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=yw.get(c)||c,$o(a,c,h))}}function gg(a,s,c,h,y,x){switch(c){case"style":Sp(a,h,x);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(r(60));a.innerHTML=c}}break;case"children":typeof h=="string"?ui(a,h):(typeof h=="number"||typeof h=="bigint")&&ui(a,""+h);break;case"onScroll":h!=null&&De("scroll",a);break;case"onScrollEnd":h!=null&&De("scrollend",a);break;case"onClick":h!=null&&(a.onclick=ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!up.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),x=a[jt]||null,x=x!=null?x[c]:null,typeof x=="function"&&a.removeEventListener(s,x,y),typeof h=="function")){typeof x!="function"&&x!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(s,h,y);break e}c in a?a[c]=h:h===!0?a.setAttribute(c,""):$o(a,c,h)}}}function _t(a,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",a),De("load",a);var h=!1,y=!1,x;for(x in c)if(c.hasOwnProperty(x)){var _=c[x];if(_!=null)switch(x){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:He(a,s,x,_,c,null)}}y&&He(a,s,"srcSet",c.srcSet,c,null),h&&He(a,s,"src",c.src,c,null);return;case"input":De("invalid",a);var V=x=_=y=null,N=null,$=null;for(h in c)if(c.hasOwnProperty(h)){var ee=c[h];if(ee!=null)switch(h){case"name":y=ee;break;case"type":_=ee;break;case"checked":N=ee;break;case"defaultChecked":$=ee;break;case"value":x=ee;break;case"defaultValue":V=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,s));break;default:He(a,s,h,ee,c,null)}}dp(a,x,V,N,$,_,y,!1),jo(a);return;case"select":De("invalid",a),h=_=x=null;for(y in c)if(c.hasOwnProperty(y)&&(V=c[y],V!=null))switch(y){case"value":x=V;break;case"defaultValue":_=V;break;case"multiple":h=V;default:He(a,s,y,V,c,null)}s=x,c=_,a.multiple=!!h,s!=null?oi(a,!!h,s,!1):c!=null&&oi(a,!!h,c,!0);return;case"textarea":De("invalid",a),x=y=h=null;for(_ in c)if(c.hasOwnProperty(_)&&(V=c[_],V!=null))switch(_){case"value":h=V;break;case"defaultValue":y=V;break;case"children":x=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:He(a,s,_,V,c,null)}vp(a,h,y,x),jo(a);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(h=c[N],h!=null))switch(N){case"selected":a.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:He(a,s,N,h,c,null)}return;case"dialog":De("beforetoggle",a),De("toggle",a),De("cancel",a),De("close",a);break;case"iframe":case"object":De("load",a);break;case"video":case"audio":for(h=0;h<Xs.length;h++)De(Xs[h],a);break;case"image":De("error",a),De("load",a);break;case"details":De("toggle",a);break;case"embed":case"source":case"link":De("error",a),De("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in c)if(c.hasOwnProperty($)&&(h=c[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:He(a,s,$,h,c,null)}return;default:if(Df(s)){for(ee in c)c.hasOwnProperty(ee)&&(h=c[ee],h!==void 0&&gg(a,s,ee,h,c,void 0));return}}for(V in c)c.hasOwnProperty(V)&&(h=c[V],h!=null&&He(a,s,V,h,c,null))}function HO(a,s,c,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,_=null,V=null,N=null,$=null,ee=null;for(X in c){var ne=c[X];if(c.hasOwnProperty(X)&&ne!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=ne;default:h.hasOwnProperty(X)||He(a,s,X,null,h,ne)}}for(var W in h){var X=h[W];if(ne=c[W],h.hasOwnProperty(W)&&(X!=null||ne!=null))switch(W){case"type":x=X;break;case"name":y=X;break;case"checked":$=X;break;case"defaultChecked":ee=X;break;case"value":_=X;break;case"defaultValue":V=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,s));break;default:X!==ne&&He(a,s,W,X,h,ne)}}mf(a,_,V,N,$,ee,x,y);return;case"select":X=_=V=W=null;for(x in c)if(N=c[x],c.hasOwnProperty(x)&&N!=null)switch(x){case"value":break;case"multiple":X=N;default:h.hasOwnProperty(x)||He(a,s,x,null,h,N)}for(y in h)if(x=h[y],N=c[y],h.hasOwnProperty(y)&&(x!=null||N!=null))switch(y){case"value":W=x;break;case"defaultValue":V=x;break;case"multiple":_=x;default:x!==N&&He(a,s,y,x,h,N)}s=V,c=_,h=X,W!=null?oi(a,!!c,W,!1):!!h!=!!c&&(s!=null?oi(a,!!c,s,!0):oi(a,!!c,c?[]:"",!1));return;case"textarea":X=W=null;for(V in c)if(y=c[V],c.hasOwnProperty(V)&&y!=null&&!h.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:He(a,s,V,null,h,y)}for(_ in h)if(y=h[_],x=c[_],h.hasOwnProperty(_)&&(y!=null||x!=null))switch(_){case"value":W=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&He(a,s,_,y,h,x)}yp(a,W,X);return;case"option":for(var de in c)if(W=c[de],c.hasOwnProperty(de)&&W!=null&&!h.hasOwnProperty(de))switch(de){case"selected":a.selected=!1;break;default:He(a,s,de,null,h,W)}for(N in h)if(W=h[N],X=c[N],h.hasOwnProperty(N)&&W!==X&&(W!=null||X!=null))switch(N){case"selected":a.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:He(a,s,N,W,h,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in c)W=c[ge],c.hasOwnProperty(ge)&&W!=null&&!h.hasOwnProperty(ge)&&He(a,s,ge,null,h,W);for($ in h)if(W=h[$],X=c[$],h.hasOwnProperty($)&&W!==X&&(W!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:He(a,s,$,W,h,X)}return;default:if(Df(s)){for(var $e in c)W=c[$e],c.hasOwnProperty($e)&&W!==void 0&&!h.hasOwnProperty($e)&&gg(a,s,$e,void 0,h,W);for(ee in h)W=h[ee],X=c[ee],!h.hasOwnProperty(ee)||W===X||W===void 0&&X===void 0||gg(a,s,ee,W,h,X);return}}for(var k in c)W=c[k],c.hasOwnProperty(k)&&W!=null&&!h.hasOwnProperty(k)&&He(a,s,k,null,h,W);for(ne in h)W=h[ne],X=c[ne],!h.hasOwnProperty(ne)||W===X||W==null&&X==null||He(a,s,ne,W,h,X)}var hg=null,pg=null;function zu(a){return a.nodeType===9?a:a.ownerDocument}function Ty(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sy(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function dg(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var yg=null;function $O(){var a=window.event;return a&&a.type==="popstate"?a===yg?!1:(yg=a,!0):(yg=null,!1)}var xy=typeof setTimeout=="function"?setTimeout:void 0,WO=typeof clearTimeout=="function"?clearTimeout:void 0,Cy=typeof Promise=="function"?Promise:void 0,jO=typeof queueMicrotask=="function"?queueMicrotask:typeof Cy<"u"?function(a){return Cy.resolve(null).then(a).catch(KO)}:xy;function KO(a){setTimeout(function(){throw a})}function Wr(a){return a==="head"}function Ey(a,s){var c=s,h=0,y=0;do{var x=c.nextSibling;if(a.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(0<h&&8>h){c=h;var _=a.ownerDocument;if(c&1&&Ys(_.documentElement),c&2&&Ys(_.body),c&4)for(c=_.head,Ys(c),_=c.firstChild;_;){var V=_.nextSibling,N=_.nodeName;_[cs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=V}}if(y===0){a.removeChild(x),no(s);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:h=c.charCodeAt(0)-48;else h=0;c=x}while(c);no(s)}function vg(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":vg(c),Ef(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function XO(a,s,c,h){for(;a.nodeType===1;){var y=c;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!h&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(h){if(!a[cs])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(x=a.getAttribute("rel"),x==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(x!==y.rel||a.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||a.getAttribute("title")!==(y.title==null?null:y.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(x=a.getAttribute("src"),(x!==(y.src==null?null:y.src)||a.getAttribute("type")!==(y.type==null?null:y.type)||a.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&a.getAttribute("name")===x)return a}else return a;if(a=mn(a.nextSibling),a===null)break}return null}function qO(a,s,c){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=mn(a.nextSibling),a===null))return null;return a}function Tg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function YO(a,s){var c=a.ownerDocument;if(a.data!=="$?"||c.readyState==="complete")s();else{var h=function(){s(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),a._reactRetry=h}}function mn(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return a}var Sg=null;function wy(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return a;s--}else c==="/$"&&s++}a=a.previousSibling}return null}function Oy(a,s,c){switch(s=zu(c),a){case"html":if(a=s.documentElement,!a)throw Error(r(452));return a;case"head":if(a=s.head,!a)throw Error(r(453));return a;case"body":if(a=s.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Ys(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);Ef(a)}var Tn=new Map,Ry=new Set;function Au(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var yr=P.d;P.d={f:QO,r:ZO,D:JO,C:PO,L:IO,m:eR,X:nR,S:tR,M:rR};function QO(){var a=yr.f(),s=Vu();return a||s}function ZO(a){var s=ri(a);s!==null&&s.tag===5&&s.type==="form"?Kd(s):yr.r(a)}var Fi=typeof document>"u"?null:document;function my(a,s,c){var h=Fi;if(h&&typeof s=="string"&&s){var y=ln(s);y='link[rel="'+a+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Ry.has(y)||(Ry.add(y),a={rel:a,crossOrigin:c,href:s},h.querySelector(y)===null&&(s=h.createElement("link"),_t(s,"link",a),Tt(s),h.head.appendChild(s)))}}function JO(a){yr.D(a),my("dns-prefetch",a,null)}function PO(a,s){yr.C(a,s),my("preconnect",a,s)}function IO(a,s,c){yr.L(a,s,c);var h=Fi;if(h&&a&&s){var y='link[rel="preload"][as="'+ln(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+ln(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+ln(c.imageSizes)+'"]')):y+='[href="'+ln(a)+'"]';var x=y;switch(s){case"style":x=ki(a);break;case"script":x=zi(a)}Tn.has(x)||(a=d({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:a,as:s},c),Tn.set(x,a),h.querySelector(y)!==null||s==="style"&&h.querySelector(Qs(x))||s==="script"&&h.querySelector(Zs(x))||(s=h.createElement("link"),_t(s,"link",a),Tt(s),h.head.appendChild(s)))}}function eR(a,s){yr.m(a,s);var c=Fi;if(c&&a){var h=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+ln(h)+'"][href="'+ln(a)+'"]',x=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=zi(a)}if(!Tn.has(x)&&(a=d({rel:"modulepreload",href:a},s),Tn.set(x,a),c.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zs(x)))return}h=c.createElement("link"),_t(h,"link",a),Tt(h),c.head.appendChild(h)}}}function tR(a,s,c){yr.S(a,s,c);var h=Fi;if(h&&a){var y=ai(h).hoistableStyles,x=ki(a);s=s||"default";var _=y.get(x);if(!_){var V={loading:0,preload:null};if(_=h.querySelector(Qs(x)))V.loading=5;else{a=d({rel:"stylesheet",href:a,"data-precedence":s},c),(c=Tn.get(x))&&xg(a,c);var N=_=h.createElement("link");Tt(N),_t(N,"link",a),N._p=new Promise(function($,ee){N.onload=$,N.onerror=ee}),N.addEventListener("load",function(){V.loading|=1}),N.addEventListener("error",function(){V.loading|=2}),V.loading|=4,Hu(_,s,h)}_={type:"stylesheet",instance:_,count:1,state:V},y.set(x,_)}}}function nR(a,s){yr.X(a,s);var c=Fi;if(c&&a){var h=ai(c).hoistableScripts,y=zi(a),x=h.get(y);x||(x=c.querySelector(Zs(y)),x||(a=d({src:a,async:!0},s),(s=Tn.get(y))&&Cg(a,s),x=c.createElement("script"),Tt(x),_t(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function rR(a,s){yr.M(a,s);var c=Fi;if(c&&a){var h=ai(c).hoistableScripts,y=zi(a),x=h.get(y);x||(x=c.querySelector(Zs(y)),x||(a=d({src:a,async:!0,type:"module"},s),(s=Tn.get(y))&&Cg(a,s),x=c.createElement("script"),Tt(x),_t(x,"link",a),c.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},h.set(y,x))}}function My(a,s,c,h){var y=(y=oe.current)?Au(y):null;if(!y)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=ki(c.href),c=ai(y).hoistableStyles,h=c.get(s),h||(h={type:"style",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=ki(c.href);var x=ai(y).hoistableStyles,_=x.get(a);if(_||(y=y.ownerDocument||y,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(a,_),(x=y.querySelector(Qs(a)))&&!x._p&&(_.instance=x,_.state.loading=5),Tn.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Tn.set(a,c),x||aR(y,a,c,_.state))),s&&h===null)throw Error(r(528,""));return _}if(s&&h!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zi(c),c=ai(y).hoistableScripts,h=c.get(s),h||(h={type:"script",instance:null,count:0,state:null},c.set(s,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ki(a){return'href="'+ln(a)+'"'}function Qs(a){return'link[rel="stylesheet"]['+a+"]"}function Dy(a){return d({},a,{"data-precedence":a.precedence,precedence:null})}function aR(a,s,c,h){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?h.loading=1:(s=a.createElement("link"),h.preload=s,s.addEventListener("load",function(){return h.loading|=1}),s.addEventListener("error",function(){return h.loading|=2}),_t(s,"link",c),Tt(s),a.head.appendChild(s))}function zi(a){return'[src="'+ln(a)+'"]'}function Zs(a){return"script[async]"+a}function _y(a,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var h=a.querySelector('style[data-href~="'+ln(c.href)+'"]');if(h)return s.instance=h,Tt(h),h;var y=d({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(a.ownerDocument||a).createElement("style"),Tt(h),_t(h,"style",y),Hu(h,c.precedence,a),s.instance=h;case"stylesheet":y=ki(c.href);var x=a.querySelector(Qs(y));if(x)return s.state.loading|=4,s.instance=x,Tt(x),x;h=Dy(c),(y=Tn.get(y))&&xg(h,y),x=(a.ownerDocument||a).createElement("link"),Tt(x);var _=x;return _._p=new Promise(function(V,N){_.onload=V,_.onerror=N}),_t(x,"link",h),s.state.loading|=4,Hu(x,c.precedence,a),s.instance=x;case"script":return x=zi(c.src),(y=a.querySelector(Zs(x)))?(s.instance=y,Tt(y),y):(h=c,(y=Tn.get(x))&&(h=d({},c),Cg(h,y)),a=a.ownerDocument||a,y=a.createElement("script"),Tt(y),_t(y,"link",h),a.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(h=s.instance,s.state.loading|=4,Hu(h,c.precedence,a));return s.instance}function Hu(a,s,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,x=y,_=0;_<h.length;_++){var V=h[_];if(V.dataset.precedence===s)x=V;else if(x!==y)break}x?x.parentNode.insertBefore(a,x.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(a,s.firstChild))}function xg(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function Cg(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var $u=null;function Ly(a,s,c){if($u===null){var h=new Map,y=$u=new Map;y.set(c,h)}else y=$u,h=y.get(c),h||(h=new Map,y.set(c,h));if(h.has(a))return h;for(h.set(a,null),c=c.getElementsByTagName(a),y=0;y<c.length;y++){var x=c[y];if(!(x[cs]||x[Ut]||a==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(s)||"";_=a+_;var V=h.get(_);V?V.push(x):h.set(_,[x])}}return h}function Vy(a,s,c){a=a.ownerDocument||a,a.head.insertBefore(c,s==="title"?a.querySelector("head > title"):null)}function iR(a,s,c){if(c===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function By(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Js=null;function sR(){}function oR(a,s,c){if(Js===null)throw Error(r(475));var h=Js;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=ki(c.href),x=a.querySelector(Qs(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(h.count++,h=Wu.bind(h),a.then(h,h)),s.state.loading|=4,s.instance=x,Tt(x);return}x=a.ownerDocument||a,c=Dy(c),(y=Tn.get(y))&&xg(c,y),x=x.createElement("link"),Tt(x);var _=x;_._p=new Promise(function(V,N){_.onload=V,_.onerror=N}),_t(x,"link",c),s.instance=x}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(h.count++,s=Wu.bind(h),a.addEventListener("load",s),a.addEventListener("error",s))}}function uR(){if(Js===null)throw Error(r(475));var a=Js;return a.stylesheets&&a.count===0&&Eg(a,a.stylesheets),0<a.count?function(s){var c=setTimeout(function(){if(a.stylesheets&&Eg(a,a.stylesheets),a.unsuspend){var h=a.unsuspend;a.unsuspend=null,h()}},6e4);return a.unsuspend=s,function(){a.unsuspend=null,clearTimeout(c)}}:null}function Wu(){if(this.count--,this.count===0){if(this.stylesheets)Eg(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ju=null;function Eg(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ju=new Map,s.forEach(cR,a),ju=null,Wu.call(a))}function cR(a,s){if(!(s.state.loading&4)){var c=ju.get(a);if(c)var h=c.get(null);else{c=new Map,ju.set(a,c);for(var y=a.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var _=y[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(c.set(_.dataset.precedence,_),h=_)}h&&c.set(null,h)}y=s.instance,_=y.getAttribute("data-precedence"),x=c.get(_)||h,x===h&&c.set(null,y),c.set(_,y),this.count++,h=Wu.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),x?x.parentNode.insertBefore(y,x.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(y,a.firstChild)),s.state.loading|=4}}var Ps={$$typeof:w,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function fR(a,s,c,h,y,x,_,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tf(0),this.hiddenUpdates=Tf(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Uy(a,s,c,h,y,x,_,V,N,$,ee,ne){return a=new fR(a,s,c,_,V,N,$,ne),s=1,x===!0&&(s|=24),x=tn(3,null,null,s),a.current=x,x.stateNode=a,s=rl(),s.refCount++,a.pooledCache=s,s.refCount++,x.memoizedState={element:h,isDehydrated:c,cache:s},ol(x),a}function Ny(a){return a?(a=yi,a):yi}function by(a,s,c,h,y,x){y=Ny(y),h.context===null?h.context=y:h.pendingContext=y,h=Lr(s),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=Vr(a,h,s),c!==null&&(on(c,a,s),Ds(c,a,s))}function Gy(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<s?c:s}}function wg(a,s){Gy(a,s),(a=a.alternate)&&Gy(a,s)}function Fy(a){if(a.tag===13){var s=di(a,67108864);s!==null&&on(s,a,67108864),wg(a,67108864)}}var Ku=!0;function lR(a,s,c,h){var y=F.T;F.T=null;var x=P.p;try{P.p=2,Og(a,s,c,h)}finally{P.p=x,F.T=y}}function gR(a,s,c,h){var y=F.T;F.T=null;var x=P.p;try{P.p=8,Og(a,s,c,h)}finally{P.p=x,F.T=y}}function Og(a,s,c,h){if(Ku){var y=Rg(h);if(y===null)lg(a,s,h,Xu,c),zy(a,h);else if(pR(y,a,s,c,h))h.stopPropagation();else if(zy(a,h),s&4&&-1<hR.indexOf(a)){for(;y!==null;){var x=ri(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=la(x.pendingLanes);if(_!==0){var V=x;for(V.pendingLanes|=2,V.entangledLanes|=2;_;){var N=1<<31-It(_);V.entanglements[1]|=N,_&=~N}$n(x),(Fe&6)===0&&(_u=Fn()+500,Ks(0))}}break;case 13:V=di(x,2),V!==null&&on(V,x,2),Vu(),wg(x,2)}if(x=Rg(h),x===null&&lg(a,s,h,Xu,c),x===y)break;y=x}y!==null&&h.stopPropagation()}else lg(a,s,h,null,c)}}function Rg(a){return a=Lf(a),mg(a)}var Xu=null;function mg(a){if(Xu=null,a=ni(a),a!==null){var s=o(a);if(s===null)a=null;else{var c=s.tag;if(c===13){if(a=u(s),a!==null)return a;a=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Xu=a,null}function ky(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(PE()){case Ph:return 2;case Ih:return 8;case ko:case IE:return 32;case ep:return 268435456;default:return 32}default:return 32}}var Mg=!1,jr=null,Kr=null,Xr=null,Is=new Map,eo=new Map,qr=[],hR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(a,s){switch(a){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Xr=null;break;case"pointerover":case"pointerout":Is.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(s.pointerId)}}function to(a,s,c,h,y,x){return a===null||a.nativeEvent!==x?(a={blockedOn:s,domEventName:c,eventSystemFlags:h,nativeEvent:x,targetContainers:[y]},s!==null&&(s=ri(s),s!==null&&Fy(s)),a):(a.eventSystemFlags|=h,s=a.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),a)}function pR(a,s,c,h,y){switch(s){case"focusin":return jr=to(jr,a,s,c,h,y),!0;case"dragenter":return Kr=to(Kr,a,s,c,h,y),!0;case"mouseover":return Xr=to(Xr,a,s,c,h,y),!0;case"pointerover":var x=y.pointerId;return Is.set(x,to(Is.get(x)||null,a,s,c,h,y)),!0;case"gotpointercapture":return x=y.pointerId,eo.set(x,to(eo.get(x)||null,a,s,c,h,y)),!0}return!1}function Ay(a){var s=ni(a.target);if(s!==null){var c=o(s);if(c!==null){if(s=c.tag,s===13){if(s=u(c),s!==null){a.blockedOn=s,ow(a.priority,function(){if(c.tag===13){var h=sn();h=Sf(h);var y=di(c,h);y!==null&&on(y,c,h),wg(c,h)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function qu(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var c=Rg(a.nativeEvent);if(c===null){c=a.nativeEvent;var h=new c.constructor(c.type,c);_f=h,c.target.dispatchEvent(h),_f=null}else return s=ri(c),s!==null&&Fy(s),a.blockedOn=c,!1;s.shift()}return!0}function Hy(a,s,c){qu(a)&&c.delete(s)}function dR(){Mg=!1,jr!==null&&qu(jr)&&(jr=null),Kr!==null&&qu(Kr)&&(Kr=null),Xr!==null&&qu(Xr)&&(Xr=null),Is.forEach(Hy),eo.forEach(Hy)}function Yu(a,s){a.blockedOn===s&&(a.blockedOn=null,Mg||(Mg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dR)))}var Qu=null;function $y(a){Qu!==a&&(Qu=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qu===a&&(Qu=null);for(var s=0;s<a.length;s+=3){var c=a[s],h=a[s+1],y=a[s+2];if(typeof h!="function"){if(mg(h||c)===null)continue;break}var x=ri(c);x!==null&&(a.splice(s,3),s-=3,ml(x,{pending:!0,data:y,method:c.method,action:h},h,y))}}))}function no(a){function s(N){return Yu(N,a)}jr!==null&&Yu(jr,a),Kr!==null&&Yu(Kr,a),Xr!==null&&Yu(Xr,a),Is.forEach(s),eo.forEach(s);for(var c=0;c<qr.length;c++){var h=qr[c];h.blockedOn===a&&(h.blockedOn=null)}for(;0<qr.length&&(c=qr[0],c.blockedOn===null);)Ay(c),c.blockedOn===null&&qr.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var y=c[h],x=c[h+1],_=y[jt]||null;if(typeof x=="function")_||$y(c);else if(_){var V=null;if(x&&x.hasAttribute("formAction")){if(y=x,_=x[jt]||null)V=_.formAction;else if(mg(y)!==null)continue}else V=_.action;typeof V=="function"?c[h+1]=V:(c.splice(h,3),h-=3),$y(c)}}}function Dg(a){this._internalRoot=a}Zu.prototype.render=Dg.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,h=sn();by(c,h,a,s,null,null)},Zu.prototype.unmount=Dg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;by(a.current,2,null,a,null,null),Vu(),s[ti]=null}};function Zu(a){this._internalRoot=a}Zu.prototype.unstable_scheduleHydration=function(a){if(a){var s=ip();a={blockedOn:null,target:a,priority:s};for(var c=0;c<qr.length&&s!==0&&s<qr[c].priority;c++);qr.splice(c,0,a),c===0&&Ay(a)}};var Wy=e.version;if(Wy!=="19.1.1")throw Error(r(527,Wy,"19.1.1"));P.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=l(s),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var yR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{ss=Ju.inject(yR),Pt=Ju}catch{}}return io.createRoot=function(a,s){if(!i(a))throw Error(r(299));var c=!1,h="",y=i1,x=s1,_=o1,V=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(V=s.unstable_transitionCallbacks)),s=Uy(a,1,!1,null,null,c,h,y,x,_,V,null),a[ti]=s.current,fg(a),new Dg(s)},io.hydrateRoot=function(a,s,c){if(!i(a))throw Error(r(299));var h=!1,y="",x=i1,_=s1,V=o1,N=null,$=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(N=c.unstable_transitionCallbacks),c.formState!==void 0&&($=c.formState)),s=Uy(a,1,!0,s,c??null,h,y,x,_,V,N,$),s.context=Ny(null),c=s.current,h=sn(),h=Sf(h),y=Lr(h),y.callback=null,Vr(c,y,h),c=h,s.current.lanes=c,us(s,c),$n(s),a[ti]=s.current,fg(a),new Zu(s)},io.version="19.1.1",io}var Iy;function MR(){if(Iy)return Vg.exports;Iy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vg.exports=mR(),Vg.exports}var DR=MR(),_e=1e-6,Rt=typeof Float32Array<"u"?Float32Array:Array,_R=Math.PI/180;function LR(t){return t*_R}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function gS(){var t=new Rt(9);return Rt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ih(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function VR(t){var e=new Rt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function BR(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function UR(t,e,n,r,i,o,u,f,l){var g=new Rt(9);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=u,g[7]=f,g[8]=l,g}function NR(t,e,n,r,i,o,u,f,l,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=u,t[6]=f,t[7]=l,t[8]=g,t}function Pa(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function hS(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function sh(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],f=e[5],l=e[6],g=e[7],d=e[8],p=d*u-f*g,v=-d*o+f*l,T=g*o-u*l,E=n*p+r*v+i*T;return E?(E=1/E,t[0]=p*E,t[1]=(-d*r+i*g)*E,t[2]=(f*r-i*u)*E,t[3]=v*E,t[4]=(d*n-i*l)*E,t[5]=(-f*n+i*o)*E,t[6]=T*E,t[7]=(-g*n+r*l)*E,t[8]=(u*n-r*o)*E,t):null}function bR(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],f=e[5],l=e[6],g=e[7],d=e[8];return t[0]=u*d-f*g,t[1]=i*g-r*d,t[2]=r*f-i*u,t[3]=f*l-o*d,t[4]=n*d-i*l,t[5]=i*o-n*f,t[6]=o*g-u*l,t[7]=r*l-n*g,t[8]=n*u-r*o,t}function GR(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],u=t[5],f=t[6],l=t[7],g=t[8];return e*(g*o-u*l)+n*(-g*i+u*f)+r*(l*i-o*f)}function pS(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=e[4],l=e[5],g=e[6],d=e[7],p=e[8],v=n[0],T=n[1],E=n[2],S=n[3],C=n[4],R=n[5],D=n[6],w=n[7],O=n[8];return t[0]=v*r+T*u+E*g,t[1]=v*i+T*f+E*d,t[2]=v*o+T*l+E*p,t[3]=S*r+C*u+R*g,t[4]=S*i+C*f+R*d,t[5]=S*o+C*l+R*p,t[6]=D*r+w*u+O*g,t[7]=D*i+w*f+O*d,t[8]=D*o+w*l+O*p,t}function FR(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=e[4],l=e[5],g=e[6],d=e[7],p=e[8],v=n[0],T=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=u,t[4]=f,t[5]=l,t[6]=v*r+T*u+g,t[7]=v*i+T*f+d,t[8]=v*o+T*l+p,t}function kR(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=e[4],l=e[5],g=e[6],d=e[7],p=e[8],v=Math.sin(n),T=Math.cos(n);return t[0]=T*r+v*u,t[1]=T*i+v*f,t[2]=T*o+v*l,t[3]=T*u-v*r,t[4]=T*f-v*i,t[5]=T*l-v*o,t[6]=g,t[7]=d,t[8]=p,t}function zR(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function AR(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function HR(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function $R(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function WR(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function jR(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=n+n,f=r+r,l=i+i,g=n*u,d=r*u,p=r*f,v=i*u,T=i*f,E=i*l,S=o*u,C=o*f,R=o*l;return t[0]=1-p-E,t[3]=d-R,t[6]=v+C,t[1]=d+R,t[4]=1-g-E,t[7]=T-S,t[2]=v-C,t[5]=T+S,t[8]=1-g-p,t}function KR(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],f=e[5],l=e[6],g=e[7],d=e[8],p=e[9],v=e[10],T=e[11],E=e[12],S=e[13],C=e[14],R=e[15],D=n*f-r*u,w=n*l-i*u,O=n*g-o*u,m=r*l-i*f,M=r*g-o*f,U=i*g-o*l,b=d*S-p*E,j=d*C-v*E,z=d*R-T*E,A=p*C-v*S,K=p*R-T*S,Y=v*R-T*C,Z=D*Y-w*K+O*A+m*z-M*j+U*b;return Z?(Z=1/Z,t[0]=(f*Y-l*K+g*A)*Z,t[1]=(l*z-u*Y-g*j)*Z,t[2]=(u*K-f*z+g*b)*Z,t[3]=(i*K-r*Y-o*A)*Z,t[4]=(n*Y-i*z+o*j)*Z,t[5]=(r*z-n*K-o*b)*Z,t[6]=(S*U-C*M+R*m)*Z,t[7]=(C*O-E*U-R*w)*Z,t[8]=(E*M-S*O+R*D)*Z,t):null}function XR(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function qR(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function YR(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function QR(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function dS(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function ZR(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function JR(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function PR(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function IR(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],u=t[4],f=t[5],l=t[6],g=t[7],d=t[8],p=e[0],v=e[1],T=e[2],E=e[3],S=e[4],C=e[5],R=e[6],D=e[7],w=e[8];return Math.abs(n-p)<=_e*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(r-v)<=_e*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(i-T)<=_e*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-E)<=_e*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(u-S)<=_e*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(f-C)<=_e*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(l-R)<=_e*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(g-D)<=_e*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(d-w)<=_e*Math.max(1,Math.abs(d),Math.abs(w))}var em=pS,tm=dS;const nm=Object.freeze(Object.defineProperty({__proto__:null,add:QR,adjoint:bR,clone:VR,copy:BR,create:gS,determinant:GR,equals:IR,exactEquals:PR,frob:YR,fromMat2d:WR,fromMat4:ih,fromQuat:jR,fromRotation:HR,fromScaling:$R,fromTranslation:AR,fromValues:UR,identity:Pa,invert:sh,mul:em,multiply:pS,multiplyScalar:ZR,multiplyScalarAndAdd:JR,normalFromMat4:KR,projection:XR,rotate:kR,scale:zR,set:NR,str:qR,sub:tm,subtract:dS,translate:FR,transpose:hS},Symbol.toStringTag,{value:"Module"}));function oh(){var t=new Rt(16);return Rt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function rm(t){var e=new Rt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Lt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function am(t,e,n,r,i,o,u,f,l,g,d,p,v,T,E,S){var C=new Rt(16);return C[0]=t,C[1]=e,C[2]=n,C[3]=r,C[4]=i,C[5]=o,C[6]=u,C[7]=f,C[8]=l,C[9]=g,C[10]=d,C[11]=p,C[12]=v,C[13]=T,C[14]=E,C[15]=S,C}function im(t,e,n,r,i,o,u,f,l,g,d,p,v,T,E,S,C){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=u,t[6]=f,t[7]=l,t[8]=g,t[9]=d,t[10]=p,t[11]=v,t[12]=T,t[13]=E,t[14]=S,t[15]=C,t}function Re(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],u=e[7],f=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=u,t[14]=f}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function $t(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],f=e[5],l=e[6],g=e[7],d=e[8],p=e[9],v=e[10],T=e[11],E=e[12],S=e[13],C=e[14],R=e[15],D=n*f-r*u,w=n*l-i*u,O=n*g-o*u,m=r*l-i*f,M=r*g-o*f,U=i*g-o*l,b=d*S-p*E,j=d*C-v*E,z=d*R-T*E,A=p*C-v*S,K=p*R-T*S,Y=v*R-T*C,Z=D*Y-w*K+O*A+m*z-M*j+U*b;return Z?(Z=1/Z,t[0]=(f*Y-l*K+g*A)*Z,t[1]=(i*K-r*Y-o*A)*Z,t[2]=(S*U-C*M+R*m)*Z,t[3]=(v*M-p*U-T*m)*Z,t[4]=(l*z-u*Y-g*j)*Z,t[5]=(n*Y-i*z+o*j)*Z,t[6]=(C*O-E*U-R*w)*Z,t[7]=(d*U-v*O+T*w)*Z,t[8]=(u*K-f*z+g*b)*Z,t[9]=(r*z-n*K-o*b)*Z,t[10]=(E*M-S*O+R*D)*Z,t[11]=(p*O-d*M-T*D)*Z,t[12]=(f*j-u*A-l*b)*Z,t[13]=(n*A-r*j+i*b)*Z,t[14]=(S*w-E*m-C*D)*Z,t[15]=(d*m-p*w+v*D)*Z,t):null}function sm(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],f=e[5],l=e[6],g=e[7],d=e[8],p=e[9],v=e[10],T=e[11],E=e[12],S=e[13],C=e[14],R=e[15];return t[0]=f*(v*R-T*C)-p*(l*R-g*C)+S*(l*T-g*v),t[1]=-(r*(v*R-T*C)-p*(i*R-o*C)+S*(i*T-o*v)),t[2]=r*(l*R-g*C)-f*(i*R-o*C)+S*(i*g-o*l),t[3]=-(r*(l*T-g*v)-f*(i*T-o*v)+p*(i*g-o*l)),t[4]=-(u*(v*R-T*C)-d*(l*R-g*C)+E*(l*T-g*v)),t[5]=n*(v*R-T*C)-d*(i*R-o*C)+E*(i*T-o*v),t[6]=-(n*(l*R-g*C)-u*(i*R-o*C)+E*(i*g-o*l)),t[7]=n*(l*T-g*v)-u*(i*T-o*v)+d*(i*g-o*l),t[8]=u*(p*R-T*S)-d*(f*R-g*S)+E*(f*T-g*p),t[9]=-(n*(p*R-T*S)-d*(r*R-o*S)+E*(r*T-o*p)),t[10]=n*(f*R-g*S)-u*(r*R-o*S)+E*(r*g-o*f),t[11]=-(n*(f*T-g*p)-u*(r*T-o*p)+d*(r*g-o*f)),t[12]=-(u*(p*C-v*S)-d*(f*C-l*S)+E*(f*v-l*p)),t[13]=n*(p*C-v*S)-d*(r*C-i*S)+E*(r*v-i*p),t[14]=-(n*(f*C-l*S)-u*(r*C-i*S)+E*(r*l-i*f)),t[15]=n*(f*v-l*p)-u*(r*v-i*p)+d*(r*l-i*f),t}function om(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],u=t[5],f=t[6],l=t[7],g=t[8],d=t[9],p=t[10],v=t[11],T=t[12],E=t[13],S=t[14],C=t[15],R=e*u-n*o,D=e*f-r*o,w=e*l-i*o,O=n*f-r*u,m=n*l-i*u,M=r*l-i*f,U=g*E-d*T,b=g*S-p*T,j=g*C-v*T,z=d*S-p*E,A=d*C-v*E,K=p*C-v*S;return R*K-D*A+w*z+O*j-m*b+M*U}function yt(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=e[4],l=e[5],g=e[6],d=e[7],p=e[8],v=e[9],T=e[10],E=e[11],S=e[12],C=e[13],R=e[14],D=e[15],w=n[0],O=n[1],m=n[2],M=n[3];return t[0]=w*r+O*f+m*p+M*S,t[1]=w*i+O*l+m*v+M*C,t[2]=w*o+O*g+m*T+M*R,t[3]=w*u+O*d+m*E+M*D,w=n[4],O=n[5],m=n[6],M=n[7],t[4]=w*r+O*f+m*p+M*S,t[5]=w*i+O*l+m*v+M*C,t[6]=w*o+O*g+m*T+M*R,t[7]=w*u+O*d+m*E+M*D,w=n[8],O=n[9],m=n[10],M=n[11],t[8]=w*r+O*f+m*p+M*S,t[9]=w*i+O*l+m*v+M*C,t[10]=w*o+O*g+m*T+M*R,t[11]=w*u+O*d+m*E+M*D,w=n[12],O=n[13],m=n[14],M=n[15],t[12]=w*r+O*f+m*p+M*S,t[13]=w*i+O*l+m*v+M*C,t[14]=w*o+O*g+m*T+M*R,t[15]=w*u+O*d+m*E+M*D,t}function ct(t,e,n){var r=n[0],i=n[1],o=n[2],u,f,l,g,d,p,v,T,E,S,C,R;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(u=e[0],f=e[1],l=e[2],g=e[3],d=e[4],p=e[5],v=e[6],T=e[7],E=e[8],S=e[9],C=e[10],R=e[11],t[0]=u,t[1]=f,t[2]=l,t[3]=g,t[4]=d,t[5]=p,t[6]=v,t[7]=T,t[8]=E,t[9]=S,t[10]=C,t[11]=R,t[12]=u*r+d*i+E*o+e[12],t[13]=f*r+p*i+S*o+e[13],t[14]=l*r+v*i+C*o+e[14],t[15]=g*r+T*i+R*o+e[15]),t}function Xa(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Dn(t,e,n,r){var i=r[0],o=r[1],u=r[2],f=Math.hypot(i,o,u),l,g,d,p,v,T,E,S,C,R,D,w,O,m,M,U,b,j,z,A,K,Y,Z,se;return f<_e?null:(f=1/f,i*=f,o*=f,u*=f,l=Math.sin(n),g=Math.cos(n),d=1-g,p=e[0],v=e[1],T=e[2],E=e[3],S=e[4],C=e[5],R=e[6],D=e[7],w=e[8],O=e[9],m=e[10],M=e[11],U=i*i*d+g,b=o*i*d+u*l,j=u*i*d-o*l,z=i*o*d-u*l,A=o*o*d+g,K=u*o*d+i*l,Y=i*u*d+o*l,Z=o*u*d-i*l,se=u*u*d+g,t[0]=p*U+S*b+w*j,t[1]=v*U+C*b+O*j,t[2]=T*U+R*b+m*j,t[3]=E*U+D*b+M*j,t[4]=p*z+S*A+w*K,t[5]=v*z+C*A+O*K,t[6]=T*z+R*A+m*K,t[7]=E*z+D*A+M*K,t[8]=p*Y+S*Z+w*se,t[9]=v*Y+C*Z+O*se,t[10]=T*Y+R*Z+m*se,t[11]=E*Y+D*Z+M*se,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function uh(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],u=e[5],f=e[6],l=e[7],g=e[8],d=e[9],p=e[10],v=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+g*r,t[5]=u*i+d*r,t[6]=f*i+p*r,t[7]=l*i+v*r,t[8]=g*i-o*r,t[9]=d*i-u*r,t[10]=p*i-f*r,t[11]=v*i-l*r,t}function ch(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],u=e[1],f=e[2],l=e[3],g=e[8],d=e[9],p=e[10],v=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-g*r,t[1]=u*i-d*r,t[2]=f*i-p*r,t[3]=l*i-v*r,t[8]=o*r+g*i,t[9]=u*r+d*i,t[10]=f*r+p*i,t[11]=l*r+v*i,t}function fh(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],u=e[1],f=e[2],l=e[3],g=e[4],d=e[5],p=e[6],v=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+g*r,t[1]=u*i+d*r,t[2]=f*i+p*r,t[3]=l*i+v*r,t[4]=g*i-o*r,t[5]=d*i-u*r,t[6]=p*i-f*r,t[7]=v*i-l*r,t}function yS(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function vS(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function TS(t,e,n){var r=n[0],i=n[1],o=n[2],u=Math.hypot(r,i,o),f,l,g;return u<_e?null:(u=1/u,r*=u,i*=u,o*=u,f=Math.sin(e),l=Math.cos(e),g=1-l,t[0]=r*r*g+l,t[1]=i*r*g+o*f,t[2]=o*r*g-i*f,t[3]=0,t[4]=r*i*g-o*f,t[5]=i*i*g+l,t[6]=o*i*g+r*f,t[7]=0,t[8]=r*o*g+i*f,t[9]=i*o*g-r*f,t[10]=o*o*g+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function um(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function cm(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fm(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SS(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=r+r,l=i+i,g=o+o,d=r*f,p=r*l,v=r*g,T=i*l,E=i*g,S=o*g,C=u*f,R=u*l,D=u*g;return t[0]=1-(T+S),t[1]=p+D,t[2]=v-R,t[3]=0,t[4]=p-D,t[5]=1-(d+S),t[6]=E+C,t[7]=0,t[8]=v+R,t[9]=E-C,t[10]=1-(d+T),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function lm(t,e){var n=new Rt(3),r=-e[0],i=-e[1],o=-e[2],u=e[3],f=e[4],l=e[5],g=e[6],d=e[7],p=r*r+i*i+o*o+u*u;return p>0?(n[0]=(f*u+d*r+l*o-g*i)*2/p,n[1]=(l*u+d*i+g*r-f*o)*2/p,n[2]=(g*u+d*o+f*i-l*r)*2/p):(n[0]=(f*u+d*r+l*o-g*i)*2,n[1]=(l*u+d*i+g*r-f*o)*2,n[2]=(g*u+d*o+f*i-l*r)*2),SS(t,e,n),t}function gm(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xS(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],u=e[5],f=e[6],l=e[8],g=e[9],d=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,u,f),t[2]=Math.hypot(l,g,d),t}function D0(t,e){var n=new Rt(3);xS(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],u=e[0]*r,f=e[1]*i,l=e[2]*o,g=e[4]*r,d=e[5]*i,p=e[6]*o,v=e[8]*r,T=e[9]*i,E=e[10]*o,S=u+d+E,C=0;return S>0?(C=Math.sqrt(S+1)*2,t[3]=.25*C,t[0]=(p-T)/C,t[1]=(v-l)/C,t[2]=(f-g)/C):u>d&&u>E?(C=Math.sqrt(1+u-d-E)*2,t[3]=(p-T)/C,t[0]=.25*C,t[1]=(f+g)/C,t[2]=(v+l)/C):d>E?(C=Math.sqrt(1+d-u-E)*2,t[3]=(v-l)/C,t[0]=(f+g)/C,t[1]=.25*C,t[2]=(p+T)/C):(C=Math.sqrt(1+E-u-d)*2,t[3]=(f-g)/C,t[0]=(v+l)/C,t[1]=(p+T)/C,t[2]=.25*C),t}function CS(t,e,n,r){var i=e[0],o=e[1],u=e[2],f=e[3],l=i+i,g=o+o,d=u+u,p=i*l,v=i*g,T=i*d,E=o*g,S=o*d,C=u*d,R=f*l,D=f*g,w=f*d,O=r[0],m=r[1],M=r[2];return t[0]=(1-(E+C))*O,t[1]=(v+w)*O,t[2]=(T-D)*O,t[3]=0,t[4]=(v-w)*m,t[5]=(1-(p+C))*m,t[6]=(S+R)*m,t[7]=0,t[8]=(T+D)*M,t[9]=(S-R)*M,t[10]=(1-(p+E))*M,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function hm(t,e,n,r,i){var o=e[0],u=e[1],f=e[2],l=e[3],g=o+o,d=u+u,p=f+f,v=o*g,T=o*d,E=o*p,S=u*d,C=u*p,R=f*p,D=l*g,w=l*d,O=l*p,m=r[0],M=r[1],U=r[2],b=i[0],j=i[1],z=i[2],A=(1-(S+R))*m,K=(T+O)*m,Y=(E-w)*m,Z=(T-O)*M,se=(1-(v+R))*M,F=(C+D)*M,P=(E+w)*U,ie=(C-D)*U,I=(1-(v+S))*U;return t[0]=A,t[1]=K,t[2]=Y,t[3]=0,t[4]=Z,t[5]=se,t[6]=F,t[7]=0,t[8]=P,t[9]=ie,t[10]=I,t[11]=0,t[12]=n[0]+b-(A*b+Z*j+P*z),t[13]=n[1]+j-(K*b+se*j+ie*z),t[14]=n[2]+z-(Y*b+F*j+I*z),t[15]=1,t}function Fc(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=n+n,f=r+r,l=i+i,g=n*u,d=r*u,p=r*f,v=i*u,T=i*f,E=i*l,S=o*u,C=o*f,R=o*l;return t[0]=1-p-E,t[1]=d+R,t[2]=v-C,t[3]=0,t[4]=d-R,t[5]=1-g-E,t[6]=T+S,t[7]=0,t[8]=v+C,t[9]=T-S,t[10]=1-g-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pm(t,e,n,r,i,o,u){var f=1/(n-e),l=1/(i-r),g=1/(o-u);return t[0]=o*2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*f,t[9]=(i+r)*l,t[10]=(u+o)*g,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*g,t[15]=0,t}function ES(t,e,n,r,i){var o=1/Math.tan(e/2),u;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(u=1/(r-i),t[10]=(i+r)*u,t[14]=2*i*r*u):(t[10]=-1,t[14]=-2*r),t}var dm=ES;function ym(t,e,n,r,i){var o=1/Math.tan(e/2),u;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(u=1/(r-i),t[10]=i*u,t[14]=i*r*u):(t[10]=-1,t[14]=-r),t}function vm(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),f=Math.tan(e.rightDegrees*Math.PI/180),l=2/(u+f),g=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=-((u-f)*l*.5),t[9]=(i-o)*g*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function wS(t,e,n,r,i,o,u){var f=1/(e-n),l=1/(r-i),g=1/(o-u);return t[0]=-2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+n)*f,t[13]=(i+r)*l,t[14]=(u+o)*g,t[15]=1,t}var OS=wS;function Tm(t,e,n,r,i,o,u){var f=1/(e-n),l=1/(r-i),g=1/(o-u);return t[0]=-2*f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=g,t[11]=0,t[12]=(e+n)*f,t[13]=(i+r)*l,t[14]=o*g,t[15]=1,t}function RS(t,e,n,r){var i,o,u,f,l,g,d,p,v,T,E=e[0],S=e[1],C=e[2],R=r[0],D=r[1],w=r[2],O=n[0],m=n[1],M=n[2];return Math.abs(E-O)<_e&&Math.abs(S-m)<_e&&Math.abs(C-M)<_e?Re(t):(d=E-O,p=S-m,v=C-M,T=1/Math.hypot(d,p,v),d*=T,p*=T,v*=T,i=D*v-w*p,o=w*d-R*v,u=R*p-D*d,T=Math.hypot(i,o,u),T?(T=1/T,i*=T,o*=T,u*=T):(i=0,o=0,u=0),f=p*u-v*o,l=v*i-d*u,g=d*o-p*i,T=Math.hypot(f,l,g),T?(T=1/T,f*=T,l*=T,g*=T):(f=0,l=0,g=0),t[0]=i,t[1]=f,t[2]=d,t[3]=0,t[4]=o,t[5]=l,t[6]=p,t[7]=0,t[8]=u,t[9]=g,t[10]=v,t[11]=0,t[12]=-(i*E+o*S+u*C),t[13]=-(f*E+l*S+g*C),t[14]=-(d*E+p*S+v*C),t[15]=1,t)}function Sm(t,e,n,r){var i=e[0],o=e[1],u=e[2],f=r[0],l=r[1],g=r[2],d=i-n[0],p=o-n[1],v=u-n[2],T=d*d+p*p+v*v;T>0&&(T=1/Math.sqrt(T),d*=T,p*=T,v*=T);var E=l*v-g*p,S=g*d-f*v,C=f*p-l*d;return T=E*E+S*S+C*C,T>0&&(T=1/Math.sqrt(T),E*=T,S*=T,C*=T),t[0]=E,t[1]=S,t[2]=C,t[3]=0,t[4]=p*C-v*S,t[5]=v*E-d*C,t[6]=d*S-p*E,t[7]=0,t[8]=d,t[9]=p,t[10]=v,t[11]=0,t[12]=i,t[13]=o,t[14]=u,t[15]=1,t}function xm(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Cm(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Em(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function mS(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function wm(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Om(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Rm(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function mm(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],u=t[4],f=t[5],l=t[6],g=t[7],d=t[8],p=t[9],v=t[10],T=t[11],E=t[12],S=t[13],C=t[14],R=t[15],D=e[0],w=e[1],O=e[2],m=e[3],M=e[4],U=e[5],b=e[6],j=e[7],z=e[8],A=e[9],K=e[10],Y=e[11],Z=e[12],se=e[13],F=e[14],P=e[15];return Math.abs(n-D)<=_e*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(r-w)<=_e*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(i-O)<=_e*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(o-m)<=_e*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-M)<=_e*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(f-U)<=_e*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(l-b)<=_e*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(g-j)<=_e*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(d-z)<=_e*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(p-A)<=_e*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(v-K)<=_e*Math.max(1,Math.abs(v),Math.abs(K))&&Math.abs(T-Y)<=_e*Math.max(1,Math.abs(T),Math.abs(Y))&&Math.abs(E-Z)<=_e*Math.max(1,Math.abs(E),Math.abs(Z))&&Math.abs(S-se)<=_e*Math.max(1,Math.abs(S),Math.abs(se))&&Math.abs(C-F)<=_e*Math.max(1,Math.abs(C),Math.abs(F))&&Math.abs(R-P)<=_e*Math.max(1,Math.abs(R),Math.abs(P))}var _0=yt,Mm=mS;const L0=Object.freeze(Object.defineProperty({__proto__:null,add:Em,adjoint:sm,clone:rm,copy:Lt,create:oh,determinant:om,equals:mm,exactEquals:Rm,frob:Cm,fromQuat:Fc,fromQuat2:lm,fromRotation:TS,fromRotationTranslation:SS,fromRotationTranslationScale:CS,fromRotationTranslationScaleOrigin:hm,fromScaling:vS,fromTranslation:yS,fromValues:am,fromXRotation:um,fromYRotation:cm,fromZRotation:fm,frustum:pm,getRotation:D0,getScaling:xS,getTranslation:gm,identity:Re,invert:$t,lookAt:RS,mul:_0,multiply:yt,multiplyScalar:wm,multiplyScalarAndAdd:Om,ortho:OS,orthoNO:wS,orthoZO:Tm,perspective:dm,perspectiveFromFieldOfView:vm,perspectiveNO:ES,perspectiveZO:ym,rotate:Dn,rotateX:uh,rotateY:ch,rotateZ:fh,scale:Xa,set:im,str:xm,sub:Mm,subtract:mS,targetTo:Sm,translate:ct,transpose:Qe},Symbol.toStringTag,{value:"Module"}));function MS(){var t=new Rt(3);return Rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function V0(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function ev(t,e,n){var r=new Rt(3);return r[0]=t,r[1]=e,r[2]=n,r}function Qn(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ho(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ia(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ea(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Dm(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function sa(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function lh(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Xi(t,e,n){var r=e[0],i=e[1],o=e[2],u=n[0],f=n[1],l=n[2];return t[0]=i*l-o*f,t[1]=o*u-r*l,t[2]=r*f-i*u,t}function Ge(t,e,n){var r=e[0],i=e[1],o=e[2],u=n[3]*r+n[7]*i+n[11]*o+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/u,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/u,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/u,t}function tv(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function nv(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],u=e[1],f=e[2];return Math.abs(n-o)<=_e*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-u)<=_e*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-f)<=_e*Math.max(1,Math.abs(i),Math.abs(f))}var B0=ia,DS=V0;(function(){var t=MS();return function(e,n,r,i,o,u){var f,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,f=r;f<l;f+=n)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],o(t,t,u),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2];return e}})();function _m(){var t=new Rt(4);return Rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Lm(t,e,n,r){var i=new Rt(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Vm(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],u=n*n+r*r+i*i+o*o;return u>0&&(u=1/Math.sqrt(u)),t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=o*u,t}function so(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*u,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*u,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*u,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*u,t}(function(){var t=_m();return function(e,n,r,i,o,u){var f,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,f=r;f<l;f+=n)t[0]=e[f],t[1]=e[f+1],t[2]=e[f+2],t[3]=e[f+3],o(t,t,u),e[f]=t[0],e[f+1]=t[1],e[f+2]=t[2],e[f+3]=t[3];return e}})();function qa(){var t=new Rt(4);return Rt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function gh(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Bm(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>_e?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function rv(t,e,n){var r=e[0],i=e[1],o=e[2],u=e[3],f=n[0],l=n[1],g=n[2],d=n[3];return t[0]=r*d+u*f+i*g-o*l,t[1]=i*d+u*l+o*f-r*g,t[2]=o*d+u*g+r*l-i*f,t[3]=u*d-r*f-i*l-o*g,t}function Cc(t,e,n,r){var i=e[0],o=e[1],u=e[2],f=e[3],l=n[0],g=n[1],d=n[2],p=n[3],v,T,E,S,C;return T=i*l+o*g+u*d+f*p,T<0&&(T=-T,l=-l,g=-g,d=-d,p=-p),1-T>_e?(v=Math.acos(T),E=Math.sin(v),S=Math.sin((1-r)*v)/E,C=Math.sin(r*v)/E):(S=1-r,C=r),t[0]=S*i+C*l,t[1]=S*o+C*g,t[2]=S*u+C*d,t[3]=S*f+C*p,t}function Um(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Nm(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var o=(i+1)%3,u=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[o*3+o]-e[u*3+u]+1),t[i]=.5*r,r=.5/r,t[3]=(e[o*3+u]-e[u*3+o])*r,t[o]=(e[o*3+i]+e[i*3+o])*r,t[u]=(e[u*3+i]+e[i*3+u])*r}return t}var av=Lm,_S=Vm;(function(){var t=MS(),e=ev(1,0,0),n=ev(0,1,0);return function(r,i,o){var u=lh(i,o);return u<-.999999?(Xi(t,e,i),DS(t)<1e-6&&Xi(t,n,i),sa(t,t),gh(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Xi(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,_S(r,r))}})();(function(){var t=qa(),e=qa();return function(n,r,i,o,u,f){return Cc(t,r,u,f),Cc(e,i,o,f),Cc(n,t,e,2*f*(1-f)),n}})();(function(){var t=gS();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],_S(e,Nm(e,t))}})();var bg,iv;function bm(){return iv||(iv=1,bg=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var u=o[i];if(!t(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}),bg}var Gm=bm();const LS=rh(Gm);var Gg,sv;function VS(){if(sv)return Gg;sv=1;var t=Object.prototype.toString;return Gg=function(n){var r=t.call(n),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),i},Gg}var Fg,ov;function Fm(){if(ov)return Fg;ov=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=VS(),i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),u=i.call(function(){},"prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(v){var T=v.constructor;return T&&T.prototype===v},g={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var v in window)try{if(!g["$"+v]&&e.call(window,v)&&window[v]!==null&&typeof window[v]=="object")try{l(window[v])}catch{return!0}}catch{return!0}return!1}(),p=function(v){if(typeof window>"u"||!d)return l(v);try{return l(v)}catch{return!1}};t=function(T){var E=T!==null&&typeof T=="object",S=n.call(T)==="[object Function]",C=r(T),R=E&&n.call(T)==="[object String]",D=[];if(!E&&!S&&!C)throw new TypeError("Object.keys called on a non-object");var w=u&&S;if(R&&T.length>0&&!e.call(T,0))for(var O=0;O<T.length;++O)D.push(String(O));if(C&&T.length>0)for(var m=0;m<T.length;++m)D.push(String(m));else for(var M in T)!(w&&M==="prototype")&&e.call(T,M)&&D.push(String(M));if(o)for(var U=p(T),b=0;b<f.length;++b)!(U&&f[b]==="constructor")&&e.call(T,f[b])&&D.push(f[b]);return D}}return Fg=t,Fg}var kg,uv;function km(){if(uv)return kg;uv=1;var t=Array.prototype.slice,e=VS(),n=Object.keys,r=n?function(u){return n(u)}:Fm(),i=Object.keys;return r.shim=function(){if(Object.keys){var u=function(){var f=Object.keys(arguments);return f&&f.length===arguments.length}(1,2);u||(Object.keys=function(l){return e(l)?i(t.call(l)):i(l)})}else Object.keys=r;return Object.keys||r},kg=r,kg}var zg,cv;function BS(){if(cv)return zg;cv=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return zg=t,zg}var Ag,fv;function zm(){return fv||(fv=1,Ag=SyntaxError),Ag}var Hg,lv;function Am(){return lv||(lv=1,Hg=TypeError),Hg}var $g,gv;function Hm(){return gv||(gv=1,$g=Object.getOwnPropertyDescriptor),$g}var Wg,hv;function $m(){if(hv)return Wg;hv=1;var t=Hm();if(t)try{t([],"length")}catch{t=null}return Wg=t,Wg}var jg,pv;function Wm(){if(pv)return jg;pv=1;var t=BS(),e=zm(),n=Am(),r=$m();return jg=function(o,u,f){if(!o||typeof o!="object"&&typeof o!="function")throw new n("`obj` must be an object or a function`");if(typeof u!="string"&&typeof u!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,p=arguments.length>6?arguments[6]:!1,v=!!r&&r(o,u);if(t)t(o,u,{configurable:d===null&&v?v.configurable:!d,enumerable:l===null&&v?v.enumerable:!l,value:f,writable:g===null&&v?v.writable:!g});else if(p||!l&&!g&&!d)o[u]=f;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},jg}var Kg,dv;function jm(){if(dv)return Kg;dv=1;var t=BS(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},Kg=e,Kg}var Xg,yv;function US(){if(yv)return Xg;yv=1;var t=km(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,i=Wm(),o=function(g){return typeof g=="function"&&n.call(g)==="[object Function]"},u=jm()(),f=function(g,d,p,v){if(d in g){if(v===!0){if(g[d]===p)return}else if(!o(v)||!v())return}u?i(g,d,p,!0):i(g,d,p)},l=function(g,d){var p=arguments.length>2?arguments[2]:{},v=t(d);e&&(v=r.call(v,Object.getOwnPropertySymbols(d)));for(var T=0;T<v.length;T+=1)f(g,v[T],d[v[T]],p[v[T]])};return l.supportsDescriptors=!!u,Xg=l,Xg}var oo={exports:{}},vv;function NS(){return vv||(vv=1,typeof self<"u"?oo.exports=self:typeof window<"u"?oo.exports=window:oo.exports=Function("return this")()),oo.exports}var qg,Tv;function bS(){if(Tv)return qg;Tv=1;var t=NS();return qg=function(){return typeof ro!="object"||!ro||ro.Math!==Math||ro.Array!==Array?t:ro},qg}var Yg,Sv;function Km(){if(Sv)return Yg;Sv=1;var t=US(),e=bS();return Yg=function(){var r=e();if(t.supportsDescriptors){var i=Object.getOwnPropertyDescriptor(r,"globalThis");(!i||i.configurable&&(i.enumerable||!i.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},Yg}var Qg,xv;function Xm(){if(xv)return Qg;xv=1;var t=US(),e=NS(),n=bS(),r=Km(),i=n(),o=function(){return i};return t(o,{getPolyfill:n,implementation:e,shim:r}),Qg=o,Qg}var qm=Xm();const Ym=rh(qm),Vn=Ym(),GS={vtkObject:()=>null};function bn(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Vn.console&&Vn.console.error&&Vn.console.error("Invalid VTK object"),null;const e=GS[t.vtkClass];if(!e)return Vn.console&&Vn.console.error&&Vn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(i=>{n[i]&&typeof n[i]=="object"&&n[i].vtkClass&&(n[i]=bn(n[i]))});const r=e(n);return r&&r.modified&&r.modified(),r}function Qm(t,e){GS[t]=e}bn.register=Qm;class Zg extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let U0=0;const FS=t=>{throw new Error(`Named parameter '${t}' is missing`)},kS=Symbol("void");function Zm(){return U0}const zS={};function ka(){}const Jm=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];Jm.forEach(t=>{zS[t]=ka});Vn.console=console.hasOwnProperty("log")?console:zS;const oa={debug:ka,error:Vn.console.error||ka,info:Vn.console.info||ka,log:Vn.console.log||ka,warn:Vn.console.warn||ka};function AS(t,e){oa[t]&&(oa[t]=e||ka)}function HS(){oa.log(...arguments)}function $S(){oa.info(...arguments)}function kc(){oa.debug(...arguments)}function Ee(){oa.error(...arguments)}function rf(){oa.warn(...arguments)}const Cv={};function WS(t){Cv[t]||(oa.error(t),Cv[t]=!0)}const Vt=Object.create(null);Vt.Float32Array=Float32Array;Vt.Float64Array=Float64Array;Vt.Uint8Array=Uint8Array;Vt.Int8Array=Int8Array;Vt.Uint16Array=Uint16Array;Vt.Int16Array=Int16Array;Vt.Uint32Array=Uint32Array;Vt.Int32Array=Int32Array;Vt.Uint8ClampedArray=Uint8ClampedArray;try{Vt.BigInt64Array=BigInt64Array,Vt.BigUint64Array=BigUint64Array}catch{}function es(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(Vt[t]||Float64Array)(...n)}function hh(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(Vt[t]||Float64Array).from(...n)}function af(t){return t.charAt(0).toUpperCase()+t.slice(1)}function rt(t){return af(t[0]==="_"?t.slice(1):t)}function jS(t){return t.charAt(0).toLowerCase()+t.slice(1)}function KS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let i=Number(t),o="B";for(;i>n;)i/=n,o=r.pop();return`${i.toFixed(e)} ${o}`}function XS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function qS(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function Pm(t){return Object.values(Vt).some(e=>t instanceof e)}function Im(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function eM(t,e){return Object.keys(t).find(n=>t[n]===e)}function YS(t){return t&&t.isA?t.getState():t}function ph(t){setTimeout(t,0)}function QS(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function mt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qS(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++U0),!("classHierarchy"in e))e.classHierarchy=new Zg("vtkObject");else if(!(e.classHierarchy instanceof Zg)){const o=new Zg;for(let u=0;u<e.classHierarchy.length;u++)o.push(e.classHierarchy[u]);e.classHierarchy=o}function r(o){n[o]=null}function i(o){function u(){r(o)}return Object.freeze({unsubscribe:u})}return t.isDeleted=()=>!!e.deleted,t.modified=o=>{if(e.deleted){Ee("instance deleted - cannot call any method");return}o&&o<t.getMTime()||(e.mtime=++U0,n.forEach(u=>u&&u(t)))},t.onModified=o=>{if(e.deleted)return Ee("instance deleted - cannot call any method"),null;const u=n.length;return n.push(o),i(u)},t.getMTime=()=>e.mtime,t.isA=o=>{let u=e.classHierarchy.length;for(;u--;)if(e.classHierarchy[u]===o)return!0;return!1},t.getClassName=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-o]},t.set=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,l=!1;return Object.keys(o).forEach(g=>{const d=f?null:t[`set${af(g)}`];d&&Array.isArray(o[g])&&d.length>1?l=d(...o[g])||l:d?l=d(o[g])||l:(["mtime"].indexOf(g)===-1&&!u&&rf(`Warning: Set value to model directly ${g}, ${o[g]}`),l=e[g]!==o[g]||l,e[g]=o[g])}),l},t.get=function(){for(var o=arguments.length,u=new Array(o),f=0;f<o;f++)u[f]=arguments[f];if(!u.length)return e;const l={};return u.forEach(g=>{l[g]=e[g]}),l},t.getReferenceByName=o=>e[o],t.delete=()=>{Object.keys(e).forEach(o=>delete e[o]),n.forEach((o,u)=>r(u)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const o={...e,vtkClass:t.getClassName()};Object.keys(o).forEach(f=>{o[f]===null||o[f]===void 0||f[0]==="_"?delete o[f]:o[f].isA?o[f]=o[f].getState():Array.isArray(o[f])?o[f]=o[f].map(YS):Pm(o[f])&&(o[f]=Array.from(o[f]))});const u={};return Object.keys(o).sort().forEach(f=>{u[f]=o[f]}),u.mtime&&delete u.mtime,u},t.shallowCopy=function(o){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(o.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${o.getClassName()} into ${t.getClassName()}`);const f=o.get(),l=Object.keys(e).sort();Object.keys(f).sort().forEach(d=>{const p=l.indexOf(d);p===-1?u&&kc(`add ${d} in shallowCopy`):l.splice(p,1),e[d]=f[d]}),l.length&&u&&kc(`Untouched keys: ${l.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const tM={object(t,e,n){return function(){return{...e[n.name]}}}};function Wt(t,e,n){n.forEach(r=>{if(typeof r=="object"){const i=tM[r.type];i?t[`get${rt(r.name)}`]=i(t,e,r):t[`get${rt(r.name)}`]=()=>e[r.name]}else t[`get${rt(r)}`]=()=>e[r]})}const ZS={enum(t,e,n){const r=`_on${rt(n.name)}Changed`;return i=>{if(typeof i=="string"){if(n.enum[i]!==void 0)return e[n.name]!==n.enum[i]?(e[n.name]=n.enum[i],t.modified(),!0):!1;throw Ee(`Set Enum with invalid argument ${n}, ${i}`),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(e[n.name]!==i){if(Object.keys(n.enum).map(o=>n.enum[o]).indexOf(i)!==-1){const o=e[n.name];return e[n.name]=i,e[r]?.(t,e,i,o),t.modified(),!0}throw Ee(`Set Enum outside numeric range ${n}, ${i}`),new RangeError("Set Enum outside numeric range")}return!1}throw Ee(`Set Enum with invalid argument (String/Number) ${n}, ${i}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){n.params?.length===1&&rf('Setter of type "object" with a single "param" field is not supported');const r=`_on${rt(n.name)}Changed`;return function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];let f;if(o.length>1&&n.params?.length?f=n.params.reduce((l,g,d)=>Object.assign(l,{[g]:o[d]}),{}):f=o[0],!LS(e[n.name],f)){const l=e[n.name];return e[n.name]=f,e[r]?.(t,e,f,l),t.modified(),!0}return!1}}};function Ev(t){if(typeof t=="object"){const e=ZS[t.type];if(e)return(n,r)=>e(n,r,t);throw Ee(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const i=`_on${rt(t)}Changed`;return function(u){if(r.deleted)return Ee("instance deleted - cannot call any method"),!1;if(r[t]!==u){const f=r[t.name];return r[t]=u,r[i]?.(n,r,u,f),n.modified(),!0}return!1}}}function _o(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${rt(r.name)}`]=Ev(r)(t,e):t[`set${rt(r)}`]=Ev(r)(t,e)})}function vt(t,e,n){Wt(t,e,n),_o(t,e,n)}function ts(t,e,n){n.forEach(r=>{t[`get${rt(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${rt(r)}ByReference`]=()=>e[r]})}function dh(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(o=>{if(e[o]&&r&&e[o].length!==r)throw new RangeError(`Invalid initial number of values for array (${o})`);const u=`_on${rt(o)}Changed`;t[`set${rt(o)}`]=function(){if(e.deleted)return Ee("instance deleted - cannot call any method"),!1;for(var f=arguments.length,l=new Array(f),g=0;g<f;g++)l[g]=arguments[g];let d=l,p,v=!1;if(d.length===1&&(d[0]==null||d[0].length>=0)&&(d=d[0],v=!0),d==null)p=e[o]!==d;else{if(r&&d.length!==r)if(d.length<r&&i!==void 0)for(d=Array.from(d),v=!1;d.length<r;)d.push(i);else throw new RangeError(`Invalid number of values for array setter (${o})`);p=e[o]==null||e[o].length!==d.length;for(let T=0;!p&&T<d.length;++T)p=e[o][T]!==d[T];p&&v&&(d=Array.from(d))}if(p){const T=e[o.name];e[o]=d,e[u]?.(t,e,d,T),t.modified()}return p},t[`set${rt(o)}From`]=f=>{const l=e[o];f.forEach((g,d)=>{l[d]=g})}})}function yh(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;ts(t,e,n),dh(t,e,n,r,i)}function Lo(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];e[i]!==void 0&&(e[`_${i}`]=e[i],delete e[i])}}function JS(t,e,n,r){e.inputData?e.inputData=e.inputData.map(bn):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(bn):e.inputConnection=[],e.output?e.output=e.output.map(bn):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(bn):e.inputArrayToProcess=[],e.numberOfInputs=n;function i(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Ee("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){Ee(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[E]!==T||e.inputConnection[E])&&(e.inputData[E]=T,e.inputConnection[E]=null,t.modified&&t.modified())}function o(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[T]&&(e.inputData[T]=e.inputConnection[T]()),e.inputData[T]}function u(T){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Ee("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){let S=`algorithm ${t.getClassName()} only has `;S+=`${e.numberOfInputs}`,S+=" input ports. To add more input ports, use addInputConnection()",Ee(S);return}e.inputData[E]=null,e.inputConnection[E]=T}function f(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[T]}function l(){let T=e.numberOfInputs;for(;T&&!e.inputData[T-1]&&!e.inputConnection[T-1];)T--;return T===e.numberOfInputs&&e.numberOfInputs++,T}function g(T){if(e.deleted){Ee("instance deleted - cannot call any method");return}u(T,l())}function d(T){if(e.deleted){Ee("instance deleted - cannot call any method");return}i(T,l())}function p(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Ee("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[T])}t.shouldUpdate=()=>{const T=t.getMTime();let E=1/0,S=r;for(;S--;){if(!e.output[S]||e.output[S].isDeleted())return!0;const C=e.output[S].getMTime();if(C<T)return!0;C<E&&(E=C)}for(S=e.numberOfInputs;S--;)if(e.inputConnection[S]?.filter.shouldUpdate()||t.getInputData(S)?.getMTime()>E)return!0;return!1};function v(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const E=()=>p(T);return E.filter=t,E}if(e.numberOfInputs){let T=e.numberOfInputs;for(;T--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=i,t.setInputConnection=u,t.addInputData=d,t.addInputConnection=g,t.getInputData=o,t.getInputConnection=f}r&&(t.getOutputData=p,t.getOutputPort=v),t.update=()=>{const T=[];if(e.numberOfInputs){let E=0;for(;E<e.numberOfInputs;)T[E]=t.getInputData(E),E++}t.requestData&&t.shouldUpdate()&&t.requestData(T,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=T=>{const E=e.inputArrayToProcess[T],S=e.inputData[T];return E&&S?S[`get${E.fieldAssociation}`]().getArray(E.arrayName):null},t.setInputArrayToProcess=function(T,E,S){let C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<T;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[T]={arrayName:E,fieldAssociation:S,attributeType:C}}}const vh=Symbol("Event abort");function PS(t,e,n){const r=[],i=t.delete;let o=1;function u(g){for(let d=0;d<r.length;++d){const[p]=r[d];if(p===g){r.splice(d,1);return}}}function f(g){function d(){u(g)}return Object.freeze({unsubscribe:d})}function l(){if(e.deleted){Ee("instance deleted - cannot call any method");return}const g=r.slice();for(let d=0;d<g.length;++d){const[,p,v]=g[d];if(p){if(v<0)setTimeout(()=>p.apply(t,arguments),1-v);else if(p.apply(t,arguments)===vh)break}}}t[`invoke${rt(n)}`]=l,t[`on${rt(n)}`]=function(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!g.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return Ee("instance deleted - cannot call any method"),null;const p=o++;return r.push([p,g,d]),r.sort((v,T)=>T[2]-v[2]),f(p)},t.delete=()=>{i(),r.forEach(g=>{let[d]=g;return u(d)})}}function Xe(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={},o={};return t(o,i,r),Object.freeze(o)};return e&&bn.register(e,n),n}function IS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e.filter(u=>!!u).map(u=>u(...i))}}function Th(t){return t&&t.isA&&t.isA("vtkObject")}function zc(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Th(t)){if(r.indexOf(t)>=0)return n;r.push(t);const i=e(t);i!==void 0&&n.push(i);const o=t.get();Object.keys(o).forEach(u=>{const f=o[u];Array.isArray(f)?f.forEach(l=>{zc(l,e,n,r)}):zc(f,e,n,r)})}return n}function ex(t,e,n){var r=this;let i;const o=function(){for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];const g=r,d=()=>{i=null,n||t.apply(g,f)},p=n&&!i;clearTimeout(i),i=setTimeout(d,e),p&&t.apply(g,f)};return o.cancel=()=>clearTimeout(i),o}function tx(t,e){let n=!1,r=null;function i(){n=!1,r!==null&&(o(...r),r=null)}function o(){for(var u=arguments.length,f=new Array(u),l=0;l<u;l++)f[l]=arguments[l];if(n){r=f;return}n=!0,t(...f),setTimeout(i,e)}return o}function Sh(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,i)=>{e.keystore[r]=i},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let nM=1;const Pu="__root__";function nx(t,e){Sh(t,e);const n=t.delete;e.proxyId=`${nM++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Wt(t,e,["proxyId","proxyGroup","proxyName"]),vt(t,e,["proxyManager"]);const r={},i={};function o(g,d){i[d]||(i[d]=[]);const p=i[d];for(let v=0;v<g.length;v++)p.push(g[v].name),r[g[v].name]=g[v],g[v].children&&g[v].children.length&&o(g[v].children,g[v].name)}o(e.ui,Pu),t.updateUI=g=>{e.ui=JSON.parse(JSON.stringify(g||[])),Object.keys(r).forEach(d=>delete r[d]),Object.keys(i).forEach(d=>delete i[d]),o(e.ui,Pu),t.modified()};function u(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pu;return i[g]}t.updateProxyProperty=(g,d)=>{const p=r[g];p?Object.assign(p,d):r[g]={...d}},t.activate=()=>{if(e.proxyManager){const g=`setActive${rt(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[g]&&e.proxyManager[g](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(g,d)=>{d in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[d]=[]),e.propertyLinkSubscribers[d].push(g)},t.gcPropertyLinks=g=>{const d=e.propertyLinkSubscribers[g]||[];for(;d.length;)d.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[g])return e.propertyLinkMap[g];let p=null;const v=[];let T=0,E=!1;function S(O){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return null;const M=[];let U=null;for(T=v.length;T--;){const j=v[T];j.instance===O?U=j:M.push(j)}if(!U)return null;const b=U.instance[`get${rt(U.propertyName)}`]();if(!Im(b,p)||m){for(p=b,E=!0;M.length;){const j=M.pop();j.instance.set({[j.propertyName]:p})}E=!1}return e.propertyLinkMap[g].persistent&&(e.propertyLinkMap[g].value=b),b}function C(O,m){const M=[];for(T=v.length;T--;){const U=v[T];U.instance===O&&(U.propertyName===m||m===void 0)&&(U.subscription.unsubscribe(),M.push(T))}for(;M.length;)v.splice(M.pop(),1)}function R(O,m){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const U=O.onModified(S),b=v[0];return v.push({instance:O,propertyName:m,subscription:U}),M&&(e.propertyLinkMap[g].persistent&&e.propertyLinkMap[g].value!==void 0?O.set({[m]:e.propertyLinkMap[g].value}):b&&S(b.instance,!0)),{unsubscribe:()=>C(O,m)}}function D(){for(;v.length;)v.pop().subscription.unsubscribe()}const w={bind:R,unbind:C,unsubscribe:D,persistent:d};return e.propertyLinkMap[g]=w,w};function f(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pu;const d=[],p=e.proxyId,v=u(g)||[];for(let T=0;T<v.length;T++){const E=v[T],S=t[`get${rt(E)}`],C=S?S():void 0,R={id:p,name:E,value:C},D=f(E);D.length&&(R.children=D),d.push(R)}return d}t.listPropertyNames=()=>f().map(g=>g.name),t.getPropertyByName=g=>f().find(d=>d.name===g),t.getPropertyDomainByName=g=>(r[g]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:f()}),t.delete=()=>{const g=Object.keys(e.propertyLinkMap);let d=g.length;for(;d--;)e.propertyLinkMap[g[d]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function l(){if(e.links)for(let g=0;g<e.links.length;g++){const{link:d,property:p,persistent:v,updateOnBind:T,type:E}=e.links[g];if(E==="application"){const S=e.proxyManager.getPropertyLink(d,v);t.registerPropertyLinkForGC(S,"application"),S.bind(t,p,T)}}}ph(l)}function rx(t,e,n){const r=t.delete,i=[],o=Object.keys(n);let u=o.length;for(;u--;){const f=o[u],{modelKey:l,property:g,modified:d=!0}=n[f],p=rt(g),v=rt(f);t[`get${v}`]=e[l][`get${p}`],t[`set${v}`]=e[l][`set${p}`],d&&i.push(e[l].onModified(t.modified))}t.delete=()=>{for(;i.length;)i.pop().unsubscribe();r()}}function ax(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function i(f){const l=Object.keys(f);let g=l.length;for(;g--;){const d=l[g];e[d].set(f[d])}}const o=Object.keys(r);let u=o.length;for(;u--;){const f=o[u];e[f]=r[f];const l=n[f];t[`set${rt(f)}`]=g=>{if(g!==e[f]){e[f]=g;const d=l[g];i(d),t.modified()}}}o.length&&Wt(t,e,o)}const wv=10,Ov=40,Rv=800;function ix(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*wv,i=n*wv,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode===1?(r*=Ov,i*=Ov):(r*=Rv,i*=Rv)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:i||r}}var L={algo:JS,capitalize:af,chain:IS,debounce:ex,enumToString:eM,event:PS,EVENT_ABORT:vh,formatBytesToProperUnit:KS,formatNumbersWithThousandSeparator:XS,get:Wt,getArray:ts,getCurrentGlobalMTime:Zm,getStateArrayMapFunc:YS,isVtkObject:Th,keystore:Sh,measurePromiseExecution:QS,moveToProtected:Lo,newInstance:Xe,newTypedArray:es,newTypedArrayFrom:hh,normalizeWheel:ix,obj:mt,proxy:nx,proxyPropertyMapping:rx,proxyPropertyState:ax,safeArrays:qS,set:_o,setArray:dh,setGet:vt,setGetArray:yh,setImmediate:ph,setLoggerFunction:AS,throttle:tx,traverseInstanceTree:zc,TYPED_ARRAYS:Vt,uncapitalize:jS,VOID:kS,vtkDebugMacro:kc,vtkErrorMacro:Ee,vtkInfoMacro:$S,vtkLogMacro:HS,vtkOnceErrorMacro:WS,vtkWarningMacro:rf,objectSetterMap:ZS,requiredParam:FS},In=Object.freeze({__proto__:null,requiredParam:FS,VOID:kS,setLoggerFunction:AS,vtkLogMacro:HS,vtkInfoMacro:$S,vtkDebugMacro:kc,vtkErrorMacro:Ee,vtkWarningMacro:rf,vtkOnceErrorMacro:WS,TYPED_ARRAYS:Vt,newTypedArray:es,newTypedArrayFrom:hh,capitalize:af,_capitalize:rt,uncapitalize:jS,formatBytesToProperUnit:KS,formatNumbersWithThousandSeparator:XS,setImmediateVTK:ph,measurePromiseExecution:QS,obj:mt,get:Wt,set:_o,setGet:vt,getArray:ts,setArray:dh,setGetArray:yh,moveToProtected:Lo,algo:JS,EVENT_ABORT:vh,event:PS,newInstance:Xe,chain:IS,isVtkObject:Th,traverseInstanceTree:zc,debounce:ex,throttle:tx,keystore:Sh,proxy:nx,proxyPropertyMapping:rx,proxyPropertyState:ax,normalizeWheel:ix,default:L});const{vtkErrorMacro:rM}=L,aM=["Build","Render"];function iM(t,e){e.classHierarchy.push("vtkViewNode"),t.build=r=>{},t.render=r=>{},t.traverse=r=>{const i=r.getTraverseOperation(),o=t[i];if(o){o(r);return}t.apply(r,!0);for(let u=0;u<e.children.length;u++)e.children[u].traverse(r);t.apply(r,!1)},t.apply=(r,i)=>{const o=t[r.getOperation()];o&&o(i,r)},t.getViewNodeFor=r=>{if(e.renderable===r)return t;for(let i=0;i<e.children.length;++i){const u=e.children[i].getViewNodeFor(r);if(u)return u}},t.getFirstAncestorOfType=r=>e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null,t.getLastAncestorOfType=r=>{if(!e._parent)return null;const i=e._parent.getLastAncestorOfType(r);return i||(e._parent.isA(r)?e._parent:null)},t.addMissingNode=r=>{if(!r)return;const i=e._renderableChildMap.get(r);if(i!==void 0)return i.setVisited(!0),i;const o=t.createViewNode(r);if(o)return o.setParent(t),o.setVisited(!0),e._renderableChildMap.set(r,o),e.children.push(o),o},t.addMissingNodes=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(!r||!r.length))for(let o=0;o<r.length;++o){const u=r[o],f=t.addMissingNode(u);if(i&&f!==void 0&&e.children[o]!==f){for(let l=o+1;l<e.children.length;++l)if(e.children[l]===f){e.children.splice(l,1),e.children.splice(o,0,f);break}}}},t.addMissingChildren=r=>{if(!(!r||!r.length))for(let i=0;i<r.length;++i){const o=r[i];if(e.children.indexOf(o)===-1){o.setParent(t),e.children.push(o);const f=o.getRenderable();f&&e._renderableChildMap.set(f,o)}o.setVisited(!0)}},t.removeNode=r=>{const i=e.children.findIndex(u=>u===r);if(i<0)return!1;const o=r.getRenderable();return o&&e._renderableChildMap.delete(o),r.delete(),e.children.splice(i,1),!0},t.prepareNodes=()=>{for(let r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=r=>{e.visited=r},t.removeUnusedNodes=()=>{let r=0;for(let i=0;i<e.children.length;++i){const o=e.children[i];if(o.getVisited())e.children[r++]=o,o.setVisited(!1);else{const f=o.getRenderable();f&&e._renderableChildMap.delete(f),o.delete()}}e.children.length=r},t.createViewNode=r=>{if(!e.myFactory)return rM("Cannot create view nodes without my own factory"),null;const i=e.myFactory.createNode(r);return i&&i.setRenderable(r),i};const n=t.delete;t.delete=()=>{for(let r=0;r<e.children.length;r++)e.children[r].delete();n()}}const sM={renderable:null,myFactory:null,children:[],visited:!1};function sx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sM,n),L.obj(t,e),L.event(t,e,"event"),e._renderableChildMap=new Map,L.get(t,e,["visited"]),L.setGet(t,e,["_parent","renderable","myFactory"]),L.getArray(t,e,["children"]),L.moveToProtected(t,e,["parent"]),iM(t,e)}const oM=L.newInstance(sx,"vtkViewNode");var at={newInstance:oM,extend:sx,PASS_TYPES:aM};function uM(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,i=n.getClassName(r++),o=!1;const u=Object.keys(e.overrides);for(;i&&!o;)u.indexOf(i)!==-1?o=!0:i=n.getClassName(r++);if(!o)return null;const f=e.overrides[i]();return f.setMyFactory(t),f}}const cM={};function ox(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cM,n),L.obj(t,e),uM(t,e)}const fM=L.newInstance(ox,"vtkViewNodeFactory");var ux={newInstance:fM,extend:ox};const cx=Object.create(null);function wn(t,e){cx[t]=e}function lM(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const gM={};function fx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gM,n),e.overrides=cx,ux.extend(t,e,n),lM(t,e)}const hM=L.newInstance(fx,"vtkOpenGLViewNodeFactory");var pM={newInstance:hM,extend:fx};function dM(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){Lt(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),ih(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),sh(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();Lt(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),Qe(e.keyMatrices.vcpc,e.keyMatrices.vcpc),yt(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const yM={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function vM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yM,n),at.extend(t,e,n),e.keyMatrixTime={},mt(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},vt(t,e,["context","keyMatrixTime"]),dM(t,e)}const TM=Xe(vM);wn("vtkCamera",TM);const{vtkDebugMacro:SM}=In;function xM(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps(),!0),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(SM("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const i=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=i.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),r|=i.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const o=t.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),i.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),i.colorMask(!0,!0,!0,!0),r&&i.clear(r),i.enable(i.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],o=n[1]-r[1],u=e._parent.normalizedDisplayToDisplay(i,o),f=Math.round(u[0]),l=Math.round(u[1]),g=n[2]-r[0],d=n[3]-r[1],p=e._parent.normalizedDisplayToDisplay(g,d);let v=Math.round(p[0])-f,T=Math.round(p[1])-l;return v<0&&(v=0),T<0&&(T=0),{usize:v,vsize:T,lowerLeftU:f,lowerLeftV:l}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const o=e.renderable.getBackgroundByReference();r.clearColor(o[0],o[1],o[2],o[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const CM={context:null,_openGLRenderWindow:null,selector:null};function EM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CM,n),at.extend(t,e,n),Wt(t,e,["shaderCache"]),vt(t,e,["selector"]),Lo(t,e,["openGLRenderWindow"]),xM(t,e)}const wM=Xe(EM,"vtkOpenGLRenderer");wn("vtkRenderer",wM);function OM(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),Lt(e.keyMatrices.mcwc,e.renderable.getMatrix()),Qe(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?Pa(e.keyMatrices.normalMatrix):(ih(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),sh(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),hS(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const RM={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function mM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RM,n),at.extend(t,e,n),e.keyMatrixTime={},mt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Pa(new Float64Array(9)),mcwc:Re(new Float64Array(16))},vt(t,e,["context"]),Wt(t,e,["activeTextures"]),OM(t,e)}const MM=Xe(mM);wn("vtkActor",MM);function DM(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()}}const _M={context:null,activeTextures:null};function LM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_M,n),at.extend(t,e,n),vt(t,e,["context"]),Wt(t,e,["activeTextures"]),DM(t,e)}const VM=Xe(LM);wn("vtkActor2D",VM);function Ec(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function BM(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lx(t){let e,n,r;t.length!==2?(e=Ec,n=(f,l)=>Ec(t(f),l),r=(f,l)=>t(f)-l):(e=t===Ec||t===BM?t:UM,n=t,r=t);function i(f,l,g=0,d=f.length){if(g<d){if(e(l,l)!==0)return d;do{const p=g+d>>>1;n(f[p],l)<0?g=p+1:d=p}while(g<d)}return g}function o(f,l,g=0,d=f.length){if(g<d){if(e(l,l)!==0)return d;do{const p=g+d>>>1;n(f[p],l)<=0?g=p+1:d=p}while(g<d)}return g}function u(f,l,g=0,d=f.length){const p=i(f,l,g,d-1);return p>g&&r(f[p-1],l)>-r(f[p],l)?p-1:p}return{left:i,center:u,right:o}}function UM(){return 0}function NM(t){return t===null?NaN:+t}const bM=lx(Ec),GM=bM.right;lx(NM).center;const FM=Math.sqrt(50),kM=Math.sqrt(10),zM=Math.sqrt(2);function Ac(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),u=o>=FM?10:o>=kM?5:o>=zM?2:1;let f,l,g;return i<0?(g=Math.pow(10,-i)/u,f=Math.round(t*g),l=Math.round(e*g),f/g<t&&++f,l/g>e&&--l,g=-g):(g=Math.pow(10,i)*u,f=Math.round(t/g),l=Math.round(e/g),f*g<t&&++f,l*g>e&&--l),l<f&&.5<=n&&n<2?Ac(t,e,n*2):[f,l,g]}function AM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,u]=r?Ac(e,t,n):Ac(t,e,n);if(!(o>=i))return[];const f=o-i+1,l=new Array(f);if(r)if(u<0)for(let g=0;g<f;++g)l[g]=(o-g)/-u;else for(let g=0;g<f;++g)l[g]=(o-g)*u;else if(u<0)for(let g=0;g<f;++g)l[g]=(i+g)/-u;else for(let g=0;g<f;++g)l[g]=(i+g)*u;return l}function N0(t,e,n){return e=+e,t=+t,n=+n,Ac(t,e,n)[2]}function HM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?N0(e,t,n):N0(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function $M(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function xh(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gx(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vo(){}var Co=.7,Hc=1/Co,qi="\\s*([+-]?\\d+)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WM=/^#([0-9a-f]{3,8})$/,jM=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),KM=new RegExp(`^rgb\\(${Zn},${Zn},${Zn}\\)$`),XM=new RegExp(`^rgba\\(${qi},${qi},${qi},${Eo}\\)$`),qM=new RegExp(`^rgba\\(${Zn},${Zn},${Zn},${Eo}\\)$`),YM=new RegExp(`^hsl\\(${Eo},${Zn},${Zn}\\)$`),QM=new RegExp(`^hsla\\(${Eo},${Zn},${Zn},${Eo}\\)$`),mv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xh(Vo,wo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mv,formatHex:Mv,formatHex8:ZM,formatHsl:JM,formatRgb:Dv,toString:Dv});function Mv(){return this.rgb().formatHex()}function ZM(){return this.rgb().formatHex8()}function JM(){return hx(this).formatHsl()}function Dv(){return this.rgb().formatRgb()}function wo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=WM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_v(e):n===3?new Qt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Iu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Iu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jM.exec(t))?new Qt(e[1],e[2],e[3],1):(e=KM.exec(t))?new Qt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XM.exec(t))?Iu(e[1],e[2],e[3],e[4]):(e=qM.exec(t))?Iu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YM.exec(t))?Bv(e[1],e[2]/100,e[3]/100,1):(e=QM.exec(t))?Bv(e[1],e[2]/100,e[3]/100,e[4]):mv.hasOwnProperty(t)?_v(mv[t]):t==="transparent"?new Qt(NaN,NaN,NaN,0):null}function _v(t){return new Qt(t>>16&255,t>>8&255,t&255,1)}function Iu(t,e,n,r){return r<=0&&(t=e=n=NaN),new Qt(t,e,n,r)}function PM(t){return t instanceof Vo||(t=wo(t)),t?(t=t.rgb(),new Qt(t.r,t.g,t.b,t.opacity)):new Qt}function b0(t,e,n,r){return arguments.length===1?PM(t):new Qt(t,e,n,r??1)}function Qt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}xh(Qt,b0,gx(Vo,{brighter(t){return t=t==null?Hc:Math.pow(Hc,t),new Qt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Co:Math.pow(Co,t),new Qt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qt(Wa(this.r),Wa(this.g),Wa(this.b),$c(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lv,formatHex:Lv,formatHex8:IM,formatRgb:Vv,toString:Vv}));function Lv(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}`}function IM(){return`#${Ha(this.r)}${Ha(this.g)}${Ha(this.b)}${Ha((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vv(){const t=$c(this.opacity);return`${t===1?"rgb(":"rgba("}${Wa(this.r)}, ${Wa(this.g)}, ${Wa(this.b)}${t===1?")":`, ${t})`}`}function $c(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ha(t){return t=Wa(t),(t<16?"0":"")+t.toString(16)}function Bv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Un(t,e,n,r)}function hx(t){if(t instanceof Un)return new Un(t.h,t.s,t.l,t.opacity);if(t instanceof Vo||(t=wo(t)),!t)return new Un;if(t instanceof Un)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,f=o-i,l=(o+i)/2;return f?(e===o?u=(n-r)/f+(n<r)*6:n===o?u=(r-e)/f+2:u=(e-n)/f+4,f/=l<.5?o+i:2-o-i,u*=60):f=l>0&&l<1?0:u,new Un(u,f,l,t.opacity)}function eD(t,e,n,r){return arguments.length===1?hx(t):new Un(t,e,n,r??1)}function Un(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}xh(Un,eD,gx(Vo,{brighter(t){return t=t==null?Hc:Math.pow(Hc,t),new Un(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Co:Math.pow(Co,t),new Un(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Qt(Jg(t>=240?t-240:t+120,i,r),Jg(t,i,r),Jg(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Un(Uv(this.h),ec(this.s),ec(this.l),$c(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$c(this.opacity);return`${t===1?"hsl(":"hsla("}${Uv(this.h)}, ${ec(this.s)*100}%, ${ec(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Uv(t){return t=(t||0)%360,t<0?t+360:t}function ec(t){return Math.max(0,Math.min(1,t||0))}function Jg(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ch=t=>()=>t;function tD(t,e){return function(n){return t+n*e}}function nD(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rD(t){return(t=+t)==1?px:function(e,n){return n-e?nD(e,n,t):Ch(isNaN(e)?n:e)}}function px(t,e){var n=e-t;return n?tD(t,n):Ch(isNaN(t)?e:t)}const Nv=function t(e){var n=rD(e);function r(i,o){var u=n((i=b0(i)).r,(o=b0(o)).r),f=n(i.g,o.g),l=n(i.b,o.b),g=px(i.opacity,o.opacity);return function(d){return i.r=u(d),i.g=f(d),i.b=l(d),i.opacity=g(d),i+""}}return r.gamma=t,r}(1);function aD(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function iD(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sD(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),u;for(u=0;u<r;++u)i[u]=Eh(t[u],e[u]);for(;u<n;++u)o[u]=e[u];return function(f){for(u=0;u<r;++u)o[u]=i[u](f);return o}}function oD(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Wc(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uD(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Eh(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var G0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pg=new RegExp(G0.source,"g");function cD(t){return function(){return t}}function fD(t){return function(e){return t(e)+""}}function lD(t,e){var n=G0.lastIndex=Pg.lastIndex=0,r,i,o,u=-1,f=[],l=[];for(t=t+"",e=e+"";(r=G0.exec(t))&&(i=Pg.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),f[u]?f[u]+=o:f[++u]=o),(r=r[0])===(i=i[0])?f[u]?f[u]+=i:f[++u]=i:(f[++u]=null,l.push({i:u,x:Wc(r,i)})),n=Pg.lastIndex;return n<e.length&&(o=e.slice(n),f[u]?f[u]+=o:f[++u]=o),f.length<2?l[0]?fD(l[0].x):cD(e):(e=l.length,function(g){for(var d=0,p;d<e;++d)f[(p=l[d]).i]=p.x(g);return f.join("")})}function Eh(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ch(e):(n==="number"?Wc:n==="string"?(r=wo(e))?(e=r,Nv):lD:e instanceof wo?Nv:e instanceof Date?oD:iD(e)?aD:Array.isArray(e)?sD:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uD:Wc)(t,e)}function gD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function hD(t){return function(){return t}}function pD(t){return+t}var bv=[0,1];function ji(t){return t}function F0(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:hD(isNaN(e)?NaN:.5)}function dD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function yD(t,e,n){var r=t[0],i=t[1],o=e[0],u=e[1];return i<r?(r=F0(i,r),o=n(u,o)):(r=F0(r,i),o=n(o,u)),function(f){return o(r(f))}}function vD(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<r;)i[u]=F0(t[u],t[u+1]),o[u]=n(e[u],e[u+1]);return function(f){var l=GM(t,f,1,r)-1;return o[l](i[l](f))}}function TD(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function SD(){var t=bv,e=bv,n=Eh,r,i,o,u=ji,f,l,g;function d(){var v=Math.min(t.length,e.length);return u!==ji&&(u=dD(t[0],t[v-1])),f=v>2?vD:yD,l=g=null,p}function p(v){return v==null||isNaN(v=+v)?o:(l||(l=f(t.map(r),e,n)))(r(u(v)))}return p.invert=function(v){return u(i((g||(g=f(e,t.map(r),Wc)))(v)))},p.domain=function(v){return arguments.length?(t=Array.from(v,pD),d()):t.slice()},p.range=function(v){return arguments.length?(e=Array.from(v),d()):e.slice()},p.rangeRound=function(v){return e=Array.from(v),n=gD,d()},p.clamp=function(v){return arguments.length?(u=v?!0:ji,d()):u!==ji},p.interpolate=function(v){return arguments.length?(n=v,d()):n},p.unknown=function(v){return arguments.length?(o=v,p):o},function(v,T){return r=v,i=T,d()}}function xD(){return SD()(ji,ji)}function CD(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jc(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Yi(t){return t=jc(Math.abs(t)),t?t[1]:NaN}function ED(t,e){return function(n,r){for(var i=n.length,o=[],u=0,f=t[0],l=0;i>0&&f>0&&(l+f+1>r&&(f=Math.max(1,r-l)),o.push(n.substring(i-=f,i+f)),!((l+=f+1)>r));)f=t[u=(u+1)%t.length];return o.reverse().join(e)}}function wD(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var OD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kc(t){if(!(e=OD.exec(t)))throw new Error("invalid format: "+t);var e;return new wh({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kc.prototype=wh.prototype;function wh(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RD(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dx;function mD(t,e){var n=jc(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(dx=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+jc(t,Math.max(0,e+o-1))[0]}function Gv(t,e){var n=jc(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Fv={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:CD,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Gv(t*100,e),r:Gv,s:mD,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kv(t){return t}var zv=Array.prototype.map,Av=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MD(t){var e=t.grouping===void 0||t.thousands===void 0?kv:ED(zv.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?kv:wD(zv.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function g(p){p=Kc(p);var v=p.fill,T=p.align,E=p.sign,S=p.symbol,C=p.zero,R=p.width,D=p.comma,w=p.precision,O=p.trim,m=p.type;m==="n"?(D=!0,m="g"):Fv[m]||(w===void 0&&(w=12),O=!0,m="g"),(C||v==="0"&&T==="=")&&(C=!0,v="0",T="=");var M=S==="$"?n:S==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",U=S==="$"?r:/[%p]/.test(m)?u:"",b=Fv[m],j=/[defgprs%]/.test(m);w=w===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function z(A){var K=M,Y=U,Z,se,F;if(m==="c")Y=b(A)+Y,A="";else{A=+A;var P=A<0||1/A<0;if(A=isNaN(A)?l:b(Math.abs(A),w),O&&(A=RD(A)),P&&+A==0&&E!=="+"&&(P=!1),K=(P?E==="("?E:f:E==="-"||E==="("?"":E)+K,Y=(m==="s"?Av[8+dx/3]:"")+Y+(P&&E==="("?")":""),j){for(Z=-1,se=A.length;++Z<se;)if(F=A.charCodeAt(Z),48>F||F>57){Y=(F===46?i+A.slice(Z+1):A.slice(Z))+Y,A=A.slice(0,Z);break}}}D&&!C&&(A=e(A,1/0));var ie=K.length+A.length+Y.length,I=ie<R?new Array(R-ie+1).join(v):"";switch(D&&C&&(A=e(I+A,I.length?R-Y.length:1/0),I=""),T){case"<":A=K+A+Y+I;break;case"=":A=K+I+A+Y;break;case"^":A=I.slice(0,ie=I.length>>1)+K+A+Y+I.slice(ie);break;default:A=I+K+A+Y;break}return o(A)}return z.toString=function(){return p+""},z}function d(p,v){var T=g((p=Kc(p),p.type="f",p)),E=Math.max(-8,Math.min(8,Math.floor(Yi(v)/3)))*3,S=Math.pow(10,-E),C=Av[8+E/3];return function(R){return T(S*R)+C}}return{format:g,formatPrefix:d}}var tc,yx,vx;DD({thousands:",",grouping:[3],currency:["$",""]});function DD(t){return tc=MD(t),yx=tc.format,vx=tc.formatPrefix,tc}function _D(t){return Math.max(0,-Yi(Math.abs(t)))}function LD(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yi(e)/3)))*3-Yi(Math.abs(t)))}function VD(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Yi(e)-Yi(t))+1}function BD(t,e,n,r){var i=HM(t,e,n),o;switch(r=Kc(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=LD(i,u))&&(r.precision=o),vx(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=VD(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=_D(i))&&(r.precision=o-(r.type==="%")*2);break}}return yx(r)}function UD(t){var e=t.domain;return t.ticks=function(n){var r=e();return AM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return BD(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,u=r[i],f=r[o],l,g,d=10;for(f<u&&(g=u,u=f,f=g,g=i,i=o,o=g);d-- >0;){if(g=N0(u,f,n),g===l)return r[i]=u,r[o]=f,e(r);if(g>0)u=Math.floor(u/g)*g,f=Math.ceil(f/g)*g;else if(g<0)u=Math.ceil(u*g)/g,f=Math.floor(f*g)/g;else break;l=g}return t},t}function Oh(){var t=xD();return t.copy=function(){return TD(t,Oh())},$M.apply(t,arguments),UD(t)}var wc={exports:{}},ND=wc.exports,Hv;function bD(){return Hv||(Hv=1,function(t){(function(e,n,r){function i(l){var g=this,d=f();g.next=function(){var p=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=p-(g.c=p|0)},g.c=1,g.s0=d(" "),g.s1=d(" "),g.s2=d(" "),g.s0-=d(l),g.s0<0&&(g.s0+=1),g.s1-=d(l),g.s1<0&&(g.s1+=1),g.s2-=d(l),g.s2<0&&(g.s2+=1),d=null}function o(l,g){return g.c=l.c,g.s0=l.s0,g.s1=l.s1,g.s2=l.s2,g}function u(l,g){var d=new i(l),p=g&&g.state,v=d.next;return v.int32=function(){return d.next()*4294967296|0},v.double=function(){return v()+(v()*2097152|0)*11102230246251565e-32},v.quick=v,p&&(typeof p=="object"&&o(p,d),v.state=function(){return o(d,{})}),v}function f(){var l=4022871197,g=function(d){d=String(d);for(var p=0;p<d.length;p++){l+=d.charCodeAt(p);var v=.02519603282416938*l;l=v>>>0,v-=l,v*=l,l=v>>>0,v-=l,l+=v*4294967296}return(l>>>0)*23283064365386963e-26};return g}n&&n.exports?n.exports=u:this.alea=u})(ND,t)}(wc)),wc.exports}var Oc={exports:{}},GD=Oc.exports,$v;function FD(){return $v||($v=1,function(t){(function(e,n,r){function i(f){var l=this,g="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var p=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^p^p>>>8},f===(f|0)?l.x=f:g+=f;for(var d=0;d<g.length+64;d++)l.x^=g.charCodeAt(d)|0,l.next()}function o(f,l){return l.x=f.x,l.y=f.y,l.z=f.z,l.w=f.w,l}function u(f,l){var g=new i(f),d=l&&l.state,p=function(){return(g.next()>>>0)/4294967296};return p.double=function(){do var v=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(v+T)/(1<<21);while(E===0);return E},p.int32=g.next,p.quick=p,d&&(typeof d=="object"&&o(d,g),p.state=function(){return o(g,{})}),p}n&&n.exports?n.exports=u:this.xor128=u})(GD,t)}(Oc)),Oc.exports}var Rc={exports:{}},kD=Rc.exports,Wv;function zD(){return Wv||(Wv=1,function(t){(function(e,n,r){function i(f){var l=this,g="";l.next=function(){var p=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(p^p<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,f===(f|0)?l.x=f:g+=f;for(var d=0;d<g.length+64;d++)l.x^=g.charCodeAt(d)|0,d==g.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(f,l){return l.x=f.x,l.y=f.y,l.z=f.z,l.w=f.w,l.v=f.v,l.d=f.d,l}function u(f,l){var g=new i(f),d=l&&l.state,p=function(){return(g.next()>>>0)/4294967296};return p.double=function(){do var v=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(v+T)/(1<<21);while(E===0);return E},p.int32=g.next,p.quick=p,d&&(typeof d=="object"&&o(d,g),p.state=function(){return o(g,{})}),p}n&&n.exports?n.exports=u:this.xorwow=u})(kD,t)}(Rc)),Rc.exports}var mc={exports:{}},AD=mc.exports,jv;function HD(){return jv||(jv=1,function(t){(function(e,n,r){function i(f){var l=this;l.next=function(){var d=l.x,p=l.i,v,T;return v=d[p],v^=v>>>7,T=v^v<<24,v=d[p+1&7],T^=v^v>>>10,v=d[p+3&7],T^=v^v>>>3,v=d[p+4&7],T^=v^v<<7,v=d[p+7&7],v=v^v<<13,T^=v^v<<9,d[p]=T,l.i=p+1&7,T};function g(d,p){var v,T=[];if(p===(p|0))T[0]=p;else for(p=""+p,v=0;v<p.length;++v)T[v&7]=T[v&7]<<15^p.charCodeAt(v)+T[v+1&7]<<13;for(;T.length<8;)T.push(0);for(v=0;v<8&&T[v]===0;++v);for(v==8?T[7]=-1:T[v],d.x=T,d.i=0,v=256;v>0;--v)d.next()}g(l,f)}function o(f,l){return l.x=f.x.slice(),l.i=f.i,l}function u(f,l){f==null&&(f=+new Date);var g=new i(f),d=l&&l.state,p=function(){return(g.next()>>>0)/4294967296};return p.double=function(){do var v=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(v+T)/(1<<21);while(E===0);return E},p.int32=g.next,p.quick=p,d&&(d.x&&o(d,g),p.state=function(){return o(g,{})}),p}n&&n.exports?n.exports=u:this.xorshift7=u})(AD,t)}(mc)),mc.exports}var Mc={exports:{}},$D=Mc.exports,Kv;function WD(){return Kv||(Kv=1,function(t){(function(e,n,r){function i(f){var l=this;l.next=function(){var d=l.w,p=l.X,v=l.i,T,E;return l.w=d=d+1640531527|0,E=p[v+34&127],T=p[v=v+1&127],E^=E<<13,T^=T<<17,E^=E>>>15,T^=T>>>12,E=p[v]=E^T,l.i=v,E+(d^d>>>16)|0};function g(d,p){var v,T,E,S,C,R=[],D=128;for(p===(p|0)?(T=p,p=null):(p=p+"\0",T=0,D=Math.max(D,p.length)),E=0,S=-32;S<D;++S)p&&(T^=p.charCodeAt((S+32)%p.length)),S===0&&(C=T),T^=T<<10,T^=T>>>15,T^=T<<4,T^=T>>>13,S>=0&&(C=C+1640531527|0,v=R[S&127]^=T+C,E=v==0?E+1:0);for(E>=128&&(R[(p&&p.length||0)&127]=-1),E=127,S=512;S>0;--S)T=R[E+34&127],v=R[E=E+1&127],T^=T<<13,v^=v<<17,T^=T>>>15,v^=v>>>12,R[E]=T^v;d.w=C,d.X=R,d.i=E}g(l,f)}function o(f,l){return l.i=f.i,l.w=f.w,l.X=f.X.slice(),l}function u(f,l){f==null&&(f=+new Date);var g=new i(f),d=l&&l.state,p=function(){return(g.next()>>>0)/4294967296};return p.double=function(){do var v=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(v+T)/(1<<21);while(E===0);return E},p.int32=g.next,p.quick=p,d&&(d.X&&o(d,g),p.state=function(){return o(g,{})}),p}n&&n.exports?n.exports=u:this.xor4096=u})($D,t)}(Mc)),Mc.exports}var Dc={exports:{}},jD=Dc.exports,Xv;function KD(){return Xv||(Xv=1,function(t){(function(e,n,r){function i(f){var l=this,g="";l.next=function(){var p=l.b,v=l.c,T=l.d,E=l.a;return p=p<<25^p>>>7^v,v=v-T|0,T=T<<24^T>>>8^E,E=E-p|0,l.b=p=p<<20^p>>>12^v,l.c=v=v-T|0,l.d=T<<16^v>>>16^E,l.a=E-p|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,f===Math.floor(f)?(l.a=f/4294967296|0,l.b=f|0):g+=f;for(var d=0;d<g.length+20;d++)l.b^=g.charCodeAt(d)|0,l.next()}function o(f,l){return l.a=f.a,l.b=f.b,l.c=f.c,l.d=f.d,l}function u(f,l){var g=new i(f),d=l&&l.state,p=function(){return(g.next()>>>0)/4294967296};return p.double=function(){do var v=g.next()>>>11,T=(g.next()>>>0)/4294967296,E=(v+T)/(1<<21);while(E===0);return E},p.int32=g.next,p.quick=p,d&&(typeof d=="object"&&o(d,g),p.state=function(){return o(g,{})}),p}n&&n.exports?n.exports=u:this.tychei=u})(jD,t)}(Dc)),Dc.exports}var _c={exports:{}};const XD={},qD=Object.freeze(Object.defineProperty({__proto__:null,default:XD},Symbol.toStringTag,{value:"Module"})),YD=TR(qD);var QD=_c.exports,qv;function ZD(){return qv||(qv=1,function(t){(function(e,n,r){var i=256,o=6,u=52,f="random",l=r.pow(i,o),g=r.pow(2,u),d=g*2,p=i-1,v;function T(O,m,M){var U=[];m=m==!0?{entropy:!0}:m||{};var b=R(C(m.entropy?[O,w(n)]:O??D(),3),U),j=new E(U),z=function(){for(var A=j.g(o),K=l,Y=0;A<g;)A=(A+Y)*i,K*=i,Y=j.g(1);for(;A>=d;)A/=2,K/=2,Y>>>=1;return(A+Y)/K};return z.int32=function(){return j.g(4)|0},z.quick=function(){return j.g(4)/4294967296},z.double=z,R(w(j.S),n),(m.pass||M||function(A,K,Y,Z){return Z&&(Z.S&&S(Z,j),A.state=function(){return S(j,{})}),Y?(r[f]=A,K):A})(z,b,"global"in m?m.global:this==r,m.state)}function E(O){var m,M=O.length,U=this,b=0,j=U.i=U.j=0,z=U.S=[];for(M||(O=[M++]);b<i;)z[b]=b++;for(b=0;b<i;b++)z[b]=z[j=p&j+O[b%M]+(m=z[b])],z[j]=m;(U.g=function(A){for(var K,Y=0,Z=U.i,se=U.j,F=U.S;A--;)K=F[Z=p&Z+1],Y=Y*i+F[p&(F[Z]=F[se=p&se+K])+(F[se]=K)];return U.i=Z,U.j=se,Y})(i)}function S(O,m){return m.i=O.i,m.j=O.j,m.S=O.S.slice(),m}function C(O,m){var M=[],U=typeof O,b;if(m&&U=="object")for(b in O)try{M.push(C(O[b],m-1))}catch{}return M.length?M:U=="string"?O:O+"\0"}function R(O,m){for(var M=O+"",U,b=0;b<M.length;)m[p&b]=p&(U^=m[p&b]*19)+M.charCodeAt(b++);return w(m)}function D(){try{var O;return v&&(O=v.randomBytes)?O=O(i):(O=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(O)),w(O)}catch{var m=e.navigator,M=m&&m.plugins;return[+new Date,e,M,e.screen,w(n)]}}function w(O){return String.fromCharCode.apply(0,O)}if(R(r.random(),n),t.exports){t.exports=T;try{v=YD}catch{}}else r["seed"+f]=T})(typeof self<"u"?self:QD,[],Math)}(_c)),_c.exports}var Ig,Yv;function JD(){if(Yv)return Ig;Yv=1;var t=bD(),e=FD(),n=zD(),r=HD(),i=WD(),o=KD(),u=ZD();return u.alea=t,u.xor128=e,u.xorwow=n,u.xorshift7=r,u.xor4096=i,u.tychei=o,Ig=u,Ig}JD();const PD=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ID=1e-6,e3=1e-12,{vtkErrorMacro:n6,vtkWarningMacro:Qv}=L;function Oo(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function ut(t){return t/180*Math.PI}function Ro(t){return t*180/Math.PI}const{round:nc}=Math;function Bn(t){let e=1;for(;e<t;)e*=2;return e}function rc(t){return t===Bn(t)}function k0(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Jn(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function Zv(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function me(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Qi(t,e,n){const r=t[1]*e[2]-t[2]*e[1],i=t[2]*e[0]-t[0]*e[2],o=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=i,n[2]=o,n}function Rh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function Ya(t){const e=Rh(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function t3(t){const e=Rh(t,3);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e),e}function qn(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function n3(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function r3(t){const e=n3(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function Lc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function a3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ID;if(t.length!==e.length)return!1;function r(i,o){return Math.abs(i-e[o])<=n}return t.every(r)}const Tx=a3;function e0(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function Jv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=e0(t[0],n),e[1]=e0(t[1],n),e[2]=e0(t[2],n),e}function Sx(t,e,n){let r,i,o,u,f=0,l,g,d;const p=Oo(n);for(r=0;r<n;r++){for(u=0,i=0;i<n;i++)(d=Math.abs(t[r*n+i]))>u&&(u=d);if(u===0)return Qv("Unable to factor linear system"),0;p[r]=1/u}for(i=0;i<n;i++){for(r=0;r<i;r++){for(l=t[r*n+i],o=0;o<r;o++)l-=t[r*n+o]*t[o*n+i];t[r*n+i]=l}for(u=0,r=i;r<n;r++){for(l=t[r*n+i],o=0;o<i;o++)l-=t[r*n+o]*t[o*n+i];t[r*n+i]=l,(g=p[r]*Math.abs(l))>=u&&(u=g,f=r)}if(i!==f){for(o=0;o<n;o++)g=t[f*n+o],t[f*n+o]=t[i*n+o],t[i*n+o]=g;p[f]=p[i]}if(e[i]=f,Math.abs(t[i*n+i])<=e3)return Qv("Unable to factor linear system"),0;if(i!==n-1)for(g=1/t[i*n+i],r=i+1;r<n;r++)t[r*n+i]*=g}return 1}function xx(t,e,n,r){let i,o,u,f,l;for(u=-1,i=0;i<r;i++){if(f=e[i],l=n[f],n[f]=n[i],u>=0)for(o=u;o<=i-1;o++)l-=t[i*r+o]*n[o];else l!==0&&(u=i);n[i]=l}for(i=r-1;i>=0;i--){for(l=n[i],o=i+1;o<r;o++)l-=t[i*r+o]*n[o];n[i]=l/t[i*r+i]}}function i3(t,e,n){if(n===2){const i=Oo(2),o=Lc(t[0],t[1],t[2],t[3]);return o===0?0:(i[0]=(t[3]*e[0]-t[1]*e[1])/o,i[1]=(-(t[2]*e[0])+t[0]*e[1])/o,e[0]=i[0],e[1]=i[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=Oo(n);return Sx(t,r,n)===0?0:(xx(t,r,e,n),1)}function s3(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const o=r||Oo(n),u=i||Oo(n);if(Sx(t,o,n)===0)return null;for(let f=0;f<n;f++){for(let l=0;l<n;l++)u[l]=0;u[f]=1,xx(t,o,u,n);for(let l=0;l<n;l++)e[l*n+f]=u[l]}return e}function o3(t,e){const[n,r,i]=t,o=1/3,u=1/6,f=2/3,l=5/6;let g,d,p;n>u&&n<=o?(d=1,g=(o-n)/u,p=0):n>o&&n<=.5?(d=1,p=(n-o)/u,g=0):n>.5&&n<=f?(p=1,d=(f-n)/u,g=0):n>f&&n<=l?(p=1,g=(n-f)/u,d=0):n>l&&n<=1?(g=1,p=(1-n)/u,d=0):(g=1,d=n/u,p=0),g=r*g+(1-r),d=r*d+(1-r),p=r*p+(1-r),g*=i,d*=i,p*=i,e[0]=g,e[1]=d,e[2]=p}function Cx(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function t0(t){return!(t[1]-t[0]<0)}function n0(t,e,n){return t<e?e:t>n?n:t}function Pv(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=n0(t[0],e[0],n[0]),r[1]=n0(t[1],e[1],n[1]),r[2]=n0(t[2],e[2],n[2]),r}const{isNaN:u3}=Number,Ex=u3;function mh(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function c3(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{L.vtkErrorMacro("not implemented")}}const f3={};function wx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f3,n),L.obj(t,e),L.setGet(t,e,["transform"]),c3(t,e)}const l3=L.newInstance(wx,"vtkImplicitFunction");var g3={newInstance:l3,extend:wx};const z0=1e-6,Ox="coincide",Rx="disjoint";function h3(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function mx(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function Mx(t,e,n,r){const i=[];Jn(t,e,i);const o=me(n,i);r[0]=t[0]-o*n[0],r[1]=t[1]-o*n[1],r[2]=t[2]-o*n[2]}function Dx(t,e,n){const r=me(t,e);let i=me(e,e);return i===0&&(i=1),n[0]=t[0]-r*e[0]/i,n[1]=t[1]-r*e[1]/i,n[2]=t[2]-r*e[2]/i,n}function _x(t,e,n,r){const i=[];Jn(t,e,i);const o=me(n,i),u=me(n,n);u!==0?(r[0]=t[0]-o*n[0]/u,r[1]=t[1]-o*n[1]/u,r[2]=t[2]-o*n[2]/u):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function Lx(t,e,n,r){const i={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},o=[],u=[];Jn(e,t,o),Jn(n,t,u);const f=me(r,u),l=me(r,o);let g,d;return l<0?g=-l:g=l,f<0?d=-f*z0:d=f*z0,g<=d||(i.t=f/l,i.x[0]=t[0]+i.t*o[0],i.x[1]=t[1]+i.t*o[1],i.x[2]=t[2]+i.t*o[2],i.intersection=!0,i.betweenPoints=i.t>=0&&i.t<=1),i}function Vx(t,e,n,r){const i={intersection:!1,l0:[],l1:[],error:null},o=[];Qi(e,r,o);const u=o.map(p=>Math.abs(p));if(u[0]+u[1]+u[2]<z0){const p=[];return Jn(t,n,p),me(e,p)===0?i.error=Ox:i.error=Rx,i}let f;u[0]>u[1]&&u[0]>u[2]?f="x":u[1]>u[2]?f="y":f="z";const l=[],g=-me(e,t),d=-me(r,n);switch(f){case"x":l[0]=0,l[1]=(d*e[2]-g*r[2])/o[0],l[2]=(g*r[1]-d*e[1])/o[0];break;case"y":l[0]=(g*r[2]-d*e[2])/o[1],l[1]=0,l[2]=(d*e[0]-g*r[0])/o[1];break;case"z":l[0]=(d*e[1]-g*r[1])/o[2],l[1]=(g*r[0]-d*e[0])/o[2],l[2]=0;break}return i.l0=l,k0(l,o,i.l1),i.intersection=!0,i}const p3={evaluate:h3,distanceToPlane:mx,projectPoint:Mx,projectVector:Dx,generalizedProjectPoint:_x,intersectWithLine:Lx,intersectWithPlane:Vx,DISJOINT:Rx,COINCIDE:Ox};function d3(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>mx(n,e.origin,e.normal),t.projectPoint=(n,r)=>{Mx(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>Dx(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{_x(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,i)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(i-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>Lx(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>Vx(n,r,e.origin,e.normal)}const y3={normal:[0,0,1],origin:[0,0,0]};function Bx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y3,n),g3.extend(t,e,n),L.setGetArray(t,e,["normal","origin"],3),d3(t,e)}const v3=L.newInstance(Bx,"vtkPlane");var Zi={newInstance:v3,extend:Bx,...p3};const sf=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Ux(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function wr(t){return t?.length>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function Mh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Dh(t){return Mh(t,sf)}function Xc(t,e,n,r){const[i,o,u,f,l,g]=t;return t[0]=i<e?i:e,t[1]=o>e?o:e,t[2]=u<n?u:n,t[3]=f>n?f:n,t[4]=l<r?l:r,t[5]=g>r?g:r,t}function _h(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)Xc(t,...e[n]);else for(let n=0;n<e.length;n+=3)Xc(t,...e.slice(n,n+3));return t}function Nx(t,e,n,r,i,o,u){const[f,l,g,d,p,v]=t;return u===void 0?(t[0]=Math.min(e[0],f),t[1]=Math.max(e[1],l),t[2]=Math.min(e[2],g),t[3]=Math.max(e[3],d),t[4]=Math.min(e[4],p),t[5]=Math.max(e[5],v)):(t[0]=Math.min(e,f),t[1]=Math.max(n,l),t[2]=Math.min(r,g),t[3]=Math.max(i,d),t[4]=Math.min(o,p),t[5]=Math.max(u,v)),t}function bx(t,e,n,r){const[i,o,u,f,l,g]=t;return t[0]=e,t[1]=e>o?e:o,t[2]=n,t[3]=n>f?n:f,t[4]=r,t[5]=r>g?r:g,i!==e||u!==n||l!==r}function Gx(t,e,n,r){const[i,o,u,f,l,g]=t;return t[0]=e<i?e:i,t[1]=e,t[2]=n<u?n:u,t[3]=n,t[4]=r<l?r:l,t[5]=r,o!==e||f!==n||g!==r}function Fx(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function Lh(t,e,n,r){return wr(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function Vh(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function T3(t,e,n,r){if(!wr(t))return!1;const i=Vh(t);return t[0]-=i[0],t[1]-=i[0],t[2]-=i[1],t[3]-=i[1],t[4]-=i[2],t[5]-=i[2],Lh(t,e,n,r),t[0]+=i[0],t[1]+=i[0],t[2]+=i[1],t[3]+=i[1],t[4]+=i[2],t[5]+=i[2],!0}function To(t,e){return t[e*2+1]-t[e*2]}function of(t){return[To(t,0),To(t,1),To(t,2)]}function kx(t){return t.slice(0,2)}function zx(t){return t.slice(2,4)}function Ax(t){return t.slice(4,6)}function Hx(t){const e=of(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function $x(t){if(wr(t)){const e=of(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function Bh(t){return[t[0],t[2],t[4]]}function Uh(t){return[t[1],t[3],t[5]]}function ac(t,e){return t<=0&&e>=0||t>=0&&e<=0}function Nh(t,e){let n=0;for(let r=0;r<2;r++)for(let i=2;i<4;i++)for(let o=4;o<6;o++)e[n++]=[t[r],t[i],t[o]];return e}function Wx(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function jx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=Nh(t,[]);for(let i=0;i<r.length;++i)Ge(r[i],r[i],e);return Dh(n),_h(n,r)}function Kx(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function Xx(t,e,n,r){const i=[].concat(sf),o=t.getData();for(let u=0;u<o.length;u+=3){const f=[o[u],o[u+1],o[u+2]],l=me(f,e);i[0]=Math.min(l,i[0]),i[1]=Math.max(l,i[1]);const g=me(f,n);i[2]=Math.min(g,i[2]),i[3]=Math.max(g,i[3]);const d=me(f,r);i[4]=Math.min(d,i[4]),i[5]=Math.max(d,i[5])}return i}function qx(t,e,n,r,i){let o=!0;const u=[];let f=0;const l=[],g=[0,0,0],d=0,p=1,v=2;for(let T=0;T<3;T++)e[T]<t[2*T]?(u[T]=p,g[T]=t[2*T],o=!1):e[T]>t[2*T+1]?(u[T]=d,g[T]=t[2*T+1],o=!1):u[T]=v;if(o)return r[0]=e[0],r[1]=e[1],r[2]=e[2],i[0]=0,1;for(let T=0;T<3;T++)u[T]!==v&&n[T]!==0?l[T]=(g[T]-e[T])/n[T]:l[T]=-1;for(let T=0;T<3;T++)l[f]<l[T]&&(f=T);if(l[f]>1||l[f]<0)return 0;i[0]=l[f];for(let T=0;T<3;T++)if(f!==T){if(r[T]=e[T]+l[f]*n[T],r[T]<t[2*T]||r[T]>t[2*T+1])return 0}else r[T]=g[T];return 1}function Yx(t,e,n){const r=[];let i=0,o=1,u=1;for(let f=4;f<=5;++f){r[2]=t[f];for(let l=2;l<=3;++l){r[1]=t[l];for(let g=0;g<=1;++g)if(r[0]=t[g],i=Zi.evaluate(n,e,r),u&&(o=i>=0?1:-1,u=0),i===0||o>0&&i<0||o<0&&i>0)return 1}}return 0}function Qx(t,e){if(!(wr(t)&&wr(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let i=0;i<3;i++)if(r=!1,e[i*2]>=t[i*2]&&e[i*2]<=t[i*2+1]?(r=!0,n[i*2]=e[i*2]):t[i*2]>=e[i*2]&&t[i*2]<=e[i*2+1]&&(r=!0,n[i*2]=t[i*2]),e[i*2+1]>=t[i*2]&&e[i*2+1]<=t[i*2+1]?(r=!0,n[i*2+1]=e[2*i+1]):t[i*2+1]>=e[i*2]&&t[i*2+1]<=e[i*2+1]&&(r=!0,n[i*2+1]=t[i*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function qc(t,e){if(!(wr(t)&&wr(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function Yc(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function S3(t,e){return!(!qc(t,e)||!Yc(t,...Bh(e))||!Yc(t,...Uh(e)))}function Zx(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],i=[0,0,0,0,0,0,0,0];let o=0;for(let p=0;p<2;p++)for(let v=2;v<4;v++)for(let T=4;T<6;T++){const E=[t[p],t[v],t[T]];i[o++]=Zi.evaluate(n,e,E)}let u=2;for(;u--&&!(ac(i[r[u][0]],i[r[u][4]])&&ac(i[r[u][1]],i[r[u][5]])&&ac(i[r[u][2]],i[r[u][6]])&&ac(i[r[u][3]],i[r[u][7]])););if(u<0)return!1;const f=Math.sign(n[u]),l=Math.abs((t[u*2+1]-t[u*2])*n[u]);let g=f>0?1:0;for(let p=0;p<4;p++){if(l===0)continue;const v=Math.abs(i[r[u][p]])/l;f>0&&v<g&&(g=v),f<0&&v>g&&(g=v)}const d=(1-g)*t[u*2]+g*t[u*2+1];return f>0?t[u*2]=d:t[u*2+1]=d,!0}class x3{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(sf))}getBounds(){return this.bounds}equals(e){return Ux(this.bounds,e)}isValid(){return wr(this.bounds)}setBounds(e){return Mh(this.bounds,e)}reset(){return Dh(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Xc(this.bounds,...n)}addPoints(e){return _h(this.bounds,e)}addBounds(e,n,r,i,o,u){return Nx(this.bounds,e,n,r,i,o,u)}setMinPoint(e,n,r){return bx(this.bounds,e,n,r)}setMaxPoint(e,n,r){return Gx(this.bounds,e,n,r)}inflate(e){return Fx(this.bounds,e)}scale(e,n,r){return Lh(this.bounds,e,n,r)}getCenter(){return Vh(this.bounds)}getLength(e){return To(this.bounds,e)}getLengths(){return of(this.bounds)}getMaxLength(){return Hx(this.bounds)}getDiagonalLength(){return $x(this.bounds)}getMinPoint(){return Bh(this.bounds)}getMaxPoint(){return Uh(this.bounds)}getXRange(){return kx(this.bounds)}getYRange(){return zx(this.bounds)}getZRange(){return Ax(this.bounds)}getCorners(e){return Nh(this.bounds,e)}computeCornerPoints(e,n){return Wx(this.bounds,e,n)}computeLocalBounds(e,n,r){return Xx(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return jx(this.bounds,e,n)}computeScale3(e){return Kx(this.bounds,e)}cutWithPlane(e,n){return Zx(this.bounds,e,n)}intersectBox(e,n,r,i){return qx(this.bounds,e,n,r,i)}intersectPlane(e,n){return Yx(this.bounds,e,n)}intersect(e){return Qx(this.bounds,e)}intersects(e){return qc(this.bounds,e)}containsPoint(e,n,r){return Yc(this.bounds,e,n,r)}contains(e){return qc(this.bounds,e)}}function C3(t){const e=t&&t.bounds;return new x3(e)}const E3={equals:Ux,isValid:wr,setBounds:Mh,reset:Dh,addPoint:Xc,addPoints:_h,addBounds:Nx,setMinPoint:bx,setMaxPoint:Gx,inflate:Fx,scale:Lh,scaleAboutCenter:T3,getCenter:Vh,getLength:To,getLengths:of,getMaxLength:Hx,getDiagonalLength:$x,getMinPoint:Bh,getMaxPoint:Uh,getXRange:kx,getYRange:zx,getZRange:Ax,getCorners:Nh,computeCornerPoints:Wx,computeLocalBounds:Xx,transformBounds:jx,computeScale3:Kx,cutWithPlane:Zx,intersectBox:qx,intersectPlane:Yx,intersect:Qx,intersects:qc,containsPoint:Yc,contains:S3,INIT_BOUNDS:sf};var We={newInstance:C3,...E3};const w3={DISPLAY:0,WORLD:1};var Jx={CoordinateSystem:w3};const{CoordinateSystem:A0}=Jx;function Iv(t){return()=>L.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function O3(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const i=e.textures[r].getMTime();i>n&&(n=i)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=Iv("pick"),t.hasKey=Iv("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(i=>i!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(A0.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(A0.DISPLAY)}const R3={allocatedRenderTime:10,coordinateSystem:A0.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Px(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R3,n),L.obj(t,e),L.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),L.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),L.moveToProtected(t,e,["parentProp"]),O3(t,e)}const m3=L.newInstance(Px,"vtkProp");var Bo={newInstance:m3,extend:Px,...Jx};const M3=1e-6;function D3(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((i,o)=>i+r[o]),t.modified()},t.getOrientationWXYZ=()=>{const r=qa();D0(r,e.rotation);const i=new Float64Array(3),o=Bm(i,r);return[Ro(o),i[0],i[1],i[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D0(r,e.rotation)},t.rotateX=r=>{r!==0&&(uh(e.rotation,e.rotation,ut(r)),t.modified())},t.rotateY=r=>{r!==0&&(ch(e.rotation,e.rotation,ut(r)),t.modified())},t.rotateZ=r=>{r!==0&&(fh(e.rotation,e.rotation,ut(r)),t.modified())},t.rotateWXYZ=(r,i,o,u)=>{if(r===0||i===0&&o===0&&u===0)return;const f=ut(r),l=qa();gh(l,[i,o,u],f);const g=new Float64Array(16);Fc(g,l),yt(e.rotation,e.rotation,g),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-M3)return;const i=Fc(new Float64Array(16),r);yt(e.rotation,e.rotation,i),t.modified()},t.setOrientation=(r,i,o)=>r===e.orientation[0]&&i===e.orientation[1]&&o===e.orientation[2]?!1:(e.orientation=[r,i,o],Re(e.rotation),t.rotateZ(o),t.rotateX(r),t.rotateY(i),t.modified(),!0),t.setUserMatrix=r=>Tx(e.userMatrix,r)?!1:(Lt(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Re(e.matrix),e.userMatrix&&yt(e.matrix,e.matrix,e.userMatrix),ct(e.matrix,e.matrix,e.origin),ct(e.matrix,e.matrix,e.position),yt(e.matrix,e.matrix,e.rotation),Xa(e.matrix,e.matrix,e.scale),ct(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),Qe(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let i=0;i<4;++i)(r===i?1:0)!==e.matrix[r+i*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getBoundsByReference=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r,e.bounds=[...We.INIT_BOUNDS],e.boundsMTime.modified(),r;if(!e.mapperBounds||!r.every((i,o)=>r[o]===e.mapperBounds[o])||t.getMTime()>e.boundsMTime.getMTime()){L.vtkDebugMacro("Recomputing bounds..."),e.mapperBounds=r,t.computeMatrix();const i=new Float64Array(16);Qe(i,e.matrix),We.transformBounds(r,i,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBounds=()=>{const r=t.getBoundsByReference();try{return[...r]}catch{return r}},t.getCenter=()=>We.getCenter(e.bounds),t.getLength=()=>We.getLength(e.bounds),t.getXRange=()=>We.getXRange(e.bounds),t.getYRange=()=>We.getYRange(e.bounds),t.getZRange=()=>We.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n),t.getProperty=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.properties[r]==null&&(e.properties[r]=t.makeProperty?.()),e.properties[r]},t.setProperty=(r,i)=>{const o=Number.isInteger(r),[u,f]=o?[r,i]:[0,r];return e.properties[u]===f?!1:(e.properties[u]=f,!0)},t.getMTime=()=>{let r=e.mtime;return e.properties.forEach(i=>{if(i!==null){const o=i.getMTime();r=o>r?o:r}}),r}}const _3={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[...We.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Ix(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_3,n),Bo.extend(t,e,n),e.matrixMTime={},L.obj(e.matrixMTime),L.get(t,e,["isIdentity"]),L.getArray(t,e,["orientation"]),L.setGetArray(t,e,["origin","position","scale"],3),L.setGet(t,e,["properties"]),e.matrix=Re(new Float64Array(16)),e.rotation=Re(new Float64Array(16)),e.userMatrix=Re(new Float64Array(16)),e.transform=null,D3(t,e)}const L3=L.newInstance(Ix,"vtkProp3D");var V3={newInstance:L3,extend:Ix};const e2={FLAT:0,GOURAUD:1,PHONG:2},En={POINTS:0,WIREFRAME:1,SURFACE:2},B3=e2;var t2={Shading:e2,Representation:En,Interpolation:B3};const{Representation:po,Interpolation:yo}=t2;function eT(t){return()=>L.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function U3(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,i)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==i)&&(e.color[0]=n,e.color[1]=r,e.color[2]=i,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=eT("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=eT("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(yo.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(yo.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(yo.PHONG),t.getInterpolationAsString=()=>L.enumToString(yo,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(po.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(po.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(po.POINTS),t.getRepresentationAsString=()=>L.enumToString(po,e.representation)}const N3={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:yo.GOURAUD,representation:po.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function b3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N3,n),L.obj(t,e),L.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),L.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),U3(t,e)}const G3=L.newInstance(b3,"vtkProperty");var ns={newInstance:G3,...t2};function F3(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let r=e.properties[0].getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.properties[0]||t.getProperty(),!t.getIsOpaque()),t.makeProperty=ns.newInstance,t.getMTime=()=>{let r=n.getMTime();if(e.backfaceProperty!==null){const i=e.backfaceProperty.getMTime();r=i>r?i:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let i=e.mapper.getMTime();r=i>r?i:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),i=e.mapper.getInput().getMTime(),r=i>r?i:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,i)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,i)}}const k3={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function n2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k3,n),V3.extend(t,e,n),e.boundsMTime={},L.obj(e.boundsMTime),L.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),F3(t,e)}const z3=L.newInstance(n2,"vtkActor");var Qa={newInstance:z3,extend:n2};const r2={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},wt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},A3=wt.FLOAT;var a2={DefaultDataType:A3,DataTypeByteSize:r2,VtkDataTypes:wt};const{vtkErrorMacro:H3}=In,{DefaultDataType:$3}=a2,W3=1e-6;function H0(t,e,n){const r=t.length;let i=Number.MAX_VALUE,o=-Number.MAX_VALUE,u,f;for(f=e;f<r;f+=n)if(!Number.isNaN(t[f])){i=t[f],o=i;break}for(;f<r;f+=n)u=t[f],u<i?i=u:u>o&&(o=u);return{min:i,max:o}}function j3(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(i){t>i&&(t=i),e<i&&(e=i),n++,r+=i},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function i2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const i=t.length/n,o=new Float64Array(i);for(let u=0,f=0;u<i;++u){for(let l=f+n;f<l;++f)o[u]+=t[f]*t[f];o[u]**=.5}return H0(o,0,1)}return H0(t,e<0?0:e,n)}function tT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function bh(t){return Object.prototype.toString.call(t).slice(8,-1)}function K3(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let i=0;i<t.getNumberOfTuples();++i){t.getTuple(i,r);const o=Rh(r,e);o>n&&(n=o)}return n}const X3={computeRange:i2,createRangeHelper:j3,fastComputeRange:H0,getDataType:bh,getMaxNorm:K3};function q3(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const i=t.getNumberOfComponents(),o=e.values.length/(i>0?i:1);if(r===o)return!0;if(r>o){const u=e.values;return e.values=es(e.dataType,(r+o)*i),e.values.set(u),!0}return e.size>r*i&&(e.size=r*i,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.allocate=r=>{n(t.getNumberOfTuples()+r)},t.resize=r=>{n(r);const i=r*t.getNumberOfComponents();return e.size!==i?(e.size=i,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+i]},t.setComponent=(r,i,o)=>{o!==e.values[r*e.numberOfComponents+i]&&(e.values[r*e.numberOfComponents+i]=o,t.dataChange())},t.getValue=r=>{const i=r/e.numberOfComponents,o=r%e.numberOfComponents;return t.getComponent(i,o)},t.setValue=(r,i)=>{const o=r/e.numberOfComponents,u=r%e.numberOfComponents;t.setComponent(o,u,i)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,i=r;i<0&&(i=e.numberOfComponents===1?0:e.numberOfComponents);let o=null;return e.ranges||(e.ranges=tT(e.ranges,e.numberOfComponents)),o=e.ranges[i],o?(e.rangeTuple[0]=o.min,e.rangeTuple[1]=o.max,e.rangeTuple):(o=i2(t.getData(),r,e.numberOfComponents),e.ranges[i]=o,e.rangeTuple[0]=o.min,e.rangeTuple[1]=o.max,e.rangeTuple)},t.setRange=(r,i)=>{e.ranges||(e.ranges=tT(e.ranges,e.numberOfComponents));const o={min:r.min,max:r.max};return e.ranges[i]=o,e.rangeTuple[0]=o.min,e.rangeTuple[1]=o.max,e.rangeTuple},t.getRanges=function(){if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0))return structuredClone(e.ranges);const i=[];for(let o=0;o<e.numberOfComponents;o++){const[u,f]=t.getRange(o),l={min:u,max:f};i.push(l)}if(e.numberOfComponents>1){const[o,u]=t.getRange(-1),f={min:o,max:u};i.push(f)}return i},t.setTuple=(r,i)=>{const o=r*e.numberOfComponents;for(let u=0;u<e.numberOfComponents;u++)e.values[o+u]=i[u]},t.setTuples=(r,i)=>{let o=r*e.numberOfComponents;const u=Math.min(i.length,e.size-o);for(let f=0;f<u;)e.values[o++]=i[f++]},t.insertTuple=(r,i)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,i),r),t.insertTuples=(r,i)=>{const o=r+i.length/e.numberOfComponents;return e.size<o*e.numberOfComponents&&(e.size=o*e.numberOfComponents,n(o)),t.setTuples(r,i),o},t.insertNextTuple=r=>{const i=e.size/e.numberOfComponents;return t.insertTuple(i,r)},t.insertNextTuples=r=>{const i=e.size/e.numberOfComponents;return t.insertTuples(i,r)},t.findTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:W3;for(let o=0;o<e.size;o+=e.numberOfComponents)if(Math.abs(r[0]-e.values[o])<=i){let u=!0;for(let f=1;f<e.numberOfComponents;++f)if(Math.abs(r[f]-e.values[o+f])>i){u=!1;break}if(u)return o/e.numberOfComponents}return-1},t.getTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const o=e.numberOfComponents||1,u=r*o;switch(o){case 4:i[3]=e.values[u+3];case 3:i[2]=e.values[u+2];case 2:i[1]=e.values[u+1];case 1:i[0]=e.values[u];break;default:for(let f=o-1;f>=0;--f)i[f]=e.values[u+f]}return i},t.getTuples=(r,i)=>{const o=(r??0)*e.numberOfComponents,u=(i??t.getNumberOfTuples())*e.numberOfComponents,f=t.getData().subarray(o,u);return f.length>0?f:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>o2({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,i)=>{e.values=r,e.size=r.length,e.dataType=bh(r),i&&(e.numberOfComponents=i),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(o=>{r[o]||delete r[o]});const i={};return Object.keys(r).sort().forEach(o=>{i[o]=r[o]}),i.mtime&&delete i.mtime,i},t.deepCopy=r=>{const i=t.getDataType(),o=e.values;t.shallowCopy(r),e.ranges=structuredClone(r.getRanges()),o?.length>=r.getNumberOfValues()&&i===r.getDataType()?(o.set(r.getData()),e.values=o,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,i,o,u,f,l)=>{const g=e.numberOfComponents||1;(g!==i.getNumberOfComponents()||g!==u.getNumberOfComponents())&&H3("numberOfComponents must match");const d=i.getTuple(o),p=u.getTuple(f),v=[];switch(v.length=g,g){case 4:v[3]=d[3]+(p[3]-d[3])*l;case 3:v[2]=d[2]+(p[2]-d[2])*l;case 2:v[1]=d[1]+(p[1]-d[1])*l;case 1:v[0]=d[0]+(p[0]-d[0])*l;break;default:for(let T=0;T<g;T++)v[T]=d[T]+(p[T]-d[T])*l}return t.insertTuple(r,v)}}const Y3={name:"",numberOfComponents:1,dataType:$3,rangeTuple:[0,0]};function s2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Y3,n),Array.isArray(n.values)&&n.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=hh(e.dataType,e.values)):e.values=es(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=bh(e.values)),mt(t,e),_o(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");q3(t,e)}const o2=Xe(s2,"vtkDataArray");var je={newInstance:o2,extend:s2,...X3,...a2};function Q3(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let i=0;i<r&&i<6;i++)t.addClippingPlane(n[i])}},t.getClippingPlaneInDataCoords=(n,r,i)=>{const o=e.clippingPlanes,u=n;if(o){const f=o.length;if(r>=0&&r<f){const l=o[r],g=l.getNormal(),d=l.getOrigin(),p=g[0],v=g[1],T=g[2],E=-(p*d[0]+v*d[1]+T*d[2]);i[0]=p*u[0]+v*u[4]+T*u[8]+E*u[12],i[1]=p*u[1]+v*u[5]+T*u[9]+E*u[13],i[2]=p*u[2]+v*u[6]+T*u[10]+E*u[14],i[3]=p*u[3]+v*u[7]+T*u[11]+E*u[15];return}}L.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const Z3={clippingPlanes:[]};function J3(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z3,n),L.obj(t,e),L.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),Q3(t,e)}var P3={extend:J3};function I3(t,e){t.getBounds=()=>(L.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),mh()),t.getCenter=()=>{const n=t.getBounds();return e.center=We.isValid(n)?We.getCenter(n):null,e.center?.slice()},t.getLength=()=>{const n=t.getBounds();return We.getDiagonalLength(n)}}const e_=t=>({bounds:[...We.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function t_(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e_(n)),P3.extend(t,e,n),L.setGet(t,e,["viewSpecificProperties"]),I3(t,e)}var n_={extend:t_};const{vtkErrorMacro:nT,vtkWarningMacro:r_}=L;function a_(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:bn(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(i=>i),e.arrays=r.arrays().map(i=>({array:i}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const i=r.getName(),{array:o,index:u}=t.getArrayWithIndex(i);return o!=null?(e.arrays[u]={data:r},u):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const i=e.arrays.findIndex(o=>o.data.getName()===r);return t.removeArrayByIndex(i)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((i,o,u)=>o.data.getName()===r?o.data:i,null),t.getArrayWithIndex=r=>{const i=e.arrays.findIndex(o=>o.data.getName()===r);return{array:i!==-1?e.arrays[i].data:null,index:i}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const i=e.arrays[r];return i?i.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(u=>{const f=t.getFlag(u.getName());if(f!==!1&&!(e.doCopyAllOff&&f!==!0)&&u){let l=t.getArrayByName(u.getName());if(l)if(u.getNumberOfComponents()===l.getNumberOfComponents())if(i>-1&&i<u.getNumberOfTuples()){const g=o>-1?o:i;l.insertTuple(g,u.getTuple(i))}else l.insertTuples(0,u.getTuples());else nT("Unhandled case in passData");else if(i<0||i>u.getNumberOfTuples())t.addArray(u),r.getAttributes(u).forEach(g=>{t.setAttribute(u,g)});else{const g=u.getNumberOfComponents();let d=u.getNumberOfValues();const p=o>-1?o:i;d<=p*g&&(d=(p+1)*g),l=je.newInstance({name:u.getName(),dataType:u.getDataType(),numberOfComponents:g,values:L.newTypedArray(u.getDataType(),d),size:0}),l.insertTuple(p,u.getTuple(i)),t.addArray(l),r.getAttributes(u).forEach(v=>{t.setAttribute(l,v)})}}})},t.interpolateData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(l=>{const g=t.getFlag(l.getName());if(g!==!1&&!(e.doCopyAllOff&&g!==!0)&&l){let d=t.getArrayByName(l.getName());if(d)if(l.getNumberOfComponents()===d.getNumberOfComponents())if(i>-1&&i<l.getNumberOfTuples()){const p=u>-1?u:i;d.interpolateTuple(p,l,i,l,o,f),r_("Unexpected case in interpolateData")}else d.insertTuples(l.getTuples());else nT("Unhandled case in interpolateData");else if(i<0||o<0||i>l.getNumberOfTuples())t.addArray(l),r.getAttributes(l).forEach(p=>{t.setAttribute(l,p)});else{const p=l.getNumberOfComponents();let v=l.getNumberOfValues();const T=u>-1?u:i;v<=T*p&&(v=(T+1)*p),d=je.newInstance({name:l.getName(),dataType:l.getDataType(),numberOfComponents:p,values:L.newTypedArray(l.getDataType(),v),size:0}),d.interpolateTuple(T,l,i,l,o,f),t.addArray(d),r.getAttributes(l).forEach(E=>{t.setAttribute(d,E)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(i=>{const o=i.newClone();return o.deepCopy(i),{data:o}})},t.copyFlags=r=>r.getCopyFieldFlags().map(i=>i),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,i)=>i.data.getMTime()>r?i.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,i)=>r+i.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(i=>({data:i.data.getState()}))),r}}const i_={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function u2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i_,n),L.obj(t,e),a_(t,e)}const s_=L.newInstance(u2,"vtkFieldData");var o_={newInstance:s_,extend:u2};const u_={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},c_={MAX:0,EXACT:1,NOLIMIT:2},f_={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},l_={DUPLICATEPOINT:1,HIDDENPOINT:2},g_={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},h_="vtkGhostType",p_={DEFAULT:0,SINGLE:1,DOUBLE:2};var c2={AttributeCopyOperations:g_,AttributeLimitTypes:c_,AttributeTypes:u_,CellGhostTypes:f_,DesiredOutputPrecision:p_,PointGhostTypes:l_,ghostArrayName:h_};const{AttributeTypes:Qr,AttributeCopyOperations:_a}=c2,{vtkWarningMacro:ic}=L;function d_(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(u){let f=n.find(l=>Qr[l.toUpperCase()]===u||typeof u!="number"&&l.toLowerCase()===u.toLowerCase());return typeof f>"u"&&(f=null),f}e.classHierarchy.push("vtkDataSetAttributes");const i={...t};t.checkNumberOfComponents=u=>!0,t.setAttribute=(u,f)=>{const l=r(f);if(u&&l.toUpperCase()==="PEDIGREEIDS"&&!u.isA("vtkDataArray"))return ic(`Cannot set attribute ${l}. The attribute must be a vtkDataArray.`),-1;if(u&&!t.checkNumberOfComponents(u,l))return ic(`Cannot set attribute ${l}. Incorrect number of components.`),-1;let g=e[`active${l}`];if(g>=0&&g<e.arrays.length){if(e.arrays[g]===u)return g;t.removeArrayByIndex(g)}return u?(g=t.addArray(u),e[`active${l}`]=g):e[`active${l}`]=-1,t.modified(),e[`active${l}`]},t.getAttributes=u=>n.filter(f=>t[`get${f}`]()===u),t.setActiveAttributeByName=(u,f)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(u).index,f),t.setActiveAttributeByIndex=(u,f)=>{const l=r(f);if(u>=0&&u<e.arrays.length){if(l.toUpperCase()!=="PEDIGREEIDS"){const g=t.getArrayByIndex(u);if(!g.isA("vtkDataArray"))return ic(`Cannot set attribute ${l}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(g,l))return ic(`Cannot set attribute ${l}. Incorrect number of components.`),-1}return e[`active${l}`]=u,t.modified(),u}return u===-1&&(e[`active${l}`]=u,t.modified()),-1},t.getActiveAttribute=u=>{const f=r(u);return t[`get${f}`]()},t.removeAllArrays=()=>{n.forEach(u=>{e[`active${u}`]=-1}),i.removeAllArrays()},t.removeArrayByIndex=u=>(u!==-1&&n.forEach(f=>{u===e[`active${f}`]?e[`active${f}`]=-1:u<e[`active${f}`]&&(e[`active${f}`]-=1)}),i.removeArrayByIndex(u)),n.forEach(u=>{const f=`active${u}`;t[`get${u}`]=()=>t.getArrayByIndex(e[f]),t[`set${u}`]=l=>t.setAttribute(l,u),t[`setActive${u}`]=l=>t.setActiveAttributeByIndex(t.getArrayWithIndex(l).index,u),t[`copy${u}Off`]=()=>{const l=u.toUpperCase();e.copyAttributeFlags[_a.PASSDATA][Qr[l]]=!1},t[`copy${u}On`]=()=>{const l=u.toUpperCase();e.copyAttributeFlags[_a.PASSDATA][Qr[l]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(_a).filter(u=>u!=="ALLCOPY").forEach(u=>{e.copyAttributeFlags[_a[u]]=Object.keys(Qr).filter(f=>f!=="NUM_ATTRIBUTES").reduce((f,l)=>(f[Qr[l]]=!0,f),[])}),e.copyAttributeFlags[_a.COPYTUPLE][Qr.GLOBALIDS]=!1,e.copyAttributeFlags[_a.INTERPOLATE][Qr.GLOBALIDS]=!1,e.copyAttributeFlags[_a.COPYTUPLE][Qr.PEDIGREEIDS]=!1},t.initialize=L.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(u=>{!e.dataArrays[u].ref&&e.dataArrays[u].type==="vtkDataArray"&&t.addArray(je.newInstance(e.dataArrays[u]))});const o=t.shallowCopy;t.shallowCopy=(u,f)=>{o(u,f),e.arrays=u.getArrays().map(l=>{const g=l.newClone();return g.shallowCopy(l,f),{data:g}})},t.initializeAttributeCopyFlags()}const y_={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function f2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y_,n),o_.extend(t,e,n),L.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),d_(t,e)}const v_=L.newInstance(f2,"vtkDataSetAttributes");var rT={newInstance:v_,extend:f2,...c2};const T_={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},S_={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var x_={FieldDataTypes:T_,FieldAssociations:S_};const $0=["pointData","cellData","fieldData"];function C_(t,e){e.classHierarchy.push("vtkDataSet"),$0.forEach(r=>{e[r]?e[r]=bn(e[r]):e[r]=rT.newInstance()});const n=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,i),$0.forEach(o=>{e[o]=rT.newInstance(),e[o].shallowCopy(r.getReferenceByName(o))})}}const E_={};function l2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E_,n),L.obj(t,e),L.setGet(t,e,$0),C_(t,e)}const w_=L.newInstance(l2,"vtkDataSet");var Ia={newInstance:w_,extend:l2,...x_};const _n={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var g2={StructuredType:_n};const{StructuredType:vr}=g2;function O_(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?vr.EMPTY:e===3?vr.XYZ_GRID:e===2?t[0]===t[1]?vr.YZ_PLANE:t[2]===t[3]?vr.XZ_PLANE:vr.XY_PLANE:e===1?t[0]<t[1]?vr.X_LINE:t[2]<t[3]?vr.Y_LINE:vr.Z_LINE:vr.SINGLE_POINT}var R_={getDataDescriptionFromExtent:O_,...g2};const{vtkErrorMacro:La}=L;function m_(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return La("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=r.length===1?r[0]:r;if(o.length!==6)return!1;const u=e.extent.some((f,l)=>f!==o[l]);return u&&(e.extent=o.slice(),e.dataDescription=R_.getDataDescriptionFromExtent(e.extent),t.modified()),u},t.setDimensions=function(){let n,r,i;if(e.deleted){La("instance deleted - cannot call any method");return}if(arguments.length===1){const o=arguments.length<=0?void 0:arguments[0];n=o[0],r=o[1],i=o[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];else{La("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,i-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const n=t.getDimensions();let r=1;for(let i=0;i<3;i++){if(n[i]===0)return 0;n[i]>1&&(r*=n[i]-1)}return r},t.getNumberOfPoints=()=>{const n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=n=>{const r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return La("Requesting a point from an empty image."),null;const i=new Float64Array(3);switch(e.dataDescription){case _n.EMPTY:return null;case _n.SINGLE_POINT:break;case _n.X_LINE:i[0]=n;break;case _n.Y_LINE:i[1]=n;break;case _n.Z_LINE:i[2]=n;break;case _n.XY_PLANE:i[0]=n%r[0],i[1]=n/r[0];break;case _n.YZ_PLANE:i[1]=n%r[1],i[2]=n/r[1];break;case _n.XZ_PLANE:i[0]=n%r[0],i[2]=n/r[0];break;case _n.XYZ_GRID:i[0]=n%r[0],i[1]=n/r[0]%r[1],i[2]=n/(r[0]*r[1]);break;default:La("Invalid dataDescription");break}const o=[0,0,0];return t.indexToWorld(i,o),o},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=n=>We.transformBounds(n,e.indexToWorld),t.getSpatialExtent=()=>We.inflate([...e.extent],.5),t.computeTransforms=()=>{yS(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],Xa(e.indexToWorld,e.indexToWorld,e.spacing),$t(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ge(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ge(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return We.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return We.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>We.getCenter(t.getBounds()),t.computeHistogram=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=[0,0,0,0,0,0];t.worldToIndexBounds(n,i);const o=[0,0,0],u=[0,0,0];We.computeCornerPoints(i,o,u),Jv(o,o),Jv(u,u);const f=t.getDimensions();Pv(o,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],o),Pv(u,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],u);const l=f[0],g=f[0]*f[1],d=t.getPointData().getScalars().getData();let p=-1/0,v=1/0,T=0,E=0,S=0;for(let w=o[2];w<=u[2];w++)for(let O=o[1];O<=u[1];O++){let m=o[0]+O*l+w*g;for(let M=o[0];M<=u[0];M++){if(!r||r([M,O,w],i)){const U=d[m];U>p&&(p=U),U<v&&(v=U),T+=U*U,E+=U,S+=1}++m}}const C=S>0?E/S:0,R=S?Math.abs(T/S-C*C):0,D=Math.sqrt(R);return{minimum:v,maximum:p,average:C,variance:R,sigma:D,count:S}},t.computeIncrements=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let o=r;for(let u=0;u<3;++u)i[u]=o,o*=n[u*2+1]-n[u*2]+1;return i},t.computeOffsetIndex=n=>{let[r,i,o]=n;const u=t.getExtent(),f=t.getPointData().getScalars().getNumberOfComponents(),l=t.computeIncrements(u,f);return Math.floor((Math.round(r)-u[0])*l[0]+(Math.round(i)-u[2])*l[1]+(Math.round(o)-u[4])*l[2])},t.getOffsetIndexFromWorld=n=>{const r=t.getExtent(),i=t.worldToIndex(n);for(let o=0;o<3;++o)if(i[o]<r[o*2]||i[o]>r[o*2+1])return La(`GetScalarPointer: Pixel ${i} is not in memory. Current extent = ${r}`),NaN;return t.computeOffsetIndex(i)},t.getScalarValueFromWorld=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=i)return La(`GetScalarPointer: Scalar Component ${r} is not within bounds. Current Scalar numberOfComponents: ${i}`),NaN;const o=t.getOffsetIndexFromWorld(n);return Number.isNaN(o)?o:t.getPointData().getScalars().getComponent(o,r)}}const M_={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:_n.EMPTY};function h2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M_,n),Ia.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=Pa(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),L.get(t,e,["indexToWorld","worldToIndex"]),L.setGetArray(t,e,["origin","spacing"],3),L.setGetArray(t,e,["direction"],9),L.getArray(t,e,["extent"],6),m_(t,e)}const D_=L.newInstance(h2,"vtkImageData");var __={newInstance:D_,extend:h2};const L_={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},W0={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},V_={LINEAR:0,LOG10:1};var Gh={VectorMode:L_,ScalarMappingTarget:W0,Scale:V_};const B_={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},U_={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},N_={BY_ID:0,BY_NAME:1};var Fh={ColorMode:B_,GetArray:N_,ScalarMode:U_};const{ScalarMappingTarget:aT,Scale:b_,VectorMode:Xn}=Gh,{VtkDataTypes:Zr}=je,{ColorMode:sc}=Fh,{vtkErrorMacro:iT}=L;function G_(t){return t}function sT(t){return Math.floor(t*255+.5)}function F_(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(Xn.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(Xn.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(Xn.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){iT("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const i=r.length;for(let o=0;o<i;o++)e.annotationArray.push({value:n[o],annotation:String(r[o])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let i=t.checkForAnnotatedValue(n),o=!1;return i>=0?e.annotationArray[i].annotation!==r&&(e.annotationArray[i].annotation=r,o=!0):(e.annotationArray.push({value:n,annotation:r}),i=e.annotationArray.length-1,o=!0),o&&(t.updateAnnotatedValueMap(),t.modified()),i},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),i=r>=0;return i&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),i},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const i=t.getAnnotatedValueIndex(n);t.getIndexedColor(i,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,i)=>{const o=n.getNumberOfComponents();let u=null;if(r===sc.DEFAULT&&(n.getDataType()===Zr.UNSIGNED_CHAR||n.getDataType()===Zr.UNSIGNED_CHAR_CLAMPED)||r===sc.DIRECT_SCALARS&&n)u=t.convertToRGBA(n,o,n.getNumberOfTuples());else{const f={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:Zr.UNSIGNED_CHAR},l=L.newTypedArray(f.dataType,4*n.getNumberOfTuples());f.values=l,f.size=l.length,u=je.newInstance(f);let g=i;g<0&&o>1?t.mapVectorsThroughTable(n,u,aT.RGBA,-1,-1):(g<0&&(g=0),g>=o&&(g=o-1),t.mapScalarsThroughTable(n,u,aT.RGBA,g))}return u},t.mapVectorsToMagnitude=(n,r,i)=>{const o=n.getNumberOfTuples(),u=n.getNumberOfComponents(),f=r.getData(),l=n.getData();for(let g=0;g<o;g++){let d=0;for(let p=0;p<i;p++)d+=l[g*u+p]*l[g*u+p];f[g]=Math.sqrt(d)}},t.mapVectorsThroughTable=(n,r,i,o,u)=>{let f=t.getVectorMode(),l=u,g=o;const d=n.getNumberOfComponents();f===Xn.COMPONENT?(g===-1&&(g=t.getVectorComponent()),g<0&&(g=0),g>=d&&(g=d-1)):(l===-1&&(l=t.getVectorSize()),l<=0?(g=0,l=d):(g<0&&(g=0),g>=d&&(g=d-1),g+l>d&&(l=d-g)),f===Xn.MAGNITUDE&&(d===1||l===1)&&(f=Xn.COMPONENT));let p=0;switch(g>0&&(p=g),f){case Xn.COMPONENT:{t.mapScalarsThroughTable(n,r,i,p);break}case Xn.RGBCOLORS:break;case Xn.MAGNITUDE:default:{const v=je.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,v,l),t.mapScalarsThroughTable(v,r,i,0);break}}},t.luminanceToRGBA=(n,r,i,o)=>{const u=o(i),f=r.getData(),l=n.getData(),g=f.length,d=0,p=1;let v=0;for(let T=d;T<g;T+=p){const E=o(f[T]);l[v*4]=E,l[v*4+1]=E,l[v*4+2]=E,l[v*4+3]=u,v++}},t.luminanceAlphaToRGBA=(n,r,i,o)=>{const u=r.getData(),f=n.getData(),l=u.length,g=0,d=2;let p=0;for(let v=g;v<l;v+=d){const T=o(u[v]);f[p]=T,f[p+1]=T,f[p+2]=T,f[p+3]=o(u[v+1])*i,p+=4}},t.rGBToRGBA=(n,r,i,o)=>{const u=sT(i),f=r.getData(),l=n.getData(),g=f.length,d=0,p=3;let v=0;for(let T=d;T<g;T+=p)l[v*4]=o(f[T]),l[v*4+1]=o(f[T+1]),l[v*4+2]=o(f[T+2]),l[v*4+3]=u,v++},t.rGBAToRGBA=(n,r,i,o)=>{const u=r.getData(),f=n.getData(),l=u.length,g=0,d=4;let p=0;for(let v=g;v<l;v+=d)f[p*4]=o(u[v]),f[p*4+1]=o(u[v+1]),f[p*4+2]=o(u[v+2]),f[p*4+3]=o(u[v+3])*i,p++},t.convertToRGBA=(n,r,i)=>{let{alpha:o}=e;if(r===4&&o>=1&&n.getDataType()===Zr.UNSIGNED_CHAR)return n;const u=je.newInstance({numberOfComponents:4,empty:!0,size:4*i,dataType:Zr.UNSIGNED_CHAR});if(i<=0)return u;o=o>0?o:0,o=o<1?o:1;let f=G_;switch((n.getDataType()===Zr.FLOAT||n.getDataType()===Zr.DOUBLE)&&(f=sT),r){case 1:t.luminanceToRGBA(u,n,o,f);break;case 2:t.luminanceAlphaToRGBA(u,n,f);break;case 3:t.rGBToRGBA(u,n,o,f);break;case 4:t.rGBAToRGBA(u,n,o,f);break;default:return iT("Cannot convert colors"),null}return u},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,i)=>{if(!n)return t.isOpaque();const o=n.getNumberOfComponents();return r===sc.DEFAULT&&n.getDataType()===Zr.UNSIGNED_CHAR||r===sc.DIRECT_SCALARS?o===3||o===1?e.alpha>=1:n.getRange(o-1)[0]===255:!0}}const k_={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:Xn.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:b_.LINEAR};function p2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k_,n),L.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],L.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),L.setArray(t,e,["mappingRange"],2),L.getArray(t,e,["mappingRange"]),F_(t,e)}const z_=L.newInstance(p2,"vtkScalarsToColors");var d2={newInstance:z_,extend:p2,...Gh};const{vtkErrorMacro:oT}=L,uT=0,cT=1,r0=2;function A_(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let i=0;const o=Number(n);return o<r.range[0]?i=r.maxIndex+uT+1.5:o>r.range[1]?i=r.maxIndex+cT+1.5:(i=(o+r.shift)*r.scale,i=i<r.maxIndex?i:r.maxIndex),Math.floor(i)},t.linearLookup=(n,r,i)=>{let o=0;Ex(n)?o=Math.floor(i.maxIndex+1.5+r0):o=t.linearIndexLookup(n,i);const u=4*o;return r.slice(u,u+4)},t.indexedLookupFunction=(n,r,i)=>{let o=t.getAnnotatedValueIndexInternal(n);o===-1&&(o=e.numberOfColors+r0);const u=4*o;return[r[u],r[u+1],r[u+2],r[u+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,i,o)=>{let u=t.linearLookup;e.indexedLookup&&(u=t.indexedLookupFunction);const f=t.getMappingRange(),l={maxIndex:t.getNumberOfColors()-1,range:f,shift:0,scale:0};t.lookupShiftAndScale(f,l);const g=t.getAlpha(),d=n.getNumberOfTuples(),p=n.getNumberOfComponents(),v=r.getData(),T=n.getData();if(g>=1){if(i===W0.RGBA)for(let E=0;E<d;E++){const S=u(T[E*p+o],e.table,l);v[E*4]=S[0],v[E*4+1]=S[1],v[E*4+2]=S[2],v[E*4+3]=S[3]}}else if(i===W0.RGBA)for(let E=0;E<d;E++){const S=u(T[E*p+o],e.table,l);v[E*4]=S[0],v[E*4+1]=S[1],v[E*4+2]=S[2],v[E*4+3]=Math.floor(S[3]*g+.5)}},t.forceBuild=()=>{let n=0,r=0,i=0,o=0;const u=e.numberOfColors-1;u&&(n=(e.hueRange[1]-e.hueRange[0])/u,r=(e.saturationRange[1]-e.saturationRange[0])/u,i=(e.valueRange[1]-e.valueRange[0])/u,o=(e.alphaRange[1]-e.alphaRange[0])/u),e.table.length=4*u+16;const f=[],l=[];for(let g=0;g<=u;g++)f[0]=e.hueRange[0]+g*n,f[1]=e.saturationRange[0]+g*r,f[2]=e.valueRange[0]+g*i,o3(f,l),l[3]=e.alphaRange[0]+g*o,e.table[g*4]=l[0]*255+.5,e.table[g*4+1]=l[1]*255+.5,e.table[g*4+2]=l[2]*255+.5,e.table[g*4+3]=l[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const i=n[0].length;e.numberOfColors=n.length;const o=4-i;let u=0;for(let f=0;f<e.numberOfColors;f++)e.table[f*4]=255,e.table[f*4+1]=255,e.table[f*4+2]=255,e.table[f*4+3]=255;for(let f=0;f<n.length;f++){const l=n[f];for(let g=0;g<i;g++)e.table[u++]=l[g];u+=o}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return oT("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==wt.UNSIGNED_CHAR)return oT("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let i=0;i<r.length;i++)e.table[i]=r[i];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let i=(n+uT)*4;e.useBelowRangeColor||n===0?(r[i]=e.belowRangeColor[0]*255+.5,r[i+1]=e.belowRangeColor[1]*255+.5,r[i+2]=e.belowRangeColor[2]*255+.5,r[i+3]=e.belowRangeColor[3]*255+.5):(r[i]=r[0],r[i+1]=r[1],r[i+2]=r[2],r[i+3]=r[3]),i=(n+cT)*4,e.useAboveRangeColor||n===0?(r[i]=e.aboveRangeColor[0]*255+.5,r[i+1]=e.aboveRangeColor[1]*255+.5,r[i+2]=e.aboveRangeColor[2]*255+.5,r[i+3]=e.aboveRangeColor[3]*255+.5):(r[i]=r[4*(n-1)+0],r[i+1]=r[4*(n-1)+1],r[i+2]=r[4*(n-1)+2],r[i+3]=r[4*(n-1)+3]),i=(n+r0)*4,r[i]=e.nanColor[0]*255+.5,r[i+1]=e.nanColor[1]*255+.5,r[i+2]=e.nanColor[2]*255+.5,r[i+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const H_={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function y2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,H_,n),d2.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},L.obj(e.buildTime),e.opaqueFlagBuildTime={},L.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},L.obj(e.insertTime,{mtime:0}),L.get(t,e,["buildTime"]),L.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),L.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),L.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),L.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),A_(t,e)}const $_=L.newInstance(y2,"vtkLookupTable");var W_={newInstance:$_,extend:y2};const ca={Off:0,PolygonOffset:1};let j0=ca.PolygonOffset,Qc=ca.Off;const j_=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function K_(){return j0}function X_(t){const e=j0===t;return j0=t,e}function q_(){return Qc}function uf(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=Qc===t;return Qc=t,e}function Y_(){return uf(ca.Off)}function Q_(){return uf(ca.Off)}function Z_(){return uf(ca.PolygonOffset)}function J_(){return j_[Qc]}var K0={Resolve:ca,getResolveCoincidentTopologyAsString:J_,getResolveCoincidentTopologyPolygonOffsetFaces:K_,getResolveCoincidentTopology:q_,setResolveCoincidentTopology:uf,setResolveCoincidentTopologyPolygonOffsetFaces:X_,setResolveCoincidentTopologyToDefault:Y_,setResolveCoincidentTopologyToOff:Q_,setResolveCoincidentTopologyToPolygonOffset:Z_};function v2(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=L.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const kh=["Polygon","Line","Point"],P_={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},I_=()=>{},za={modified:I_};v2(za,P_,kh.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function eL(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),L.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(K0).forEach(n=>{t[n]=K0[n]}),Object.keys(za).filter(n=>n!=="modified").forEach(n=>{t[n]=za[n]}),v2(t,e.topologyOffset,kh.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=za.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=za.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=za.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var T2={implementCoincidentTopologyMethods:eL,staticOffsetAPI:za,otherStaticMethods:K0,CATEGORIES:kh,Resolve:ca};const Ht={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var S2={PassTypes:Ht};const{FieldAssociations:fT}=Ia,{staticOffsetAPI:tL,otherStaticMethods:nL}=T2,{ColorMode:oc,ScalarMode:Va,GetArray:a0}=Fh,{VectorMode:rL}=Gh,{VtkDataTypes:aL}=je;function uo(t){return()=>L.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function iL(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function sL(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function lT(t,e,n){const r=Math.floor(e),i=r%(2*n[0]);let o,u;i<n[0]?(t[0]=i,o=1,u=t[0]===n[0]-1):(t[0]=2*n[0]-1-i,o=-1,u=t[0]===0);const f=Math.floor(r/n[0]),l=f%(2*n[1]);let g,d;l<n[1]?(t[1]=l,g=1,d=t[1]===n[1]-1):(t[1]=2*n[1]-1-l,g=-1,d=t[1]===0),t[2]=Math.floor(f/n[1]);const p=e-r;u?d?t[2]+=p:t[1]+=g*p:t[0]+=o*p,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const gT=new WeakMap;function oL(t,e,n,r,i,o,u){const f=new Array(arguments.length);for(let K=0;K<arguments.length;++K){const Y=arguments[K];f[K]=Y.getMTime?.()??Y}const l=f.join("/"),g=gT.get(t);if(g&&g.stringHash===l)return g.textureCoordinates;const d=(n[1]-n[0])/(i-1),[p,v]=[n[0]-d,n[1]+d],T=p-.5*d,E=1/(v-p+d),S=p,C=(i+1)/(v-p),R=t.getData(),D=t.getNumberOfTuples(),w=t.getNumberOfComponents(),O=e<0||e>=w,m=o[2]<=1?2:3,M=je.newInstance({numberOfComponents:m,values:new Float32Array(D*m)}),U=M.getData(),b=[0,0,0];lT(b,i+2,o);let j=0,z=0;const A=[.5,.5,.5];for(let K=0;K<D;++K){let Y;if(O){let Z=0;for(let se=0;se<w;++se){const F=R[j+se];Z+=F*F}Y=Math.sqrt(Z)}else Y=R[j+e];if(r&&(Y=Math.log10(Y)),j+=w,Ex(Y))A[0]=b[0],A[1]=b[1],A[2]=b[2];else if(u){let Z=(Y-S)*C;Z<1?Z=0:Z>i&&(Z=i+1),lT(A,Z,o)}else{A[1]=.49;const Z=(Y-T)*E;Z>1e3?A[0]=1e3:Z<-1e3?A[0]=-1e3:A[0]=Z}for(let Z=0;Z<m;++Z)U[z++]=A[Z]}return gT.set(t,{stringHash:l,textureCoordinates:M}),M}function uL(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=mh(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=W_.newInstance()},t.getColorModeAsString=()=>L.enumToString(oc,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>L.enumToString(Va,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,i,o,u)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let f=null,l=!1;if(r===Va.DEFAULT)f=n.getPointData().getScalars(),f||(f=n.getCellData().getScalars(),l=!0);else if(r===Va.USE_POINT_DATA)f=n.getPointData().getScalars();else if(r===Va.USE_CELL_DATA)f=n.getCellData().getScalars(),l=!0;else if(r===Va.USE_POINT_FIELD_DATA){const g=n.getPointData();i===a0.BY_ID?f=g.getArrayByIndex(o):f=g.getArrayByName(u)}else if(r===Va.USE_CELL_FIELD_DATA){const g=n.getCellData();l=!0,i===a0.BY_ID?f=g.getArrayByIndex(o):f=g.getArrayByName(u)}else if(r===Va.USE_FIELD_DATA){const g=n.getFieldData();i===a0.BY_ID?f=g.getArrayByIndex(o):f=g.getArrayByName(u)}return{scalars:f,cellFlag:l}},t.mapScalars=(n,r)=>{const{scalars:i,cellFlag:o}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=o,!i){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const u=`${t.getMTime()}${i.getMTime()}${r}`;if(e.colorBuildString!==u){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(i,o))e.mapScalarsToTexture(i,o,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const f=t.getLookupTable();f&&(f.build(),e.colorMapColors=f.mapScalars(i,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${i.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,i)=>{const o=e.lookupTable.getRange(),u=e.lookupTable.usingLogScale(),f=e.lookupTable.getAlpha(),l=u?[Math.log10(o[0]),Math.log10(o[1])]:o;if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==i){e.lookupTable.setAlpha(i),e.colorTextureMap=null,e.lookupTable.build();const d=e.lookupTable.getNumberOfAvailableColors(),p=2048,v=p**3-3,E=4096-2,S=2,C=r?v:E;e.numberOfColorsInRange=Math.min(Math.max(d,S),C);const R=e.numberOfColorsInRange+3,D=e.numberOfColorsInRange+2,w=r?[Math.min(Math.ceil(R/p**0),p),Math.min(Math.ceil(R/p**1),p),Math.min(Math.ceil(R/p**2),p)]:[D,2,1],O=w[0]*w[1]*w[2],m=new Float64Array(O);m.fill(NaN);const M=e.numberOfColorsInRange,U=M+2,b=[0,0,0],j=l[0],z=l[1]-l[0];for(let Y=0;Y<U;++Y){const Z=sL(b,w),se=j+z*(Y-1)/(M-1),F=u?10**se:se;m[Z]=F,iL(b,w)}const A=je.newInstance({numberOfComponents:1,values:m}),K=e.lookupTable.mapScalars(A,e.colorMode,0);e.colorTextureMap=__.newInstance(),e.colorTextureMap.setDimensions(w),e.colorTextureMap.getPointData().setScalars(K),e.lookupTable.setAlpha(f)}const g=e.lookupTable.getVectorMode()===rL.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=oL(n,g,l,u,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),r)},t.getIsOpaque=()=>{const n=t.getInputData(),i=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||i==null)return!0;const o=t.getLookupTable();return o?(o.build(),o.areScalarsOpaque(i,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==oc.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===oc.DEFAULT&&n.getDataType()===aL.UNSIGNED_CHAR||e.colorMode===oc.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=uo("AcquireInvertibleLookupTable"),t.valueToColor=uo("ValueToColor"),t.colorToValue=uo("ColorToValue"),t.useInvertibleColorFor=uo("UseInvertibleColorFor"),t.clearInvertibleColor=uo("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const i=n.getRawPixelBuffer(Ht.ID_LOW24),o=n.getRawPixelBuffer(Ht.ID_HIGH24),u=n.getCurrentPass(),f=n.getFieldAssociation();let l=null;f===fT.FIELD_ASSOCIATION_POINTS?l=e.selectionWebGLIdsToVTKIds.points:f===fT.FIELD_ASSOCIATION_CELLS&&(l=e.selectionWebGLIdsToVTKIds.cells),l&&r.forEach(g=>{if(u===Ht.ID_LOW24){let d=0;o&&(d+=o[g],d*=256),d+=i[g+2],d*=256,d+=i[g+1],d*=256,d+=i[g];const p=l[d],v=n.getPixelBuffer(Ht.ID_LOW24);v[g]=p&255,v[g+1]=(p&65280)>>8,v[g+2]=(p&16711680)>>16}else if(u===Ht.ID_HIGH24&&o){let d=0;d+=o[g],d*=256,d+=i[g+2],d*=256,d+=i[g+1],d*=256,d+=i[g];const p=l[d],v=n.getPixelBuffer(Ht.ID_HIGH24);v[g]=(p&4278190080)>>24}})}}const cL={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function x2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cL,n),n_.extend(t,e,n),L.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),L.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),L.setGetArray(t,e,["scalarRange"],2),T2.implementCoincidentTopologyMethods(t,e),uL(t,e)}const fL=L.newInstance(x2,"vtkMapper");var Za={newInstance:fL,extend:x2,...tL,...nL,...Fh};const{isVtkObject:lL}=L;function C2(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function E2(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const gL={extractCellSizes:C2,getNumberOfCells:E2};function hL(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=E2(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=C2(t.getData())),e.cellSizes),t.resize=r=>{const i=t.getNumberOfTuples();n.resize(r);const o=t.getNumberOfTuples();o<i&&(o===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let i=r;const o=e.values[i++];return e.values.subarray(i,i+o)},t.insertNextCell=r=>{let i;lL(r)?i=r.getPointsIds():i=r;const o=t.getNumberOfCells();return t.insertNextTuples([i.length,...i]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(i.length),o}}function pL(t){return{empty:!0,numberOfComponents:1,dataType:wt.UNSIGNED_INT,...t}}function w2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};je.extend(t,e,pL(n)),hL(t,e)}const dL=L.newInstance(w2,"vtkCellArray");var hT={newInstance:dL,extend:w2,...gL};const{vtkErrorMacro:yL}=L,vL=[1,-1,1,-1,1,-1];function TL(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=L.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.setTuple(n,i)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(n,r,i)=>t.insertNextTuple([n,r,i]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const o=t.getRange(1);e.bounds[2]=o[0],e.bounds[3]=o[1];const u=t.getRange(2);return e.bounds[4]=u[0],e.bounds[5]=u[1],e.bounds}if(t.getNumberOfComponents()!==2)return yL(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),vL;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const SL={empty:!0,numberOfComponents:3,dataType:wt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function O2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SL,n),je.extend(t,e,n),TL(t,e)}const xL=L.newInstance(O2,"vtkPoints");var Zc={newInstance:xL,extend:O2};function CL(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let i=e.points.getData();i.length!==3*e.pointsIds.length&&(i=L.newTypedArray(n.getDataType(),3*e.pointsIds.length));const o=n.getData();e.pointsIds.forEach((u,f)=>{let l=3*u,g=3*f;i[g]=o[l],i[++g]=o[++l],i[++g]=o[++l]}),e.points.setData(i)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let i=n.getNumberOfPoints()-1;i>=0;--i)e.pointsIds[i]=i}},t.getBounds=()=>{const n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(let i=1;i<n;i++)e.points.getPoint(i,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else Cx(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let i=0;i<3;i++)r=e.bounds[2*i+1]-e.bounds[2*i],n+=r*r;return n},t.getParametricDistance=n=>{let r,i=0;for(let o=0;o<3;o++)n[o]<0?r=-n[o]:n[o]>1?r=n[o]-1:r=0,r>i&&(i=r);return i},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,i,o,u,f,l)=>{},t.evaluatePosition=(n,r,i,o,u,f)=>{L.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const EL={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function R2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EL,n),L.obj(t,e),e.points||(e.points=Zc.newInstance()),L.get(t,e,["points","pointsIds"]),CL(t,e)}const wL=L.newInstance(R2,"vtkCell");var Jc={newInstance:wL,extend:R2};function OL(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function RL(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),i=n.getNumberOfCells(),o=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let u=0;u<i;++u){const{cellPointIds:f}=n.getCellPoints(u);f.forEach(l=>{t.incrementLinkCount(l)})}t.allocateLinks(r),e.maxId=r-1;for(let u=0;u<i;++u){const{cellPointIds:f}=n.getCellPoints(u);f.forEach(l=>{t.insertCellReference(l,o[l]++,u)})}}else{for(let u=0;u<i;u++)Jc.newInstance().getPointsIds().forEach(l=>{t.incrementLinkCount(l)});t.allocateLinks(r),e.maxId=r-1;for(let u=0;u<i;++u)Jc.newInstance().getPointsIds().forEach(l=>{t.insertCellReference(l,o[l]++,u)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(i=>i!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{OL(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,i)=>{e.array[n].cells[r]=i}}const mL={array:null,maxId:0,extend:0};function m2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mL,n),L.obj(t,e),RL(t,e)}const ML=L.newInstance(m2,"vtkCellLinks");var DL={newInstance:ML,extend:m2};const Ye={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_QUAD:9,VTK_QUADRATIC_EDGE:21,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42},X0=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function _L(t){return t<X0.length?X0[t]:"UnknownClass"}function LL(t){return X0.findIndex(t)}function VL(t){return t<Ye.VTK_QUADRATIC_EDGE||t===Ye.VTK_CONVEX_POINT_SET||t===Ye.VTK_POLYHEDRON}function BL(t){return t===Ye.VTK_TRIANGLE_STRIP||t===Ye.VTK_POLY_LINE||t===Ye.VTK_POLY_VERTEX}const UL={getClassNameFromTypeId:_L,getTypeIdFromClassName:LL,isLinear:VL,hasSubCells:BL};function NL(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,i)=>{e.typeArray[n]=r,e.locationArray[n]=i,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,i)=>{e.size=n,e.typeArray=r,e.locationArray=i,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Ye.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let i=0;i<r;++i)if(n===t.getCellType(i))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const bL={size:0,maxId:-1,extend:1e3};function M2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bL,n),L.obj(t,e),L.get(t,e,["size","maxId","extend"]),L.getArray(t,e,["typeArray","locationArray"]),NL(t,e)}const GL=L.newInstance(M2,"vtkCellTypes");var FL={newInstance:GL,extend:M2,...UL};const kL={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var D2={IntersectionState:kL};const{IntersectionState:Vc}=D2;function Ki(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const i={t:Number.MIN_VALUE,distance:0},o=[];let u;o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2];const f=o[0]*(t[0]-e[0])+o[1]*(t[1]-e[1])+o[2]*(t[2]-e[2]),l=me(o,o);let g=1e-5*f;return l!==0&&(i.t=f/l),g<0&&(g=-g),-g<l&&l<g||l<=0||i.t<0?u=e:i.t>1?u=n:(u=o,o[0]=e[0]+i.t*o[0],o[1]=e[1]+i.t*o[1],o[2]=e[2]+i.t*o[2]),r&&(r[0]=u[0],r[1]=u[1],r[2]=u[2]),i.distance=qn(u,t),i}function _2(t,e,n,r,i,o){const u=[],f=[],l=[];i[0]=0,o[0]=0,Jn(e,t,u),Jn(r,n,f),Jn(n,t,l);const g=[me(u,u),-me(u,f),-me(u,f),me(f,f)],d=[];if(d[0]=me(u,l),d[1]=-me(f,l),i3(g,d,2)===0){let p=Number.MAX_VALUE;const v=[t,e,n,r],T=[n,n,t,t],E=[r,r,e,e];o[0],o[0],i[0],i[0],i[0],i[0],o[0],o[0];let S;for(let C=0;C<4;C++)S=Ki(v[C],T[C],E[C]),S.distance<p&&(p=S.distance,S.t);return Vc.ON_LINE}return i[0]=d[0],o[0]=d[1],i[0]>=0&&i[0]<=1&&o[0]>=0&&o[0]<=1?Vc.YES_INTERSECTION:Vc.NO_INTERSECTION}const zL={distanceToLine:Ki,intersection:_2};function AL(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,i,o,u,f)=>{const l={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};f[1]=0,f[2]=0;const g=[],d=[],p=[];e.points.getPoint(0,d),e.points.getPoint(1,p);const v=[],T=[],E=_2(r,i,d,p,v,T);if(l.t=v[0],l.betweenPoints=n(l.t),f[0]=T[0],E===Vc.YES_INTERSECTION){for(let S=0;S<3;S++)u[S]=d[S]+f[0]*(p[S]-d[S]),g[S]=r[S]+l.t*(i[S]-r[S]);if(qn(u,g)<=o*o)return l.intersect=1,l}else{let S;if(l.t<0)return S=Ki(r,d,p,u),S.distance<=o*o&&(l.t=0,l.intersect=1,l.betweenPoints=!0),l;if(l.t>1)return S=Ki(i,d,p,u),S.distance<=o*o&&(l.t=1,l.intersect=1,l.betweenPoints=!0),l;if(f[0]<0)return f[0]=0,S=Ki(d,r,i,u),l.t=S.t,S.distance<=o*o&&(l.intersect=1),l;if(f[0]>1)return f[0]=1,S=Ki(p,r,i,u),l.t=S.t,S.distance<=o*o&&(l.intersect=1),l}return l},t.evaluateLocation=(r,i,o)=>{const u=[],f=[];e.points.getPoint(0,u),e.points.getPoint(1,f);for(let l=0;l<3;l++)i[l]=u[l]+r[0]*(f[l]-u[l]);o[0]=1-r[0],o[1]=r[0]},t.evaluateOrientation=(r,i,o)=>e.orientations?(Cc(i,e.orientations[0],e.orientations[1],r[0]),o[0]=1-r[0],o[1]=r[0],!0):!1}const HL={orientations:null};function L2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HL,n),Jc.extend(t,e,n),L.setGet(t,e,["orientations"]),AL(t,e)}const $L=L.newInstance(L2,"vtkLine");var Cn={newInstance:$L,extend:L2,...zL,...D2};function WL(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=bn(e.points):e.points=Zc.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,i),e.points=Zc.newInstance(),e.points.shallowCopy(r.getPoints())}}const jL={};function V2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jL,n),Ia.extend(t,e,n),L.setGet(t,e,["points"]),WL(t,e)}const KL=L.newInstance(V2,"vtkPointSet");var XL={newInstance:KL,extend:V2};function zh(t,e,n,r){const i=n[0]-e[0],o=n[1]-e[1],u=n[2]-e[2],f=t[0]-e[0],l=t[1]-e[1],g=t[2]-e[2];r[0]=o*g-u*l,r[1]=u*f-i*g,r[2]=i*l-o*f}function mo(t,e,n,r){zh(t,e,n,r);const i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i!==0&&(r[0]/=i,r[1]/=i,r[2]/=i)}function B2(t){t[0]=-1,t[1]=1,t[2]=0,t[3]=-1,t[4]=0,t[5]=1}function qL(t,e,n,r,i,o){let u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,f=!1;const l=[],g=[],d=[],p=[],v=[];mo(t,e,n,p),mo(r,i,o,v);const T=-me(p,t),E=-me(v,r),S=[me(v,t)+E,me(v,e)+E,me(v,n)+E];if(S[0]*S[1]>u&&S[0]*S[2]>u)return{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d};const C=[me(p,r)+T,me(p,i)+T,me(p,o)+T];if(C[0]*C[1]>u&&C[0]*C[2]>u)return{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d};if(Math.abs(p[0]-v[0])<1e-9&&Math.abs(p[1]-v[1])<1e-9&&Math.abs(p[2]-v[2])<1e-9&&Math.abs(T-E)<1e-9)return f=!0,{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d};const R=[t,e,n],D=[r,i,o],w=me(p,v),O=(T-E*w)/(w*w-1),m=(E-T*w)/(w*w-1),M=[O*p[0]+m*v[0],O*p[1]+m*v[1],O*p[2]+m*v[2]],U=Qi(p,v,[]);Ya(U);let b=0,j=0;const z=[],A=[];let K=50,Y=50;for(let F=0;F<3;F++){const P=F,ie=(F+1)%3,I=Zi.intersectWithLine(R[P],R[ie],r,v);I.intersection&&I.t>0-u&&I.t<1+u&&(I.t<1+u&&I.t>1-u&&(K=b),z[b++]=me(I.x,U)-me(M,U));const B=Zi.intersectWithLine(D[P],D[ie],t,p);B.intersection&&B.t>0-u&&B.t<1+u&&(B.t<1+u&&B.t>1-u&&(Y=j),A[j++]=me(B.x,U)-me(M,U))}if(b>2){b--;const F=z[2];z[2]=z[K],z[K]=F}if(j>2){j--;const F=A[2];A[2]=A[Y],A[Y]=F}if(b!==2||j!==2)return{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d};if(Number.isNaN(z[0])||Number.isNaN(z[1])||Number.isNaN(A[0])||Number.isNaN(A[1]))return{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d};if(z[0]>z[1]){const F=z[1];z[1]=z[0],z[0]=F}if(A[0]>A[1]){const F=A[1];A[1]=A[0],A[0]=F}let Z,se;return z[1]<A[0]||A[1]<z[0]?{intersect:!1,coplanar:f,pt1:l,pt2:g,surfaceId:d}:(z[0]<A[0]?z[1]<A[1]?(d[0]=2,d[1]=1,Z=A[0],se=z[1]):(d[0]=2,d[1]=2,Z=A[0],se=A[1]):z[1]<A[1]?(d[0]=1,d[1]=1,Z=z[0],se=z[1]):(d[0]=1,d[1]=2,Z=z[0],se=A[1]),Zv(M,U,Z,l),Zv(M,U,se,g),{intersect:!0,coplanar:f,pt1:l,pt2:g,surfaceId:d})}const YL={computeNormalDirection:zh,computeNormal:mo,interpolationDerivs:B2,intersectWithTriangle:qL};function QL(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,i,o,u)=>{const f={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};u[2]=0;const l=[],g=i*i,d=[],p=[],v=[];e.points.getPoint(0,d),e.points.getPoint(1,p),e.points.getPoint(2,v);const T=[],E=[];if(mo(d,p,v,T),T[0]!==0||T[1]!==0||T[2]!==0){const w=Zi.intersectWithLine(n,r,d,T);if(f.betweenPoints=w.betweenPoints,f.t=w.t,o[0]=w.x[0],o[1]=w.x[1],o[2]=w.x[2],!w.intersection)return u[0]=0,u[1]=0,f.intersect=0,f;const O=t.evaluatePosition(o,l,u,E);if(O.evaluation>=0)return O.dist2<=g?(f.intersect=1,f):(f.intersect=O.evaluation,f)}const S=qn(d,p),C=qn(p,v),R=qn(v,d);e.line||(e.line=Cn.newInstance()),S>C&&S>R?(e.line.getPoints().setPoint(0,d),e.line.getPoints().setPoint(1,p)):C>R&&C>S?(e.line.getPoints().setPoint(0,p),e.line.getPoints().setPoint(1,v)):(e.line.getPoints().setPoint(0,v),e.line.getPoints().setPoint(1,d));const D=e.line.intersectWithLine(n,r,i,o,u);if(f.betweenPoints=D.betweenPoints,f.t=D.t,D.intersect){const w=[],O=[],m=[];for(let M=0;M<3;M++)w[M]=d[M]-v[M],O[M]=p[M]-v[M],m[M]=o[M]-v[M];return u[0]=me(m,w)/R,u[1]=me(m,O)/C,f.intersect=1,f}return u[0]=0,u[1]=0,f.intersect=0,f},t.evaluatePosition=(n,r,i,o)=>{const u={subId:0,dist2:0,evaluation:-1};let f,l;const g=[],d=[],p=[],v=[];let T;const E=[],S=[],C=[];let R=0,D=0;const w=[];let O,m,M,U=[];const b=[],j=[],z=[];u.subId=0,i[2]=0,e.points.getPoint(1,g),e.points.getPoint(2,d),e.points.getPoint(0,p),zh(g,d,p,v),Zi.generalizedProjectPoint(n,g,v,z);let A=0;for(f=0;f<3;f++)v[f]<0?T=-v[f]:T=v[f],T>A&&(A=T,D=f);for(l=0,f=0;f<3;f++)f!==D&&(w[l++]=f);for(f=0;f<2;f++)E[f]=z[w[f]]-p[w[f]],S[f]=g[w[f]]-p[w[f]],C[f]=d[w[f]]-p[w[f]];if(R=Lc(S,C),R===0)return i[0]=0,i[1]=0,u.evaluation=-1,u;if(i[0]=Lc(E,C)/R,i[1]=Lc(S,E)/R,o[0]=1-(i[0]+i[1]),o[1]=i[0],o[2]=i[1],o[0]>=0&&o[0]<=1&&o[1]>=0&&o[1]<=1&&o[2]>=0&&o[2]<=1)r&&(u.dist2=qn(z,n),r[0]=z[0],r[1]=z[1],r[2]=z[2]),u.evaluation=1;else{let K;if(r){if(o[1]<0&&o[2]<0)for(O=qn(n,p),m=Cn.distanceToLine(n,g,p,K,b),M=Cn.distanceToLine(n,p,d,K,j),O<m?(u.dist2=O,U=p):(u.dist2=m,U=b),M<u.dist2&&(u.dist2=M,U=j),f=0;f<3;f++)r[f]=U[f];else if(o[2]<0&&o[0]<0)for(O=qn(n,g),m=Cn.distanceToLine(n,g,p,K,b),M=Cn.distanceToLine(n,g,d,K,j),O<m?(u.dist2=O,U=g):(u.dist2=m,U=b),M<u.dist2&&(u.dist2=M,U=j),f=0;f<3;f++)r[f]=U[f];else if(o[1]<0&&o[0]<0)for(O=qn(n,d),m=Cn.distanceToLine(n,d,p,K,b),M=Cn.distanceToLine(n,g,d,K,j),O<m?(u.dist2=O,U=d):(u.dist2=m,U=b),M<u.dist2&&(u.dist2=M,U=j),f=0;f<3;f++)r[f]=U[f];else if(o[0]<0){const Y=Cn.distanceToLine(n,g,d,r);u.dist2=Y.distance}else if(o[1]<0){const Y=Cn.distanceToLine(n,d,p,r);u.dist2=Y.distance}else if(o[2]<0){const Y=Cn.distanceToLine(n,g,p,r);u.dist2=Y.distance}}u.evaluation=0}return u},t.evaluateLocation=(n,r,i)=>{const o=[],u=[],f=[];e.points.getPoint(0,o),e.points.getPoint(1,u),e.points.getPoint(2,f);const l=1-n[0]-n[1];for(let g=0;g<3;g++)r[g]=o[g]*l+u[g]*n[0]+f[g]*n[1];i[0]=l,i[1]=n[0],i[2]=n[1]},t.getParametricDistance=n=>{let r,i=0;const o=[];o[0]=n[0],o[1]=n[1],o[2]=1-n[0]-n[1];for(let u=0;u<3;u++)o[u]<0?r=-o[u]:o[u]>1?r=o[u]-1:r=0,r>i&&(i=r);return i},t.derivatives=(n,r,i,o,u)=>{const f=e.points.getPoint(0),l=e.points.getPoint(1),g=e.points.getPoint(2),d=[],p=[],v=[],T=[];mo(f,l,g,d),Jn(l,f,p),Jn(g,f,T),Qi(d,p,v);const E=Ya(p);if(E<=0||Ya(v)<=0){for(let m=0;m<o;m++)for(let M=0;M<3;M++)u[m*o+M]=0;return}const S=[0,0],C=[E,0],R=[me(T,p),me(T,v)],D=new Array(6);B2(D);const w=[C[0]-S[0],C[1]-S[1],R[0]-S[0],R[1]-S[1]],O=L.newTypedArray(Vt.Float64Array,4);s3(w,O,2);for(let m=0;m<o;m++){let M=0,U=0;for(let z=0;z<3;z++)M+=D[z]*i[o*z+m],U+=D[3+z]*i[o*z+m];const b=M*O[0]+U*O[1],j=M*O[2]+U*O[3];u[3*m]=b*p[0]+j*v[0],u[3*m+1]=b*p[1]+j*v[1],u[3*m+2]=b*p[2]+j*v[2]}},t.cellBoundary=(n,r,i)=>{const o=r[0]-r[1],u=.5*(1-r[0])-r[1],f=2*r[0]+r[1]-1;return o>=0&&u>=0?(i[0]=e.pointsIds[0],i[1]=e.pointsIds[1]):u<0&&f>=0?(i[0]=e.pointsIds[1],i[1]=e.pointsIds[2]):(i[0]=e.pointsIds[2],i[1]=e.pointsIds[0]),!(r[0]<0||r[1]<0||r[0]>1||r[1]>1||1-r[0]-r[1]<0)}}const ZL={};function U2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZL,n),Jc.extend(t,e,n),QL(t,e)}const JL=L.newInstance(U2,"vtkTriangle");var PL={newInstance:JL,extend:U2,...YL};const i0=["verts","lines","polys","strips"],{vtkWarningMacro:pT}=L,IL={[Ye.VTK_LINE]:Cn,[Ye.VTK_POLY_LINE]:Cn,[Ye.VTK_TRIANGLE]:PL};function eV(t,e){e.classHierarchy.push("vtkPolyData");function n(i){return i.replace(/(?:^\w|[A-Z]|\b\w)/g,o=>o.toUpperCase()).replace(/\s+/g,"")}i0.forEach(i=>{t[`getNumberOf${n(i)}`]=()=>e[i].getNumberOfCells(),e[i]?e[i]=bn(e[i]):e[i]=hT.newInstance()}),t.getNumberOfCells=()=>i0.reduce((i,o)=>i+e[o].getNumberOfCells(),0);const r=t.shallowCopy;t.shallowCopy=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(i,o),i0.forEach(u=>{e[u]=hT.newInstance(),e[u].shallowCopy(i.getReferenceByName(u))})},t.buildCells=()=>{const i=t.getNumberOfVerts(),o=t.getNumberOfLines(),u=t.getNumberOfPolys(),f=t.getNumberOfStrips(),l=i+o+u+f,g=new Uint8Array(l);let d=g;const p=new Uint32Array(l);let v=p;if(i){let T=0;e.verts.getCellSizes().forEach((E,S)=>{v[S]=T,d[S]=E>1?Ye.VTK_POLY_VERTEX:Ye.VTK_VERTEX,T+=E+1}),v=v.subarray(i),d=d.subarray(i)}if(o){let T=0;e.lines.getCellSizes().forEach((E,S)=>{v[S]=T,d[S]=E>2?Ye.VTK_POLY_LINE:Ye.VTK_LINE,E===1&&pT("Building VTK_LINE ",S," with only one point, but VTK_LINE needs at least two points. Check the input."),T+=E+1}),v=v.subarray(o),d=d.subarray(o)}if(u){let T=0;e.polys.getCellSizes().forEach((E,S)=>{switch(v[S]=T,E){case 3:d[S]=Ye.VTK_TRIANGLE;break;case 4:d[S]=Ye.VTK_QUAD;break;default:d[S]=Ye.VTK_POLYGON;break}E<3&&pT("Building VTK_TRIANGLE ",S," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),T+=E+1}),v+=v.subarray(u),d+=d.subarray(u)}if(f){let T=0;d.fill(Ye.VTK_TRIANGLE_STRIP,0,f),e.strips.getCellSizes().forEach((E,S)=>{v[S]=T,T+=E+1})}e.cells=FL.newInstance(),e.cells.setCellTypes(l,g,p)},t.buildLinks=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=DL.newInstance(),i>0?e.links.allocate(i):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=i=>e.cells.getCellType(i),t.getCellPoints=i=>{const o=t.getCellType(i);let u=null;switch(o){case Ye.VTK_VERTEX:case Ye.VTK_POLY_VERTEX:u=e.verts;break;case Ye.VTK_LINE:case Ye.VTK_POLY_LINE:u=e.lines;break;case Ye.VTK_TRIANGLE:case Ye.VTK_QUAD:case Ye.VTK_POLYGON:u=e.polys;break;case Ye.VTK_TRIANGLE_STRIP:u=e.strips;break;default:return u=null,{type:0,cellPointIds:null}}const f=e.cells.getCellLocation(i),l=u.getCell(f);return{cellType:o,cellPointIds:l}},t.getPointCells=i=>e.links.getCells(i),t.getCellEdgeNeighbors=(i,o,u)=>{const f=e.links.getLink(o),l=e.links.getLink(u);return f.cells.filter(g=>g!==i&&l.cells.indexOf(g)!==-1)},t.getCell=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const u=t.getCellPoints(i),f=o||IL[u.cellType].newInstance();return f.initialize(t.getPoints(),u.cellPointIds),f}}const tV={};function N2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tV,n),XL.extend(t,e,n),L.get(t,e,["cells","links"]),L.setGet(t,e,["verts","lines","polys","strips"]),eV(t,e)}const nV=L.newInstance(N2,"vtkPolyData");var ua={newInstance:nV,extend:N2};function rV(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.imageBitmap=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setImageBitmap=n=>{e.imageBitmap!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.jsImageData=null),e.imageBitmap=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.imageBitmap=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null,e.imageBitmap=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,i=1;if(t.getInputData()){const u=t.getInputData();n=u.getDimensions()[0],r=u.getDimensions()[1],i=u.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),e.imageBitmap&&(n=e.imageBitmap.width,r=e.imageBitmap.height),(n>1)+(r>1)+(i>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData;if(e.imageBitmap)return e.imageBitmap;if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=e.image.width,r=e.image.height,o=new OffscreenCanvas(n,r).getContext("2d");return o.translate(0,r),o.scale(1,-1),o.drawImage(e.image,0,0,n,r),o.getImageData(0,0,n,r)}return null}}const aV=(t,e,n)=>{const i=t.createShaderModule({code:`
    @group(0) @binding(0) var inputTexture: texture_2d<f32>;
    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;

    @compute @workgroup_size(8, 8)
    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
      let texelCoord = vec2<i32>(global_id.xy);
      let outputSize = textureDimensions(outputTexture);

      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {
        return;
      }

      let inputSize = textureDimensions(inputTexture);
      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);

      // Compute the floating-point source coordinate
      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;

      // Get integer coordinates for the four surrounding texels
      let x0 = i32(floor(srcCoord.x));
      let x1 = min(x0 + 1, i32(inputSize.x) - 1);
      let y0 = i32(floor(srcCoord.y));
      let y1 = min(y0 + 1, i32(inputSize.y) - 1);

      // Compute the weights
      let wx = srcCoord.x - f32(x0);
      let wy = srcCoord.y - f32(y0);

      // Fetch the four texels
      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);
      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);
      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);
      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);

      // Bilinear interpolation
      let color = mix(
        mix(c00, c10, wx),
        mix(c01, c11, wx),
        wy
      );

      textureStore(outputTexture, texelCoord, color);
    }
  `}),o=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),u=t.createPipelineLayout({bindGroupLayouts:[o]}),f=t.createComputePipeline({label:"ComputeMipmapPipeline",layout:u,compute:{module:i,entryPoint:"main"}}),l=t.createSampler({magFilter:"linear",minFilter:"linear"});for(let g=1;g<n;g++){const d=e.createView({baseMipLevel:g-1,mipLevelCount:1}),p=e.createView({baseMipLevel:g,mipLevelCount:1}),v=t.createBindGroup({layout:f.getBindGroupLayout(0),entries:[{binding:0,resource:d},{binding:1,resource:p},{binding:2,resource:l}]}),T=t.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),E=T.beginComputePass();E.setPipeline(f),E.setBindGroup(0,v);const S=Math.max(1,e.width>>g),C=Math.max(1,e.height>>g),R=Math.ceil(S/8),D=Math.ceil(C/8);E.dispatchWorkgroups(R,D),E.end(),t.queue.submit([T.finish()])}},iV={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function b2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iV,n),L.obj(t,e),L.algo(t,e,6,0),L.get(t,e,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),L.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),rV(t,e)}const sV=L.newInstance(b2,"vtkTexture"),oV={generateMipmaps:aV};var Mo={newInstance:sV,extend:b2,...oV};const uV=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],dT=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],uc=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],yT=[0,1,0,1,0,1,0,1,2,2,2,2],Je=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],ye=new Float64Array(3),cc=new Float64Array(3),be=new Float64Array(3),Aa=new Float64Array(3),Ba=new Float64Array(3),fc=new Float64Array(3),s0=new Float64Array(16);function o0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function G2(t){const e=[],n=[];for(let r=0;r<3;r++){const i=Oh().domain([t[r*2],t[r*2+1]]);e[r]=i.ticks(5);const o=i.tickFormat(5);n[r]=e[r].map(o)}return{ticks:e,tickStrings:n}}function cV(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,i,o,u,f,l)=>{const g=e.renderable.get_tmAtlas().get(n);if(!g)return;const d=e.renderable.getTextPolyData().getPoints().getData(),p=e.lastSize;ye[0]=d[r*3],ye[1]=d[r*3+1],ye[2]=d[r*3+2],Ge(be,ye,i),be[0]+=.1,Ge(cc,be,o),ia(Ba,cc,ye),be[0]-=.1,be[1]+=.1,Ge(cc,be,o),ia(fc,cc,ye);for(let E=0;E<3;E++)Ba[E]/=.5*.1*p[0],fc[E]/=.5*.1*p[1];let v=l.ptIdx,T=l.cellIdx;ye[0]=d[r*3],ye[1]=d[r*3+1],ye[2]=d[r*3+2],u[0]<-.5?ea(be,Ba,u[0]*f-g.width):u[0]>.5?ea(be,Ba,u[0]*f):ea(be,Ba,u[0]*f-g.width/2),ho(ye,ye,be),ea(be,fc,u[1]*f-g.height/2),ho(ye,ye,be),l.points[v*3]=ye[0],l.points[v*3+1]=ye[1],l.points[v*3+2]=ye[2],l.tcoords[v*2]=g.tcoords[0],l.tcoords[v*2+1]=g.tcoords[1],v++,ea(be,Ba,g.width),ho(ye,ye,be),l.points[v*3]=ye[0],l.points[v*3+1]=ye[1],l.points[v*3+2]=ye[2],l.tcoords[v*2]=g.tcoords[2],l.tcoords[v*2+1]=g.tcoords[3],v++,ea(be,fc,g.height),ho(ye,ye,be),l.points[v*3]=ye[0],l.points[v*3+1]=ye[1],l.points[v*3+2]=ye[2],l.tcoords[v*2]=g.tcoords[4],l.tcoords[v*2+1]=g.tcoords[5],v++,ea(be,Ba,g.width),ia(ye,ye,be),l.points[v*3]=ye[0],l.points[v*3+1]=ye[1],l.points[v*3+2]=ye[2],l.tcoords[v*2]=g.tcoords[6],l.tcoords[v*2+1]=g.tcoords[7],v++,l.polys[T*4]=3,l.polys[T*4+1]=v-4,l.polys[T*4+2]=v-3,l.polys[T*4+3]=v-2,T++,l.polys[T*4]=3,l.polys[T*4+1]=v-4,l.polys[T*4+2]=v-2,l.polys[T*4+3]=v-1,l.ptIdx+=4,l.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);Qe(n,n);const r=e.renderable.getTextValues().length,i=r*4,o=r*2,u=new Float64Array(i*3),f=new Uint16Array(o*4),l=new Float32Array(i*2);$t(s0,n);const g={ptIdx:0,cellIdx:0,polys:f,points:u,tcoords:l};let d=0,p=0,v=0;const T=e.renderable.getTextPolyData().getPoints().getData(),E=e.renderable.getTextValues();for(;d<T.length/3;){ye[0]=T[d*3],ye[1]=T[d*3+1],ye[2]=T[d*3+2],Ge(be,ye,n),ye[0]=T[d*3+3],ye[1]=T[d*3+4],ye[2]=T[d*3+5],Ge(Aa,ye,n),ia(be,be,Aa);const C=[be[0],be[1]];r3(C),t.createPolyDataForOneLabel(E[p],d,n,s0,C,e.renderable.getAxisTitlePixelOffset(),g),d+=2,p++;for(let R=0;R<e.renderable.getTickCounts()[v];R++)t.createPolyDataForOneLabel(E[p],d,n,s0,C,e.renderable.getTickLabelPixelOffset(),g),d++,p++;v++}const S=je.newInstance({numberOfComponents:2,values:l,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(S),e.tmPolyData.getPoints().setData(u,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(f,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,i)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const fV=L.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),L.obj(t,e),e.tmPolyData=ua.newInstance(),e.tmMapper=Za.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Qa.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),L.setGet(t,e,["renderable"]),L.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},L.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},L.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],cV(t,e)},"vtkCubeAxesActorHelper");function lV(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();Qe(r,r);let i=!1;const o=We.getDiagonalLength(e.dataBounds),u=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let f=0;f<6;f++){let l=!1;const g=Math.floor(f/2),d=(g+1)%3,p=(g+2)%3;e.dataBounds[d*2]!==e.dataBounds[d*2+1]&&e.dataBounds[p*2]!==e.dataBounds[p*2+1]&&(ye[g]=e.dataBounds[f]-.1*o*uV[f][g],ye[d]=.5*(e.dataBounds[d*2]+e.dataBounds[d*2+1]),ye[p]=.5*(e.dataBounds[p*2]+e.dataBounds[p*2+1]),Ge(be,ye,r),ye[g]=e.dataBounds[f],Ge(Aa,ye,r),ia(be,Aa,be),sa(be,be),l=be[2]>u,e.camera.getParallelProjection()||(sa(Aa,Aa),l=lh(Aa,be)>u)),l!==e.lastFacesToDraw[f]&&(e.lastFacesToDraw[f]=l,i=!0)}return i},t.updatePolyData=(r,i,o)=>{let u=0,f=0;u+=8;let l=0;for(let T=0;T<12;T++)i[T]>0&&l++;if(f+=l,e.gridLines)for(let T=0;T<6;T++)r[T]&&(u+=o[Je[T][0]].length*2+o[Je[T][1]].length*2,f+=o[Je[T][0]].length+o[Je[T][1]].length);const g=new Float64Array(u*3),d=new Uint32Array(f*3);let p=0,v=0;for(let T=0;T<2;T++)for(let E=0;E<2;E++)for(let S=0;S<2;S++)g[p*3]=e.dataBounds[S],g[p*3+1]=e.dataBounds[2+E],g[p*3+2]=e.dataBounds[4+T],p++;for(let T=0;T<12;T++)i[T]>0&&(d[v*3]=2,d[v*3+1]=uc[T][0],d[v*3+2]=uc[T][1],v++);if(e.gridLines){for(let T=0;T<6;T++)if(r[T]){const E=Math.floor(T/2);let S=o[Je[T][0]];for(let C=0;C<S.length;C++)g[p*3+E]=e.dataBounds[T],g[p*3+Je[T][0]]=S[C],g[p*3+Je[T][1]]=e.dataBounds[Je[T][1]*2],p++,g[p*3+E]=e.dataBounds[T],g[p*3+Je[T][0]]=S[C],g[p*3+Je[T][1]]=e.dataBounds[Je[T][1]*2+1],p++,d[v*3]=2,d[v*3+1]=p-2,d[v*3+2]=p-1,v++;S=o[Je[T][1]];for(let C=0;C<S.length;C++)g[p*3+E]=e.dataBounds[T],g[p*3+Je[T][1]]=S[C],g[p*3+Je[T][0]]=e.dataBounds[Je[T][0]*2],p++,g[p*3+E]=e.dataBounds[T],g[p*3+Je[T][1]]=S[C],g[p*3+Je[T][0]]=e.dataBounds[Je[T][0]*2+1],p++,d[v*3]=2,d[v*3+1]=p-2,d[v*3+2]=p-1,v++}}e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(d,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,i,o,u)=>{let f=0;for(let T=0;T<12;T++)i[T]===1&&(f+=2,f+=o[yT[T]].length);const l=e.polyData.getPoints().getData(),g=new Float64Array(f*3);let d=0,p=0,v=0;for(let T=0;T<6;T++)if(r[T])for(let E=0;E<4;E++){const S=dT[T][E];if(i[S]===1){const C=yT[S],R=uc[S][0]*3,D=uc[S][1]*3;g[d*3]=.5*(l[R]+l[D]),g[d*3+1]=.5*(l[R+1]+l[D+1]),g[d*3+2]=.5*(l[R+2]+l[D+2]),d++;const w=Math.floor(T/2);g[d*3+w]=e.dataBounds[T],g[d*3+Je[T][0]]=.5*(e.dataBounds[Je[T][0]*2]+e.dataBounds[Je[T][0]*2+1]),g[d*3+Je[T][1]]=.5*(e.dataBounds[Je[T][1]*2]+e.dataBounds[Je[T][1]*2+1]),d++,e.textValues[p]=e.axisLabels[C],p++;const O=(C+1)%3,m=(C+2)%3,M=o[C],U=u[C];e.tickCounts[v]=M.length;for(let b=0;b<M.length;b++)g[d*3+C]=M[b],g[d*3+O]=l[R+O],g[d*3+m]=l[R+m],d++,e.textValues[p]=U[b],p++;v++}}e.textPolyData.getPoints().setData(g,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),i=e.lastFacesToDraw;let o=!1;for(let u=0;u<6;u++)e.dataBounds[u]!==e.lastTickBounds[u]&&(o=!0,e.lastTickBounds[u]=e.dataBounds[u]);if(r||o||e.forceUpdate){const u=new Array(12).fill(0);for(let l=0;l<6;l++)if(i[l])for(let g=0;g<4;g++)u[dT[l][g]]++;const f=e.generateTicks(e.dataBounds);t.updatePolyData(i,u,f.ticks),t.updateTextData(i,u,f.ticks,f.tickStrings),(o||e.forceUpdate)&&t.updateTextureAtlas(f.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let i=0,o=1;for(let u=0;u<3;u++){if(!e._tmAtlas.has(e.axisLabels[u])){o0(e.tmContext,e.axisTextStyle);const f=e.tmContext.measureText(e.axisLabels[u]),l={height:f.actualBoundingBoxAscent+2,startingHeight:o,width:f.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[u],l),o+=l.height,i<l.width&&(i=l.width)}o0(e.tmContext,e.tickTextStyle);for(let f=0;f<r[u].length;f++)if(!e._tmAtlas.has(r[u][f])){const l=e.tmContext.measureText(r[u][f]),g={height:l.actualBoundingBoxAscent+2,startingHeight:o,width:l.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[u][f],g),o+=g.height,i<g.width&&(i=g.width)}}i=Bn(i),o=Bn(o),e._tmAtlas.forEach(u=>{u.tcoords=[0,(o-u.startingHeight-u.height)/o,u.width/i,(o-u.startingHeight-u.height)/o,u.width/i,(o-u.startingHeight)/o,0,(o-u.startingHeight)/o]}),e.tmCanvas.width=i,e.tmCanvas.height=o,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,i,o),e._tmAtlas.forEach((u,f)=>{o0(e.tmContext,u.textStyle),e.tmContext.fillText(f,1,u.startingHeight+u.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),We.setBounds(e.bounds,e.gridActor.getBounds()),We.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=L.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function gV(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...We.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:G2,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n?.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n?.tickTextStyle}}}function F2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Qa.extend(t,e,gV(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=Mo.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=Za.newInstance(),e.polyData=ua.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Qa.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=ua.newInstance(),L.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),L.setGetArray(t,e,["dataBounds"],6),L.setGetArray(t,e,["axisLabels"],3),L.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),lV(t,e)}const hV=L.newInstance(F2,"vtkCubeAxesActor");var k2={newInstance:hV,extend:F2,newCubeAxesActorHelper:fV,defaultGenerateTicks:G2};function pV(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([o.usize,o.vsize],i,e._openGLRenderWindow.getRenderable())}}}const dV={};function yV(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dV,n),at.extend(t,e,n),e.CubeAxesActorHelper=k2.newCubeAxesActorHelper(),pV(t,e)}const vV=Xe(yV,"vtkOpenGLCubeAxesActor");wn("vtkCubeAxesActor",vV);const So={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var z2={ObjectType:So};const{ObjectType:Bc}=z2,TV={};function SV(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(f){switch(f){case Bc.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Bc.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Bc.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,i=null,o=!0,u="";t.getType=()=>r,t.setType=f=>{r=f},t.getHandle=()=>i,t.isReady=()=>o===!1,t.generateBuffer=f=>{const l=n(f);return i===null&&(i=e.context.createBuffer(),r=f),n(r)===l},t.upload=(f,l)=>t.generateBuffer(l)?(e.context.bindBuffer(n(r),i),e.context.bufferData(n(r),f,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=f.length*f.BYTES_PER_ELEMENT,o=!1,!0):(u="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>i?(e.context.bindBuffer(n(r),i),!0):!1,t.release=()=>i?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{i!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(i),i=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=f=>{e._openGLRenderWindow!==f&&(t.releaseGraphicsResources(),e._openGLRenderWindow=f,e.context=null,f&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>u}const xV={objectType:Bc.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function A2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xV,n),L.obj(t,e),L.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),L.moveToProtected(t,e,["openGLRenderWindow"]),SV(t,e)}const CV=L.newInstance(A2);var H2={newInstance:CV,extend:A2,...TV,...z2};function EV(t){let e=0,n=0;for(let i=0;i<3;++i){const o=t.getRange(i),u=o[1]-o[0];e+=u*u;const f=.5*(o[1]+o[0]);n+=f*f}const r=e>0&&(Math.abs(n)/e>1e6||Math.abs(Math.log10(e))>3||e===0&&n>1e6);if(r){const i=new Float64Array(3),o=new Float64Array(3);for(let u=0;u<3;++u){const f=t.getRange(u),l=f[1]-f[0];i[u]=.5*(f[1]+f[0]),o[u]=l>0?1/l:1}return{useShiftAndScale:r,coordShift:i,coordScale:o}}return{useShiftAndScale:r,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}const{vtkErrorMacro:vT}=L;function wV(t,e){const n=new Float64Array(3);Dm(n,e);const r=new Float64Array(16);return CS(r,qa(),t,n),r}function OV(t,e){return t===null||e===null?!1:!(tv(t,[0,0,0])&&tv(e,[1,1,1]))}function RV(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(So.ARRAY_BUFFER),t.createVBO=function(n,r,i,o){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const f=o.points.getData();let l=null,g=null,d=null;const p=o.colors?o.colors.getNumberOfComponents():0,v=o.tcoords?o.tcoords.getNumberOfComponents():0;o.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,l=o.normals.getData()),o.customAttributes&&o.customAttributes.forEach(I=>{I&&(e.customData.push({data:I.getData(),offset:4*e.blockSize,components:I.getNumberOfComponents(),name:I.getName()}),e.blockSize+=I.getNumberOfComponents())}),o.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=v,e.blockSize+=v,g=o.tcoords.getData()),o.colors?(e.colorComponents=o.colors.getNumberOfComponents(),e.colorOffset=0,d=o.colors.getData(),e.colorBO||(e.colorBO=H2.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let T=0,E=0,S=0,C=0,R=0,D=0,w;const O={anythingToPoints(I,B,q,ae){for(let J=0;J<I;++J)w(B[q+J],ae)},linesToWireframe(I,B,q,ae){for(let J=0;J<I-1;++J)w(B[q+J],ae),w(B[q+J+1],ae)},polysToWireframe(I,B,q,ae){if(I>2)for(let J=0;J<I;++J)w(B[q+J],ae),w(B[q+(J+1)%I],ae)},stripsToWireframe(I,B,q,ae){if(I>2){for(let J=0;J<I-1;++J)w(B[q+J],ae),w(B[q+J+1],ae);for(let J=0;J<I-2;J++)w(B[q+J],ae),w(B[q+J+2],ae)}},polysToSurface(I,B,q,ae){for(let J=0;J<I-2;J++)w(B[q+0],ae),w(B[q+J+1],ae),w(B[q+J+2],ae)},stripsToSurface(I,B,q,ae){for(let J=0;J<I-2;J++)w(B[q+J],ae),w(B[q+J+1+J%2],ae),w(B[q+J+1+(J+1)%2],ae)}},m={anythingToPoints(I,B){return I},linesToWireframe(I,B){return I>1?(I-1)*2:0},polysToWireframe(I,B){return I>2?I*2:0},stripsToWireframe(I,B){return I>2?I*4-6:0},polysToSurface(I,B){return I>2?(I-2)*3:0},stripsToSurface(I,B,q){return I>2?(I-2)*3:0}};let M=null,U=null;i===En.POINTS||r==="verts"?(M=O.anythingToPoints,U=m.anythingToPoints):i===En.WIREFRAME||r==="lines"?(M=O[`${r}ToWireframe`],U=m[`${r}ToWireframe`]):(M=O[`${r}ToSurface`],U=m[`${r}ToSurface`]);const b=n.getData(),j=b.length;let z=0;for(let I=0;I<j;)z+=U(b[I],b),I+=b[I]+1;let A=null;const K=new Float32Array(z*e.blockSize);d&&(A=new Uint8Array(z*4));let Y=0,Z=0;const{useShiftAndScale:se,coordShift:F,coordScale:P}=EV(o.points);if(se?t.setCoordShiftAndScale(F,P):e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null),u)if(!u.points&&!u.cells)u.points=new Int32Array(z),u.cells=new Int32Array(z);else{const I=new Int32Array(z+u.points.length);I.set(u.points),u.points=I;const B=new Int32Array(z+u.cells.length);B.set(u.cells),u.cells=B}let ie=o.vertexOffset;w=function(B,q){if(u&&(u.points[ie]=B,u.cells[ie]=D+o.cellOffset),++ie,T=B*3,e.coordShiftAndScaleEnabled?(K[Y++]=(f[T++]-e.coordShift[0])*e.coordScale[0],K[Y++]=(f[T++]-e.coordShift[1])*e.coordScale[1],K[Y++]=(f[T++]-e.coordShift[2])*e.coordScale[2]):(K[Y++]=f[T++],K[Y++]=f[T++],K[Y++]=f[T++]),l!==null&&(o.haveCellNormals?E=(D+o.cellOffset)*3:E=B*3,K[Y++]=l[E++],K[Y++]=l[E++],K[Y++]=l[E++]),e.customData.forEach(ae=>{R=B*ae.components;for(let J=0;J<ae.components;++J)K[Y++]=ae.data[R++]}),g!==null){o.useTCoordsPerCell?S=q*v:S=B*v;for(let ae=0;ae<v;++ae)K[Y++]=g[S++]}d!==null&&(o.haveCellScalars?C=(D+o.cellOffset)*p:C=B*p,A[Z++]=d[C++],A[Z++]=d[C++],A[Z++]=d[C++],A[Z++]=p===4?d[C++]:255)};for(let I=0;I<j;I+=b[I]+1,D++)M(b[I],b,I+1,D+o.cellOffset);return e.elementCount=z,t.upload(K,So.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(A,So.ARRAY_BUFFER)),D},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){vT("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){vT("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!nv(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!nv(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=OV(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=wV(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const mV={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function $2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mV,n),H2.extend(t,e,n),L.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),L.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),RV(t,e)}const MV=L.newInstance($2);var DV={newInstance:MV,extend:$2};const{vtkErrorMacro:_V}=L;function LV(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const i=e.context.getShaderInfoLog(e.handle);return _V(`Error compiling shader '${e.source}': ${i}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const VV={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function W2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VV,n),L.obj(t,e),L.setGet(t,e,["shaderType","source","error","handle","context"]),LV(t,e)}const BV=L.newInstance(W2,"vtkShader");var u0={newInstance:BV,extend:W2};const{vtkErrorMacro:Wn}=L;function UV(t,e,n,r){const i=typeof n=="string"?n:n.join(`
`),o=r===!1?e:new RegExp(e,"g"),u=t.replace(o,i);return{replace:u!==i,result:u}}function NV(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(Wn(e.error),0):t.link()?(t.setCompiled(!0),1):(Wn(`Links failed: ${e.error}`),0):(Wn(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Wn(e.fragmentShader.getError()),0):(Wn(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),Wn(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return Wn(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const o=new Float32Array(r);return e.context.uniformMatrix4fv(i,!1,o),!0},t.setUniformMatrix3x3=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const o=new Float32Array(r);return e.context.uniformMatrix3fv(i,!1,o),!0},t.setUniformf=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(i,r),!0)},t.setUniformfv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(i,r),!0)},t.setUniformi=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(i,r),!0)},t.setUniformiv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(i,r),!0)},t.setUniform2f=(n,r,i)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(o,r,i),!0},t.setUniform2fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(i,r),!0)},t.setUniform2i=(n,r,i)=>{const o=t.findUniform(n);if(o===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(o,r,i),!0},t.setUniform2iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(i,r),!0)},t.setUniform3f=(n,r,i,o)=>{const u=t.findUniform(n);if(u===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(o===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(u,r,i,o),!0},t.setUniform3fArray=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(i,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(i,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];let f=o;if(f.length===1&&Array.isArray(f[0])&&(f=f[0]),f.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,f[0],f[1],f[2]),!0},t.setUniform3iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(i,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];let f=o;if(f.length===1&&Array.isArray(f[0])&&(f=f[0]),f.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,f[0],f[1],f[2],f[3]),!0},t.setUniform4fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(i,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];let f=o;if(f.length===1&&Array.isArray(f[0])&&(f=f[0]),f.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,f[0],f[1],f[2],f[3]),!0},t.setUniform4iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(i,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(Wn("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return Wn("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const bV={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function j2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bV,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=u0.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=u0.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=u0.newInstance(),e.geometryShader.setShaderType("Geometry"),L.obj(t,e),L.get(t,e,["lastCameraMTime"]),L.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),NV(t,e)}const GV=L.newInstance(j2,"vtkShaderProgram");var re={newInstance:GV,extend:j2,substitute:UV};function FV(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let o=0;o<i.attributes.length;++o){const u=i.attributes[o],f=u.isMatrix?u.size:1;for(let l=0;l<f;++l)n.enableVertexAttribArray(u.index+l),n.vertexAttribPointer(u.index+l,u.size,u.type,u.normalize,u.stride,u.offset+u.stride*l/u.size),u.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(u.index+l,1):n.vertexAttribDivisor(u.index+l,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let o=0;o<i.attributes.length;++o){const u=i.attributes[o],f=u.isMatrix?u.size:1;for(let l=0;l<f;++l)n.enableVertexAttribArray(u.index+l),n.vertexAttribPointer(u.index+l,u.size,u.type,u.normalize,u.stride,u.offset+u.stride*l/u.size),u.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(u.index+l,0):n.vertexAttribDivisor(u.index+l,0)),n.disableVertexAttribArray(u.index+l)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,i,o,u,f,l,g)=>t.addAttributeArrayWithDivisor(n,r,i,o,u,f,l,g,0,!1),t.addAttributeArrayWithDivisor=(n,r,i,o,u,f,l,g,d,p)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==So.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const v=e.context,T={};if(T.name=i,T.index=v.getAttribLocation(e.handleProgram,i),T.offset=o,T.stride=u,T.type=f,T.size=l,T.normalize=g,T.isMatrix=p,T.divisor=d,T.Index===-1)return!1;if(r.bind(),v.enableVertexAttribArray(T.index),v.vertexAttribPointer(T.index,T.size,T.type,T.normalize,T.stride,T.offset),d>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(T.index,1):v.vertexAttribDivisor(T.index,1)),T.buffer=r.getHandle(),!e.supported){let E=!1;for(let S=0;S<e.buffers.length;++S){const C=e.buffers[S];if(C.buffer===T.buffer){E=!0;let R=!1;for(let D=0;D<C.attributes.length;++D)C.attributes[D].name===i&&(R=!0,C.attributes[D]=T);R||C.attributes.push(T)}}E||e.buffers.push({buffer:T.buffer,attributes:[T]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,i,o,u,f,l,g,d)=>{const p=t.addAttributeArrayWithDivisor(n,r,i,o,u,f,l,g,d,!0);if(!p)return p;const v=e.context,T=v.getAttribLocation(e.handleProgram,i);for(let E=1;E<l;E++)v.enableVertexAttribArray(T+E),v.vertexAttribPointer(T+E,l,f,g,u,o+u*E/l),d>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(T+E,1):v.vertexAttribDivisor(T+E,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];for(let o=0;o<i.attributes.length;++o)if(i.attributes[o].name===n)return i.attributes.splice(o,1),i.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const kV={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function K2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kV,n),e.buffers=[],L.obj(t,e),L.get(t,e,["supported"]),L.setGet(t,e,["forceEmulation"]),FV(t,e)}const zV=L.newInstance(K2,"vtkOpenGLVertexArrayObject");var X2={newInstance:zV,extend:K2};const ta={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function AV(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,i,o)=>{if(e.CABO.getElementCount()){const u=t.getOpenGLMode(i),f=t.haveWideLines(n,r),l=e.context,g=l.getParameter(l.DEPTH_WRITEMASK);e.pointPicking&&l.depthMask(!1),u===l.LINES&&f?(t.updateShaders(n,r,o),l.drawArraysInstanced(u,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(l.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,o),l.drawArrays(u,0,e.CABO.getElementCount()),l.lineWidth(1));const p=(u===l.POINTS?1:0)||(u===l.LINES?2:3);return e.pointPicking&&l.depthMask(g),e.CABO.getElementCount()/p}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===En.POINTS||r===ta.Points?e.context.POINTS:n===En.WIREFRAME||r===ta.Lines||r===ta.TrisEdges||r===ta.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,i)=>!!(i.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<i.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,i)=>{if(t.getNeedToRebuildShaders(n,r,i)){const o={Vertex:null,Fragment:null,Geometry:null};i.buildShaders(o,n,r);const u=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);u!==t.getProgram()&&(t.setProgram(u),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),i.setMapperShaderParameters(t,n,r),i.setPropertyShaderParameters(t,n,r),i.setCameraShaderParameters(t,n,r),i.setLightingShaderParameters(t,n,r),i.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,i)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",i.usize,i.vsize);const o=parseFloat(r.getProperty().getLineWidth()),u=o/2;t.getProgram().setUniformf("lineWidthStepSize",o/Math.ceil(o)),t.getProgram().setUniformf("halfLineWidth",u)}e.primitiveType===ta.Points||r.getProperty().getRepresentation()===En.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,i)=>{let o=n.Vertex;o=re.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,o=re.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,i)&&(o=re.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,o=re.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=o},t.getPointPickingPrimitiveSize=()=>e.primitiveType===ta.Points?2:e.primitiveType===ta.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const HV={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function q2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HV,n),L.obj(t,e),e.shaderSourceTime={},L.obj(e.shaderSourceTime),e.attributeUpdateTime={},L.obj(e.attributeUpdateTime),L.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=re.newInstance(),e.VAO=X2.newInstance(),e.CABO=DV.newInstance(),AV(t,e)}const $V=L.newInstance(q2);var rs={newInstance:$V,extend:q2,primTypes:ta};const WV={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},q0={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Y2={Wrap:WV,Filter:q0};const Q2=new Float32Array(1),jV=new Int32Array(Q2.buffer);function KV(t){Q2[0]=t;const e=jV[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(i===255?0:1)&&e&8388607,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=r&1,n)}function XV(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var Nn={fromHalf:XV,toHalf:KV};function qV(){try{const r=new Int16Array([0,32767]),i=[1,1],o=document.createElement("canvas");o.width=4,o.height=4;const u=o.getContext("webgl2");if(!u)return!1;const f=u.getExtension("EXT_texture_norm16");if(!f)return!1;const l=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,g=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,d=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(d,l),u.compileShader(d),!u.getShaderParameter(d,u.COMPILE_STATUS))return!1;const p=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(p,g),u.compileShader(p),!u.getShaderParameter(p,u.COMPILE_STATUS))return!1;const v=u.createProgram();if(u.attachShader(v,d),u.attachShader(v,p),u.linkProgram(v),!u.getProgramParameter(v,u.LINK_STATUS))return!1;const T=u.createTexture();u.bindTexture(u.TEXTURE_2D,T),u.texImage2D(u.TEXTURE_2D,0,f.R16_SNORM_EXT,2,1,0,u.RED,u.SHORT,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.useProgram(v),u.drawArrays(u.POINTS,0,1);const E=new Uint8Array(4);u.readPixels(i[0],i[1],1,1,u.RGBA,u.UNSIGNED_BYTE,E);const[S,C,R]=E,D=u.getExtension("WEBGL_lose_context");return D&&D.loseContext(),S===C&&C===R&&S!==0}catch{return!1}}let c0;function YV(){return c0===void 0&&(c0=qV()),c0}const{Wrap:Sr,Filter:gt}=Y2,{VtkDataTypes:xe}=je,{vtkDebugMacro:f0,vtkErrorMacro:Ua,vtkWarningMacro:TT,requiredParam:Oe}=In,{toHalf:QV}=Nn;function ZV(t,e){e.classHierarchy.push("vtkOpenGLTexture");function n(){return{internalFormat:e.internalFormat,format:e.format,openGLDataType:e.openGLDataType,width:e.width,height:e.height}}t.render=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(E?e._openGLRenderWindow=E:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(gt.LINEAR),t.setMagnificationFilter(gt.LINEAR)):(t.setMinificationFilter(gt.NEAREST),t.setMagnificationFilter(gt.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(Sr.REPEAT),t.setWrapS(Sr.REPEAT),t.setWrapT(Sr.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImageBitmap()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImageBitmap()&&e.renderable.getImageLoaded()&&(t.create2DFromImageBitmap(e.renderable.getImageBitmap()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR));const C=e.renderable.getCanvas();t.create2DFromRaw({width:C.width,height:C.height,numComps:4,dataType:xe.UNSIGNED_CHAR,data:C,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const C=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw({width:C.width,height:C.height,numComps:4,dataType:xe.UNSIGNED_CHAR,data:C.data,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const S=e.renderable.getInputData(0);if(S&&S.getPointData().getScalars()){const C=S.getExtent(),R=S.getPointData().getScalars(),D=[];for(let w=0;w<e.renderable.getNumberOfInputPorts();++w){const O=e.renderable.getInputData(w),m=O?O.getPointData().getScalars().getData():null;m&&D.push(m)}e.renderable.getInterpolate()&&R.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(gt.LINEAR_MIPMAP_LINEAR)),D.length%6===0?t.createCubeFromRaw({width:C[1]-C[0]+1,height:C[3]-C[2]+1,numComps:R.getNumberOfComponents(),dataType:R.getDataType(),data:D}):t.create2DFromRaw({width:C[1]-C[0]+1,height:C[3]-C[2]+1,numComps:R.getNumberOfComponents(),dataType:R.getDataType(),data:R.getData()}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const r=()=>{if(!((e.minificationFilter===gt.LINEAR||e.magnificationFilter===gt.LINEAR)&&!YV()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=E=>{E&&e.handle&&(E.activateTexture(t),E.deactivateTexture(t),e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(E),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let E=!1;if(e.context&&e.handle){let S=0;switch(e.target){case e.context.TEXTURE_2D:S=e.context.TEXTURE_BINDING_2D;break;default:TT("impossible case");break}E=e.context.getIntegerv(S)===e.handle}return E},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(E,S)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(E,S)),e.internalFormat||f0(`Unable to find suitable internal format for T=${E} NC= ${S}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&TT("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(E,S)=>{let C=0;return C=e._openGLRenderWindow.getDefaultTextureInternalFormat(E,S,r(),t.useHalfFloat()),C||(C||(f0("Unsupported internal texture type!"),f0(`Unable to find suitable internal format for T=${E} NC= ${S}`)),C)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=E=>{e._forceInternalFormat=!0,E!==e.internalFormat&&(e.internalFormat=E,t.modified())},t.getFormat=(E,S)=>(e.format=t.getDefaultFormat(E,S),e.format),t.getDefaultFormat=(E,S)=>{if(e._openGLRenderWindow.getWebgl2())switch(S){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(S){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e._prevTexParams=null,e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=E=>{const S=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(E){case xe.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(r()&&!S&&xe.SHORT):return e.context.SHORT;case(r()&&!S&&xe.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(S&&xe.SHORT):return e.context.HALF_FLOAT;case(S&&xe.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case xe.FLOAT:case xe.VOID:default:return e.context.FLOAT}switch(E){case xe.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case xe.FLOAT:case xe.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const C=e.context.getExtension("OES_texture_half_float");if(C&&e.context.getExtension("OES_texture_half_float_linear"))return C.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(E){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||S)&&(e.openGLDataType=t.getDefaultDataType(E)),e.openGLDataType},t.getShiftAndScale=()=>{let E=0,S=1;switch(e.openGLDataType){case e.context.BYTE:S=127.5,E=S-128;break;case e.context.UNSIGNED_BYTE:S=255,E=0;break;case e.context.SHORT:S=32767.5,E=S-32768;break;case e.context.UNSIGNED_SHORT:S=65536,E=0;break;case e.context.INT:S=21474836475e-1,E=S-2147483648;break;case e.context.UNSIGNED_INT:S=4294967295,E=0;break;case e.context.FLOAT:}return{shift:E,scale:S}},t.getOpenGLFilterMode=E=>{switch(E){case gt.NEAREST:return e.context.NEAREST;case gt.LINEAR:return e.context.LINEAR;case gt.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case gt.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case gt.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case gt.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=E=>{switch(E){case Sr.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case Sr.REPEAT:return e.context.REPEAT;case Sr.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function i(E){const[S,C,R,D,w,O]=E;return[C-S+1,D-R+1,O-w+1]}function o(E){const[S,C,R]=i(E);return S*C*R}function u(E,S,C,R,D){const[w,O,m,M,U,b]=C,[j,z]=S,A=j*z;let K=D;for(let Y=U;Y<=b;Y++){const Z=Y*A;for(let se=m;se<=M;se++){const F=Z+se*j;for(let P=F+w,ie=F+O;P<=ie;P++,K++)R[K]=E[P]}}}function f(E,S){const R=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||E.constructor,D=S.reduce((M,U)=>M+o(U),0),w=new R(D),O=[e.width,e.height,e.depth];let m=0;return S.forEach(M=>{u(E,O,M,w,m),m+=o(M)}),w}t.updateArrayDataTypeForGL=function(E,S){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const D=[];let w=e.width*e.height*e.components;C&&(w*=e.depth);const O=!!R.length;if(E!==xe.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let M=0;M<S.length;M++)if(S[M])if(O)D.push(f(S[M],R,Float32Array));else{const U=S[M].length>w?S[M].subarray(0,w):S[M];D.push(new Float32Array(U))}else D.push(null);if(E!==xe.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let M=0;M<S.length;M++)if(S[M])if(O)D.push(f(S[M],R,Uint8Array));else{const U=S[M].length>w?S[M].subarray(0,w):S[M];D.push(new Uint8Array(U))}else D.push(null);let m=!1;if(e._openGLRenderWindow.getWebgl2())m=e.openGLDataType===e.context.HALF_FLOAT;else{const M=e.context.getExtension("OES_texture_half_float");m=M&&e.openGLDataType===M.HALF_FLOAT_OES}if(m)for(let M=0;M<S.length;M++)if(S[M]){const U=O?f(S[M],R):S[M],b=new Uint16Array(O?U.length:w),j=b.length;for(let z=0;z<j;z++)b[z]=QV(U[z]);D.push(b)}else D.push(null);if(D.length===0)for(let M=0;M<S.length;M++)D.push(O&&S[M]?f(S[M],R):S[M]);return D};function l(E){if(e._openGLRenderWindow.getWebgl2())return E;const S=[],C=e.width,R=e.height,D=e.components;if(E&&(!rc(C)||!rc(R))){const w=e.context.getExtension("OES_texture_half_float"),O=Bn(C),m=Bn(R),M=O*m*e.components;for(let U=0;U<E.length;U++)if(E[U]!==null){let b=null;const j=R/m,z=C/O;let A=!1;e.openGLDataType===e.context.FLOAT?b=new Float32Array(M):w&&e.openGLDataType===w.HALF_FLOAT_OES?(b=new Uint16Array(M),A=!0):b=new Uint8Array(M);for(let K=0;K<m;K++){const Y=K*O*D,Z=K*j;let se=Math.floor(Z),F=Math.ceil(Z);F>=R&&(F=R-1);const P=Z-se,ie=1-P;se=se*C*D,F=F*C*D;for(let I=0;I<O;I++){const B=I*D,q=I*z;let ae=Math.floor(q),J=Math.ceil(q);J>=C&&(J=C-1);const ue=q-ae;ae*=D,J*=D;for(let pe=0;pe<D;pe++)A?b[Y+B+pe]=Nn.toHalf(Nn.fromHalf(E[U][se+ae+pe])*ie*(1-ue)+Nn.fromHalf(E[U][se+J+pe])*ie*ue+Nn.fromHalf(E[U][F+ae+pe])*P*(1-ue)+Nn.fromHalf(E[U][F+J+pe])*P*ue):b[Y+B+pe]=E[U][se+ae+pe]*ie*(1-ue)+E[U][se+J+pe]*ie*ue+E[U][F+ae+pe]*P*(1-ue)+E[U][F+J+pe]*P*ue}}S.push(b),e.width=O,e.height=m}else S.push(null)}if(S.length===0)for(let w=0;w<E.length;w++)S.push(E[w]);return S}function g(E){return e._openGLRenderWindow?e.resizable||e.renderable?.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&r()&&(E===xe.UNSIGNED_SHORT||E===xe.SHORT)):!1:!1}t.create2DFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),numComps:C=Oe("numComps"),dataType:R=Oe("dataType"),data:D=Oe("data"),flip:w=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(R,!0),t.getInternalFormat(R,C),t.getFormat(R,C),!e.internalFormat||!e.format||!e.openGLDataType)return Ua("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=C,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const O=[D],m=t.updateArrayDataTypeForGL(R,O),M=l(m);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,w),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(R)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),M[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,M[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,M[0]),e.generateMipmap&&e.context.generateMipmap(e.target),w&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*C*e._openGLRenderWindow.getDefaultTextureByteSize(R,r(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),numComps:C=Oe("numComps"),dataType:R=Oe("dataType"),data:D=Oe("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(R),t.getInternalFormat(R,C),t.getFormat(R,C),!e.internalFormat||!e.format||!e.openGLDataType)return Ua("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=C,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=D.length/6-1,t.createTexture(),t.bind();const w=t.updateArrayDataTypeForGL(R,D),O=l(w),m=[];let M=e.width,U=e.height;for(let b=0;b<O.length;b++){b%6===0&&b!==0&&(M/=2,U/=2),m[b]=es(R,U*M*e.components);for(let j=0;j<U;++j){const z=j*M*e.components,A=(U-j-1)*M*e.components;m[b].set(O[b].slice(A,A+M*e.components),z)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(R)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let b=0;b<6;b++){let j=0,z=e.width,A=e.height;for(;z>=1&&A>=1;){let K=null;j<=e.maxLevel&&(K=m[6*j+b]),g(R)?K!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+b,j,0,0,z,A,e.format,e.openGLDataType,K):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+b,j,e.internalFormat,z,A,0,e.format,e.openGLDataType,K),j++,z/=2,A/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*C*e._openGLRenderWindow.getDefaultTextureByteSize(R,r(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),dataType:C=Oe("dataType"),data:R=Oe("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.getOpenGLDataType(C),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?C===xe.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(Ua("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=E,e.height=S,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(C)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),R!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,R)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,R),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(C,r(),t.useHalfFloat()),t.deactivate(),!0)},t.create2DFromImage=E=>{if(t.getOpenGLDataType(xe.UNSIGNED_CHAR),t.getInternalFormat(xe.UNSIGNED_CHAR,4),t.getFormat(xe.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return Ua("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const S=!e._openGLRenderWindow.getWebgl2()&&(!rc(E.width)||!rc(E.height));let C=E,R=E.width,D=E.height,w=!0;const O=window.chrome;if(S||O){const m=new OffscreenCanvas(Bn(E.width),Bn(E.height));R=m.width,D=m.height;const M=m.getContext("2d");M.translate(0,m.height),M.scale(1,-1),M.drawImage(E,0,0,E.width,E.height,0,0,m.width,m.height),C=m,w=!1}return e.width=R,e.height=D,e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,w),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(xe.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,C)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,C),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(xe.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0},t.create2DFromImageBitmap=E=>(t.getOpenGLDataType(xe.UNSIGNED_CHAR),t.getInternalFormat(xe.UNSIGNED_CHAR,4),t.getFormat(xe.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType?(Ua("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),e.width=E.width,e.height=E.height,g(xe.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,E)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,E),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(xe.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0));function d(E,S,C){const R=new Array(C),D=new Array(C);for(let w=0;w<C;++w)R[w]=E[w],D[w]=S[w]-E[w]||1;return{scale:D,offset:R}}function p(E,S){for(let C=0;C<E.length;C++){const R=E[C],D=S[C]+R;if(R<-2048||R>2048||D<-2048||D>2048)return!1}return!0}function v(E,S,C,R){t.getOpenGLDataType(E);const D=p(S,C)||R;let w=!1;if(e._openGLRenderWindow.getWebgl2())w=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&D||e.openGLDataType===e.context.HALF_FLOAT;else{const O=e.context.getExtension("OES_texture_half_float");w=O&&e.openGLDataType===O.HALF_FLOAT_OES}e.canUseHalfFloat=w&&D}function T(E,S){const C=E.getNumberOfComponents(),R=E.getDataType(),D=E.getData(),w=new Array(C),O=new Array(C);for(let M=0;M<C;++M){const[U,b]=E.getRange(M);w[M]=U,O[M]=b}const m=d(w,O,C);return v(R,m.offset,m.scale,S),t.useHalfFloat()||t.getOpenGLDataType(R,!0),{numComps:C,dataType:R,data:D,scaleOffsets:m}}t.create2DFilterableFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),numComps:C=Oe("numComps"),dataType:R=Oe("dataType"),data:D=Oe("data"),preferSizeOverAccuracy:w=!1,ranges:O=void 0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create2DFilterableFromDataArray({width:E,height:S,dataArray:je.newInstance({numComps:C,dataType:R,values:D,ranges:O}),preferSizeOverAccuracy:w})},t.create2DFilterableFromDataArray=function(){let{width:E=Oe("width"),height:S=Oe("height"),dataArray:C=Oe("dataArray"),preferSizeOverAccuracy:R=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:D,dataType:w,data:O}=T(C,R);t.create2DFromRaw({width:E,height:S,numComps:D,dataType:w,data:O})},t.updateVolumeInfoForGL=(E,S)=>{let C=!1;const R=t.useHalfFloat();(!e.volumeInfo?.scale||!e.volumeInfo?.offset)&&(e.volumeInfo={scale:new Array(S),offset:new Array(S)});for(let D=0;D<S;++D)e.volumeInfo.scale[D]=1,e.volumeInfo.offset[D]=0;if(r()&&!R&&E===xe.SHORT){for(let D=0;D<S;++D)e.volumeInfo.scale[D]=32767;C=!0}if(r()&&!R&&E===xe.UNSIGNED_SHORT){for(let D=0;D<S;++D)e.volumeInfo.scale[D]=65535;C=!0}if(E===xe.UNSIGNED_CHAR){for(let D=0;D<S;++D)e.volumeInfo.scale[D]=255;C=!0}return(E===xe.FLOAT||R&&(E===xe.SHORT||E===xe.UNSIGNED_SHORT))&&(C=!0),C},t.create3DFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),depth:C=Oe("depth"),numComps:R=Oe("numComps"),dataType:D=Oe("dataType"),data:w=Oe("data"),updatedExtents:O=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=D,M=w;if(!t.updateVolumeInfoForGL(m,R)&&M){const Y=E*S*C,Z=structuredClone(e.volumeInfo),se=new Float32Array(Y*R);e.volumeInfo.offset=Z.offset,e.volumeInfo.scale=Z.scale;let F=0;const P=Z.scale.map(ie=>1/ie);for(let ie=0;ie<Y;ie++)for(let I=0;I<R;I++)se[F]=(M[F]-Z.offset[I])*P[I],F++;m=xe.FLOAT,M=se}if(t.getOpenGLDataType(m),t.getInternalFormat(m,R),t.getFormat(m,R),!e.internalFormat||!e.format||!e.openGLDataType)return Ua("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=R,e.width=E,e.height=S,e.depth=C,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const U=O.length>0,b=!U||!LS(e._prevTexParams,n()),j=[M],A=t.updateArrayDataTypeForGL(m,j,!0,b?[]:O),K=l(A);if(e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),b)g(m)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),K[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,K[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,K[0]),e._prevTexParams=n();else if(U){const Y=K[0];let Z=0;for(let se=0;se<O.length;se++){const F=O[se],P=i(F),ie=o(F),I=new Y.constructor(Y.buffer,Z,ie);Z+=I.byteLength,e.context.texSubImage3D(e.target,0,F[0],F[2],F[4],P[0],P[1],P[2],e.format,e.openGLDataType,I)}}return e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(m,r(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(){let{width:E=Oe("width"),height:S=Oe("height"),depth:C=Oe("depth"),numComps:R=Oe("numComps"),dataType:D=Oe("dataType"),data:w=Oe("data"),preferSizeOverAccuracy:O=!1,ranges:m=void 0,updatedExtents:M=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create3DFilterableFromDataArray({width:E,height:S,depth:C,dataArray:je.newInstance({numComps:R,dataType:D,values:w,ranges:m}),preferSizeOverAccuracy:O,updatedExtents:M})},t.create3DFilterableFromDataArray=function(){let{width:E=Oe("width"),height:S=Oe("height"),depth:C=Oe("depth"),dataArray:R=Oe("dataArray"),preferSizeOverAccuracy:D=!1,updatedExtents:w=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:O,dataType:m,data:M,scaleOffsets:U}=T(R,D),b=[],j=[];for(let oe=0;oe<O;++oe)b[oe]=0,j[oe]=1;if(e.volumeInfo={scale:j,offset:b,dataComputedScale:U.scale,dataComputedOffset:U.offset,width:E,height:S,depth:C},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw({width:E,height:S,depth:C,numComps:O,dataType:m,data:M,updatedExtents:w});const z=E*S*C,A=structuredClone(U);let K=(oe,ze,Ve,et,Bt)=>{oe[ze]=Ve},Y=xe.UNSIGNED_CHAR;if(m===xe.UNSIGNED_CHAR)for(let oe=0;oe<O;++oe)A.offset[oe]=0,A.scale[oe]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(Y=xe.FLOAT,K=(oe,ze,Ve,et,Bt)=>{oe[ze]=(Ve-et)/Bt}):(Y=xe.UNSIGNED_CHAR,K=(oe,ze,Ve,et,Bt)=>{oe[ze]=255*(Ve-et)/Bt});if(t.getOpenGLDataType(Y),t.getInternalFormat(Y,O),t.getFormat(Y,O),!e.internalFormat||!e.format||!e.openGLDataType)return Ua("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=O,e.depth=1,e.numberOfDimensions=2;let Z=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);Z>4096&&(Y===xe.FLOAT||O>=3)&&(Z=4096);let se=1,F=1;z>Z*Z&&(se=Math.ceil(Math.sqrt(z/(Z*Z))),F=se);let P=Math.sqrt(z)/se;P=Bn(P);const ie=Math.floor(P*se/E),I=Math.ceil(C/ie),B=Bn(S*I/F);e.width=P,e.height=B,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=ie,e.volumeInfo.yreps=I,e.volumeInfo.xstride=se,e.volumeInfo.ystride=F,e.volumeInfo.offset=A.offset,e.volumeInfo.scale=A.scale;let q;const ae=P*B*O;Y===xe.FLOAT?q=new Float32Array(ae):q=new Uint8Array(ae);let J=0;const ue=Math.floor(E/se),pe=Math.floor(S/F);for(let oe=0;oe<I;oe++){const ze=Math.min(ie,C-oe*ie),Ve=O*(e.width-ze*Math.floor(E/se));for(let et=0;et<pe;et++){for(let Bt=0;Bt<ze;Bt++){const cn=O*((oe*ie+Bt)*E*S+F*et*E);for(let fa=0;fa<ue;fa++)for(let tr=0;tr<O;tr++)K(q,J,M[cn+se*fa*O+tr],A.offset[tr],A.scale[tr]),J++}J+=Ve}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(Y)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),q!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,q)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,q),t.deactivate(),!0},t.setOpenGLRenderWindow=E=>{e._openGLRenderWindow!==E&&(t.releaseGraphicsResources(),e._openGLRenderWindow=E,e.context=null,E&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=E=>E&&E.isCurrent()?E.getIntegerv(E.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=E=>{e.enableUseHalfFloat=E}}const JV={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Sr.CLAMP_TO_EDGE,wrapT:Sr.CLAMP_TO_EDGE,wrapR:Sr.CLAMP_TO_EDGE,minificationFilter:gt.NEAREST,magnificationFilter:gt.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Z2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JV,n),at.extend(t,e,n),e.sendParametersTime={},mt(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},mt(e.textureBuildTime,{mtime:0}),_o(t,e,["format","openGLDataType"]),vt(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Wt(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),Lo(t,e,["openGLRenderWindow"]),ZV(t,e)}const J2=Xe(Z2,"vtkOpenGLTexture");var Er={newInstance:J2,extend:Z2,...Y2};wn("vtkTexture",J2);var PV=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,IV=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function eB(t,e){t.replaceShaderCoincidentOffset=(n,r,i)=>{const o=t.getCoincidentParameters(r,i);if(o&&(o.factor!==0||o.offset!==0)){let u=n.Fragment;u=re.substitute(u,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(o.factor!==0?(u=re.substitute(u,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,u=re.substitute(u,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):u=re.substitute(u,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(o.factor!==0?(u=re.substitute(u,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,u=re.substitute(u,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):u=re.substitute(u,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=u}}}function tB(t,e){t.applyShaderReplacements=(n,r,i)=>{let o=null;if(r&&(o=r.ShaderReplacements),o)for(let u=0;u<o.length;u++){const f=o[u];if(i&&f.replaceFirst||!i&&!f.replaceFirst){const l=f.shaderType,g=n[l],d=re.substitute(g,f.originalValue,f.replacementValue,f.replaceAll);n[l]=d.result}}},t.buildShaders=(n,r,i)=>{t.getReplacedShaderTemplate(n,r,i),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const o=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,o,!0),t.replaceShaderValues(n,r,i),t.applyShaderReplacements(n,o)},t.getReplacedShaderTemplate=(n,r,i)=>{const o=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,i);let u=n.Vertex;if(o){const g=o.VertexShaderCode;g!==void 0&&g!==""&&(u=g)}n.Vertex=u;let f=n.Fragment;if(o){const g=o.FragmentShaderCode;g!==void 0&&g!==""&&(f=g)}n.Fragment=f;let l=n.Geometry;if(o){const g=o.GeometryShaderCode;g!==void 0&&(l=g)}n.Geometry=l}}var Pc={implementReplaceShaderCoincidentOffset:eB,implementBuildShadersWithReplacements:tB};const{FieldAssociations:l0}=Ia,{primTypes:dt}=rs,{Representation:Ai,Shading:ST}=ns,{ScalarMode:lc}=Za,{Filter:xT,Wrap:CT}=Er,{vtkErrorMacro:Na}=In,nB={type:"StartEvent"},rB={type:"EndEvent"},{CoordinateSystem:aB}=Bo;function iB(t){const e=t.getSelector();return e?e.getCurrentPass():Ht.MIN_KNOWN_PASS-1}function sB(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let u=dt.Start;u<dt.End;u++)e.primitives[u].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor.getRenderable(),o=e._openGLRenderer.getRenderable();t.renderPiece(o,i)},t.getShaderTemplate=(r,i,o)=>{r.Vertex=PV,r.Fragment=IV,r.Geometry=""},t.replaceShaderColor=(r,i,o)=>{let u=r.Vertex,f=r.Geometry,l=r.Fragment;const g=e.lastBoundBO.getReferenceByName("lastLightComplexity");let d=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];g&&(d=d.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let p=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];g&&(p=p.concat(["  vec3 specularColor;","  float specularPower;"])),p=p.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),g&&(p=p.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(d=d.concat(["varying vec4 vertexColorVSOutput;"]),u=re.substitute(u,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,u=re.substitute(u,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,f=re.substitute(f,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,f=re.substitute(f,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?l=re.substitute(l,"//VTK::Color::Impl",p.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?l=re.substitute(l,"//VTK::Color::Impl",p.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(o.getBackfaceProperty()&&!e.drawingEdges&&(d=d.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),g?(d=d.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),p=p.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):p=p.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(d=d.concat(["uniform samplerBuffer texture1;"])),l=re.substitute(l,"//VTK::Color::Impl",p).result),l=re.substitute(l,"//VTK::Color::Dec",d).result,r.Vertex=u,r.Geometry=f,r.Fragment=l},t.replaceShaderLight=(r,i,o)=>{let u=r.Fragment;const f="",l=e.lastBoundBO.getReferenceByName("lastLightComplexity"),g=e.lastBoundBO.getReferenceByName("lastLightCount");let d=[];switch(l){case 0:u=re.substitute(u,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:u=re.substitute(u,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let p=0;p<g;++p)d=d.concat([`uniform vec3 lightColor${p};`,`uniform vec3 lightDirectionVC${p}; // normalized`,`uniform vec3 lightHalfAngleVC${p}; // normalized`]);u=re.substitute(u,"//VTK::Light::Dec",d).result,d=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let p=0;p<g;++p)d=d.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${p}));`,`  diffuseL += ((df${f}) * lightColor${p});`,`  if (dot(normalVCVSOutput, lightDirectionVC${p}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${p},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${f} * lightColor${p});`,"    }"]);d=d.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),u=re.substitute(u,"//VTK::Light::Impl",d,!1).result;break;case 3:for(let p=0;p<g;++p)d=d.concat([`uniform vec3 lightColor${p};`,`uniform vec3 lightDirectionVC${p}; // normalized`,`uniform vec3 lightHalfAngleVC${p}; // normalized`,`uniform vec3 lightPositionVC${p};`,`uniform vec3 lightAttenuation${p};`,`uniform float lightConeAngle${p};`,`uniform float lightExponent${p};`,`uniform int lightPositional${p};`]);u=re.substitute(u,"//VTK::Light::Dec",d).result,d=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let p=0;p<g;++p)d=d.concat(["  attenuation = 1.0;",`  if (lightPositional${p} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${p};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${p};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${p}.x`,`       + lightAttenuation${p}.y * distanceVC`,`       + lightAttenuation${p}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${p} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${p});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${p})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${p});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${f}) * lightColor${p});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${p},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${f}) * lightColor${p});`,"    }"]);d=d.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),u=re.substitute(u,"//VTK::Light::Impl",d,!1).result;break;default:Na("bad light complexity")}r.Fragment=u},t.replaceShaderNormal=(r,i,o)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let f=r.Vertex,l=r.Geometry,g=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(f=re.substitute(f,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,f=re.substitute(f,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,l=re.substitute(l,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,l=re.substitute(l,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,g=re.substitute(g,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,g=re.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(g=re.substitute(g,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,g=re.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(o.getProperty().getRepresentation())===e.context.LINES?(g=re.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=re.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(g=re.substitute(g,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,g=re.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=re.substitute(g,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=f,r.Geometry=l,r.Fragment=g}},t.replaceShaderPositionVC=(r,i,o)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,o);let u=r.Vertex,f=r.Geometry,l=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(u=re.substitute(u,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,u=re.substitute(u,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,u=re.substitute(u,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,f=re.substitute(f,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,f=re.substitute(f,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,l=re.substitute(l,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,l=re.substitute(l,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(u=re.substitute(u,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,u=re.substitute(u,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=u,r.Geometry=f,r.Fragment=l},t.replaceShaderTCoord=(r,i,o)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let u=r.Vertex,f=r.Geometry,l=r.Fragment;if(e.drawingEdges)return;u=re.substitute(u,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const g=e.openGLActor.getActiveTextures();let d=2,p=2;if(g&&g.length>0&&(d=g[0].getComponents(),g[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(p=3)),e.renderable.getColorTextureMap()&&(d=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),p=2),p===2){if(u=re.substitute(u,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,f=re.substitute(f,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,f=re.substitute(f,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=re.substitute(l,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,g&&g.length>=1)switch(d){case 1:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(u=re.substitute(u,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,f=re.substitute(f,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,f=re.substitute(f,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,l=re.substitute(l,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,d){case 1:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:l=re.substitute(l,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=u,r.Geometry=f,r.Fragment=l}},t.replaceShaderClip=(r,i,o)=>{let u=r.Vertex,f=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes();u=re.substitute(u,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${l}];`,`varying float clipDistancesVSOutput[${l}];`]).result,u=re.substitute(u,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,f=re.substitute(f,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${l}];`]).result,f=re.substitute(f,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${l}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=u,r.Fragment=f},t.getCoincidentParameters=(r,i)=>{let o={factor:0,offset:0};const u=i.getProperty();if(e.renderable.getResolveCoincidentTopology()==ca.PolygonOffset||u.getEdgeVisibility()&&u.getRepresentation()===Ai.SURFACE){const l=e.lastBoundBO.getPrimitiveType();l===dt.Points||u.getRepresentation()===Ai.POINTS?o=e.renderable.getCoincidentTopologyPointOffsetParameter():l===dt.Lines||u.getRepresentation()===Ai.WIREFRAME?o=e.renderable.getCoincidentTopologyLineOffsetParameters():(l===dt.Tris||l===dt.TriStrips)&&(o=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(l===dt.TrisEdges||l===dt.TriStripsEdges)&&(o=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),o.factor/=2,o.offset/=2)}const f=e._openGLRenderer.getSelector();return f&&f.getFieldAssociation()===l0.FIELD_ASSOCIATION_POINTS&&(o.offset-=2),o},t.replaceShaderPicking=(r,i,o)=>{let u=r.Fragment,f=r.Vertex;if(u=re.substitute(u,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Ht.ID_LOW24||e.lastSelectionState===Ht.ID_HIGH24)&&(f=re.substitute(f,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,f=re.substitute(f,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,u=re.substitute(u,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,u=re.substitute(u,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Ht.ID_LOW24:u=re.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Ht.ID_HIGH24:u=re.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:u=re.substitute(u,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,u=re.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=u,r.Vertex=f}},t.replaceShaderValues=(r,i,o)=>{if(t.replaceShaderColor(r,i,o),t.replaceShaderNormal(r,i,o),t.replaceShaderLight(r,i,o),t.replaceShaderTCoord(r,i,o),t.replaceShaderPicking(r,i,o),t.replaceShaderClip(r,i,o),t.replaceShaderCoincidentOffset(r,i,o),t.replaceShaderPositionVC(r,i,o),e.haveSeenDepthRequest){let u=r.Fragment;u=re.substitute(u,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,u=re.substitute(u,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=u}},t.getNeedToRebuildShaders=(r,i,o)=>{let u=0,f=0;const l=r.getPrimitiveType(),g=e.currentInput;let d=!1;const p=g.getPointData().getNormals(),v=g.getCellData().getNormals(),T=o.getProperty().getInterpolation()===ST.FLAT,E=o.getProperty().getRepresentation(),S=r.getOpenGLMode(E,l);if((S===e.context.TRIANGLES||v&&!p||!T&&p||!T&&S===e.context.LINES)&&(d=!0),o.getProperty().getLighting()&&d){u=0;const w=i.getLightsByReference();for(let O=0;O<w.length;++O){const m=w[O];m.getSwitch()>0&&(f++,u===0&&(u=1)),u===1&&(f>1||m.getIntensity()!==1||!m.lightTypeIsHeadLight())&&(u=2),u<3&&m.getPositional()&&(u=3)}}let C=!1;const R=e.lastBoundBO.getReferenceByName("lastLightComplexity"),D=e.lastBoundBO.getReferenceByName("lastLightCount");return(R!==u||D!==f)&&(e.lastBoundBO.set({lastLightComplexity:u},!0),e.lastBoundBO.set({lastLightCount:f},!0),C=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(C=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||C?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,i,o)=>{const u=e.renderable.getViewSpecificProperties().ShadersCallbacks;u&&u.forEach(f=>{f.callback(f.userData,r,i,o)})},t.setMapperShaderParameters=(r,i,o)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const l=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Na("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&l>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Na("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((g,d)=>{r.getProgram().isAttributeUsed(`${g}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${g}MC`,r.getCABO().getCustomData()[d].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[d].components,!1)||Na(`Error setting ${g}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Na("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Na("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const l=e.renderable.getNumberOfClippingPlanes(),g=[],p=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=p?Lt(e.tmpMat4,o.getMatrix()):o.getMatrix();p&&(Qe(v,v),yt(v,v,p),Qe(v,v));for(let T=0;T<l;T++){const E=[];e.renderable.getClippingPlaneInDataCoords(v,T,E);for(let S=0;S<4;S++)g.push(E[S])}r.getProgram().setUniformi("numClipPlanes",l),r.getProgram().setUniform4fv("clipPlanes",g)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const u=e.openGLActor.getActiveTextures();if(u)for(let l=0;l<u.length;++l){const d=u[l].getTextureUnit(),p=`texture${d+1}`;r.getProgram().isUniformUsed(p)&&r.getProgram().setUniformi(p,d)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const l=t.getCoincidentParameters(i,o);r.getProgram().setUniformf("coffset",l.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",l.factor)}r.setMapperShaderParameters(i,o,e._openGLRenderer.getTiledSizeAndOrigin());const f=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",f?f.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",f?f.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,i,o)=>{const u=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(u<2)return;const f=r.getProgram();let l=0;const g=i.getLightsByReference();for(let v=0;v<g.length;++v){const T=g[v];if(T.getSwitch()>0){const S=T.getColorByReference(),C=T.getIntensity();e.lightColor[0]=S[0]*C,e.lightColor[1]=S[1]*C,e.lightColor[2]=S[2]*C;const R=T.getDirection(),D=i.getActiveCamera().getViewMatrix(),w=[...R];T.lightTypeIsSceneLight()&&(w[0]=D[0]*R[0]+D[1]*R[1]+D[2]*R[2],w[1]=D[4]*R[0]+D[5]*R[1]+D[6]*R[2],w[2]=D[8]*R[0]+D[9]*R[1]+D[10]*R[2],Ya(w)),e.lightDirection[0]=w[0],e.lightDirection[1]=w[1],e.lightDirection[2]=w[2],Ya(e.lightDirection),f.setUniform3fArray(`lightColor${l}`,e.lightColor),f.setUniform3fArray(`lightDirectionVC${l}`,e.lightDirection),l++}}if(u<3)return;const p=i.getActiveCamera().getViewMatrix();Qe(p,p),l=0;for(let v=0;v<g.length;++v){const T=g[v];if(T.getSwitch()>0){const S=T.getTransformedPosition(),C=new Float64Array(3);Ge(C,S,p),f.setUniform3fArray(`lightAttenuation${l}`,T.getAttenuationValuesByReference()),f.setUniformi(`lightPositional${l}`,T.getPositional()),f.setUniformf(`lightExponent${l}`,T.getExponent()),f.setUniformf(`lightConeAngle${l}`,T.getConeAngle()),f.setUniform3fArray(`lightPositionVC${l}`,[C[0],C[1],C[2]]),l++}}};function n(r,i,o){return i.identity(o),r.reduce((u,f,l)=>l===0?f?i.copy(u,f):i.identity(u):f?i.multiply(u,u,f):u,o)}t.setCameraShaderParameters=(r,i,o)=>{const u=r.getProgram(),f=e.openGLCamera.getKeyMatrices(i),l=i.getActiveCamera(),g=e.openGLCamera.getKeyMatrixTime().getMTime(),d=u.getLastCameraMTime(),v=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,T=o.getIsIdentity(),E=T?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(o.getCoordinateSystem()===aB.DISPLAY){const S=e._openGLRenderer.getTiledSizeAndOrigin();Re(e.tmpMat4),e.tmpMat4[0]=2/S.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/S.vsize,e.tmpMat4[13]=-1,yt(e.tmpMat4,e.tmpMat4,v),u.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else u.setUniformMatrix("MCPCMatrix",n([f.wcpc,E.mcwc,v],L0,e.tmpMat4));u.isUniformUsed("MCVCMatrix")&&u.setUniformMatrix("MCVCMatrix",n([f.wcvc,E.mcwc,v],L0,e.tmpMat4)),u.isUniformUsed("normalMatrix")&&u.setUniformMatrix3x3("normalMatrix",n([f.normalMatrix,E.normalMatrix],nm,e.tmpMat3)),d!==g&&(u.isUniformUsed("cameraParallel")&&u.setUniformi("cameraParallel",l.getParallelProjection()),u.setLastCameraMTime(g)),T||u.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,i,o)=>{const u=r.getProgram();let f=o.getProperty(),l=f.getOpacity(),g=e.drawingEdges?f.getEdgeColorByReference():f.getAmbientColorByReference(),d=e.drawingEdges?f.getEdgeColorByReference():f.getDiffuseColorByReference(),p=e.drawingEdges?1:f.getAmbient(),v=e.drawingEdges?0:f.getDiffuse(),T=e.drawingEdges?0:f.getSpecular();const E=f.getSpecularPower();u.setUniformf("opacityUniform",l),u.setUniform3fArray("ambientColorUniform",g),u.setUniform3fArray("diffuseColorUniform",d),u.setUniformf("ambient",p),u.setUniformf("diffuse",v);const S=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(S<1)return;let C=f.getSpecularColorByReference();if(u.setUniform3fArray("specularColorUniform",C),u.setUniformf("specularPowerUniform",E),u.setUniformf("specular",T),u.isUniformUsed("ambientIntensityBF")){if(f=o.getBackfaceProperty(),l=f.getOpacity(),g=f.getAmbientColor(),p=f.getAmbient(),d=f.getDiffuseColor(),v=f.getDiffuse(),C=f.getSpecularColor(),T=f.getSpecular(),u.setUniformf("ambientIntensityBF",p),u.setUniformf("diffuseIntensityBF",v),u.setUniformf("opacityUniformBF",l),u.setUniform3fArray("ambientColorUniformBF",g),u.setUniform3fArray("diffuseColorUniformBF",d),S<1)return;u.setUniformf("specularIntensityBF",T),u.setUniform3fArray("specularColorUniformBF",C),u.setUniformf("specularPowerUniformBF",E)}},t.updateMaximumPointCellIds=(r,i)=>{const o=e._openGLRenderer.getSelector();if(!o)return;if(e.selectionWebGLIdsToVTKIds?.points?.length){const f=e.selectionWebGLIdsToVTKIds.points.length;o.setMaximumPointId(f-1)}if(e.selectionWebGLIdsToVTKIds?.cells?.length){const f=e.selectionWebGLIdsToVTKIds.cells.length;o.setMaximumCellId(f-1)}o.getFieldAssociation()===l0.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,i)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const o=iB(e._openGLRenderer);e.lastSelectionState!==o&&(e.selectionStateChanged.modified(),e.lastSelectionState=o),e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().renderProp(i),t.updateBufferObjects(r,i),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,i)=>{const o=i.getProperty().getRepresentation(),u=i.getProperty().getEdgeVisibility()&&o===Ai.SURFACE,f=e._openGLRenderer.getSelector(),l=f&&f.getFieldAssociation()===l0.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Ht.ID_LOW24||e.lastSelectionState===Ht.ID_HIGH24);for(let g=dt.Start;g<dt.End;g++)e.primitives[g].setPointPicking(l),e.primitives[g].getCABO().getElementCount()&&(e.drawingEdges=u&&(g===dt.TrisEdges||g===dt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[g],e.primitiveIDOffset+=e.primitives[g].drawArrays(r,i,o,t),e.vertexIDOffset+=e.primitives[g].getCABO().getElementCount()))},t.renderPieceFinish=(r,i)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,i)=>{if(t.invokeEvent(nB),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(rB),!e.currentInput){Na("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const o=e.context,u=i.getProperty().getBackfaceCulling(),f=i.getProperty().getFrontfaceCulling();!u&&!f?e._openGLRenderWindow.disableCullFace():f?(e._openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(e._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK)),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,i)=>{const o=e.VBOBuildTime.getMTime();return o<t.getMTime()||o<e.renderable.getMTime()||o<i.getMTime()||o<e.currentInput.getMTime()},t.buildBufferObjects=(r,i)=>{const o=e.currentInput;if(o===null)return;e.renderable.mapScalars(o,1);const u=e.renderable.getColorMapColors();e.haveCellScalars=!1;const f=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(f===lc.USE_CELL_DATA||f===lc.USE_CELL_FIELD_DATA||f===lc.USE_FIELD_DATA||!o.getPointData().getScalars())&&f!==lc.USE_POINT_FIELD_DATA&&u&&(e.haveCellScalars=!0);let l=i.getProperty().getInterpolation()!==ST.FLAT?o.getPointData().getNormals():null;l===null&&o.getCellData().getNormals()&&(e.haveCellNormals=!0,l=o.getCellData().getNormals());const g=i.getProperty().getRepresentation();let d=o.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(d=null);let p=!1;if(e.renderable.getColorCoordinates()){d=e.renderable.getColorCoordinates(),p=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Er.newInstance({resizable:!0}));const T=e.internalColorTexture;T.setMinificationFilter(xT.NEAREST),T.setMagnificationFilter(xT.NEAREST),T.setWrapS(CT.CLAMP_TO_EDGE),T.setWrapT(CT.CLAMP_TO_EDGE),T.setOpenGLRenderWindow(e._openGLRenderWindow);const E=e.renderable.getColorTextureMap(),S=E.getExtent(),C=E.getPointData().getScalars();T.create2DFromRaw({width:S[1]-S[0]+1,height:S[3]-S[2]+1,numComps:C.getNumberOfComponents(),dataType:C.getDataType(),data:C.getData()}),T.activate(),T.sendParameters(),T.deactivate()}const v=`${o.getMTime()}A${g}B${o.getMTime()}C${l?l.getMTime():1}D${u?u.getMTime():1}E${i.getProperty().getEdgeVisibility()}F${d?d.getMTime():1}`;if(e.VBOBuildString!==v){const E={points:o.getPoints(),normals:l,tcoords:d,colors:u,cellOffset:0,vertexOffset:0,useTCoordsPerCell:p,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(R=>o.getPointData().getArrayByName(R))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const S=[{inRep:"verts",cells:o.getVerts()},{inRep:"lines",cells:o.getLines()},{inRep:"polys",cells:o.getPolys()},{inRep:"strips",cells:o.getStrips()},{inRep:"polys",cells:o.getPolys()},{inRep:"strips",cells:o.getStrips()}],C=i.getProperty().getEdgeVisibility()&&g===Ai.SURFACE;for(let R=dt.Start;R<dt.End;R++)R!==dt.TrisEdges&&R!==dt.TriStripsEdges?(E.cellOffset+=e.primitives[R].getCABO().createVBO(S[R].cells,S[R].inRep,g,E,e.selectionWebGLIdsToVTKIds),E.vertexOffset+=e.primitives[R].getCABO().getElementCount()):C?e.primitives[R].getCABO().createVBO(S[R].cells,S[R].inRep,Ai.WIREFRAME,{...E,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[R].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=v}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const oB={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Ht.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function uB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oB,n),at.extend(t,e,n),Pc.implementReplaceShaderCoincidentOffset(t,e,n),Pc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=dt,e.tmpMat3=Pa(new Float64Array(9)),e.tmpMat4=Re(new Float64Array(16));for(let r=dt.Start;r<dt.End;r++)e.primitives[r]=rs.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);vt(t,e,["context"]),e.VBOBuildTime={},mt(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},mt(e.selectionStateChanged,{mtime:0}),sB(t,e)}const cB=Xe(uB,"vtkOpenGLPolyDataMapper");wn("vtkMapper",cB);var fB=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,lB=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const P2={BACKGROUND:0,FOREGROUND:1};var I2={DisplayLocation:P2};const{primTypes:Ln}=rs,{Filter:ET,Wrap:wT}=Er,{vtkErrorMacro:co}=In,gB={type:"StartEvent"},hB={type:"EndEvent"};function pB(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,i,o)=>{r.Vertex=lB,r.Fragment=fB,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let u=Ln.Start;u<Ln.End;u++)e.primitives[u].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor2D.getRenderable(),o=e._openGLRenderer.getRenderable();t.renderPiece(o,i)},t.renderPiece=(r,i)=>{if(t.invokeEvent(gB),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(hB),!e.currentInput){co("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const o=e.context;e._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.renderPieceStart=(r,i)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(i)}e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),t.updateBufferObjects(r,i),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,i,o)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i)},t.getNeedToRebuildBufferObjects=(r,i)=>{const o=e.VBOBuildTime.getMTime();return!!(o<t.getMTime()||o<e._openGLRenderWindow.getMTime()||o<e.renderable.getMTime()||o<i.getMTime()||o<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&o<r.getMTime())},t.buildBufferObjects=(r,i)=>{const o=e.currentInput;if(o===null)return;e.renderable.mapScalars(o,i.getProperty().getOpacity());const u=e.renderable.getColorMapColors(),f=i.getProperty().getRepresentation();let l=o.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(l=null);let g=!1;if(e.renderable.getColorCoordinates()){l=e.renderable.getColorCoordinates(),g=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Er.newInstance({resizable:!0}));const E=e.internalColorTexture;E.setMinificationFilter(ET.NEAREST),E.setMagnificationFilter(ET.NEAREST),E.setWrapS(wT.CLAMP_TO_EDGE),E.setWrapT(wT.CLAMP_TO_EDGE),E.setOpenGLRenderWindow(e._openGLRenderWindow);const S=e.renderable.getColorTextureMap(),C=S.getExtent(),R=S.getPointData().getScalars();E.create2DFromRaw({width:C[1]-C[0]+1,height:C[3]-C[2]+1,numComps:R.getNumberOfComponents(),dataType:R.getDataType(),data:R.getData()}),E.activate(),E.sendParameters(),E.deactivate()}const d=e.renderable.getTransformCoordinate(),v=r.getRenderWindow().getViews()[0].getViewportSize(r),T=`${o.getMTime()}A${f}B${o.getMTime()}C${u?u.getMTime():1}D${l?l.getMTime():1}E${d?r.getMTime():1}F${v}`;if(e.VBOBuildString!==T){let E=o.getPoints();if(d){const C=Zc.newInstance(),R=E.getNumberOfPoints();C.setNumberOfPoints(R);const D=[];for(let w=0;w<R;++w){E.getPoint(w,D),d.setValue(D);const O=d.getComputedDoubleViewportValue(r);C.setPoint(w,O[0],O[1],0)}E=C}const S={points:E,tcoords:l,colors:u,cellOffset:0,useTCoordsPerCell:g,haveCellScalars:e.renderable.getAreScalarsMappedFromCells(),customAttributes:e.renderable.getCustomShaderAttributes().map(C=>o.getPointData().getArrayByName(C))};S.cellOffset+=e.primitives[Ln.Points].getCABO().createVBO(o.getVerts(),"verts",f,S),S.cellOffset+=e.primitives[Ln.Lines].getCABO().createVBO(o.getLines(),"lines",f,S),S.cellOffset+=e.primitives[Ln.Tris].getCABO().createVBO(o.getPolys(),"polys",f,S),S.cellOffset+=e.primitives[Ln.TriStrips].getCABO().createVBO(o.getStrips(),"strips",f,S),e.VBOBuildTime.modified(),e.VBOBuildString=T}},t.renderPieceDraw=(r,i)=>{const o=i.getProperty().getRepresentation();e.context.depthMask(!0);for(let f=Ln.Start;f<Ln.End;f++)e.primitives[f].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[f],e.primitiveIDOffset+=e.primitives[f].drawArrays(r,i,o,t))},t.renderPieceFinish=(r,i)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.replaceShaderValues=(r,i,o)=>{t.replaceShaderColor(r,i,o),t.replaceShaderTCoord(r,i,o),t.replaceShaderPicking(r,i,o),t.replaceShaderPositionVC(r,i,o)},t.replaceShaderColor=(r,i,o)=>{let u=r.Vertex,f=r.Geometry,l=r.Fragment,g=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],d=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];e.lastBoundBO.getCABO().getColorComponents()!==0?(g=g.concat(["varying vec4 vertexColorVSOutput;"]),u=re.substitute(u,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,u=re.substitute(u,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,f=re.substitute(f,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,f=re.substitute(f,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,l=re.substitute(l,"//VTK::Color::Impl",d.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):e.renderable.getAreScalarsMappedFromCells()&&(d=d.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),d=d.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),l=re.substitute(l,"//VTK::Color::Dec",g).result,l=re.substitute(l,"//VTK::Color::Impl",d).result,r.Vertex=u,r.Geometry=f,r.Fragment=l},t.replaceShaderTCoord=(r,i,o)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let u=r.Vertex,f=r.Geometry,l=r.Fragment;const g=e.lastBoundBO.getCABO().getTCoordComponents();g===1?(u=re.substitute(u,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,u=re.substitute(u,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,f=re.substitute(f,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,f=re.substitute(f,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=re.substitute(l,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=re.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):g===2&&(u=re.substitute(u,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,u=re.substitute(u,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,f=re.substitute(f,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,f=re.substitute(f,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,l=re.substitute(l,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l=re.substitute(l,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.renderable.getAreScalarsMappedFromCells()&&(f=re.substitute(f,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=u,r.Geometry=f,r.Fragment=l}},t.replaceShaderPicking=(r,i,o)=>{let u=r.Fragment;u=re.substitute(u,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,u=re.substitute(u,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=u},t.replaceShaderPositionVC=(r,i,o)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,o)},t.invokeShaderCallbacks=(r,i,o)=>{const u=e.renderable.getViewSpecificProperties().ShadersCallbacks;u&&u.forEach(f=>{f.callback(f.userData,r,i,o)})},t.setMapperShaderParameters=(r,i,o)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||co("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((l,g)=>{r.getProgram().isAttributeUsed(`${l}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${l}MC`,r.getCABO().getCustomData()[g].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[g].components,!1)||co(`Error setting ${l}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||co("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||co("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&e.internalColorTexture.getTextureUnit()>-1&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const u=e.openGLActor2D.getActiveTextures();if(u)for(let l=0;l<u.length;++l){const d=u[l].getTextureUnit(),p=`texture${d+1}`;r.getProgram().isUniformUsed(p)&&r.getProgram().setUniformi(p,d)}r.setMapperShaderParameters(i,o,e._openGLRenderer.getTiledSizeAndOrigin());const f=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",f?f.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",f?f.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,i,o)=>{const u=e.renderable.getColorMapColors();if(!u||u.getNumberOfComponents()===0){const f=r.getProgram(),l=o.getProperty(),g=l.getOpacity();f.setUniformf("opacityUniform",g);const d=l.getColor();f.setUniform3fArray("diffuseColorUniform",d)}},t.setLightingShaderParameters=(r,i,o)=>{};function n(r,i,o){return i.identity(o),r.reduce((u,f,l)=>l===0?f?i.copy(u,f):i.identity(u):f?i.multiply(u,u,f):u,o)}t.setCameraShaderParameters=(r,i,o)=>{const u=r.getProgram(),l=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,d=i.getRenderWindow().getViews()[0].getViewportSize(i),p=i.getViewport(),v=o.getActualPositionCoordinate().getComputedDoubleViewportValue(i),T=[0,0,1,1],E=[0,0,1,1];if(E[0]=p[0]>=T[0]?p[0]:T[0],E[1]=p[1]>=T[1]?p[1]:T[1],E[2]=p[2]<=T[2]?p[2]:T[2],E[3]=p[3]<=T[3]?p[3]:T[3],E[0]>=E[2]||E[1]>=E[3])return;d[0]=nc(d[0]*(E[2]-E[0])/(p[2]-p[0])),d[1]=nc(d[1]*(E[3]-E[1])/(p[3]-p[1]));const S=e._openGLRenderer.getParent().getSize(),C=nc(v[0]-(E[0]-p[0])*S[0]),R=nc(v[1]-(E[1]-p[1])*S[1]),D=-C;let w=-C+d[0];const O=-R;let m=-R+d[1];D===w&&(w=D+1),O===m&&(m=O+1);const M=Re(new Float64Array(16));M[0]=2/(w-D),M[5]=2/(m-O),M[3]=-1*(w+D)/(w-D),M[7]=-1*(m+O)/(m-O),M[10]=0,M[11]=o.getProperty().getDisplayLocation()===P2.FOREGROUND?-1:1,M[15]=1,Qe(M,M),u.setUniformMatrix("WCVCMatrix",n([M,l],L0,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const dB={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function yB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dB,n),at.extend(t,e,n),Pc.implementReplaceShaderCoincidentOffset(t,e,n),Pc.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Ln,e.tmpMat4=Re(new Float64Array(16));for(let r=Ln.Start;r<Ln.End;r++)e.primitives[r]=rs.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);vt(t,e,["context"]),e.VBOBuildTime={},mt(e.VBOBuildTime,{mtime:0}),pB(t,e)}const vB=Xe(yB,"vtkOpenGLPolyDataMapper2D");wn("vtkMapper2D",vB);const{VectorMode:TB}=d2;function g0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function eC(t,e){return n=>{const r=n.getLastSize(),i=(r[0]/700)**.8,o=(r[1]/700)**.8,u=Math.min(i,o),f=n.getAxisTextStyle(),l=n.getTickTextStyle();Object.assign(f,e.axisTextStyle),Object.assign(l,e.tickTextStyle),f.fontSize=Math.max(24*u,12),n.getLastAspectRatio()>1?l.fontSize=Math.max(20*u,10):l.fontSize=Math.max(16*u,10);const g=n.updateTextureAtlas();n.setTopTitle(!1);const d=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*l.fontSize),g.titleWidth<=g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*l.fontSize),d[0]=2*(g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.98-d[0],-.92])):(n.setAxisTitlePixelOffset(.2*l.fontSize),d[0]=2*(g.titleHeight+n.getAxisTitlePixelOffset()+g.tickWidth+n.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],n.setBoxPosition([.99-d[0],-.92])),d[1]=Math.max(1.2,Math.min(1.84/o,1.84));else{n.setAxisTitlePixelOffset(1.2*l.fontSize),n.setTickLabelPixelOffset(.1*l.fontSize);const p=2*(.8*l.fontSize+g.titleHeight+n.getAxisTitlePixelOffset())/r[1],v=2*g.tickWidth/r[0];d[0]=Math.min(1.9,Math.max(1.4,1.4*v*(n.getTicks().length+3))),d[1]=p,n.setBoxPosition([-.5*d[0],-.97])}n.recomputeBarSegments(g)}}function tC(t,e){return n=>{const r=n.getLastTickBounds(),i=Oh().domain([r[0],r[1]]),o=i.ticks(5),u=i.tickFormat(5);n.setTicks(o),n.setTickStrings(o.map(u))}}function SB(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=i=>{e.renderable!==i&&(e.renderable=i,e.barActor.setProperty(i.getProperty()),e.barActor.setParentProp(i),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(i.getProperty()),e.tmActor.setParentProp(i),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=i.generateTicks,e.axisTextStyle={...i.getAxisTextStyle()},e.tickTextStyle={...i.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(i,o,u)=>{(e.lastSize[0]!==i[0]||e.lastSize[1]!==i[1])&&(e.lastSize[0]=i[0],e.lastSize[1]=i[1],e.lastAspectRatio=i[0]/i[1],e.forceUpdate=!0);const f=e.renderable.getScalarsToColors();if(!(!f||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(f),e.camera=o,e.renderWindow=u,e.forceUpdate||Math.max(f.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const l=f.getMappingRange();if(e.lastTickBounds=[...l],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const g=t.updateTextureAtlas();t.recomputeBarSegments(g)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const i={},o=new Map;let u=0,f=1;g0(e.tmContext,e.axisTextStyle);let l=e.tmContext.measureText(e.renderable.getAxisLabel()),g={height:l.actualBoundingBoxAscent+2,startingHeight:f,width:l.width+2,textStyle:e.axisTextStyle};o.set(e.renderable.getAxisLabel(),g),f+=g.height,u=g.width,i.titleWidth=g.width,i.titleHeight=g.height,i.tickWidth=0,i.tickHeight=0,g0(e.tmContext,e.tickTextStyle);const d=[...t.getTickStrings(),"NaN","Below","Above"];for(let p=0;p<d.length;p++)o.has(d[p])||(l=e.tmContext.measureText(d[p]),g={height:l.actualBoundingBoxAscent+2,startingHeight:f,width:l.width+2,textStyle:e.tickTextStyle},o.set(d[p],g),f+=g.height,u<g.width&&(u=g.width),i.tickWidth<g.width&&(i.tickWidth=g.width),i.tickHeight<g.height&&(i.tickHeight=g.height));return u=Bn(u),f=Bn(f),o.forEach(p=>{p.tcoords=[0,(f-p.startingHeight-p.height)/f,p.width/u,(f-p.startingHeight-p.height)/f,p.width/u,(f-p.startingHeight)/f,0,(f-p.startingHeight)/f]}),e.tmCanvas.width=u,e.tmCanvas.height=f,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,u,f),o.forEach((p,v)=>{g0(e.tmContext,p.textStyle),e.tmContext.fillText(v,1,p.startingHeight+p.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=o,i},t.computeBarSize=i=>{e.vertical=e.boxSize[1]>e.boxSize[0];const o=2*i.tickHeight/e.lastSize[1],u=[1,1];if(e.vertical){const f=2*(i.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-f,e.barSize[1]=e.boxSize[1]-l}else{const l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-l-f,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+f,e.barPosition[1]=e.boxPosition[1],u[1]=o}else{const f=(2*i.tickWidth-8)/e.lastSize[0],l=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-l,e.barPosition[1]=e.boxPosition[1],u[0]=f}return u},t.recomputeBarSegments=i=>{const o=t.computeBarSize(i);e.barSegments=[];const u=[0,0],f=e.vertical?1:0,l=e.vertical?.01:.02;function g(v,T){e.barSegments.push({corners:[[...u],[u[0]+o[0],u[1]],[u[0]+o[0],u[1]+o[1]],[u[0],u[1]+o[1]]],scalars:T,title:v}),u[f]+=o[f]+l}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&g("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&e.renderable.getScalarsToColors().getUseBelowRangeColor?.()&&g("Below",[-.1,-.1,-.1,-.1]);const d=e.renderable.getScalarsToColors().getUseAboveRangeColor?.();u[f]+=l;const p=o[f];o[f]=d?1-2*l-o[f]-u[f]:1-l-u[f],g("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&d&&(o[f]=p,u[f]+=l,g("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(i,o,u,f,l,g)=>{const d=e._tmAtlas.get(i);if(!d)return;let p=g.ptIdx,v=g.cellIdx;n[0]=(.5*o[0]+.5)*e.lastSize[0],n[1]=(.5*o[1]+.5)*e.lastSize[1],n[2]=o[2],n[0]+=l[0],n[1]+=l[1];const T=[],E=f==="vertical"?[1,0]:[0,1];f==="vertical"?(T[0]=d.width,T[1]=-d.height,u[0]==="middle"?n[1]-=d.width/2:u[0]==="right"&&(n[1]-=d.width),u[1]==="middle"?n[0]+=d.height/2:u[1]==="top"&&(n[0]+=d.height)):(T[0]=d.width,T[1]=d.height,u[0]==="middle"?n[0]-=d.width/2:u[0]==="right"&&(n[0]-=d.width),u[1]==="middle"?n[1]-=d.height/2:u[1]==="top"&&(n[1]-=d.height)),g.points[p*3]=n[0],g.points[p*3+1]=n[1],g.points[p*3+2]=n[2],g.tcoords[p*2]=d.tcoords[0],g.tcoords[p*2+1]=d.tcoords[1],p++,n[E[0]]+=T[0],g.points[p*3]=n[0],g.points[p*3+1]=n[1],g.points[p*3+2]=n[2],g.tcoords[p*2]=d.tcoords[2],g.tcoords[p*2+1]=d.tcoords[3],p++,n[E[1]]+=T[1],g.points[p*3]=n[0],g.points[p*3+1]=n[1],g.points[p*3+2]=n[2],g.tcoords[p*2]=d.tcoords[4],g.tcoords[p*2+1]=d.tcoords[5],p++,n[E[0]]-=T[0],g.points[p*3]=n[0],g.points[p*3+1]=n[1],g.points[p*3+2]=n[2],g.tcoords[p*2]=d.tcoords[6],g.tcoords[p*2+1]=d.tcoords[7],p++,g.polys[v*4]=3,g.polys[v*4+1]=p-4,g.polys[v*4+2]=p-3,g.polys[v*4+3]=p-2,v++,g.polys[v*4]=3,g.polys[v*4+1]=p-4,g.polys[v*4+2]=p-2,g.polys[v*4+3]=p-1,g.ptIdx+=4,g.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const i=t.getTickStrings().length+e.barSegments.length,o=i*4,u=i*2,f=new Float64Array(o*3),l=new Uint16Array(u*4),g=new Float32Array(o*2),d={ptIdx:0,cellIdx:0,polys:l,points:f,tcoords:g},p=e.vertical?0:1,v=e.vertical?1:0;r[2]=-.99;const T=e.vertical?["right","middle"]:["middle","bottom"];let E=[0,1];const S=[0,0];e.vertical?(S[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],d)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],d)),E=[-1,0]):(S[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],d)),r[p]=e.barPosition[p]+(.5*E[p]+.5)*e.barSize[p],r[v]=e.barPosition[v]+e.barSize[v]*.5;let C=null;for(let U=0;U<e.barSegments.length;U++){const b=e.barSegments[U];b.title==="ticks"?C=b:(r[v]=e.barPosition[v]+.5*e.barSize[v]*(b.corners[2][v]+b.corners[0][v]),t.createPolyDataForOneLabel(b.title,r,T,"horizontal",S,d))}const R=e.barPosition[v]+e.barSize[v]*C.corners[0][v],D=e.barSize[v]*(C.corners[2][v]-C.corners[0][v]),w=t.getTicks(),O=t.getTickStrings(),m=t.getTickPositions();for(let U=0;U<w.length;U++){const b=m?m[U]:(w[U]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[v]=R+D*b,t.createPolyDataForOneLabel(O[U],r,T,"horizontal",S,d)}const M=je.newInstance({numberOfComponents:2,values:g,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(M),e.tmPolyData.getPoints().setData(f,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(l,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{const i=e.renderable.getScalarsToColors();let o=0;e.renderable.getDrawNanAnnotation()&&i.getNanColor()&&(o+=1),e.renderable.getDrawBelowRangeSwatch()&&i.getUseBelowRangeColor?.()&&(o+=1),e.renderable.getDrawAboveRangeSwatch()&&i.getUseAboveRangeColor?.()&&(o+=1);const u=4*(1+o),f=u;let l=1;i.getVectorMode()===TB.COMPONENT&&(l=i.getVectorComponent()+1);const g=new Float64Array(u*3),d=new Uint16Array(f*5),p=new Float32Array(u*l);let v=0,T=0;for(let S=0;S<e.barSegments.length;S++){const C=e.barSegments[S];for(let R=0;R<4;R++){r[0]=e.barPosition[0]+C.corners[R][0]*e.barSize[0],r[1]=e.barPosition[1]+C.corners[R][1]*e.barSize[1],g[v*3]=(.5*r[0]+.5)*e.lastSize[0],g[v*3+1]=(.5*r[1]+.5)*e.lastSize[1],g[v*3+2]=r[2];for(let D=0;D<l;D++)p[v*l+D]=e.lastTickBounds[0]+C.scalars[R]*(e.lastTickBounds[1]-e.lastTickBounds[0]);v++}d[T*5]=4,d[T*5+1]=v-4,d[T*5+2]=v-3,d[T*5+3]=v-2,d[T*5+4]=v-1,T++}const E=je.newInstance({numberOfComponents:l,values:p,name:"Scalars"});e.polyData.getPointData().setScalars(E),e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(d,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const xB=L.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),L.obj(t,e),L.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),L.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),L.getArray(t,e,["boxPosition","boxSize"]),L.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},L.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=Za.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=ua.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Qa.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=ua.newInstance(),e.tmMapper=Za.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=Mo.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Qa.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],SB(t,e)},"vtkScalarBarActorHelper");function CB(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(eC(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(tC())}}function EB(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function nC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EB(n)),e.autoLayout||(e.autoLayout=eC(t,e)),e.generateTicks||(e.generateTicks=tC()),Qa.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),L.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),L.get(t,e,["axisTextStyle","tickTextStyle"]),L.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),L.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),CB(t,e)}const wB=L.newInstance(nC,"vtkScalarBarActor");var rC={newInstance:wB,extend:nC,newScalarBarActorHelper:xB};function OB(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([o.usize,o.vsize],i,e._openGLRenderWindow.getRenderable())}}}const RB={};function mB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RB,n),at.extend(t,e,n),e.scalarBarActorHelper=rC.newScalarBarActorHelper(),OB(t,e)}const MB=Xe(mB,"vtkOpenGLScalarBarActor");wn("vtkScalarBarActor",MB);const{vtkErrorMacro:OT}=In;function DB(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const i=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",i);const o=e._openGLRenderer.getRenderable(),u=e.openGLCamera.getKeyMatrices(o),f=new Float64Array(16);if($t(f,u.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",f),e.lastFormat==="box"){const l=o.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",l[0],l[1],l[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let f=0;f<4;f++)r[f*3]=f%2*2-1,r[f*3+1]=f>1?1:-1,r[f*3+2]=1;const i=je.newInstance({numberOfComponents:3,values:r});i.setName("points");const o=new Uint16Array(8);o[0]=3,o[1]=0,o[2]=1,o[3]=3,o[4]=3,o[5]=0,o[6]=3,o[7]=2;const u=je.newInstance({numberOfComponents:1,values:o});e.tris.getCABO().createVBO(u,"polys",En.SURFACE,{points:i,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||OT("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||OT("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const _B={context:null};function LB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_B,n),at.extend(t,e,n),e.openGLTexture=Er.newInstance(),e.tris=rs.newInstance(),e.keyMatrixTime={},mt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Pa(new Float64Array(9)),mcwc:Re(new Float64Array(16))},vt(t,e,["context"]),Wt(t,e,["activeTextures"]),DB(t,e)}const VB=Xe(LB);wn("vtkSkybox",VB);const{vtkDebugMacro:BB}=In;function UB(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const i=e._openGLRenderer.getAspectRatio(),o=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,u=e._openGLRenderer.getTiledSizeAndOrigin();let f=null;if(e.renderable.getUseZValues()){const l=r.getZBufferTexture(),g=Math.floor(l.getWidth()),d=Math.floor(l.getHeight()),p=e._openGLRenderWindow.getContext();l.bind();const v=r.getFramebuffer();v?v.saveCurrentBindingsAndBuffers():BB("No framebuffer to save/restore");const T=p.createFramebuffer();p.bindFramebuffer(p.FRAMEBUFFER,T),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,l.getHandle(),0),p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE&&(f=new Uint8Array(g*d*4),p.viewport(0,0,g,d),p.readPixels(0,0,g,d,p.RGBA,p.UNSIGNED_BYTE,f)),v&&v.restorePreviousBindingsAndBuffers(),p.deleteFramebuffer(T)}e.renderable.invokeCallback(e.renderable.getInputData(),o,i,u,f)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const NB={};function bB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NB,n),at.extend(t,e,n),UB(t,e)}const GB=Xe(bB,"vtkOpenGLPixelSpaceCallbackMapper");wn("vtkPixelSpaceCallbackMapper",GB);const aC=Object.create(null);function er(t,e){aC[t]=e}function FB(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const kB={};function iC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kB,n),e.overrides=aC,ux.extend(t,e,n),FB(t,e)}const zB=L.newInstance(iC,"vtkWebGPUViewNodeFactory");var AB={newInstance:zB,extend:iC};function HB(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,i,o)=>{if(Re(n),e.renderable.getParallelProjection()){const u=e.renderable.getParallelScale(),f=u*r,l=u,g=(o[0]-1)*f,d=(o[0]+1)*f,p=(o[1]-1)*l,v=(o[1]+1)*l,T=1/(d-g),E=1/(v-p);n[0]=2*T,n[5]=2*E,n[10]=1/(i[1]-i[0]),n[12]=(d+g)*T,n[13]=(v+p)*E,n[14]=i[1]/(i[1]-i[0])}else{const u=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let f,l;e.renderable.getUseHorizontalViewAngle()===!0?(f=i[0]*u,l=i[0]*u/r):(f=i[0]*u*r,l=i[0]*u);const g=(o[0]-1)*f,d=(o[0]+1)*f,p=(o[1]-1)*l,v=(o[1]+1)*l;n[0]=2*i[0]/(d-g),n[5]=2*i[0]/(v-p),n[12]=(g+d)/(d-g),n[13]=(p+v)/(v-p),n[10]=0,n[14]=i[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let i=-r[0]/n;return i=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(i*(r[1]-r[0])),.5*i+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),i=n.getParent();if(Math.max(i.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const o=e.renderable.getViewMatrix();Lt(e.keyMatrices.normalMatrix,o),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,$t(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.wcvc,o);const u=n.getStabilizedCenterByReference();ct(e.keyMatrices.scvc,e.keyMatrices.wcvc,u);const f=n.getAspectRatio(),l=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,f,l,e.renderable.getWindowCenterByReference()),yt(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),$t(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const $B={keyMatrixTime:null,keyMatrices:null};function WB(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$B,n),at.extend(t,e,n),e.keyMatrixTime={},L.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},L.setGet(t,e,["keyMatrixTime"]),HB(t,e)}const jB=L.newInstance(WB);er("vtkCamera",jB);function KB(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let i=0;i<e.bindables.length;i++)e.bindables[i]!==n[i]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let i=0;i<e.bindables.length;i++){const o=e.bindables[i].getBindGroupLayoutEntry();o.binding=i,r.push(o)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let o=0;o<e.bindables.length;o++){const u=e.bindables[o].getBindGroupTime().getMTime();r=u>r?u:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const i=[];for(let o=0;o<e.bindables.length;o++){const u=e.bindables[o].getBindGroupEntry();u.binding=o,i.push(u)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:i,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],i=n.getBindGroupLayoutCount(e.label);for(let o=0;o<e.bindables.length;o++)r.push(e.bindables[o].getShaderCode(o,i));return r.join(`
`)}}const XB={device:null,handle:null,label:null};function sC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XB,n),L.obj(t,e),e.bindables=[],e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),L.setGet(t,e,["label","device","arrayInformation"]),KB(t,e)}const qB=L.newInstance(sC);var oC={newInstance:qB,extend:sC};function YB(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const QB={device:null,handle:null};function uC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QB,n),L.obj(t,e),L.get(t,e,["lastCameraMTime"]),L.setGet(t,e,["device","handle"]),YB(t,e)}const ZB=L.newInstance(uC,"vtkWebGPUShaderModule");var JB={newInstance:ZB,extend:uC};function PB(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const i=Array.isArray(n)?n.join(`
`):n;let o=!1;t.search(e)!==-1&&(o=!0);let u="";r&&(u="g");const f=new RegExp(e,u),l=t.replace(f,i);return{replace:o,result:l}}function IB(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),i=n.getHash(),o=e._shaderModules.keys();for(let f=0;f<o.length;f++){const l=o[f];if(l.getHash()===i&&l.getType()===r)return e._shaderModules.get(l)}const u=JB.newInstance();return u.initialize(e.device,n),e._shaderModules.set(n,u),u}}const eU={shaderModules:null,device:null,window:null};function cC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eU,n),e._shaderModules=new Map,L.obj(t,e),L.setGet(t,e,["device","window"]),IB(t,e)}const tU=L.newInstance(cC,"vtkWebGPUShaderCache");var ve={newInstance:tU,extend:cC,substitute:PB};function nU(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const i=[];for(let o=0;o<e.layouts.length;o++)i.push(e.layouts[o].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:i}),e.pipelineDescription.layout=e.pipelineLayout;for(let o=0;o<e.shaderDescriptions.length;o++){const u=e.shaderDescriptions[o],f=n.getShaderModule(u);u.getType()==="vertex"&&(e.pipelineDescription.vertex.module=f.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),u.getType()==="fragment"&&(e.pipelineDescription.fragment.module=f.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const rU={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function fC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rU,n),mt(t,e),e.layouts=[],e.shaderDescriptions=[],Wt(t,e,["handle","pipelineDescription"]),vt(t,e,["device","renderEncoder","topology","vertexState"]),nU(t,e)}const aU=Xe(fC,"vtkWebGPUPipeline");var iU={newInstance:aU,extend:fC};function sU(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(i)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const i=[];let o=[];if(r&&i.push(r.getShaderCode()),n||e.builtinInputNames.length){const u=[];if(u.push(`struct ${e.type}Input
{`),n){const f=n.getOutputNamesByReference(),l=n.getOutputTypesByReference(),g=n.getOutputInterpolationsByReference();for(let d=0;d<f.length;d++)g[d]!==void 0?u.push(`  @location(${d}) @interpolate(${g[d]}) ${f[d]} : ${l[d]},`):u.push(`  @location(${d}) ${f[d]} : ${l[d]},`)}for(let f=0;f<e.builtinInputNames.length;f++)u.push(`  ${e.builtinInputNames[f]} : ${e.builtinInputTypes[f]},`);u.length>1&&(u.push("};"),o=u,i[i.length-1]+=",",i.push(`input: ${e.type}Input`))}if(i.length&&(e.code=ve.substitute(e.code,"//VTK::IOStructs::Input",i).result),e.outputNames.length+e.builtinOutputNames.length){const u=[`struct ${e.type}Output
{`];for(let f=0;f<e.outputNames.length;f++)e.outputInterpolations[f]!==void 0?u.push(`  @location(${f}) @interpolate(${e.outputInterpolations[f]}) ${e.outputNames[f]} : ${e.outputTypes[f]},`):u.push(`  @location(${f}) ${e.outputNames[f]} : ${e.outputTypes[f]},`);for(let f=0;f<e.builtinOutputNames.length;f++)u.push(`  ${e.builtinOutputNames[f]} : ${e.builtinOutputTypes[f]},`);u.push("};"),o=o.concat(u),e.code=ve.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=ve.substitute(e.code,"//VTK::IOStructs::Dec",o).result}}const oU={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function lC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oU,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],L.obj(t,e),L.setGet(t,e,["type","hash","code"]),L.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),sU(t,e)}const uU=L.newInstance(lC,"vtkWebGPUShaderDescription");var RT={newInstance:uU,extend:lC};const mT={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function cU(t){return!t||t.length<6?0:t in mT?mT[t]:(Ee(`unknown format ${t}`),null)}function fU(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return Ee(`unknown format ${t}`),0;const i=5-r/2;return e*i}function lU(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function gU(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{Ee(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){Ee(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function hU(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{Ee(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function pU(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function dU(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";Ee(`unknown format ${t}`)}}var Ot={getDetailsFromTextureFormat:cU,getByteStrideFromBufferFormat:fU,getNumberOfComponentsFromBufferFormat:lU,getNativeTypeFromBufferFormat:gU,getShaderTypeFromBufferFormat:hU,getByteStrideFromShaderFormat:pU,getNativeTypeFromShaderFormat:dU};function yU(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function vU(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",o=r;Array.isArray(o)||(o=[o]);for(let u=0;u<e.inputs.length;u++)if(yU(e.inputs[u].names,o)){if(e.inputs[u].buffer===n)return;e.inputs[u].buffer=n;return}e.inputs.push({buffer:n,stepMode:i,names:o}),e.inputs=e.inputs.sort((u,f)=>u.names[0]<f.names[0]?-1:u.names[0]>f.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let i=0;i<e.inputs.length;i++)for(let o=0;o<e.inputs[i].names.length;o++){const u=e.inputs[i].buffer.getArrayInformation()[o],f=Ot.getShaderTypeFromBufferFormat(u.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[i].names[o]} : ${f}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let i=0;for(let o=0;o<e.inputs.length;o++){const u=e.inputs[o].buffer,f={arrayStride:u.getStrideInBytes(),stepMode:e.inputs[o].stepMode,attributes:[]},l=u.getArrayInformation();for(let g=0;g<e.inputs[o].names.length;g++)f.attributes.push({shaderLocation:i,offset:l[g].offset,format:l[g].format}),i++;r.push(f)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const TU={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function gC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TU,n),mt(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],vt(t,e,["created","device","handle","indexBuffer"]),vU(t,e)}const SU=Xe(gC,"vtkWebGPUVertexInput");var xU={newInstance:SU,extend:gC};const CU=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,EU=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function wU(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,i)=>{const o=RT.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),u=RT.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),f=r.getShaderDescriptions();f.push(o),f.push(u);const l=e.vertexShaderTemplate+e.fragmentShaderTemplate,g=new RegExp("//VTK::[^:]*::","g"),p=l.match(g).filter((v,T,E)=>E.indexOf(v)===T).map(v=>`replaceShader${v.substring(7,v.length-2)}`);for(let v=0;v<p.length;v++){const T=p[v];T!=="replaceShaderIOStructs"&&e.shaderReplacements.has(T)&&e.shaderReplacements.get(T)(n,r,i)}t.replaceShaderIOStructs(n,r,i)},t.replaceShaderIOStructs=(n,r,i)=>{const o=r.getShaderDescription("vertex");o.replaceShaderCode(null,i),r.getShaderDescription("fragment").replaceShaderCode(o)},t.replaceShaderRenderEncoder=(n,r,i)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,i)=>{if(!e.WebGPURenderer)return;const o=e.WebGPURenderer.getBindGroup().getShaderCode(r),u=r.getShaderDescription("vertex");let f=u.getCode();f=ve.substitute(f,"//VTK::Renderer::Dec",[o]).result,u.setCode(f);const l=r.getShaderDescription("fragment");f=l.getCode(),f=ve.substitute(f,"//VTK::Renderer::Dec",[o]).result,l.setCode(f)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,i)=>{const o=e.bindGroup.getShaderCode(r),u=r.getShaderDescription("vertex");let f=u.getCode();f=ve.substitute(f,"//VTK::Mapper::Dec",[o]).result,u.setCode(f);const l=r.getShaderDescription("fragment");l.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),f=l.getCode(),f=ve.substitute(f,"//VTK::Mapper::Dec",[o]).result,l.setCode(f)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,i)=>{const o=r.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let u=o.getCode();u=ve.substitute(u,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,o.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,i)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const i=e.vertexInput.getIndexBuffer();i?n.drawIndexed(i.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const i=e.textureViews[r].getSampler();i&&n.push(i)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=iU.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const OU={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function hC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OU,n),at.extend(t,e,n),e.textureViews=[],e.vertexInput=xU.newInstance(),e.bindGroup=oC.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||EU,e.vertexShaderTemplate=e.vertexShaderTemplate||CU,e.shaderReplacements=new Map,L.get(t,e,["pipeline","vertexInput"]),L.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),wU(t,e)}const RU=L.newInstance(hC,"vtkWebGPUSimpleMapper");var Ah={newInstance:RU,extend:hC};function mU(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,i)=>{const o=r.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.addOutput("vec4<f32>","vertexVC");let u=o.getCode();u=ve.substitute(u,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,o.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const MU={};function pC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MU,n),Ah.extend(t,e,n),mU(t,e)}const DU=L.newInstance(pC,"vtkWebGPUFullScreenQuad");var Ji={newInstance:DU,extend:pC};const _U={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},LU={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var Uo={BufferUsage:_U,PrimitiveTypes:LU};const h0=["getMappedRange","mapAsync","unmap"];function VU(t,e,n,r){const i=r.byteLength,o=t.createBuffer({size:i,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),u=o.getMappedRange(0,i);new Uint8Array(u).set(new Uint8Array(r)),o.unmap();const f=t.createCommandEncoder();f.copyBufferToBuffer(o,0,e,n,i);const l=f.finish();t.queue.submit([l]),o.destroy()}function BU(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{VU(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{const i=Math.ceil(n.byteLength/4)*4;e.handle=e.device.getHandle().createBuffer({size:i,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=i,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<h0.length;n++)t[h0[n]]=function(){return e.handle[h0[n]](...arguments)}}const UU={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function dC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UU,n),L.obj(t,e),L.get(t,e,["handle","sizeInBytes","usage"]),L.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),BU(t,e)}const NU=L.newInstance(dC);var Pi={newInstance:NU,extend:dC,...Uo};const{Representation:MT}=ns,{PrimitiveTypes:ra}=Uo;class bU{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function GU(t){switch(t){case ra.Points:return"points";case ra.Lines:return"lines";case ra.Triangles:case ra.TriangleEdges:return"polys";case ra.TriangleStripEdges:case ra.TriangleStrips:return"strips";default:return""}}function gc(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function FU(t,e,n){const r=t.length;for(let u=0;u<r;u++){let f=t[u];if(n.cellProvokedMap.has(f)){n.ibo[n.iboId++]=n.cellProvokedMap.get(f);for(let l=u+1;l<u+r;l++){f=t[l%r];const g=gc(n,f,e);n.ibo[n.iboId++]=g}return}}for(let u=0;u<r;u++){let f=t[u];if(!n.provokedPointIds[f]){let l=gc(n,f,e);n.provokedPointIds[f]=1,n.cellProvokedMap.set(f,l),n.flatIdToCellId[l]=e,n.ibo[n.iboId++]=l;for(let g=u+1;g<u+r;g++)f=t[g%r],l=gc(n,f,e),n.ibo[n.iboId++]=l;return}}let i=t[0],o=n.flatId;n.cellProvokedMap.set(i,o),n.flatIdToPointId[n.flatId]=i,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=o;for(let u=1;u<r;u++)i=t[u],o=gc(n,i,e),n.ibo[n.iboId++]=o}function kU(t,e,n){const r=t.length;n.iboSize+=r;for(let i=0;i<r;i++){const o=t[i];if(n.cellProvokedMap.has(o))return}for(let i=0;i<r;i++){const o=t[i];if(!n.provokedPointIds[o]){n.provokedPointIds[o]=1,n.cellProvokedMap.set(o,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Tr;const DT=new Uint32Array(1),Sn=new Uint32Array(2),Jr=new Uint32Array(3),p0={anythingToPoints(t,e,n,r,i){for(let o=0;o<t;++o)DT[0]=e[n+o],Tr(DT,r,i)},linesToWireframe(t,e,n,r,i){for(let o=0;o<t-1;++o)Sn[0]=e[n+o],Sn[1]=e[n+o+1],Tr(Sn,r,i)},polysToWireframe(t,e,n,r,i){if(t>2)for(let o=0;o<t;++o)Sn[0]=e[n+o],Sn[1]=e[n+(o+1)%t],Tr(Sn,r,i)},stripsToWireframe(t,e,n,r,i){if(t>2){for(let o=0;o<t-1;++o)Sn[0]=e[n+o],Sn[1]=e[n+o+1],Tr(Sn,r,i);for(let o=0;o<t-2;o++)Sn[0]=e[n+o],Sn[1]=e[n+o+2],Tr(Sn,r,i)}},polysToSurface(t,e,n,r,i){for(let o=0;o<t-2;o++)Jr[0]=e[n],Jr[1]=e[n+o+1],Jr[2]=e[n+o+2],Tr(Jr,r,i)},stripsToSurface(t,e,n,r,i){for(let o=0;o<t-2;o++)Jr[0]=e[n+o],Jr[1]=e[n+o+1+o%2],Jr[2]=e[n+o+1+(o+1)%2],Tr(Jr,r,i)}};function zU(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,i=n.primitiveType,o=n.representation,u=n.cellOffset,f=r.getData(),l=f.length,g=GU(i),d=n.numberOfPoints,p={provokedPointIds:new Uint8Array(d),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new bU};let v=null;o===MT.POINTS||i===ra.Points?v=p0.anythingToPoints:o===MT.WIREFRAME||i===ra.Lines?v=p0[`${g}ToWireframe`]:v=p0[`${g}ToSurface`],Tr=kU;let T=u||0;for(let E=0;E<l;)p.cellProvokedMap.clear(),v(f[E],f,E+1,T,p),E+=f[E]+1,T++;d<=65535?p.flatIdToPointId=new Uint16Array(d+p.extraPoints):p.flatIdToPointId=new Uint32Array(d+p.extraPoints),d+p.extraPoints<36863?p.pointIdToFlatId=new Int16Array(d):p.pointIdToFlatId=new Int32Array(d),d+p.extraPoints<=65535?(p.ibo=new Uint16Array(p.iboSize),n.format="uint16"):(p.ibo=new Uint32Array(p.iboSize),n.format="uint32"),T<=65535?p.flatIdToCellId=new Uint16Array(d+p.extraPoints):p.flatIdToCellId=new Uint32Array(d+p.extraPoints),p.pointIdToFlatId.fill(-1),p.provokedPointIds.fill(0),Tr=FU,T=u||0;for(let E=0;E<l;)p.cellProvokedMap.clear(),v(f[E],f,E+1,T,p),E+=f[E]+1,T++;delete p.provokedPointIds,delete p.pointIdToFlatId,n.nativeArray=p.ibo,e.flatIdToPointId=p.flatIdToPointId,e.flatIdToCellId=p.flatIdToCellId,e.flatSize=p.flatId,e.indexCount=p.iboId}}const AU={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function yC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AU,n),Pi.extend(t,e,n),L.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),zU(t,e)}const HU=L.newInstance(yC);var $U={newInstance:HU,extend:yC,...Uo};const{BufferUsage:Pr}=Uo,{vtkErrorMacro:WU}=In,{VtkDataTypes:ba}=je,jU={};function KU(t){let e;switch(t.getDataType()){case ba.UNSIGNED_CHAR:e="uint8";break;case ba.FLOAT:e="float32";break;case ba.UNSIGNED_INT:e="uint32";break;case ba.INT:e="sint32";break;case ba.DOUBLE:e="float32";break;case ba.UNSIGNED_SHORT:e="uint16";break;case ba.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||WU(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function _T(t,e,n,r,i){const o={},u=t.getFlatSize();if(!u)return o;let f=[0,0,0,0];i.shift&&(i.shift.length?f=i.shift:f.fill(i.shift));let l=[1,1,1,1];i.scale&&(i.scale.length?l=i.scale:l.fill(i.scale));const g=Object.prototype.hasOwnProperty.call(i,"packExtra")?i.packExtra:!1;let d,p=0;const v=n+(g?1:0),T=es(r,u*v);let E=t.getFlatIdToPointId();i.cellData&&(E=t.getFlatIdToCellId()),n===1?d=function(C){T[p++]=l[0]*e[C]+f[0]}:n===2?d=function(C){T[p++]=l[0]*e[C]+f[0],T[p++]=l[1]*e[C+1]+f[1]}:n===3&&!g?d=function(C){T[p++]=l[0]*e[C]+f[0],T[p++]=l[1]*e[C+1]+f[1],T[p++]=l[2]*e[C+2]+f[2]}:n===3&&g?d=function(C){T[p++]=l[0]*e[C]+f[0],T[p++]=l[1]*e[C+1]+f[1],T[p++]=l[2]*e[C+2]+f[2],T[p++]=l[3]*1+f[3]}:n===4&&(d=function(C){T[p++]=l[0]*e[C]+f[0],T[p++]=l[1]*e[C+1]+f[1],T[p++]=l[2]*e[C+2]+f[2],T[p++]=l[3]*e[C+3]+f[3]});for(let S=0;S<u;S++){const C=n*E[S];d(C)}return o.nativeArray=T,o}function XU(t,e,n,r){const i=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],o=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],u=[];return Qi(i,o,u),Ya(u),u}function qU(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const i=new Int8Array(t.getNumberOfCells()*4),o=r.length;let u=0;for(let f=0;f<o;){const l=XU(n,r[f+1],r[f+2],r[f+3]);i[u++]=127*l[0],i[u++]=127*l[1],i[u++]=127*l[2],i[u++]=127,f+=r[f]+1}return i}function YU(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let i,o;if(r.usage===Pr.Index&&(i=$U.newInstance({label:r.label}),i.setDevice(e.device),o=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,i.buildIndexBuffer(r),i.createAndWrite(r.nativeArray,o),i.setArrayInformation([{format:r.format}])),i||(i=Pi.newInstance({label:r.label}),i.setDevice(e.device)),r.usage===Pr.UniformArray&&(o=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,o)),r.usage===Pr.Storage&&(o=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,o)),r.usage===Pr.Texture&&(o=GPUBufferUsage.COPY_SRC,i.createAndWrite(r.nativeArray,o)),r.usage===Pr.PointArray){o=GPUBufferUsage.VERTEX;const u=Ot.getNativeTypeFromBufferFormat(r.format),f=_T(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),u,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});i.createAndWrite(f.nativeArray,o),i.setStrideInBytes(Ot.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===Pr.NormalsFromPoints){o=GPUBufferUsage.VERTEX;const u=Ot.getNativeTypeFromBufferFormat(r.format),f=qU(r.cells,r.dataArray),l=_T(r.indexBuffer,f,4,u,{cellData:!0});i.createAndWrite(l.nativeArray,o),i.setStrideInBytes(Ot.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===Pr.RawVertex&&(o=GPUBufferUsage.VERTEX,i.createAndWrite(r.nativeArray,o),i.setStrideInBytes(Ot.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format}])),i.setSourceTime(r.time),i}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,i)=>{const o=KU(r),u={hash:`${r.getMTime()}I${i.getMTime()}${o}`,usage:Pr.PointArray,format:o,dataArray:r,indexBuffer:i};return t.getBuffer(u)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=Pi.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const QU={device:null,fullScreenQuadBuffer:null};function vC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QU,n),mt(t,e),vt(t,e,["device"]),YU(t,e)}const ZU=Xe(vC);var ei={newInstance:ZU,extend:vC,...jU,...Uo};const{BufferUsage:JU}=ei,{vtkErrorMacro:Hi}=L;function PU(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Hi(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const i=Ot.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:i,offset:e.sizeInBytes,nativeType:Ot.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=i},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:JU.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=L.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,i)=>{const o=e._bufferEntryNames.get(n);if(o===void 0){Hi(`entry named ${n} not found in UBO`);return}const u=e.bufferEntries[o];t.createView(u.nativeType);const f=e[u.nativeType];f[(u.offset+r*e.sizeInBytes)/f.BYTES_PER_ELEMENT]=i},t.setArray=(n,r,i)=>{const o=e._bufferEntryNames.get(n);if(o===void 0){Hi(`entry named ${n} not found in UBO`);return}const u=e.bufferEntries[o];t.createView(u.nativeType);const f=e[u.nativeType],l=(u.offset+r*e.sizeInBytes)/f.BYTES_PER_ELEMENT;for(let g=0;g<i.length;g++)f[l+g]=i[g]},t.setAllInstancesFromArray=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Hi(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const u=e[o.nativeType],f=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const g=(o.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let d=0;d<f;d++)u[g+d]=r[l*f+d]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Hi(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const u=e[o.nativeType],f=r.length/e.numberOfInstances;for(let l=0;l<e.numberOfInstances;l++){const g=(o.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let d=0;d<f;d++)u[g+d]=r[l*f+d]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){Hi(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const u=e[o.nativeType],f=9;for(let l=0;l<e.numberOfInstances;l++){const g=(o.offset+l*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let d=0;d<3;d++)for(let p=0;p<3;p++)u[g+d*4+p]=r[l*f+d*3+p]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const i=[`struct ${e.label}StructEntry
{`];for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];i.push(`  ${u.name}: ${u.type},`)}return i.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),i.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const IU={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function TC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IU,n),L.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},L.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},L.get(t,e,["bindGroupTime"]),L.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),PU(t,e)}const eN=L.newInstance(TC,"vtkWebGPUStorageBuffer");var Y0={newInstance:eN,extend:TC};const{BufferUsage:tN}=ei,{vtkErrorMacro:d0}=L;function nN(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){d0(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Ot.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Ot.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let i=4;for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];u.sizeInBytes%16===0&&(i=Math.max(16,i)),u.sizeInBytes%8===0&&(i=Math.max(8,i))}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];u.packed===!1&&u.sizeInBytes%16===0&&(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];if(u.packed===!1&&u.sizeInBytes===12)for(let f=0;f<e.bufferEntries.length;f++){const l=e.bufferEntries[f];if(l.packed===!1&&l.sizeInBytes===4){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];if(!u.packed&&u.sizeInBytes%8===0)for(let f=o+1;f<e.bufferEntries.length;f++){const l=e.bufferEntries[f];if(!l.packed&&l.sizeInBytes%8===0){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,l.packed=!0,l.offset=n,r.push(l),n+=l.sizeInBytes;break}}}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];if(!u.packed&&u.sizeInBytes%8===0){let f=!1;for(let l=0;!f&&l<e.bufferEntries.length;l++){const g=e.bufferEntries[l];if(!g.packed&&g.sizeInBytes===4)for(let d=l+1;d<e.bufferEntries.length;d++){const p=e.bufferEntries[d];if(!p.packed&&p.sizeInBytes===4){u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes,g.packed=!0,g.offset=n,r.push(g),n+=g.sizeInBytes,p.packed=!0,p.offset=n,r.push(p),n+=p.sizeInBytes,f=!0;break}}}}}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];!u.packed&&u.sizeInBytes>4&&(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];u.packed||(u.packed=!0,u.offset=n,r.push(u),n+=u.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let o=0;o<e.bufferEntries.length;o++)e._bufferEntryNames.set(e.bufferEntries[o].name,o);e.sizeInBytes=n,e.sizeInBytes=i*Math.ceil(e.sizeInBytes/i),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:tN.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=L.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){d0(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const u=e[o.nativeType];o.lastValue!==r&&(u[o.offset/u.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),o.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){d0(`entry named ${n} not found in UBO`);return}const o=e.bufferEntries[i];t.createView(o.nativeType);const u=e[o.nativeType];let f=!1;for(let l=0;l<r.length;l++)(!o.lastValue||o.lastValue[l]!==r[l])&&(u[o.offset/u.BYTES_PER_ELEMENT+l]=r[l],f=!0);f&&(e.sendDirty=!0,o.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const i=[`struct ${e.label}Struct
{`];for(let o=0;o<e.bufferEntries.length;o++){const u=e.bufferEntries[o];i.push(`  ${u.name}: ${u.type},`)}return i.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),i.join(`
`)}}const rN={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function SC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rN,n),L.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},L.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,L.get(t,e,["binding","bindGroupTime"]),L.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),nN(t,e)}const aN=L.newInstance(SC,"vtkWebGPUUniformBuffer");var ja={newInstance:aN,extend:SC};const{vtkDebugMacro:iN}=In,LT=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,sN=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,hc=new Float64Array(16),VT=new Float64Array(16);function oN(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function uN(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),i=e.camera.getDirectionOfProjectionByReference(),o=[],u=[];ea(u,i,.5*(n[0]+n[1])),ho(o,r,u),B0(u,o,e.stabilizedCenter),DS(u)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=o,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(iN("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const r=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",r.wcvc),e.UBO.setArray("SCPCMatrix",r.scpc),e.UBO.setArray("PCSCMatrix",r.pcsc),e.UBO.setArray("SCVCMatrix",r.scvc),e.UBO.setArray("VCPCMatrix",r.vcpc),e.UBO.setArray("WCVCNormals",r.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",e.renderable.getEnvironmentTexture()?.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const i=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[i.usize,i.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const o=e._parent.getDevice();e.UBO.sendIfNeeded(o)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let i=`${e.renderable.getMTime()}`;for(let o=0;o<n.length;o++)i+=n[o].getMTime();if(i!==e.lightTimeString){const o=new Float32Array(n.length*4),u=new Float32Array(n.length*4),f=new Float32Array(n.length*4),l=new Float32Array(n.length*4);for(let d=0;d<n.length;d++){const p=d*4,v=n[d].getPosition();Ge(v,v,r.wcvc),o[p]=v[0],o[p+1]=v[1],o[p+2]=v[2],o[p+3]=0,u[p]=-n[d].getDirection()[0],u[p+1]=-n[d].getDirection()[1],u[p+2]=-n[d].getDirection()[2],u[p+3]=0,f[p]=n[d].getColor()[0],f[p+1]=n[d].getColor()[1],f[p+2]=n[d].getColor()[2],f[p+3]=n[d].getIntensity()*5,l[p]=oN(n[d]),l[p+1]=Math.cos(ut(n[d].getConeAngle())),l[p+2]=Math.cos(ut(n[d].getConeAngle()+n[d].getConeFalloff())),l[p+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",o),e.SSBO.setAllInstancesFromArray("LightDir",u),e.SSBO.setAllInstancesFromArray("LightColor",f),e.SSBO.setAllInstancesFromArray("LightData",l);const g=e._parent.getDevice();e.SSBO.send(g)}e.lightTimeString=i},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=Ji.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(LT);const o=ja.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&e.backgroundTex?.getImageLoaded()){e.clearFSQ.setFragmentShaderTemplate(sN);const o=ja.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o);const u=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex,"EnvironmentTexture");if(u.getReady()){const f=u.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([f]),e.backgroundTexLoaded=!0;const l=e.backgroundTex.getInterpolate()?"linear":"nearest";f.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:l,magFilter:l,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=Ji.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(LT);const o=ja.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(o)}const r=e.webgpuCamera.getKeyMatrices(t),i=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",i),Qe(VT,r.normalMatrix),_0(hc,r.scvc,r.pcsc),_0(hc,VT,hc),e.clearFSQ.getUBO().setArray("FSQMatrix",hc),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],o=n[1]-r[1],u=e._parent.normalizedDisplayToDisplay(i,o),f=Math.round(u[0]),l=Math.round(u[1]),g=n[2]-r[0],d=n[3]-r[1],p=e._parent.normalizedDisplayToDisplay(g,d);let v=Math.round(p[0])-f,T=Math.round(p[1])-l;return v<0&&(v=0),T<0&&(T=0),{usize:v,vsize:T,lowerLeftU:f,lowerLeftV:l}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const cN={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function fN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cN,n),at.extend(t,e,n),e.UBO=ja.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=Y0.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=oC.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=Re(new Float64Array(16)),e.stabilizedTime={},mt(e.stabilizedTime,{mtime:0}),Wt(t,e,["bindGroup","stabilizedTime"]),ts(t,e,["stabilizedCenter"]),vt(t,e,["renderEncoder","selector","suppressClear","UBO"]),uN(t,e)}const lN=Xe(fN,"vtkWebGPURenderer");er("vtkRenderer",lN);const{CoordinateSystem:BT}=Bo;function gN(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const i=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===BT.WORLD&&(e.bufferShift[0]-=i[0],e.bufferShift[1]-=i[1],e.bufferShift[2]-=i[2]),Qe(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?Re(e.keyMatrices.normalMatrix):(Lt(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,$t(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Qe(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),ct(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===BT.WORLD?ct(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]):Lt(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const hN={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function pN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hN,n),at.extend(t,e,n),e.keyMatricesTime={},L.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},L.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],gN(t,e)}const dN=L.newInstance(pN);er("vtkActor",dN);const{CoordinateSystem:UT}=Bo;function yN(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===UT.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),Re(e.keyMatrices.bcwc),Re(e.keyMatrices.normalMatrix),ct(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===UT.WORLD?ct(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):Lt(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const vN={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function TN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vN,n),at.extend(t,e,n),e.keyMatricesTime={},L.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},L.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],yN(t,e)}const SN=L.newInstance(TN);er("vtkActor2D",SN);function xN(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([o.usize,o.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const CN={};function EN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CN,n),at.extend(t,e,n),e.CubeAxesActorHelper=k2.newCubeAxesActorHelper(),xN(t,e)}const wN=Xe(EN,"vtkWebGPUCubeAxesActor");er("vtkCubeAxesActor",wN);const{DisplayLocation:Q0}=I2;function ON(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(Q0.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(Q0.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(En.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(En.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(En.POINTS),t.getRepresentationAsString=()=>L.enumToString(En,e.representation)}const RN={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:En.SURFACE,displayLocation:Q0.FOREGROUND};function mN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RN,n),L.obj(t,e),L.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),L.setGetArray(t,e,["color"],3),ON(t,e)}L.newInstance(mN,"vtkProperty2D");var MN={...I2};const{BufferUsage:Et,PrimitiveTypes:kt}=ei,{Representation:pc}=ns,{ScalarMode:dc}=Za,{CoordinateSystem:DN}=Bo,{DisplayLocation:NT}=MN,_N=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,LN=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

struct Material {
  ior: f32,
  roughness: f32,
  metallic: f32,
  base: vec3<f32>,
};

struct DirectionalLight {
  direction: vec3<f32>,
  color: vec3<f32>,
};

struct PointLight {
  position: vec3<f32>,
  color: vec3<f32>,
};

struct SpotLight {
  position: vec3<f32>,
  direction: vec3<f32>,
  cones: vec2<f32>,
  color: vec3<f32>,
};

const pi: f32 = 3.14159265359;

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;

  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {
  var L: vec3<f32> = normalize(light.direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = light.color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf * incoming * angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V);
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);

  var theta: f32 = mdot(normalize(light.direction), L);
  var epsilon: f32 = light.cones.x - light.cones.y;
  var intensity: f32 = (theta - light.cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist * dist;

  var incoming: vec3<f32> = light.color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;
  var ior: f32 = mapperUBO.BaseIOR;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  // Use texture alpha for transparency
  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;
  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function bT(t){return t.indexOf("edge")>=0}function VN(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==DN.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{const r=e.WebGPUActor.getRenderable().getProperty(),i=e.UBO.getSendTime();if(t.getMTime()<=i&&r.getMTime()<=i&&e.renderable.getMTime()<=i)return;const o=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",o.bcwc),e.UBO.setArray("BCSCMatrix",o.bcsc),e.UBO.setArray("MCWCNormals",o.normalMatrix),e.is2D){const f=r.getDisplayLocation?.()??NT.BACKGROUND;e.UBO.setValue("ZValue",f===NT.FOREGROUND?1:0);const l=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[...l,1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[...r.getAmbientColorByReference(),1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),e.UBO.setArray("DiffuseColor",[...r.getDiffuseColorByReference(),1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),r.getSpecularColorByReference()&&e.UBO.setArray("SpecularColor",[...r.getSpecularColorByReference(),1]);const u=r.getEdgeColorByReference?.();u&&e.UBO.setArray("EdgeColor",[...u,1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID()),e.UBO.sendIfNeeded(e.WebGPURenderWindow.getDevice())},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===kt.Verts?!1:e.primitiveType===kt.Triangles||e.primitiveType===kt.TriangleStrips?r===pc.WIREFRAME:!0},t.replaceShaderPosition=(n,r,i)=>{const o=r.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");let u=o.getCode();e.useRendererMatrix?(u=ve.substitute(u,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(u=ve.substitute(u,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(u=ve.substitute(u,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(u=ve.substitute(u,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(o.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),u=ve.substitute(u,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),u=ve.substitute(u,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,o.setCode(u)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,i)=>{const o=i.getBuffer("normalMC"),u=e.WebGPUActor.getRenderable();if(o){const f=r.getShaderDescription("vertex");f.hasOutput("normalVC")||f.addOutput("vec3<f32>","normalVC",o.getArrayInformation()[0].interpolation),f.hasOutput("tangentVC")||f.addOutput("vec3<f32>","tangentVC",o.getArrayInformation()[0].interpolation),f.hasOutput("bitangentVC")||f.addOutput("vec3<f32>","bitangentVC",o.getArrayInformation()[0].interpolation);let l=f.getCode();l=ve.substitute(l,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,f.setCode(l);const g=r.getShaderDescription("fragment");l=g.getCode(),u.getProperty().getNormalTexture()?l=ve.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:l=ve.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,g.setCode(l)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,i)=>{if(n.includes("sel"))return;const o=r.getShaderDescription("vertex");o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");const u=e.WebGPURenderer.getRenderable(),f=r.getShaderDescription("fragment");let l=f.getCode();if(l.includes("var normal:")&&e.useRendererMatrix&&!bT(n)&&!e.is2D&&!n.includes("sel")){const g=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];u.getEnvironmentTexture()?.getImageLoaded()&&g.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),l=ve.substitute(l,"//VTK::Light::Impl",g).result,f.setCode(l)}else l=ve.substitute(l,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,f.setCode(l)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,i)=>{if(bT(n)){const g=r.getShaderDescription("fragment");let d=g.getCode();d=ve.substitute(d,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,g.setCode(d);return}const o=i.getBuffer("colorVI");if(!o)return;const u=r.getShaderDescription("vertex");u.addOutput("vec4<f32>","color",o.getArrayInformation()[0].interpolation);let f=u.getCode();f=ve.substitute(f,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,u.setCode(f);const l=r.getShaderDescription("fragment");f=l.getCode(),f=ve.substitute(f,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(f)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,i)=>{if(!i.hasAttribute("tcoord"))return;const o=r.getShaderDescription("vertex"),u=i.getBuffer("tcoord"),f=Ot.getNumberOfComponentsFromBufferFormat(u.getArrayInformation()[0].format);let l=o.getCode();o.addOutput(`vec${f}<f32>`,"tcoordVS"),l=ve.substitute(l,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,o.setCode(l);const g=r.getShaderDescription("fragment");l=g.getCode();const d=e.WebGPUActor.getRenderable(),p=d.getProperty(),v=M=>M?M.getDimensionality()===f:!1,T=[],E=p.getDiffuseTexture?.();(E?.getImageLoaded()||d.getTextures()[0]||e.colorTexture)&&(v(E)||v(d.getTextures()[0])||v(e.colorTexture))&&T.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");const S=p.getORMTexture?.(),C=p.getRMTexture?.(),R=p.getRoughnessTexture?.(),D=p.getMetallicTexture?.(),w=p.getAmbientOcclusionTexture?.(),O=p.getEmissionTexture?.(),m=p.getNormalTexture?.();S?.getImageLoaded()?v(S)&&T.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):C?.getImageLoaded()?v(C)&&T.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(R?.getImageLoaded()&&v(R)&&T.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),D?.getImageLoaded()&&v(D)&&T.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),w?.getImageLoaded()&&v(w)&&T.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),O?.getImageLoaded()&&v(O)&&T.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),m?.getImageLoaded()&&v(m)&&T.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),l=ve.substitute(l,"//VTK::TCoord::Impl",T).result,g.setCode(l)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,i)=>{if(n.includes("sel")){const o=r.getShaderDescription("fragment");let u=o.getCode();u=ve.substitute(u,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,o.setCode(u)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===pc.POINTS||r===kt.Points?Et.Verts:r===kt.Lines?Et.Lines:n===pc.WIREFRAME?r===kt.Triangles?Et.LinesFromTriangles:Et.LinesFromStrips:r===kt.Triangles?Et.Triangles:r===kt.TriangleStrips?Et.Strips:r===kt.TriangleEdges?Et.LinesFromTriangles:Et.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case Et.Triangles:return"triangle-list";case Et.Verts:return"point-list";case Et.Lines:default:return"line-list"}},t.buildVertexInput=()=>{const n=e.currentInput,r=e.cellArray,i=e.primitiveType;let u=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const f=e.WebGPURenderWindow.getDevice();let l=!1;i===kt.TriangleEdges&&(l=!0,u=pc.WIREFRAME);const g=e.vertexInput,d=n.getPoints();let p=null;if(r?(p=f.getBufferManager().getBuffer({hash:`R${u}P${i}${r.getMTime()}`,usage:Et.Index,cells:r,numberOfPoints:d.getNumberOfPoints(),primitiveType:i,representation:u}),g.setIndexBuffer(p)):g.setIndexBuffer(null),d){const S=e.WebGPUActor.getBufferShift(e.WebGPURenderer);g.addBuffer(f.getBufferManager().getBuffer({hash:`${d.getMTime()}I${p?.getMTime?.()??0}${S.join()}float32x4`,usage:Et.PointArray,format:"float32x4",dataArray:d,indexBuffer:p,shift:S,packExtra:!0}),["vertexBC"])}else g.removeBufferIfPresent("vertexBC");const v=t.getUsage(u,i);if(e._usesCellNormals=!1,!e.is2D&&(v===Et.Triangles||v===Et.Strips)){const S=n.getPointData().getNormals(),C={format:"snorm8x4",indexBuffer:p,packExtra:!0,shift:0,scale:127};S?(C.hash=`${S.getMTime()}I${p.getMTime()}snorm8x4`,C.dataArray=S,C.usage=Et.PointArray,g.addBuffer(f.getBufferManager().getBuffer(C),["normalMC"])):i===kt.Triangles?(e._usesCellNormals=!0,C.hash=`PFN${d.getMTime()}I${p.getMTime()}snorm8x4`,C.dataArray=d,C.cells=r,C.usage=Et.NormalsFromPoints,g.addBuffer(f.getBufferManager().getBuffer(C),["normalMC"])):g.removeBufferIfPresent("normalMC")}else g.removeBufferIfPresent("normalMC");let T=!1;if(e.renderable.getScalarVisibility()){const S=e.renderable.getColorMapColors();if(S&&!l){const C=e.renderable.getScalarMode(),R=(C===dc.USE_CELL_DATA||C===dc.USE_CELL_FIELD_DATA||C===dc.USE_FIELD_DATA||!n.getPointData().getScalars())&&C!==dc.USE_POINT_FIELD_DATA&&S;g.addBuffer(f.getBufferManager().getBuffer({usage:Et.PointArray,format:"unorm8x4",hash:`${R}${S.getMTime()}I${p.getMTime()}unorm8x4`,dataArray:S,indexBuffer:p,cellData:R,cellOffset:0}),["colorVI"]),T=!0}}T||g.removeBufferIfPresent("colorVI");let E=null;e.renderable.getInterpolateScalarsBeforeMapping?.()&&e.renderable.getColorCoordinates()?E=e.renderable.getColorCoordinates():E=n.getPointData().getTCoords(),E&&!l?g.addBuffer(f.getBufferManager().getBufferForPointArray(E,g.getIndexBuffer()),["tcoord"]):g.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{const n=[],r=[],i=e.renderable.getColorTextureMap?.();i&&!e.colorTexture&&(e.colorTexture=Mo.newInstance({label:"polyDataColor"})),i&&(e.colorTexture.setInputData(i),r.push(["DiffuseTexture",e.colorTexture]));const o=e.WebGPUActor.getRenderable(),u=e.WebGPURenderer.getRenderable();[["DiffuseTexture",o.getProperty().getDiffuseTexture?.()],["DiffuseTexture",o.getTextures()[0]],["DiffuseTexture",e.colorTexture],["ORMTexture",o.getProperty().getORMTexture?.()],["RMTexture",o.getProperty().getRMTexture?.()],["RoughnessTexture",o.getProperty().getRoughnessTexture?.()],["MetallicTexture",o.getProperty().getMetallicTexture?.()],["NormalTexture",o.getProperty().getNormalTexture?.()],["AmbientOcclusionTexture",o.getProperty().getAmbientOcclusionTexture?.()],["EmissionTexture",o.getProperty().getEmissionTexture?.()],["EnvironmentTexture",u.getEnvironmentTexture?.()]].forEach(l=>{let[g,d]=l;d&&((d.getInputData()||d.getJsImageData()||d.getCanvas()||d.getImageBitmap())&&r.push([g,d]),d.getImage()&&d.getImageLoaded()&&r.push([g,d]))}),r.forEach(l=>{let[g,d]=l;const p=e.device.getTextureManager().getTextureForVTKTexture(d,g);if(!p.getReady())return;let v=!1;for(let T=0;T<e.textures.length;++T)if(e.textures[T]===p){v=!0,n[T]=!0;break}if(!v){n[e.textures.length]=!0;const T=p.createView(g);e.textures.push(p),e.textureViews.push(T);const E=d.getInterpolate()?"linear":"nearest";let S=null;d.getEdgeClamp()&&d.getRepeat()?S="mirror-repeat":d.getEdgeClamp()?S="clamp-to-edge":d.getRepeat()&&(S="repeat");let C={addressModeU:S,addressModeV:S,addressModeW:S,minFilter:E,magFilter:E};g==="EnvironmentTexture"&&(C={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:E,magFilter:E,mipmapFilter:"linear"}),T.addSampler(e.device,C)}});for(let l=e.textures.length-1;l>=0;l--)n[l]||(e.textures.splice(l,1),e.textureViews.splice(l,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===kt.TriangleEdges||e.primitiveType===kt.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const i=e.vertexInput.getBuffer("tcoord"),o=Ot.getNumberOfComponentsFromBufferFormat(i.getArrayInformation()[0].format);n+=`t${o}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==kt.TriangleEdges&&e.primitiveType!==kt.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const i=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(i.getSizeInBytes()/i.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const o=n.getProperty();t.setNumberOfInstances(Math.ceil(o.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const BN={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function xC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BN,n),Ah.extend(t,e,n),e.fragmentShaderTemplate=LN,e.vertexShaderTemplate=_N,e._tmpMat3=Pa(new Float64Array(9)),e._tmpMat4=Re(new Float64Array(16)),e.UBO=ja.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),vt(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],VN(t,e)}const UN=Xe(xC,"vtkWebGPUCellArrayMapper");var CC={newInstance:UN,extend:xC};const{PrimitiveTypes:xn}=ei;function NN(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>CC.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{if(!n){Ee("No input!");return}const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let o=0;for(let u=xn.Points;u<=xn.TriangleStrips;u++)if(r[u].getNumberOfValues()>0){e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const f=e.primitives[u];f.setCellArray(r[u]),f.setCurrentInput(n),f.setCellOffset(o),f.setPrimitiveType(u),f.setRenderable(e.renderable),o+=r[u].getNumberOfCells(),i.push(f)}else e.primitives[u]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(r[xn.Triangles].getNumberOfValues()>0){const u=xn.TriangleEdges;e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const f=e.primitives[u];f.setCellArray(r[xn.Triangles]),f.setCurrentInput(n),f.setCellOffset(e.primitives[xn.Triangles].getCellOffset()),f.setPrimitiveType(u),f.setRenderable(e.renderable),i.push(f)}else e.primitives[xn.TriangleEdges]=null;if(r[xn.TriangleStrips].getNumberOfValues()>0){const u=xn.TriangleStripEdges;e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const f=e.primitives[u];f.setCellArray(r[xn.TriangleStrips]),f.setCurrentInput(n),f.setCellOffset(e.primitives[xn.TriangleStrips].getCellOffset()),f.setPrimitiveType(u),f.setRenderable(e.renderable),i.push(f)}else e.primitives[xn.TriangleStripEdges]=null}t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}const bN={primitives:null};function GN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bN,n),at.extend(t,e,n),e.primitives=[],NN(t,e)}const FN=Xe(GN,"vtkWebGPUPolyDataMapper");er("vtkMapper",FN);const{PrimitiveTypes:GT}=ei;function kN(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>CC.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let o=0;for(let u=GT.Points;u<=GT.Triangles;u++)if(r[u].getNumberOfValues()>0){e.primitives[u]||(e.primitives[u]=t.createCellArrayMapper());const f=e.primitives[u];f.setCellArray(r[u]),f.setCurrentInput(n),f.setCellOffset(o),f.setPrimitiveType(u),f.setRenderable(e.renderable),f.setIs2D(!0),o+=r[u].getNumberOfCells(),i.push(f)}else e.primitives[u]=null;t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}function zN(t){return{primitives:[],...t}}function AN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zN(n)),at.extend(t,e,n),e.primitives=[],kN(t,e)}const HN=Xe(AN,"vtkWebGPUPolyDataMapper2D");er("vtkMapper2D",HN);function $N(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,o=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([o.usize,o.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const WN={};function jN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WN,n),at.extend(t,e,n),e.scalarBarActorHelper=rC.newScalarBarActorHelper(),$N(t,e)}const KN=Xe(jN,"vtkWebGPUScalarBarActor");er("vtkScalarBarActor",KN);function XN(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const qN={device:null,handle:null,label:null,options:null};function EC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qN,n),L.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","handle","options"]),L.setGet(t,e,["bindGroupLayoutEntry","device","label"]),XN(t,e)}const YN=L.newInstance(EC);var Hh={newInstance:YN,extend:EC};function QN(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Ot.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=i.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Ot.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=i.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let i="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?i="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(i="u32");let o=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${i}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(o=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),o},t.addSampler=(n,r)=>{const i=Hh.newInstance({label:`${e.label}Sampler`});i.create(n,r),t.setSampler(i)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const ZN={texture:null,handle:null,sampler:null,label:null};function wC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZN,n),L.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},L.obj(e.bindGroupTime,{mtime:0}),L.get(t,e,["bindGroupTime","texture"]),L.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),QN(t,e)}const JN=L.newInstance(wC);var OC={newInstance:JN,extend:wC};function PN(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const i=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:i,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,i)=>{e.device=n,e.handle=r,e.width=i.width,e.height=i.height,e.depth=i.depth?i.depth:1,e.format=i.format?i.format:"rgba8unorm",e.usage=i.usage?i.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];const i=p=>{e.device.getHandle().queue.copyExternalImageToTexture({source:p,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[p.width,p.height,e.depth]),t.getDimensionality()!==3&&e.mipLevel>0&&Mo.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0};if(n.canvas){i(n.canvas);return}if(n.imageBitmap){n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.imageBitmap);return}if(n.jsImageData){n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.jsImageData);return}if(n.image){n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.image);return}const o=Ot.getDetailsFromTextureFormat(e.format);let u=e.width*o.stride;const f=(p,v,T)=>{const E=o.elementSize===2&&o.sampleType==="float",S=p.BYTES_PER_ELEMENT,C=p.length/(v*T)*S;if(!E&&C%256===0)return[p,C];const R=C/S,D=o.elementSize,w=256*Math.floor((R*D+255)/256),O=w/D,m=L.newTypedArray(E?"Uint16Array":p.constructor.name,O*v*T),M=v*T;if(E)for(let U=0;U<M;U++){const b=U*R,j=U*O;for(let z=0;z<R;z++)m[j+z]=Nn.toHalf(p[b+z])}else if(O===R)m.set(p);else for(let U=0;U<M;U++)m.set(p.subarray(U*R,(U+1)*R),U*O);return[m,w]};n.nativeArray&&(r=n.nativeArray);const l=t.getDimensionality()===3,g=f(r,e.height,l?e.depth:1);u=g[1];const d=g[0];e.device.getHandle().queue.writeTexture({texture:e.handle,mipLevel:0,origin:{x:0,y:0,z:0}},d,{offset:0,bytesPerRow:u,rowsPerImage:e.height},{width:e.width,height:e.height,depthOrArrayLayers:l?e.depth:1}),!l&&e.mipLevel>0&&Mo.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0},t.getScale=()=>{const n=Ot.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Ot.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||i!==e.depth)&&(e.width=n,e.height=r,e.depth=i,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const i=OC.newInstance({label:n});return i.create(t,r),i}}const IN={device:null,handle:null,buffer:null,ready:!1,label:null};function RC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IN,n),L.obj(t,e),L.get(t,e,["handle","ready","width","height","depth","format","usage"]),L.setGet(t,e,["device","label"]),PN(t,e)}const eb=L.newInstance(RC);var Pn={newInstance:eb,extend:RC};function tb(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const i=e.WebGPURenderer.getAspectRatio(),o=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,u=e.WebGPURenderer.getTiledSizeAndOrigin(),f=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),o,i,u,f)}}const nb={};function rb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nb,n),at.extend(t,e,n),tb(t,e)}const ab=L.newInstance(rb,"vtkWebGPUPixelSpaceCallbackMapper");er("vtkPixelSpaceCallbackMapper",ab);const ib="_container_12o4d_1",sb="_viewer_12o4d_9",ob="_placeholder_12o4d_16",ub="_placeholderIcon_12o4d_28",cb="_loading_12o4d_33",fb="_spinner_12o4d_46",lb="_error_12o4d_62",gb="_errorIcon_12o4d_75",hb="_controls_12o4d_79",pb="_controlButton_12o4d_88",db="_modelInfo_12o4d_103",Mn={container:ib,viewer:sb,placeholder:ob,placeholderIcon:ub,loading:cb,spinner:fb,error:lb,errorIcon:gb,controls:hb,controlButton:pb,modelInfo:db},{vtkDebugMacro:yc}=L;function yb(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),i=new Float64Array([0,1,0]),o=Re(new Float64Array(16)),u=Re(new Float64Array(16)),f=new Float64Array(3),l=new Float64Array(3),g=new Float64Array(3),d=Re(new Float64Array(16)),p=Re(new Float64Array(16)),v=new Float64Array(3),T=new Float64Array(3);function E(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const S=t.getViewMatrix();e.viewUp[0]=S[4],e.viewUp[1]=S[5],e.viewUp[2]=S[6],t.modified()},t.setPosition=(S,C,R)=>{S===e.position[0]&&C===e.position[1]&&R===e.position[2]||(e.position[0]=S,e.position[1]=C,e.position[2]=R,t.computeDistance(),t.modified())},t.setFocalPoint=(S,C,R)=>{S===e.focalPoint[0]&&C===e.focalPoint[1]&&R===e.focalPoint[2]||(e.focalPoint[0]=S,e.focalPoint[1]=C,e.focalPoint[2]=R,t.computeDistance(),t.modified())},t.setDistance=S=>{if(e.distance===S)return;e.distance=S,e.distance<1e-20&&(e.distance=1e-20,yc("Distance is set to minimum."));const C=e.directionOfProjection;e.focalPoint[0]=e.position[0]+C[0]*e.distance,e.focalPoint[1]=e.position[1]+C[1]*e.distance,e.focalPoint[2]=e.position[2]+C[2]*e.distance,t.modified()},t.computeDistance=()=>{const S=e.focalPoint[0]-e.position[0],C=e.focalPoint[1]-e.position[1],R=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(S*S+C*C+R*R),e.distance<1e-20){e.distance=1e-20,yc("Distance is set to minimum.");const D=e.directionOfProjection;e.focalPoint[0]=e.position[0]+D[0]*e.distance,e.focalPoint[1]=e.position[1]+D[1]*e.distance,e.focalPoint[2]=e.position[2]+D[2]*e.distance}e.directionOfProjection[0]=S/e.distance,e.directionOfProjection[1]=C/e.distance,e.directionOfProjection[2]=R/e.distance,E()},t.dolly=S=>{if(S<=0)return;const C=e.distance/S;t.setPosition(e.focalPoint[0]-C*e.directionOfProjection[0],e.focalPoint[1]-C*e.directionOfProjection[1],e.focalPoint[2]-C*e.directionOfProjection[2])},t.roll=S=>{const C=e.position,R=e.focalPoint,D=e.viewUp,w=new Float64Array([D[0],D[1],D[2],0]);Re(d);const O=new Float64Array([R[0]-C[0],R[1]-C[1],R[2]-C[2]]);Dn(d,d,ut(S),O),so(w,w,d),e.viewUp[0]=w[0],e.viewUp[1]=w[1],e.viewUp[2]=w[2],t.modified()},t.azimuth=S=>{const C=e.focalPoint;Re(p),ct(p,p,C),Dn(p,p,ut(S),e.viewUp),ct(p,p,[-C[0],-C[1],-C[2]]),Ge(v,e.position,p),t.setPosition(v[0],v[1],v[2])},t.yaw=S=>{const C=e.position;Re(p),ct(p,p,C),Dn(p,p,ut(S),e.viewUp),ct(p,p,[-C[0],-C[1],-C[2]]),Ge(T,e.focalPoint,p),t.setFocalPoint(T[0],T[1],T[2])},t.elevation=S=>{const C=e.focalPoint,R=t.getViewMatrix(),D=[-R[0],-R[1],-R[2]];Re(p),ct(p,p,C),Dn(p,p,ut(S),D),ct(p,p,[-C[0],-C[1],-C[2]]),Ge(v,e.position,p),t.setPosition(v[0],v[1],v[2])},t.pitch=S=>{const C=e.position,R=t.getViewMatrix(),D=[R[0],R[1],R[2]];Re(p),ct(p,p,C),Dn(p,p,ut(S),D),ct(p,p,[-C[0],-C[1],-C[2]]),Ge(T,e.focalPoint,p),t.setFocalPoint(...T)},t.zoom=S=>{S<=0||(e.parallelProjection?e.parallelScale/=S:e.viewAngle/=S,t.modified())},t.translate=(S,C,R)=>{const D=[S,C,R];k0(e.position,D,e.position),k0(e.focalPoint,D,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=S=>{const C=[...e.viewUp,1],R=[],D=[],w=[];C[0]+=e.position[0],C[1]+=e.position[1],C[2]+=e.position[2],so(R,[...e.position,1],S),so(D,[...e.focalPoint,1],S),so(w,C,S),w[0]-=R[0],w[1]-=R[1],w[2]-=R[2],t.setPosition(...R.slice(0,3)),t.setFocalPoint(...D.slice(0,3)),t.setViewUp(...w.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=S=>{let C=S;C<1e-20&&(C=1e-20,yc("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+C)},t.setThicknessFromFocalPoint=S=>{let C=S;C<1e-20&&(C=1e-20,yc("Thickness is set to minimum.")),t.setClippingRange(e.distance-C/2,e.distance+C/2)},t.setRoll=S=>{},t.getRoll=()=>{},t.setObliqueAngles=(S,C)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Float64Array(24);const R=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],D=t.getCompositeProjectionMatrix(S,-1,1);for(let w=0;w<6;w++)so(R[w],R[w],D),t3(R[w]),C[4*w+0]=R[w][0],C[4*w+1]=R[w][1],C[4*w+2]=R[w][2],C[4*w+3]=R[w][3];return C},t.getCameraLightTransformMatrix=S=>(Lt(S,e.cameraLightTransform),S),t.computeCameraLightTransform=()=>{Lt(o,t.getViewMatrix()),$t(o,o),vS(u,[e.distance,e.distance,e.distance]),yt(o,o,u),Re(e.cameraLightTransform),ct(e.cameraLightTransform,o,[0,0,-1])},t.deepCopy=S=>{},t.physicalOrientationToWorldDirection=S=>{const C=av(S[0],S[1],S[2],S[3]),R=qa(),D=av(0,0,1,0);return Um(R,C),rv(D,C,D),rv(D,D,R),[D[0],D[1],D[2]]},t.getPhysicalToWorldMatrix=S=>{t.getWorldToPhysicalMatrix(S),$t(S,S)},t.getWorldToPhysicalMatrix=S=>{Re(S);const C=[3];Qi(e.physicalViewNorth,e.physicalViewUp,C),S[0]=C[0],S[1]=C[1],S[2]=C[2],S[4]=e.physicalViewUp[0],S[5]=e.physicalViewUp[1],S[6]=e.physicalViewUp[2],S[8]=-e.physicalViewNorth[0],S[9]=-e.physicalViewNorth[1],S[10]=-e.physicalViewNorth[2],Qe(S,S),Qn(f,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),Xa(S,S,f),ct(S,S,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=S=>{$t(o,S),Ge(f,n,o),t.computeDistance();const C=e.distance;t.setPosition(f[0],f[1],f[2]),Ge(l,r,o),ia(l,l,f),sa(l,l),t.setDirectionOfProjection(l[0],l[1],l[2]),Ge(g,i,o),ia(g,g,f),sa(g,g),t.setViewUp(g[0],g[1],g[2]),t.setDistance(C)},t.computeViewParametersFromPhysicalMatrix=S=>{t.getWorldToPhysicalMatrix(o),yt(o,S,o),t.computeViewParametersFromViewMatrix(o)},t.setViewMatrix=S=>{e.viewMatrix=S,e.viewMatrix&&(Lt(o,e.viewMatrix),t.computeViewParametersFromViewMatrix(o),Qe(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;RS(o,e.position,e.focalPoint,e.viewUp),Qe(o,o);const S=new Float64Array(16);return Lt(S,o),S},t.setProjectionMatrix=S=>{e.projectionMatrix=S},t.getProjectionMatrix=(S,C,R)=>{const D=new Float64Array(16);if(Re(D),e.projectionMatrix){const m=1/e.physicalScale;return Qn(f,m,m,m),Lt(D,e.projectionMatrix),Xa(D,D,f),Qe(D,D),D}Re(o);const w=e.clippingRange[1]-e.clippingRange[0],O=[e.clippingRange[0]+(C+1)*w/2,e.clippingRange[0]+(R+1)*w/2];if(e.parallelProjection){const m=e.parallelScale*S,M=e.parallelScale,U=(e.windowCenter[0]-1)*m,b=(e.windowCenter[0]+1)*m,j=(e.windowCenter[1]-1)*M,z=(e.windowCenter[1]+1)*M;OS(o,U,b,j,z,O[0],O[1]),Qe(o,o)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const m=Math.tan(ut(e.viewAngle)/2);let M,U;e.useHorizontalViewAngle===!0?(M=e.clippingRange[0]*m,U=e.clippingRange[0]*m/S):(M=e.clippingRange[0]*m*S,U=e.clippingRange[0]*m);const b=(e.windowCenter[0]-1)*M,j=(e.windowCenter[0]+1)*M,z=(e.windowCenter[1]-1)*U,A=(e.windowCenter[1]+1)*U,K=O[0],Y=O[1];o[0]=2*K/(j-b),o[5]=2*K/(A-z),o[2]=(b+j)/(j-b),o[6]=(z+A)/(A-z),o[10]=-(K+Y)/(Y-K),o[14]=-1,o[11]=-2*K*Y/(Y-K),o[15]=0}}return Lt(D,o),D},t.getCompositeProjectionMatrix=(S,C,R)=>{const D=t.getViewMatrix(),w=t.getProjectionMatrix(S,C,R);return yt(w,D,w),w},t.setDirectionOfProjection=(S,C,R)=>{if(e.directionOfProjection[0]===S&&e.directionOfProjection[1]===C&&e.directionOfProjection[2]===R)return;e.directionOfProjection[0]=S,e.directionOfProjection[1]=C,e.directionOfProjection[2]=R;const D=e.directionOfProjection;e.focalPoint[0]=e.position[0]+D[0]*e.distance,e.focalPoint[1]=e.position[1]+D[1]*e.distance,e.focalPoint[2]=e.position[2]+D[2]*e.distance,E()},t.setDeviceAngles=(S,C,R,D)=>{const w=[3];Qi(e.physicalViewNorth,e.physicalViewUp,w);const O=Re(new Float64Array(16));Dn(O,O,ut(S),e.physicalViewUp),Dn(O,O,ut(C),w),Dn(O,O,ut(R),e.physicalViewNorth),Dn(O,O,ut(-D),e.physicalViewUp);const m=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),M=new Float64Array(e.physicalViewNorth);Ge(m,m,O),Ge(M,M,O),t.setDirectionOfProjection(m[0],m[1],m[2]),t.setViewUp(M[0],M[1],M[2]),t.modified()},t.setOrientationWXYZ=(S,C,R,D)=>{const w=Re(new Float64Array(16));if(S!==0&&(C!==0||R!==0||D!==0)){const M=ut(S),U=qa();gh(U,[C,R,D],M),Fc(w,U)}const O=new Float64Array(3);Ge(O,[0,0,-1],w);const m=new Float64Array(3);Ge(m,[0,1,0],w),t.setDirectionOfProjection(...O),t.setViewUp(...m),t.modified()},t.computeClippingRange=S=>{let C=null,R=null;C=e.viewPlaneNormal,R=e.position;const D=-C[0],w=-C[1],O=-C[2],m=-(D*R[0]+w*R[1]+O*R[2]),M=[D*S[0]+w*S[2]+O*S[4]+m,1e-18];for(let U=0;U<2;U++)for(let b=0;b<2;b++)for(let j=0;j<2;j++){const z=D*S[j]+w*S[2+b]+O*S[4+U]+m;M[0]=z<M[0]?z:M[0],M[1]=z>M[1]?z:M[1]}return M}}const vb={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:oh(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function mC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vb,n),L.obj(t,e),L.get(t,e,["distance"]),L.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),L.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),L.setGetArray(t,e,["clippingRange","windowCenter"],2),L.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),yb(t,e)}const Tb=L.newInstance(mC,"vtkCamera");var Sb={newInstance:Tb,extend:mC};function xb(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?Ge(n,e.position,e.transformMatrix):Qn(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?Ge(n,e.focalPoint,e.transformMatrix):Qn(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(B0(e.direction,e.focalPoint,e.position),Ya(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const i=new Float64Array(3);B0(i,e.position,r),e.focalPoint=i},t.setDirectionAngle=(r,i)=>{const o=ut(r),u=ut(i);t.setPosition(Math.cos(o)*Math.sin(u),Math.sin(o),Math.cos(o)*Math.cos(u)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const Cb={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function Eb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cb,n),L.obj(t,e),L.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),L.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),xb(t,e)}const wb=L.newInstance(Eb,"vtkLight");var Ob={newInstance:wb};const{vtkErrorMacro:Uc}=L;function Rb(t){return()=>Uc(`vtkViewport::${t} - NOT IMPLEMENTED`)}function mb(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const i=e.props.filter(o=>o!==r);e.props.length!==i.length&&(e.props=i)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.push(r);const o=r.getNestedProps();if(o&&o.length)for(let u=0;u<o.length;u++)n(o[u],i);return i}t.getViewPropsWithNestedProps=()=>{let r=[];const i=t.getActors2D();i.sort((u,f)=>u.getLayerNumber()-f.getLayerNumber());const o=e.props.filter(u=>!i.includes(u));for(let u=0;u<o.length;u++)n(o[u],r);return r=r.concat(i),r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>Uc("call displayToView on your view instead"),t.viewToDisplay=()=>Uc("callviewtodisplay on your view instead"),t.getSize=()=>Uc("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,i,o)=>{const u=t.normalizedDisplayToNormalizedViewport(r,i,o);return t.normalizedViewportToProjection(u[0],u[1],u[2])},t.normalizedDisplayToNormalizedViewport=(r,i,o)=>{const u=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/u[0],(i-e.viewport[1])/u[1],o]},t.normalizedViewportToProjection=(r,i,o)=>[r*2-1,i*2-1,o*2-1],t.projectionToNormalizedDisplay=(r,i,o)=>{const u=t.projectionToNormalizedViewport(r,i,o);return t.normalizedViewportToNormalizedDisplay(u[0],u[1],u[2])},t.normalizedViewportToNormalizedDisplay=(r,i,o)=>{const u=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*u[0]+e.viewport[0],i*u[1]+e.viewport[1],o]},t.projectionToNormalizedViewport=(r,i,o)=>[(r+1)*.5,(i+1)*.5,(o+1)*.5],t.PickPropFrom=Rb("PickPropFrom")}const Mb={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function MC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Mb,n),L.obj(t,e),L.event(t,e,"event"),L.setGetArray(t,e,["viewport"],4),L.setGetArray(t,e,["background","background2"],3),mb(t,e)}const Db=L.newInstance(MC,"vtkViewport");var _b={newInstance:Db,extend:MC};const{vtkDebugMacro:fo,vtkErrorMacro:na,vtkWarningMacro:Lb}=In;function FT(t){return()=>na(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function Vb(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},i={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(fo("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const o=t.getActiveCameraAndResetIfCreated();e.lights.forEach(u=>{u.lightTypeIsSceneLight()||(u.lightTypeIsHeadLight()?(u.setPositionFrom(o.getPositionByReference()),u.setFocalPointFrom(o.getFocalPointByReference()),u.modified(o.getMTime())):u.lightTypeIsCameraLight()?u.setTransformMatrix(o.getCameraLightTransformMatrix(oh())):na("light has unknown light type",u.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=FT("allocateTime"),t.updateGeometry=FT("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=o=>{fo(t.getClassName(),t,"setting Layer to ",o),e.layer!==o&&(e.layer=o,t.modified()),t.setPreserveColorBuffer(!!o)},t.setActiveCamera=o=>e.activeCamera===o?!1:(e.activeCamera=o,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:o}),!0),t.makeCamera=()=>{const o=Sb.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:o}),o},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(o=>{e.actors=e.actors.concat(o.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=o=>{e.actors=e.actors.filter(u=>u!==o),t.removeViewProp(o),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(u=>{t.removeViewProp(u)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(o=>{e.volumes=e.volumes.concat(o.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=o=>{e.volumes=e.volumes.filter(u=>u!==o),t.removeViewProp(o),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(u=>{t.removeViewProp(u)}),e.volumes=[],t.modified()},t.hasLight=o=>e.lights.includes(o),t.addLight=o=>{o&&!t.hasLight(o)&&(e.lights.push(o),t.modified())},t.removeLight=o=>{e.lights=e.lights.filter(u=>u!==o),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=o=>{e.lights=o,t.modified()},t.makeLight=Ob.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(o,u,f,l)=>{let g=t.normalizedDisplayToProjection(o,u,f);return g=t.projectionToView(g[0],g[1],g[2],l),t.viewToWorld(g[0],g[1],g[2])},t.worldToNormalizedDisplay=(o,u,f,l)=>{let g=t.worldToView(o,u,f);return g=t.viewToProjection(g[0],g[1],g[2],l),t.projectionToNormalizedDisplay(g[0],g[1],g[2])},t.viewToWorld=(o,u,f)=>{if(e.activeCamera===null)return na("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();$t(l,l),Qe(l,l);const g=new Float64Array([o,u,f]);return Ge(g,g,l),g},t.projectionToView=(o,u,f,l)=>{if(e.activeCamera===null)return na("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(l,-1,1);$t(g,g),Qe(g,g);const d=new Float64Array([o,u,f]);return Ge(d,d,g),d},t.worldToView=(o,u,f)=>{if(e.activeCamera===null)return na("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const l=e.activeCamera.getViewMatrix();Qe(l,l);const g=new Float64Array([o,u,f]);return Ge(g,g,l),g},t.viewToProjection=(o,u,f,l)=>{if(e.activeCamera===null)return na("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(l,-1,1);Qe(g,g);const d=new Float64Array([o,u,f]);return Ge(d,d,g),d},t.computeVisiblePropBounds=()=>{e.allBounds[0]=We.INIT_BOUNDS[0],e.allBounds[1]=We.INIT_BOUNDS[1],e.allBounds[2]=We.INIT_BOUNDS[2],e.allBounds[3]=We.INIT_BOUNDS[3],e.allBounds[4]=We.INIT_BOUNDS[4],e.allBounds[5]=We.INIT_BOUNDS[5];let o=!0;t.invokeEvent(n);for(let u=0;u<e.props.length;++u){const f=e.props[u];if(f.getVisibility()&&f.getUseBounds()){const l=f.getBounds();l&&t0(l)&&(o=!1,l[0]<e.allBounds[0]&&(e.allBounds[0]=l[0]),l[1]>e.allBounds[1]&&(e.allBounds[1]=l[1]),l[2]<e.allBounds[2]&&(e.allBounds[2]=l[2]),l[3]>e.allBounds[3]&&(e.allBounds[3]=l[3]),l[4]<e.allBounds[4]&&(e.allBounds[4]=l[4]),l[5]>e.allBounds[5]&&(e.allBounds[5]=l[5]))}}return o&&(Cx(e.allBounds),fo("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),f=[0,0,0];if(!t0(u))return fo("Cannot reset camera!"),!1;let l=null;if(t.getActiveCamera())l=e.activeCamera.getViewPlaneNormal();else return na("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),f[0]=(u[0]+u[1])/2,f[1]=(u[2]+u[3])/2,f[2]=(u[4]+u[5])/2;let g=u[1]-u[0],d=u[3]-u[2],p=u[5]-u[4];g*=g,d*=d,p*=p;let v=g+d+p;v=v===0?1:v,v=Math.sqrt(v)*.5;const T=ut(e.activeCamera.getViewAngle()),E=v,S=v/Math.sin(T*.5),C=e.activeCamera.getViewUp();return Math.abs(me(C,l))>.999&&(Lb("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-C[2],C[0],C[1])),e.activeCamera.setFocalPoint(f[0],f[1],f[2]),e.activeCamera.setPosition(f[0]+S*l[0],f[1]+S*l[1],f[2]+S*l[2]),t.resetCameraClippingRange(u),e.activeCamera.setParallelScale(E),e.activeCamera.setPhysicalScale(v),e.activeCamera.setPhysicalTranslation(-f[0],-f[1],-f[2]),t.invokeEvent(i),!0},t.resetCameraClippingRange=function(){const u=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!t0(u))return fo("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return na("Trying to reset clipping range of non-existent camera"),!1;const f=e.activeCamera.computeClippingRange(u);let l=0;if(e.activeCamera.getParallelProjection())l=.2*e.activeCamera.getParallelScale();else{const g=ut(e.activeCamera.getViewAngle());l=.2*Math.tan(g/2)*f[1]}return f[1]-f[0]<l&&(l=l-f[1]+f[0],f[1]+=l/2,f[0]-=l/2),f[0]<0&&(f[0]=0),f[0]=.99*f[0]-(f[1]-f[0])*e.clippingRangeExpansion,f[1]=1.01*f[1]+(f[1]-f[0])*e.clippingRangeExpansion,f[0]=f[0]>=f[1]?.01*f[1]:f[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),f[0]<e.nearClippingPlaneTolerance*f[1]&&(f[0]=e.nearClippingPlaneTolerance*f[1]),e.activeCamera.setClippingRange(f[0],f[1]),t.invokeEvent(r),!1},t.setRenderWindow=o=>{o!==e._renderWindow&&(e._vtkWindow=o,e._renderWindow=o)},t.visibleActorCount=()=>e.props.filter(o=>o.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let o=e.mtime;const u=e.activeCamera?e.activeCamera.getMTime():0;u>o&&(o=u);const f=e._createdLight?e._createdLight.getMTime():0;return f>o&&(o=f),o},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const Bb={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:mh(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function DC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,Bb,n),_b.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Wt(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),vt(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),ts(t,e,["actors","volumes","lights"]),yh(t,e,["background"],4,1),Lo(t,e,["renderWindow"]),Vb(t,e)}const Ub=Xe(DC,"vtkRenderer");var Nb={newInstance:Ub,extend:DC};const bb="WebGL",Ic=Object.create(null);function $h(t,e){Ic[t]=e}function Gb(){return Object.keys(Ic)}function _C(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ic[t]&&Ic[t](e)}function Fb(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return _C(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const i=r.getViewProps(),o=e._views[0].getViewNodeFor(r);i.forEach(u=>{if(u.getVisibility()){n.propCount+=1;const f=u.getMapper&&u.getMapper();if(f&&f.getPrimitiveCount){const l=o.getViewNodeFor(f);if(l){l.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=l.getAllocatedGPUMemoryInBytes()/1e6);const g=f.getPrimitiveCount();Object.keys(g).forEach(d=>{n[d]||(n[d]=0),n[d]+=g[d]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return L.setImmediate(t.render),e._views.map(i=>i.captureNextImage?i.captureNextImage(n,r):void 0).filter(i=>!!i)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(i=>i===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const kb={defaultViewAPI:bb,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function LC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kb,n),L.obj(t,e),L.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),L.get(t,e,["neverRendered"]),L.getArray(t,e,["renderers","childRenderWindows"]),L.moveToProtected(t,e,["views"]),L.event(t,e,"completion"),Fb(t,e)}const zb=L.newInstance(LC,"vtkRenderWindow");var Ab={newInstance:zb,extend:LC,registerViewConstructor:$h,listViewAPIs:Gb,newAPISpecificView:_C};const Z0={Unknown:0,LeftController:1,RightController:2},vo={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},Hb={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},$b={LeftButton:1,MiddleButton:2,RightButton:3};var VC={Device:Z0,Input:vo,Axis:Hb,MouseButton:$b};const{Device:vc,Input:Fa}=VC,{vtkWarningMacro:Tc,vtkErrorMacro:Sc,normalizeWheel:Wb,vtkOnceErrorMacro:jb}=L,$i={ctrlKey:!1,altKey:!1,shiftKey:!1},y0={"xr-standard":[Fa.Trigger,Fa.Grip,Fa.TrackPad,Fa.Thumbstick,Fa.A,Fa.B]},Wh=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function lo(t){t.cancelable&&t.preventDefault()}function xc(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:i}=n;e[r]=i}),e}function Kb(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,i=new Map;let o=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=S=>{Sc("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=S=>{e.interactorStyle!==S&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=S,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>Tc("empty event loop");function u(S,C){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(S,C))}t.getCurrentRenderer=()=>(e.currentRenderer||u(0,0),e.currentRenderer);function f(S){const C=e._view.getCanvas(),R=C.getBoundingClientRect(),D=C.width/R.width,w=C.height/R.height,O={x:D*(S.clientX-R.left),y:w*(R.height-S.clientY+R.top),z:0,movementX:D*S.movementX,movementY:w*S.movementY};return(i.size<=1||!e.currentRenderer)&&u(O.x,O.y),O}const l=e._getScreenEventPositionFor||f;function g(S){return{controlKey:S.ctrlKey,altKey:S.altKey,shiftKey:S.shiftKey}}function d(S){const C=g(S);return{key:S.key,keyCode:S.charCode,...C}}function p(S){return S.pointerType||""}const v=()=>{if(e.container===null)return;const{container:S}=e;S.addEventListener("contextmenu",lo),S.addEventListener("wheel",t.handleWheel),S.addEventListener("DOMMouseScroll",t.handleWheel),S.addEventListener("pointerenter",t.handlePointerEnter),S.addEventListener("pointerleave",t.handlePointerLeave),S.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),S.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),S.addEventListener("pointerup",t.handlePointerUp),S.addEventListener("pointercancel",t.handlePointerCancel),S.addEventListener("keypress",t.handleKeyPress),S.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),S.tabIndex=0,S.style.touchAction="none",S.style.userSelect="none",S.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=S=>{if(S===null)return;n.setContainer(S)&&v()};const T=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,o=1;const{container:S}=e;S&&(S.removeEventListener("contextmenu",lo),S.removeEventListener("wheel",t.handleWheel),S.removeEventListener("DOMMouseScroll",t.handleWheel),S.removeEventListener("pointerenter",t.handlePointerEnter),S.removeEventListener("pointerleave",t.handlePointerLeave),S.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),S.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),S.removeEventListener("pointerup",t.handlePointerUp),S.removeEventListener("pointercancel",t.handlePointerCancel),S.removeEventListener("keypress",t.handleKeyPress),S.removeEventListener("keydown",t.handleKeyDown)),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),i.clear()};t.unbindEvents=()=>{T(),n.setContainer(null)},t.handleKeyPress=S=>{const C=d(S);t.keyPressEvent(C)},t.handleKeyDown=S=>{const C=d(S);t.keyDownEvent(C)},t.handleKeyUp=S=>{const C=d(S);t.keyUpEvent(C)},t.handlePointerEnter=S=>{const C={...g(S),position:l(S),deviceType:p(S)};t.pointerEnterEvent(C),C.deviceType==="mouse"&&t.mouseEnterEvent(C)},t.handlePointerLeave=S=>{const C={...g(S),position:l(S),deviceType:p(S)};t.pointerLeaveEvent(C),C.deviceType==="mouse"&&t.mouseLeaveEvent(C)},t.handlePointerDown=S=>{if(!(S.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&lo(S),S.target.hasPointerCapture(S.pointerId)&&S.target.releasePointerCapture(S.pointerId),e.container.setPointerCapture(S.pointerId),i.has(S.pointerId)&&Tc("[RenderWindowInteractor] duplicate pointerId detected"),i.set(S.pointerId,{pointerId:S.pointerId,position:l(S)}),S.pointerType){case"pen":case"touch":t.handleTouchStart(S);break;case"mouse":default:t.handleMouseDown(S);break}},t.handlePointerUp=S=>{if(i.has(S.pointerId))switch(e.preventDefaultOnPointerUp&&lo(S),i.delete(S.pointerId),e.container.releasePointerCapture(S.pointerId),S.pointerType){case"pen":case"touch":t.handleTouchEnd(S);break;case"mouse":default:t.handleMouseUp(S);break}},t.handlePointerCancel=S=>{if(i.has(S.pointerId))switch(i.delete(S.pointerId),S.pointerType){case"pen":case"touch":t.handleTouchEnd(S);break;case"mouse":default:t.handleMouseUp(S);break}},t.handlePointerMove=S=>{if(i.has(S.pointerId)){const C=i.get(S.pointerId);C.position=l(S)}switch(S.pointerType){case"pen":case"touch":t.handleTouchMove(S);break;case"mouse":default:t.handleMouseMove(S);break}},t.handleMouseDown=S=>{const C={...g(S),position:l(S),deviceType:p(S)};switch(S.button){case 0:t.leftButtonPressEvent(C);break;case 1:t.middleButtonPressEvent(C);break;case 2:t.rightButtonPressEvent(C);break;default:Sc(`Unknown mouse button pressed: ${S.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>document.exitPointerLock?.(),t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function E(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=S=>{if(S===void 0){Sc("undefined requester, can not start animating");return}if(r.has(S)){Tc("requester is already registered for animating");return}r.add(S),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=S=>{const C=Date.now()+S;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,C),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(S){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(S)){if(!C){const R=S&&S.getClassName?S.getClassName():S;Tc(`${R} did not request an animation`)}return}r.delete(S),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(S,C,R)=>{S.inputSources.forEach(D=>{const w=D.gripSpace==null?null:C.getPose(D.gripSpace,R),O=D.gripSpace==null?null:C.getPose(D.targetRaySpace,R),m=D.gamepad,M=D.handedness;if(m){m.index in e.lastGamepadValues||(e.lastGamepadValues[m.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let U=0;U<m.buttons.length;++U)U in e.lastGamepadValues[m.index][M].buttons||(e.lastGamepadValues[m.index][M].buttons[U]=!1),e.lastGamepadValues[m.index][M].buttons[U]!==m.buttons[U].pressed&&w!=null&&(t.button3DEvent({gamepad:m,position:w.transform.position,orientation:w.transform.orientation,targetPosition:O.transform.position,targetOrientation:O.transform.orientation,pressed:m.buttons[U].pressed,device:D.handedness==="left"?vc.LeftController:vc.RightController,input:y0[m.mapping]&&y0[m.mapping][U]?y0[m.mapping][U]:Fa.Trigger}),e.lastGamepadValues[m.index][M].buttons[U]=m.buttons[U].pressed),e.lastGamepadValues[m.index][M].buttons[U]&&w!=null&&t.move3DEvent({gamepad:m,position:w.transform.position,orientation:w.transform.orientation,targetPosition:O.transform.position,targetOrientation:O.transform.orientation,device:D.handedness==="left"?vc.LeftController:vc.RightController})}})},t.handleMouseMove=S=>{const C={...g(S),position:l(S),deviceType:p(S)};e.moveTimeoutID===0?t.startMouseMoveEvent(C):(t.mouseMoveEvent(C),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const S=Date.now();e._animationFrameCount++,S-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(S-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=S,e._animationFrameCount=1),t.animationEvent(),E(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=S=>{lo(S);const C={...Wb(S),...g(S),position:l(S),deviceType:p(S)};e.wheelTimeoutID===0&&(Math.abs(C.spinY)>=.3?o=Math.abs(C.spinY):o=1),C.spinY/=o,e.wheelTimeoutID===0?(t.startMouseWheelEvent(C),t.mouseWheelEvent(C)):(t.mouseWheelEvent(C),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=S=>{const C={...g(S),position:l(S),deviceType:p(S)};switch(S.button){case 0:t.leftButtonReleaseEvent(C);break;case 1:t.middleButtonReleaseEvent(C);break;case 2:t.rightButtonReleaseEvent(C);break;default:Sc(`Unknown mouse button released: ${S.button}`);break}},t.handleTouchStart=S=>{const C=[...i.values()];if(e.recognizeGestures&&C.length>1){const R=xc(i);if(C.length===2){const D={...g($i),position:C[0].position,deviceType:p(S)};t.leftButtonReleaseEvent(D)}t.recognizeGesture("TouchStart",R)}else if(C.length===1){const R={...g($i),position:l(S),deviceType:p(S)};t.leftButtonPressEvent(R)}},t.handleTouchMove=S=>{const C=[...i.values()];if(e.recognizeGestures&&C.length>1){const R=xc(i);t.recognizeGesture("TouchMove",R)}else if(C.length===1){const R={...g($i),position:C[0].position,deviceType:p(S)};t.mouseMoveEvent(R)}},t.handleTouchEnd=S=>{const C=[...i.values()];if(e.recognizeGestures)if(C.length===0){const R={...g($i),position:l(S),deviceType:p(S)};t.leftButtonReleaseEvent(R)}else if(C.length===1){const R=xc(i);t.recognizeGesture("TouchEnd",R);const D={...g($i),position:C[0].position,deviceType:p(S)};t.leftButtonPressEvent(D)}else{const R=xc(i);t.recognizeGesture("TouchMove",R)}else if(C.length===1){const R={...g($i),position:C[0].position,deviceType:p(S)};t.leftButtonReleaseEvent(R)}},t.setView=S=>{e._view!==S&&(e._view=S,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>e._view?.getRenderable()?.getRenderersByReference()?.[0],t.findPokedRenderer=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const R=e._view?.getRenderable()?.getRenderers();if(!R||R.length===0)return null;R.sort((M,U)=>M.getLayer()-U.getLayer());let D=null,w=null,O=null,m=R.length;for(;m--;){const M=R[m];if(e._view.isInViewport(S,C,M)&&M.getInteractive()){O=M;break}D===null&&M.getInteractive()&&(D=M),w===null&&e._view.isInViewport(S,C,M)&&(w=M)}return O===null&&(O=D),O===null&&(O=w),O==null&&(O=R[0]),O},t.render=()=>{!t.isAnimating()&&!e.inRender&&E()},Wh.forEach(S=>{const C=S.charAt(0).toLowerCase()+S.slice(1);t[`${C}Event`]=R=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){jb(`
          Can not forward events without a current renderer on the interactor.
        `);return}const w={type:S,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...R};t[`invoke${S}`](w)}}),t.recognizeGesture=(S,C)=>{if(Object.keys(C).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),S==="TouchStart"){Object.keys(C).forEach(z=>{e.startingEventPositions[z]=C[z]}),e.currentGesture="Start";return}if(S==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let R=0;const D=[],w=[];Object.keys(C).forEach(z=>{D[R]=C[z],w[R]=e.startingEventPositions[z],R++});const O=Math.sqrt((w[0].x-w[1].x)*(w[0].x-w[1].x)+(w[0].y-w[1].y)*(w[0].y-w[1].y)),m=Math.sqrt((D[0].x-D[1].x)*(D[0].x-D[1].x)+(D[0].y-D[1].y)*(D[0].y-D[1].y));let M=Ro(Math.atan2(w[1].y-w[0].y,w[1].x-w[0].x)),U=Ro(Math.atan2(D[1].y-D[0].y,D[1].x-D[0].x)),b=U-M;U=U+180>=360?U-180:U+180,M=M+180>=360?M-180:M+180,Math.abs(U-M)<Math.abs(b)&&(b=U-M);const j=[];if(j[0]=(D[0].x-w[0].x+D[1].x-w[1].x)/2,j[1]=(D[0].y-w[0].y+D[1].y-w[1].y)/2,S==="TouchMove")if(e.currentGesture==="Start"){let z=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);z<15&&(z=15);const A=Math.abs(m-O),K=m*3.1415926*Math.abs(b)/360,Y=Math.sqrt(j[0]*j[0]+j[1]*j[1]);if(A>z&&A>K&&A>Y){e.currentGesture="Pinch";const Z={scale:1,touches:C};t.startPinchEvent(Z)}else if(K>z&&K>Y){e.currentGesture="Rotate";const Z={rotation:0,touches:C};t.startRotateEvent(Z)}else if(Y>z){e.currentGesture="Pan";const Z={translation:[0,0],touches:C};t.startPanEvent(Z)}}else{if(e.currentGesture==="Rotate"){const z={rotation:b,touches:C};t.rotateEvent(z)}if(e.currentGesture==="Pinch"){const z={scale:m/O,touches:C};t.pinchEvent(z)}if(e.currentGesture==="Pan"){const z={translation:j,touches:C};t.panEvent(z)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=S=>{e._forcedRenderer=!!S,e.currentRenderer=S},t.setContainer=S=>{T();const C=n.setContainer(S??null);return C&&v(),C},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const Xb={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function BC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xb,n),L.obj(t,e),e._animationExtendedEnd=0,L.event(t,e,"RenderEvent"),Wh.forEach(r=>L.event(t,e,r)),L.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),L.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),L.moveToProtected(t,e,["view"]),Kb(t,e)}const qb=L.newInstance(BC,"vtkRenderWindowInteractor");var UC={newInstance:qb,extend:BC,handledEvents:Wh,...VC};const{vtkErrorMacro:Yb,VOID:Qb}=L;function Zb(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function Jb(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const Pb={computeWorldToDisplay:Zb,computeDisplayToWorld:Jb};function Ib(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function i(){UC.handledEvents.forEach(o=>{t[`handle${o}`]&&e.subscribedEvents.push(e._interactor[`on${o}`](u=>e.processEvents?t[`handle${o}`](u):Qb,e.priority))})}t.setInteractor=o=>{o!==e._interactor&&(r(),e._interactor=o,o&&e.enabled&&i(),t.modified())},t.setEnabled=o=>{o!==e.enabled&&(r(),o&&(e._interactor?i():Yb(`
          The interactor must be set before subscribing to events
        `)),e.enabled=o,t.modified())},t.computeDisplayToWorld=(o,u,f,l)=>o?e._interactor.getView().displayToWorld(u,f,l,o):null,t.computeWorldToDisplay=(o,u,f,l)=>o?e._interactor.getView().worldToDisplay(u,f,l,o):null,t.setPriority=o=>{n.setPriority(o)&&e._interactor&&(r(),i())}}const e4={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function NC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e4,n),L.obj(t,e),L.event(t,e,"InteractionEvent"),L.event(t,e,"StartInteractionEvent"),L.event(t,e,"EndInteractionEvent"),L.get(t,e,["_interactor","enabled"]),L.setGet(t,e,["priority","processEvents"]),L.moveToProtected(t,e,["interactor"]),Ib(t,e)}const t4=L.newInstance(NC,"vtkInteractorObserver");var n4={newInstance:t4,extend:NC,...Pb};const r4={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var jh={States:r4};const{States:Yn}=jh,v0={Rotate:Yn.IS_ROTATE,Pan:Yn.IS_PAN,Spin:Yn.IS_SPIN,Dolly:Yn.IS_DOLLY,CameraPose:Yn.IS_CAMERA_POSE,WindowLevel:Yn.IS_WINDOW_LEVEL,Slice:Yn.IS_SLICE};function a4(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(v0).forEach(n=>{L.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===Yn.IS_NONE&&(e.state=v0[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},L.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===v0[n]&&(e.state=Yn.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let i=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":i=e.getRenderer(n).getActors(),i.forEach(o=>{const u=o.getProperty();u.setRepresentationToWireframe&&u.setRepresentationToWireframe()}),r.render();break;case"s":case"S":i=e.getRenderer(n).getActors(),i.forEach(o=>{const u=o.getProperty();u.setRepresentationToSurface&&u.setRepresentationToSurface()}),r.render();break;case"v":case"V":i=e.getRenderer(n).getActors(),i.forEach(o=>{const u=o.getProperty();u.setRepresentationToPoints&&u.setRepresentationToPoints()}),r.render();break}}}const i4={state:Yn.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function bC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i4,n),n4.extend(t,e,n),L.setGet(t,e,["focusedRenderer"]),a4(t,e)}const s4=L.newInstance(bC,"vtkInteractorStyle");var o4={newInstance:s4,extend:bC,...jh};const{States:jn}=jh;function u4(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,i=e.getRenderer(n);switch(e.state){case jn.IS_ROTATE:t.handleMouseRotate(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case jn.IS_PAN:t.handleMousePan(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case jn.IS_DOLLY:t.handleMouseDolly(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case jn.IS_SPIN:t.handleMouseSpin(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===Z0.RightController&&(n.input===vo.Trigger||n.input===vo.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===Z0.RightController&&(n.input===vo.Trigger||n.input===vo.TrackPad)&&e.state===jn.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{switch(e.state){case jn.IS_CAMERA_POSE:t.updateCameraPose(n);break}},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),i=r.getPhysicalTranslation(),u=.5*.05*r.getPhysicalScale(),f=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(i[0]+f[0]*u,i[1]+f[1]*u,i[2]+f[2]*u)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case jn.IS_DOLLY:t.endDolly();break;case jn.IS_PAN:t.endPan();break;case jn.IS_SPIN:t.endSpin();break;case jn.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let i=r.getFocalPoint();i=t.computeWorldToDisplay(e.getRenderer(n),i[0],i[1],i[2]);const o=i[2],u=n.translation,f=e.previousTranslation,l=t.computeDisplayToWorld(e.getRenderer(n),i[0]+u[0]-f[0],i[1]+u[1]-f[1],o),g=t.computeDisplayToWorld(e.getRenderer(n),i[0],i[1],o),d=[];d[0]=g[0]-l[0],d[1]=g[1]-l[1],d[2]=g[2]-l[2],i=r.getFocalPoint();const p=r.getPosition();r.setFocalPoint(d[0]+i[0],d[1]+i[1],d[2]+i[2]),r.setPosition(d[0]+p[0],d[1]+p[1],d[2]+p[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,o=r.x-e.previousPosition.x,u=r.y-e.previousPosition.y,f=i.getView().getViewportSize(n);let l=-.1,g=-.1;f[0]&&f[1]&&(l=-20/f[1],g=-20/f[0]);const d=o*g*e.motionFactor,p=u*l*e.motionFactor,v=n.getActiveCamera();!Number.isNaN(d)&&!Number.isNaN(p)&&(v.azimuth(d),v.elevation(p),v.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),i.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,o=n.getActiveCamera(),u=i.getView().getViewportCenter(n),f=Ro(Math.atan2(e.previousPosition.y-u[1],e.previousPosition.x-u[0])),l=Ro(Math.atan2(r.y-u[1],r.x-u[0]))-f;Number.isNaN(l)||(o.roll(l),o.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const i=n.getActiveCamera();let o=i.getFocalPoint();o=t.computeWorldToDisplay(n,o[0],o[1],o[2]);const u=o[2],f=t.computeDisplayToWorld(n,r.x,r.y,u),l=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,u),g=[];g[0]=l[0]-f[0],g[1]=l[1]-f[1],g[2]=l[2]-f[2],o=i.getFocalPoint();const d=i.getPosition();i.setFocalPoint(g[0]+o[0],g[1]+o[1],g[2]+o[2]),i.setPosition(g[0]+d[0],g[1]+d[1],g[2]+d[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const i=r.y-e.previousPosition.y,u=e._interactor.getView().getViewportCenter(n),f=e.motionFactor*i/u[1];t.dollyByFactor(n,1.1**f)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const i=n.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/r):(i.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const c4={motionFactor:10,zoomFactor:10};function GC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c4,n),o4.extend(t,e,n),L.setGet(t,e,["motionFactor","zoomFactor"]),u4(t,e)}const f4=L.newInstance(GC,"vtkInteractorStyleTrackballCamera");var FC={newInstance:f4,extend:GC};function l4(t){return t}function Kh(t){if(t===null||t==="null")return null;if(t==="true")return!0;if(t==="false")return!1;if(!(t===void 0||t==="undefined"))return t[0]==="["&&t[t.length-1]==="]"?t.substring(1,t.length-1).split(",").map(e=>Kh(e.trim())):t===""||Number.isNaN(Number(t))?t:Number(t)}function g4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.search;const n={},r=t?Kh:l4;return new URLSearchParams(e).forEach((o,u)=>{u&&(n[u]=o?r(o):!0)}),n}var h4={toNativeType:Kh,extractURLParameters:g4};function p4(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let i=0;i<e.colorBuffers.length;i++)e.colorBuffers[i].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=e.context;if(!i){Ee("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let o=i.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())o+=r;else{Ee("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,i.framebufferTexture2D(i.FRAMEBUFFER,o,i.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){Ee("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{Ee("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Ee("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Ee("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=Er.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(q0.LINEAR),r.setMagnificationFilter(q0.LINEAR),r.create2DFromRaw({width:e.glFramebuffer.width,height:e.glFramebuffer.height,numComps:4,dataType:wt.UNSIGNED_CHAR,data:null}),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const d4={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function kC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d4,n),mt(t,e),e.colorBuffers&&Ee("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],ts(t,e,["colorBuffers"]),p4(t,e)}const y4=Xe(kC,"vtkFramebuffer");var Xh={newInstance:y4,extend:kC};function v4(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${L.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}),e.delegates.forEach(i=>{i.traverse(n,t)}),e.postDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}))}}const T4={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function zC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T4,n),L.obj(t,e),L.get(t,e,["currentOperation"]),L.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),L.moveToProtected(t,e,["currentParent"]),v4(t,e)}const S4=L.newInstance(zC,"vtkRenderPass");var Or={newInstance:S4,extend:zC};const{Representation:x4}=ns,{vtkErrorMacro:kT}=L;function C4(t){const e=re.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const E4=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function w4(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),o=je.newInstance({numberOfComponents:3,values:n});o.setName("points");const u=je.newInstance({numberOfComponents:2,values:r});u.setName("tcoords");const f=je.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(f,"polys",x4.SURFACE,{points:o,tcoords:u,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),i=n.getContext();e.framebuffer=Xh.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Er.newInstance(),e.translucentRGBATexture.setInternalFormat(i.RGBA16F),e.translucentRGBATexture.setFormat(i.RGBA),e.translucentRGBATexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw({width:r[0],height:r[1],numComps:4,dataType:"Float32Array",data:null}),e.translucentRTexture=Er.newInstance(),e.translucentRTexture.setInternalFormat(i.R16F),e.translucentRTexture.setFormat(i.RED),e.translucentRTexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw({width:r[0],height:r[1],numComps:1,dataType:"Float32Array",data:null}),e.translucentZTexture=Er.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw({width:r[0],height:r[1],dataType:"Float32Array",data:null}),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),E4,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const i=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||kT("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||kT("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,i)=>{if(e.deleted)return;const o=n.getSize(),u=n.getContext();if(e._supported=!1,r.getSelector()||!u||!n.getWebgl2()||!u.getExtension("EXT_color_buffer_half_float")&&!u.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const l=e.framebuffer.getSize();l===null||l[0]!==o[0]||l[1]!==o[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}u.drawBuffers([u.COLOR_ATTACHMENT0]),u.clearBufferfv(u.COLOR,0,[0,0,0,0]),u.clearBufferfv(u.DEPTH,0,[1]),u.colorMask(!1,!1,!1,!1),i.getOpaqueActorCount()>0&&(i.setCurrentOperation("opaqueZBufferPass"),r.traverse(i)),u.colorMask(!0,!0,!0,!0),u.drawBuffers([u.COLOR_ATTACHMENT0,u.COLOR_ATTACHMENT1]),u.viewport(0,0,o[0],o[1]),u.scissor(0,0,o[0],o[1]),u.clearBufferfv(u.COLOR,0,[0,0,0,1]),u.clearBufferfv(u.COLOR,1,[0,0,0,0]),u.enable(u.DEPTH_TEST),u.enable(u.BLEND),u.blendFuncSeparate(u.ONE,u.ONE,u.ZERO,u.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),u.drawBuffers([u.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=X2.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA),u.depthMask(!1),u.depthFunc(u.ALWAYS),u.viewport(0,0,o[0],o[1]),u.scissor(0,0,o[0],o[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),u.drawArrays(u.TRIANGLES,0,e.tris.getCABO().getElementCount()),u.depthMask(!0),u.depthFunc(u.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const f=r.getTiledSizeAndOrigin();u.scissor(f.lowerLeftU,f.lowerLeftV,f.usize,f.vsize),u.viewport(f.lowerLeftU,f.lowerLeftV,f.usize,f.vsize)},t.getShaderReplacement=()=>e._supported?C4:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const O4={framebuffer:null,copyShader:null,tris:null};function AC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O4,n),Or.extend(t,e,n),e.VBOBuildTime={},L.obj(e.VBOBuildTime,{mtime:0}),e.tris=rs.newInstance(),L.get(t,e,["framebuffer"]),w4(t,e)}const R4=L.newInstance(AC,"vtkOpenGLOrderIndependentTranslucentPass");var m4={newInstance:R4,extend:AC};function M4(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getRenderable().getNumberOfLayers(),o=n.getRenderable().getRenderersByReference();for(let u=0;u<i;u++)for(let f=0;f<o.length;f++){const l=o[f],g=n.getViewNodeFor(l);if(l.getDraw()&&l.getLayer()===u){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),g.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const d=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Xh.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const p=e.framebuffer.getSize();(p===null||p[0]!==d[0]||p[1]!==d[1])&&(e.framebuffer.create(d[0],d[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),g.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),g.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),g.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=m4.newInstance()),e.translucentPass.traverse(n,g,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),g.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),g.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const D4={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function HC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D4,n),Or.extend(t,e,n),L.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),M4(t,e)}const _4=L.newInstance(HC,"vtkForwardPass");var L4={newInstance:_4,extend:HC};const{FieldAssociations:V4}=Ia;function B4(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,i,o,u)=>{},t.selectAsync=async(n,r,i,o,u)=>{const f=await t.getSourceDataAsync(n,r,i,o,u);return f?f.generateSelection(r,i,o,u):[]}}const U4={fieldAssociation:V4.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function $C(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,U4,n),L.obj(t,e),L.setGet(t,e,["fieldAssociation","captureZValues"]),B4(t,e)}const N4=L.newInstance($C,"vtkHardwareSelector");var WC={newInstance:N4,extend:$C};const b4={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},G4={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var F4={SelectionContent:b4,SelectionField:G4};function k4(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const z4={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function jC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z4,n),L.obj(t,e),e.properties={},L.setGet(t,e,["contentType","fieldType","properties","selectionList"]),k4(t,e)}const A4=L.newInstance(jC,"vtkSelectionNode");var cf={newInstance:A4,extend:jC,...F4};const{PassTypes:ot}=S2,{SelectionContent:H4,SelectionField:zT}=cf,{FieldAssociations:xo}=Ia,{vtkErrorMacro:KC}=L,aa=1;function XC(t){return`${t.propID} ${t.compositeID}`}function qC(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4;return n[i+3]}function xr(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4,o=n[i],u=n[i+1];return(n[i+2]*256+u)*256+o}function YC(t,e){let n=e;return n<<=24,n|=t,n}function $4(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const i=[e[0]-t.area[0],e[1]-t.area[1]],o=xr(i[0],i[1],t.pixBuffer[ot.ACTOR_PASS],t.area);if(o<=0||o-aa>=t.props.length)return null;const u={};u.valid=!0,u.propID=o-aa,u.prop=t.props[u.propID];let f=xr(i[0],i[1],t.pixBuffer[ot.COMPOSITE_INDEX_PASS],t.area);if((f<0||f>16777215)&&(f=0),u.compositeID=f-aa,t.captureZValues){const d=(i[1]*(t.area[2]-t.area[0]+1)+i[0])*4;u.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,u.displayPosition=e}if(t.pixBuffer[ot.ID_LOW24]&&qC(i[0],i[1],t.pixBuffer[ot.ID_LOW24],t.area)===0)return u;const l=xr(i[0],i[1],t.pixBuffer[ot.ID_LOW24],t.area),g=xr(i[0],i[1],t.pixBuffer[ot.ID_HIGH24],t.area);return u.attributeID=YC(l,g),u}}function QC(t,e,n,r,i){const o=[];let u=0;return e.forEach((f,l)=>{const g=cf.newInstance();switch(g.setContentType(H4.INDICES),t){case xo.FIELD_ASSOCIATION_CELLS:g.setFieldType(zT.CELL);break;case xo.FIELD_ASSOCIATION_POINTS:g.setFieldType(zT.POINT);break;default:KC("Unknown field association")}g.getProperties().propID=f.info.propID,g.getProperties().prop=f.info.prop,g.getProperties().compositeID=f.info.compositeID,g.getProperties().attributeID=f.info.attributeID,g.getProperties().pixelCount=f.pixelCount,n&&(g.getProperties().displayPosition=[f.info.displayPosition[0],f.info.displayPosition[1],f.info.zValue],g.getProperties().worldPosition=i.displayToWorld(f.info.displayPosition[0],f.info.displayPosition[1],f.info.zValue,r)),g.setSelectionList(f.attributeIDs),o[u]=g,u++}),o}function W4(t,e,n,r,i){const o=Math.floor(e),u=Math.floor(n),f=Math.floor(r),l=Math.floor(i),g=new Map,d=[0,0];for(let p=u;p<=l;p++)for(let v=o;v<=f;v++){const E=$4(t,[v,p],0,d);if(E&&E.valid){const S=XC(E);if(!g.has(S))g.set(S,{info:E,pixelCount:1,attributeIDs:[E.attributeID]});else{const C=g.get(S);C.pixelCount++,t.captureZValues&&E.zValue<C.info.zValue&&(C.info=E),C.attributeIDs.indexOf(E.attributeID)===-1&&C.attributeIDs.push(E.attributeID)}}}return QC(t.fieldAssociation,g,t.captureZValues,t.renderer,t.openGLRenderWindow)}function j4(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Xh.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const i=e.framebuffer.getSize();!i||i[0]!==r[0]||i[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===xo.FIELD_ASSOCIATION_POINTS){const i=e._openGLRenderWindow.getContext(),o=i.isEnabled(i.BLEND);i.disable(i.BLEND),e._openGLRenderWindow.traverseAllPasses(),o&&i.enable(i.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,i,o,u,f)=>{if(e._renderer=r,i===void 0){const g=e._openGLRenderWindow.getSize();t.setArea(0,0,g[0]-1,g[1]-1)}else t.setArea(i,o,u,f);if(!t.captureBuffers())return!1;const l={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return l.generateSelection=function(){for(var g=arguments.length,d=new Array(g),p=0;p<g;p++)d[p]=arguments[p];return W4(l,...d)},l},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return KC("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const i=[];for(e.currentPass=ot.MIN_KNOWN_PASS;e.currentPass<=ot.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===ot.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),i.push(e.currentPass));return i.forEach(o=>{e.currentPass=o,t.processPixelBuffers()}),e.currentPass=ot.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,i)=>{t.isPropHit(i)&&r.processSelectorPixelBuffers(t,e.propPixels[i])})},t.passRequired=r=>{if(r===ot.ID_HIGH24){if(e.fieldAssociation===xo.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===xo.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const i=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(i),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===ot.ACTOR_PASS){if(e.captureZValues){const i=e._openGLRenderWindow.getRenderPasses();if(typeof i[0].requestDepth=="function"&&typeof i[0].getFramebuffer=="function"){const o=i[0].getFramebuffer();o.saveCurrentBindingsAndBuffers(),o.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),o.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let i=0;for(let o=0;o<=e.area[3]-e.area[1];o++)for(let u=0;u<=e.area[2]-e.area[0];u++){let f=xr(u,o,r,e.area);f>0&&(f--,f in e.hitProps||(e.hitProps[f]=!0,e.propPixels[f]=[]),e.propPixels[f].push(i*4)),++i}},t.renderProp=r=>{e.currentPass===ot.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+aa),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===ot.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+aa)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>L.enumToString(ot,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,i,o)=>{const u=i<0?0:i;if(u===0){if(o[0]=r[0],o[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;const d=[r[0]-e.area[0],r[1]-e.area[1]],p=xr(d[0],d[1],e.pixBuffer[ot.ACTOR_PASS],e.area);if(p<=0||p-aa>=e.props.length)return null;const v={};v.valid=!0,v.propID=p-aa,v.prop=e.props[v.propID];let T=xr(d[0],d[1],e.pixBuffer[ot.COMPOSITE_INDEX_PASS],e.area);if((T<0||T>16777215)&&(T=0),v.compositeID=T-aa,e.captureZValues){const C=(d[1]*(e.area[2]-e.area[0]+1)+d[0])*4;v.zValue=(256*e.zBuffer[C]+e.zBuffer[C+1])/65535,v.displayPosition=r}if(e.pixBuffer[ot.ID_LOW24]&&qC(d[0],d[1],e.pixBuffer[ot.ID_LOW24],e.area)===0)return v;const E=xr(d[0],d[1],e.pixBuffer[ot.ID_LOW24],e.area),S=xr(d[0],d[1],e.pixBuffer[ot.ID_HIGH24],e.area);return v.attributeID=YC(E,S),v}const f=[r[0],r[1]],l=[0,0];let g=t.getPixelInformation(r,0,o);if(g&&g.valid)return g;for(let d=1;d<u;++d){for(let p=f[1]>d?f[1]-d:0;p<=f[1]+d;++p)if(l[1]=p,f[0]>=d&&(l[0]=f[0]-d,g=t.getPixelInformation(l,0,o),g&&g.valid)||(l[0]=f[0]+d,g=t.getPixelInformation(l,0,o),g&&g.valid))return g;for(let p=f[0]>=d?f[0]-(d-1):0;p<=f[0]+(d-1);++p)if(l[0]=p,f[1]>=d&&(l[1]=f[1]-d,g=t.getPixelInformation(l,0,o),g&&g.valid)||(l[1]=f[1]+d,g=t.getPixelInformation(l,0,o),g&&g.valid))return g}return o[0]=r[0],o[1]=r[1],null},t.generateSelection=(r,i,o,u)=>{const f=Math.floor(r),l=Math.floor(i),g=Math.floor(o),d=Math.floor(u),p=new Map,v=[0,0];for(let T=l;T<=d;T++)for(let E=f;E<=g;E++){const S=[E,T],C=t.getPixelInformation(S,0,v);if(C&&C.valid){const R=XC(C);if(!p.has(R))p.set(R,{info:C,pixelCount:1,attributeIDs:[C.attributeID]});else{const D=p.get(R);D.pixelCount++,e.captureZValues&&C.zValue<D.info.zValue&&(D.info=C),D.attributeIDs.indexOf(C.attributeID)===-1&&D.attributeIDs.push(C.attributeID)}}}return QC(e.fieldAssociation,p,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,i)=>{e._openGLRenderWindow=r,e._renderer=i};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const K4={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function ZC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K4,n),WC.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),L.setGetArray(t,e,["area"],4),L.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),L.setGetArray(t,e,["propColorValue"],3),L.moveToProtected(t,e,["renderer","openGLRenderWindow"]),L.event(t,e,"event"),j4(t,e)}const X4=L.newInstance(ZC,"vtkOpenGLHardwareSelector");var JC={newInstance:X4,extend:ZC,...S2},T0={exports:{}},AT;function q4(){return AT||(AT=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(R,D){var w=R[0],O=R[1],m=R[2],M=R[3];w+=(O&m|~O&M)+D[0]-680876936|0,w=(w<<7|w>>>25)+O|0,M+=(w&O|~w&m)+D[1]-389564586|0,M=(M<<12|M>>>20)+w|0,m+=(M&w|~M&O)+D[2]+606105819|0,m=(m<<17|m>>>15)+M|0,O+=(m&M|~m&w)+D[3]-1044525330|0,O=(O<<22|O>>>10)+m|0,w+=(O&m|~O&M)+D[4]-176418897|0,w=(w<<7|w>>>25)+O|0,M+=(w&O|~w&m)+D[5]+1200080426|0,M=(M<<12|M>>>20)+w|0,m+=(M&w|~M&O)+D[6]-1473231341|0,m=(m<<17|m>>>15)+M|0,O+=(m&M|~m&w)+D[7]-45705983|0,O=(O<<22|O>>>10)+m|0,w+=(O&m|~O&M)+D[8]+1770035416|0,w=(w<<7|w>>>25)+O|0,M+=(w&O|~w&m)+D[9]-1958414417|0,M=(M<<12|M>>>20)+w|0,m+=(M&w|~M&O)+D[10]-42063|0,m=(m<<17|m>>>15)+M|0,O+=(m&M|~m&w)+D[11]-1990404162|0,O=(O<<22|O>>>10)+m|0,w+=(O&m|~O&M)+D[12]+1804603682|0,w=(w<<7|w>>>25)+O|0,M+=(w&O|~w&m)+D[13]-40341101|0,M=(M<<12|M>>>20)+w|0,m+=(M&w|~M&O)+D[14]-1502002290|0,m=(m<<17|m>>>15)+M|0,O+=(m&M|~m&w)+D[15]+1236535329|0,O=(O<<22|O>>>10)+m|0,w+=(O&M|m&~M)+D[1]-165796510|0,w=(w<<5|w>>>27)+O|0,M+=(w&m|O&~m)+D[6]-1069501632|0,M=(M<<9|M>>>23)+w|0,m+=(M&O|w&~O)+D[11]+643717713|0,m=(m<<14|m>>>18)+M|0,O+=(m&w|M&~w)+D[0]-373897302|0,O=(O<<20|O>>>12)+m|0,w+=(O&M|m&~M)+D[5]-701558691|0,w=(w<<5|w>>>27)+O|0,M+=(w&m|O&~m)+D[10]+38016083|0,M=(M<<9|M>>>23)+w|0,m+=(M&O|w&~O)+D[15]-660478335|0,m=(m<<14|m>>>18)+M|0,O+=(m&w|M&~w)+D[4]-405537848|0,O=(O<<20|O>>>12)+m|0,w+=(O&M|m&~M)+D[9]+568446438|0,w=(w<<5|w>>>27)+O|0,M+=(w&m|O&~m)+D[14]-1019803690|0,M=(M<<9|M>>>23)+w|0,m+=(M&O|w&~O)+D[3]-187363961|0,m=(m<<14|m>>>18)+M|0,O+=(m&w|M&~w)+D[8]+1163531501|0,O=(O<<20|O>>>12)+m|0,w+=(O&M|m&~M)+D[13]-1444681467|0,w=(w<<5|w>>>27)+O|0,M+=(w&m|O&~m)+D[2]-51403784|0,M=(M<<9|M>>>23)+w|0,m+=(M&O|w&~O)+D[7]+1735328473|0,m=(m<<14|m>>>18)+M|0,O+=(m&w|M&~w)+D[12]-1926607734|0,O=(O<<20|O>>>12)+m|0,w+=(O^m^M)+D[5]-378558|0,w=(w<<4|w>>>28)+O|0,M+=(w^O^m)+D[8]-2022574463|0,M=(M<<11|M>>>21)+w|0,m+=(M^w^O)+D[11]+1839030562|0,m=(m<<16|m>>>16)+M|0,O+=(m^M^w)+D[14]-35309556|0,O=(O<<23|O>>>9)+m|0,w+=(O^m^M)+D[1]-1530992060|0,w=(w<<4|w>>>28)+O|0,M+=(w^O^m)+D[4]+1272893353|0,M=(M<<11|M>>>21)+w|0,m+=(M^w^O)+D[7]-155497632|0,m=(m<<16|m>>>16)+M|0,O+=(m^M^w)+D[10]-1094730640|0,O=(O<<23|O>>>9)+m|0,w+=(O^m^M)+D[13]+681279174|0,w=(w<<4|w>>>28)+O|0,M+=(w^O^m)+D[0]-358537222|0,M=(M<<11|M>>>21)+w|0,m+=(M^w^O)+D[3]-722521979|0,m=(m<<16|m>>>16)+M|0,O+=(m^M^w)+D[6]+76029189|0,O=(O<<23|O>>>9)+m|0,w+=(O^m^M)+D[9]-640364487|0,w=(w<<4|w>>>28)+O|0,M+=(w^O^m)+D[12]-421815835|0,M=(M<<11|M>>>21)+w|0,m+=(M^w^O)+D[15]+530742520|0,m=(m<<16|m>>>16)+M|0,O+=(m^M^w)+D[2]-995338651|0,O=(O<<23|O>>>9)+m|0,w+=(m^(O|~M))+D[0]-198630844|0,w=(w<<6|w>>>26)+O|0,M+=(O^(w|~m))+D[7]+1126891415|0,M=(M<<10|M>>>22)+w|0,m+=(w^(M|~O))+D[14]-1416354905|0,m=(m<<15|m>>>17)+M|0,O+=(M^(m|~w))+D[5]-57434055|0,O=(O<<21|O>>>11)+m|0,w+=(m^(O|~M))+D[12]+1700485571|0,w=(w<<6|w>>>26)+O|0,M+=(O^(w|~m))+D[3]-1894986606|0,M=(M<<10|M>>>22)+w|0,m+=(w^(M|~O))+D[10]-1051523|0,m=(m<<15|m>>>17)+M|0,O+=(M^(m|~w))+D[1]-2054922799|0,O=(O<<21|O>>>11)+m|0,w+=(m^(O|~M))+D[8]+1873313359|0,w=(w<<6|w>>>26)+O|0,M+=(O^(w|~m))+D[15]-30611744|0,M=(M<<10|M>>>22)+w|0,m+=(w^(M|~O))+D[6]-1560198380|0,m=(m<<15|m>>>17)+M|0,O+=(M^(m|~w))+D[13]+1309151649|0,O=(O<<21|O>>>11)+m|0,w+=(m^(O|~M))+D[4]-145523070|0,w=(w<<6|w>>>26)+O|0,M+=(O^(w|~m))+D[11]-1120210379|0,M=(M<<10|M>>>22)+w|0,m+=(w^(M|~O))+D[2]+718787259|0,m=(m<<15|m>>>17)+M|0,O+=(M^(m|~w))+D[9]-343485551|0,O=(O<<21|O>>>11)+m|0,R[0]=w+R[0]|0,R[1]=O+R[1]|0,R[2]=m+R[2]|0,R[3]=M+R[3]|0}function o(R){var D=[],w;for(w=0;w<64;w+=4)D[w>>2]=R.charCodeAt(w)+(R.charCodeAt(w+1)<<8)+(R.charCodeAt(w+2)<<16)+(R.charCodeAt(w+3)<<24);return D}function u(R){var D=[],w;for(w=0;w<64;w+=4)D[w>>2]=R[w]+(R[w+1]<<8)+(R[w+2]<<16)+(R[w+3]<<24);return D}function f(R){var D=R.length,w=[1732584193,-271733879,-1732584194,271733878],O,m,M,U,b,j;for(O=64;O<=D;O+=64)i(w,o(R.substring(O-64,O)));for(R=R.substring(O-64),m=R.length,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=0;O<m;O+=1)M[O>>2]|=R.charCodeAt(O)<<(O%4<<3);if(M[O>>2]|=128<<(O%4<<3),O>55)for(i(w,M),O=0;O<16;O+=1)M[O]=0;return U=D*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),b=parseInt(U[2],16),j=parseInt(U[1],16)||0,M[14]=b,M[15]=j,i(w,M),w}function l(R){var D=R.length,w=[1732584193,-271733879,-1732584194,271733878],O,m,M,U,b,j;for(O=64;O<=D;O+=64)i(w,u(R.subarray(O-64,O)));for(R=O-64<D?R.subarray(O-64):new Uint8Array(0),m=R.length,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=0;O<m;O+=1)M[O>>2]|=R[O]<<(O%4<<3);if(M[O>>2]|=128<<(O%4<<3),O>55)for(i(w,M),O=0;O<16;O+=1)M[O]=0;return U=D*8,U=U.toString(16).match(/(.*?)(.{0,8})$/),b=parseInt(U[2],16),j=parseInt(U[1],16)||0,M[14]=b,M[15]=j,i(w,M),w}function g(R){var D="",w;for(w=0;w<4;w+=1)D+=r[R>>w*8+4&15]+r[R>>w*8&15];return D}function d(R){var D;for(D=0;D<R.length;D+=1)R[D]=g(R[D]);return R.join("")}d(f("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function R(D,w){return D=D|0||0,D<0?Math.max(D+w,0):Math.min(D,w)}ArrayBuffer.prototype.slice=function(D,w){var O=this.byteLength,m=R(D,O),M=O,U,b,j,z;return w!==n&&(M=R(w,O)),m>M?new ArrayBuffer(0):(U=M-m,b=new ArrayBuffer(U),j=new Uint8Array(b),z=new Uint8Array(this,m,U),j.set(z),b)}}();function p(R){return/[\u0080-\uFFFF]/.test(R)&&(R=unescape(encodeURIComponent(R))),R}function v(R,D){var w=R.length,O=new ArrayBuffer(w),m=new Uint8Array(O),M;for(M=0;M<w;M+=1)m[M]=R.charCodeAt(M);return D?m:O}function T(R){return String.fromCharCode.apply(null,new Uint8Array(R))}function E(R,D,w){var O=new Uint8Array(R.byteLength+D.byteLength);return O.set(new Uint8Array(R)),O.set(new Uint8Array(D),R.byteLength),O}function S(R){var D=[],w=R.length,O;for(O=0;O<w-1;O+=2)D.push(parseInt(R.substr(O,2),16));return String.fromCharCode.apply(String,D)}function C(){this.reset()}return C.prototype.append=function(R){return this.appendBinary(p(R)),this},C.prototype.appendBinary=function(R){this._buff+=R,this._length+=R.length;var D=this._buff.length,w;for(w=64;w<=D;w+=64)i(this._hash,o(this._buff.substring(w-64,w)));return this._buff=this._buff.substring(w-64),this},C.prototype.end=function(R){var D=this._buff,w=D.length,O,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M;for(O=0;O<w;O+=1)m[O>>2]|=D.charCodeAt(O)<<(O%4<<3);return this._finish(m,w),M=d(this._hash),R&&(M=S(M)),this.reset(),M},C.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},C.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},C.prototype.setState=function(R){return this._buff=R.buff,this._length=R.length,this._hash=R.hash,this},C.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},C.prototype._finish=function(R,D){var w=D,O,m,M;if(R[w>>2]|=128<<(w%4<<3),w>55)for(i(this._hash,R),w=0;w<16;w+=1)R[w]=0;O=this._length*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(O[2],16),M=parseInt(O[1],16)||0,R[14]=m,R[15]=M,i(this._hash,R)},C.hash=function(R,D){return C.hashBinary(p(R),D)},C.hashBinary=function(R,D){var w=f(R),O=d(w);return D?S(O):O},C.ArrayBuffer=function(){this.reset()},C.ArrayBuffer.prototype.append=function(R){var D=E(this._buff.buffer,R),w=D.length,O;for(this._length+=R.byteLength,O=64;O<=w;O+=64)i(this._hash,u(D.subarray(O-64,O)));return this._buff=O-64<w?new Uint8Array(D.buffer.slice(O-64)):new Uint8Array(0),this},C.ArrayBuffer.prototype.end=function(R){var D=this._buff,w=D.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m,M;for(m=0;m<w;m+=1)O[m>>2]|=D[m]<<(m%4<<3);return this._finish(O,w),M=d(this._hash),R&&(M=S(M)),this.reset(),M},C.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},C.ArrayBuffer.prototype.getState=function(){var R=C.prototype.getState.call(this);return R.buff=T(R.buff),R},C.ArrayBuffer.prototype.setState=function(R){return R.buff=v(R.buff,!0),C.prototype.setState.call(this,R)},C.ArrayBuffer.prototype.destroy=C.prototype.destroy,C.ArrayBuffer.prototype._finish=C.prototype._finish,C.ArrayBuffer.hash=function(R,D){var w=l(new Uint8Array(R)),O=d(w);return D?S(O):O},C})}(T0)),T0.exports}var Y4=q4();const Q4=rh(Y4),Z4=["lastShaderProgramBound","context","_openGLRenderWindow"];function J4(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,i)=>{let o=r;i.length>0&&(o=re.substitute(o,"VSOut","GSOut").result);const u=e._openGLRenderWindow.getWebgl2();let f=`
`,l=`#version 100
`;u?l=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(f=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(f+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),o=re.substitute(o,"//VTK::System::Dec",[`${l}
`,u?"":`#extension GL_OES_standard_derivatives : enable
`,f,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let g=re.substitute(n,"//VTK::System::Dec",[`${l}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(u){g=re.substitute(g,"varying","out").result,o=re.substitute(o,"varying","in").result;let p="",v=0;for(;o.includes(`gl_FragData[${v}]`);)o=re.substitute(o,`gl_FragData\\[${v}\\]`,`fragOutput${v}`).result,p+=`layout(location = ${v}) out vec4 fragOutput${v};
`,v++;o=re.substitute(o,"//VTK::Output::Dec",p).result}const d=re.substitute(i,"//VTK::System::Dec",l).result;return{VSSource:g,FSSource:o,GSSource:d}},t.readyShaderProgramArray=(n,r,i)=>{const o=t.replaceShaderValues(n,r,i),u=t.getShaderProgram(o.VSSource,o.FSSource,o.GSSource);return t.readyShaderProgram(u)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,i)=>{const o=`${n}${r}${i}`,u=Q4.hash(o);if(!(u in e.shaderPrograms)){const f=re.newInstance();return f.setContext(e.context),f.getVertexShader().setSource(n),f.getFragmentShader().setSource(r),i&&f.getGeometryShader().setSource(i),f.setMd5Hash(u),e.shaderPrograms[u]=f,f}return e.shaderPrograms[u]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const P4={lastShaderProgramBound:null,shaderPrograms:null,context:null};function PC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P4,n),e.shaderPrograms={},L.obj(t,e),L.setGet(t,e,Z4),L.moveToProtected(t,e,["openGLRenderWindow"]),J4(t,e)}const I4=L.newInstance(PC,"vtkShaderCache");var eG={newInstance:I4,extend:PC};const{vtkErrorMacro:tG}=L;function nG(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&tG("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const rG={context:null,numberOfTextureUnits:0,textureUnits:0};function IC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rG,n),L.obj(t,e),e.textureUnits=[],L.get(t,e,["numberOfTextureUnits"]),L.setGet(t,e,["context"]),nG(t,e)}const aG=L.newInstance(IC,"vtkOpenGLTextureUnitManager");var iG={newInstance:aG,extend:IC};function sG(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,i)=>{const o=i.getViewportByReference(),u=t.getFramebufferSize();return o[0]*u[0]<=n&&o[2]*u[0]>=n&&o[1]*u[1]<=r&&o[3]*u[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),i=t.getFramebufferSize();return[(r[2]-r[0])*i[0],(r[3]-r[1])*i[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,i)=>{const o=t.getFramebufferSize();return[n/o[0],r/o[1],i]},t.normalizedDisplayToDisplay=(n,r,i)=>{const o=t.getFramebufferSize();return[n*o[0],r*o[1],i]},t.worldToView=(n,r,i,o)=>o.worldToView(n,r,i),t.viewToWorld=(n,r,i,o)=>o.viewToWorld(n,r,i),t.worldToDisplay=(n,r,i,o)=>{const u=o.worldToView(n,r,i),f=t.getViewportSize(o),l=o.viewToProjection(u[0],u[1],u[2],f[0]/f[1]),g=o.projectionToNormalizedDisplay(l[0],l[1],l[2]);return t.normalizedDisplayToDisplay(g[0],g[1],g[2])},t.displayToWorld=(n,r,i,o)=>{const u=t.displayToNormalizedDisplay(n,r,i),f=o.normalizedDisplayToProjection(u[0],u[1],u[2]),l=t.getViewportSize(o),g=o.projectionToView(f[0],f[1],f[2],l[0]/l[1]);return o.viewToWorld(g[0],g[1],g[2])},t.normalizedDisplayToViewport=(n,r,i,o)=>{let u=o.getViewportByReference();u=t.normalizedDisplayToDisplay(u[0],u[1],0);const f=t.normalizedDisplayToDisplay(n,r,i);return[f[0]-u[0]-.5,f[1]-u[1]-.5,i]},t.viewportToNormalizedViewport=(n,r,i,o)=>{const u=t.getViewportSize(o);return u&&u[0]!==0&&u[1]!==0?[n/(u[0]-1),r/(u[1]-1),i]:[n,r,i]},t.normalizedViewportToViewport=(n,r,i,o)=>{const u=t.getViewportSize(o);return[n*(u[0]-1),r*(u[1]-1),i]},t.displayToLocalDisplay=(n,r,i)=>{const o=t.getFramebufferSize();return[n,o[1]-r-1,i]},t.viewportToNormalizedDisplay=(n,r,i,o)=>{let u=o.getViewportByReference();u=t.normalizedDisplayToDisplay(u[0],u[1],0);const f=n+u[0]+.5,l=r+u[1]+.5;return t.displayToNormalizedDisplay(f,l,i)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{L.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,i,o)=>{L.vtkErrorMacro("not implemented")},t.createSelector=()=>{L.vtkErrorMacro("not implemented")}}const oG={size:void 0,selector:void 0};function eE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oG,n),e.size||(e.size=[300,300]),L.getArray(t,e,["size"],2),L.get(t,e,["selector"]),at.extend(t,e,n),sG(t,e)}const uG=L.newInstance(eE,"vtkRenderWindowViewNode");var tE={newInstance:uG,extend:eE};const cG="__getUnderlyingContext";function fG(){const t=new Map,e={apply(i,o,u){return t.has(u[0])?t.get(u[0]):i.apply(o,u)}};function n(i){return{apply(o,u,f){return t.set(i,f[0]),o.apply(u,f)}}}const r=Object.create(null);return r.getParameter=(i,o,u,f)=>new Proxy(f.bind(i),e),r.depthMask=(i,o,u,f)=>new Proxy(f.bind(i),n(i.DEPTH_WRITEMASK)),{get(i,o,u){if(o===cG)return()=>i;let f=Reflect.get(i,o,i);f instanceof Function&&(f=f.bind(i));const l=r[o];return l?l(i,o,u,f):f}}}const{vtkDebugMacro:HT,vtkErrorMacro:$T}=L,lG={position:"absolute",top:0,left:0,width:"100%",height:"100%"},gG=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function zt(t,e,n){const r=t.createFramebuffer(),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),o===t.FRAMEBUFFER_COMPLETE}let ef=0;const nE=[];function hG(){ef++,nE.forEach(t=>t(ef))}function pG(){ef--,nE.forEach(t=>t(ef))}function WT(t){t.preventDefault()}function dG(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=fG()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",WT,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const i=[0,0];function o(){e.renderable&&(e.size[0]!==i[0]||e.size[1]!==i[1])&&(i[0]=e.size[0],i[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(o),t.buildPass=p=>{if(p){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(v=>{v.setOpenGLRenderWindow?.(t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&hG(),e.textureUnitManager=iG.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const p=e.context;p.blendFuncSeparate(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA),p.depthFunc(p.LEQUAL),p.enable(p.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=p=>{e.el&&e.el!==p&&(e.canvas.parentNode!==e.el&&$T("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==p&&(e.el=p,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:p,height:v}=e.el.getBoundingClientRect();e.containerSize=[p,v]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.activeFramebuffer?.getSize()||e.size,t.getPixelData=(p,v,T,E)=>{const S=new Uint8Array((T-p+1)*(E-v+1)*4);return e.context.readPixels(p,v,T-p+1,E-v+1,e.context.RGBA,e.context.UNSIGNED_BYTE,S),S},t.get3DContext=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},v=null;const T=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&T&&(v=e.canvas.getContext("webgl2",p),v&&(e.webgl2=!0,HT("using webgl2"))),v||(HT("using webgl1"),v=e.canvas.getContext("webgl",p)||e.canvas.getContext("experimental-webgl",p)),new Proxy(v,r())},t.get2DContext=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",p)},t.restoreContext=()=>{const p=Or.newInstance();p.setCurrentOperation("Release"),p.traverse(t,null)},t.activateTexture=p=>{const v=e._textureResourceIds.get(p);if(v!==void 0){e.context.activeTexture(e.context.TEXTURE0+v);return}const T=t.getTextureUnitManager().allocate();if(T<0){$T("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(p,T),e.context.activeTexture(e.context.TEXTURE0+T)},t.deactivateTexture=p=>{const v=e._textureResourceIds.get(p);v!==void 0&&(t.getTextureUnitManager().free(v),e._textureResourceIds.delete(p))},t.getTextureUnitForTexture=p=>{const v=e._textureResourceIds.get(p);return v!==void 0?v:-1},t.getDefaultTextureByteSize=function(p){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(p){case wt.CHAR:case wt.SIGNED_CHAR:case wt.UNSIGNED_CHAR:return 1;case v:case T:case wt.UNSIGNED_SHORT:case wt.SHORT:case wt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(p,v){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(p){case wt.UNSIGNED_CHAR:switch(v){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(T&&!E&&wt.UNSIGNED_SHORT):switch(v){case 1:return T.R16_EXT;case 2:return T.RG16_EXT;case 3:return T.RGB16_EXT;case 4:default:return T.RGBA16_EXT}case(T&&!E&&wt.SHORT):switch(v){case 1:return T.R16_SNORM_EXT;case 2:return T.RG16_SNORM_EXT;case 3:return T.RGB16_SNORM_EXT;case 4:default:return T.RGBA16_SNORM_EXT}case wt.UNSIGNED_SHORT:case wt.SHORT:case wt.FLOAT:default:switch(v){case 1:return E?e.context.R16F:e.context.R32F;case 2:return E?e.context.RG16F:e.context.RG32F;case 3:return E?e.context.RGB16F:e.context.RGB32F;case 4:default:return E?e.context.RGBA16F:e.context.RGBA32F}}switch(v){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=p=>{e.bgImage.src=p.src},t.setUseBackgroundImage=p=>{e.useBackgroundImage=p,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function u(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const v=document.createElement("canvas"),T=v.getContext("2d");v.width=e.canvas.width,v.height=e.canvas.height,T.drawImage(e.canvas,0,0);const E=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(D=>{D.getViewProps().forEach(O=>{if(O.getContainer){const M=O.getContainer().getElementsByTagName("canvas");for(let U=0;U<M.length;U++){const b=M[U],j=b.getBoundingClientRect(),z=j.x-E.x,A=j.y-E.y;T.drawImage(b,z,A)}}})});const R=v.toDataURL(p);v.remove(),t.invokeImageReady(R)}t.captureNextImage=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:v=!1,size:T=null,scale:E=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=p;const S=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:T||E!==1?T||e.size.map(C=>C*E):null},new Promise((C,R)=>{const D=t.onImageReady(w=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=S,D.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(O=>{let{restoreParamsFn:m,arg:M}=O;return m(M)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),C(w);else{const O=document.createElement("img");if(O.style=lG,O.src=w,e._screenshot.placeHolder=e.el.appendChild(O),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e.rootOpenGLRenderWindow?.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),v){const m=v!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(M=>{const U=M.getActiveCamera(),b=U.get("focalPoint","position","parallelScale");return{resetCameraArgs:m?{renderer:M}:void 0,resetCameraFn:m?v:M.resetCamera,restoreParamsFn:U.set,arg:JSON.parse(JSON.stringify(b))}}),e._screenshot.cameras.forEach(M=>{let{resetCameraFn:U,resetCameraArgs:b}=M;return U(b)})}t.traverseAllPasses()}})})};let f;t.getHardwareMaximumLineWidth=()=>{if(f!=null)return f;const p=t.get3DContext(),v=p.getParameter(p.ALIASED_LINE_WIDTH_RANGE);return f=v[1],v[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const p=t.get3DContext(),v=p.getExtension("OES_texture_float"),T=p.getExtension("OES_texture_half_float"),E=p.getExtension("WEBGL_debug_renderer_info"),S=p.getExtension("WEBGL_draw_buffers"),C=p.getExtension("EXT_texture_filter_anisotropic")||p.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),R=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",p.getParameter(p.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",p.getParameter(p.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",p.getParameter(p.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",p.getParameter(p.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",p.getParameter(p.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",p.getParameter(p.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",p.getParameter(p.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",p.getParameter(p.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",C&&p.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",p.getParameter(p.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",p.getParameter(p.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",p.getParameter(p.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",p.getParameter(p.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",p.getParameter(p.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",p.getParameter(p.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",p.getParameter(p.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",p.getParameter(p.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",p.getParameter(p.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",p.getParameter(p.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",p.getParameter(p.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",p.getParameter(p.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",p.getParameter(p.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[v&&zt(p,p.RGBA,p.UNSIGNED_BYTE)?"RGBA":"",v&&zt(p,p.RGB,p.UNSIGNED_BYTE)?"RGB":"",v&&zt(p,p.LUMINANCE,p.UNSIGNED_BYTE)?"LUMINANCE":"",v&&zt(p,p.ALPHA,p.UNSIGNED_BYTE)?"ALPHA":"",v&&zt(p,p.LUMINANCE_ALPHA,p.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[T&&zt(p,p.RGBA,T.HALF_FLOAT_OES)?"RGBA":"",T&&zt(p,p.RGB,T.HALF_FLOAT_OES)?"RGB":"",T&&zt(p,p.LUMINANCE,T.HALF_FLOAT_OES)?"LUMINANCE":"",T&&zt(p,p.ALPHA,T.HALF_FLOAT_OES)?"ALPHA":"",T&&zt(p,p.LUMINANCE_ALPHA,T.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[v&&zt(p,p.RGBA,p.FLOAT)?"RGBA":"",v&&zt(p,p.RGB,p.FLOAT)?"RGB":"",v&&zt(p,p.LUMINANCE,p.FLOAT)?"LUMINANCE":"",v&&zt(p,p.ALPHA,p.FLOAT)?"ALPHA":"",v&&zt(p,p.LUMINANCE_ALPHA,p.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",S?p.getParameter(S.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_FLOAT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.VERTEX_SHADER,p.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_INT).precision," (-2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_INT).rangeMin,"</sup> - 2<sup>",p.getShaderPrecisionFormat(p.FRAGMENT_SHADER,p.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",p.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",p.getParameter(p.RENDERER)],["WebGL Vendor","VENDOR",p.getParameter(p.VENDOR)],["WebGL Version","VERSION",p.getParameter(p.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",p.getParameter(p.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",E&&p.getParameter(E.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",E&&p.getParameter(E.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],D={};for(;R.length;){const[w,O,m]=R.pop();O&&(D[O]={label:w,value:m})}return e._glInformation=D,D},t.traverseAllPasses=()=>{if(e.renderPasses)for(let v=0;v<e.renderPasses.length;++v)e.renderPasses[v].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&u();const p=e.renderable.getChildRenderWindowsByReference();for(let v=0;v<p.length;++v)t.getViewNodeFor(p[v])?.traverseAllPasses()},t.copyParentContent=()=>{const p=e.rootOpenGLRenderWindow;if(!p||!e.context2D||e.children.some(E=>!!E.getSelector?.()))return;const v=p.getCanvas(),T=e.canvas;e.context2D.drawImage(v,0,v.height-T.height,T.width,T.height,0,0,T.width,T.height)},t.resizeFromChildRenderWindows=()=>{const p=e.renderable.getChildRenderWindowsByReference();if(p.length>0){const v=[0,0];for(let T=0;T<p.length;++T){const E=t.getViewNodeFor(p[T])?.getSize();E&&(v[0]=E[0]>v[0]?E[0]:v[0],v[1]=E[1]>v[1]?E[1]:v[1])}t.setSize(...v)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=p=>{if(e.viewStream===p)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=p,e.viewStream){const v=e.renderable.getRenderers()[0];v.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(T=>t.setBackgroundImage(T.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const p=JC.newInstance();return p.setOpenGLRenderWindow(t),p};function l(){e.canvas.removeEventListener("webglcontextlost",WT),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=L.chain(()=>{e.context&&pG(),t.setContainer(),t.setViewStream()},l,t.delete),t.setActiveFramebuffer=p=>{e.activeFramebuffer=p};const g=t.setSize;t.setSize=(p,v)=>{const T=g(p,v);return T&&t.invokeWindowResizeEvent({width:p,height:v}),T},t.registerGraphicsResourceUser=(p,v)=>{e._graphicsResources.has(p)||t.setGraphicsResourceForObject(p,null,null),e._graphicsResources.get(p)?.users.add(v)},t.unregisterGraphicsResourceUser=(p,v)=>{const T=e._graphicsResources.get(p);T&&(T.users.delete(v),T.users.size||(T.oglObject?.releaseGraphicsResources(t),e._graphicsResources.delete(p)))},t.getGraphicsResourceForObject=p=>e._graphicsResources.get(p),t.setGraphicsResourceForObject=(p,v,T)=>{if(!p)return;const E=e._graphicsResources.get(p);E?.oglObject?.releaseGraphicsResources(t),e._graphicsResources.set(p,{coreObject:p,oglObject:v,hash:T,users:E?.users??new Set})},t.getGraphicsMemoryInfo=()=>{let p=0;return e._graphicsResources.forEach(v=>{let{oglObject:T}=v;p+=T.getAllocatedGPUMemoryInBytes()}),p},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(p=>{let{oglObject:v}=p;v.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(p=>{t.getViewNodeFor(p)?.releaseGraphicsResources()})};const d={...t};gG.forEach(p=>{t[p]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[p](...arguments):d[p](...arguments)}})}const yG={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function vG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yG,n),tE.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=JC.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=pM.newInstance(),e.shaderCache=eG.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=L4.newInstance(),L.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),L.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),L.setGetArray(t,e,["size"],2),L.event(t,e,"imageReady"),L.event(t,e,"windowResizeEvent"),dG(t,e)}const rE=L.newInstance(vG,"vtkOpenGLRenderWindow");$h("WebGL",rE);wn("vtkRenderWindow",rE);const S0=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];function TG(t,e){e.classHierarchy.push("vtkWebGPURenderEncoder"),t.begin=n=>{e.drawCallbacks=[],e.handle=n.beginRenderPass(e.description),e.label&&e.handle.pushDebugGroup(e.label)},t.end=()=>{for(let n=0;n<e.drawCallbacks.length;n++){const r=e.drawCallbacks[n],i=r.pipeline;t.setPipeline(i);for(let o=0;o<r.callbacks.length;o++)r.callbacks[o](t)}e.label&&e.handle.popDebugGroup(),e.handle.end(),e.boundPipeline=null},t.setPipeline=n=>{if(e.boundPipeline===n)return;e.handle.setPipeline(n.getHandle());const r=n.getPipelineDescription();if(e.colorTextureViews.length!==r.fragment.targets.length)console.log(`mismatched attachment counts on pipeline ${r.fragment.targets.length} while encoder has ${e.colorTextureViews.length}`),console.trace();else for(let i=0;i<e.colorTextureViews.length;i++){const o=e.colorTextureViews[i].getTexture()?.getFormat();o&&o!==r.fragment.targets[i].format&&(console.log(`mismatched attachments for attachment ${i} on pipeline ${r.fragment.targets[i].format} while encoder has ${o}`),console.trace())}if(!e.depthTextureView!=!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(e.depthTextureView){const i=e.depthTextureView.getTexture()?.getFormat();i&&i!==r.depthStencil.format&&(console.log(`mismatched depth attachments on pipeline ${r.depthStencil.format} while encoder has ${i}`),console.trace())}e.boundPipeline=n},t.replaceShaderCode=n=>{e.replaceShaderCodeFunction(n)},t.setColorTextureView=(n,r)=>{e.colorTextureViews[n]!==r&&(e.colorTextureViews[n]=r)},t.activateBindGroup=n=>{const r=e.boundPipeline.getDevice(),i=e.boundPipeline.getBindGroupLayoutCount(n.getLabel());e.handle.setBindGroup(i,n.getBindGroup(r));const o=r.getBindGroupLayoutDescription(n.getBindGroupLayout(r)),u=r.getBindGroupLayoutDescription(e.boundPipeline.getBindGroupLayout(i));o!==u&&(console.log(`renderEncoder ${e.pipelineHash} mismatched bind group layouts bind group has
${o}
 versus pipeline
${u}
`),console.trace())},t.attachTextureViews=()=>{for(let n=0;n<e.colorTextureViews.length;n++)e.description.colorAttachments[n]?e.description.colorAttachments[n].view=e.colorTextureViews[n].getHandle():e.description.colorAttachments[n]={view:e.colorTextureViews[n].getHandle()};e.depthTextureView&&(e.description.depthStencilAttachment.view=e.depthTextureView.getHandle())},t.registerDrawCallback=(n,r)=>{for(let i=0;i<e.drawCallbacks.length;i++)if(e.drawCallbacks[i].pipeline===n){e.drawCallbacks[i].callbacks.push(r);return}e.drawCallbacks.push({pipeline:n,callbacks:[r]})};for(let n=0;n<S0.length;n++)t[S0[n]]=function(){return e.handle[S0[n]](...arguments)}}const SG={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function aE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SG,n),mt(t,e),e.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},e.replaceShaderCodeFunction=r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let o=i.getCode();o=ve.substitute(o,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,i.setCode(o)},e.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},e.colorTextureViews=[],Wt(t,e,["boundPipeline","colorTextureViews"]),vt(t,e,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),TG(t,e)}const xG=Xe(aE,"vtkWebGPURenderEncoder");var Cr={newInstance:xG,extend:aE};function CG(t,e){e.classHierarchy.push("vtkWebGPUOpaquePass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.renderEncoder)e.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),e.depthTexture.resize(r.getCanvas().width,r.getCanvas().height);else{t.createRenderEncoder(),e.colorTexture=Pn.newInstance({label:"opaquePassColor"}),e.colorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const o=e.colorTexture.createView("opaquePassColorTexture");e.renderEncoder.setColorTextureView(0,o),e.depthFormat="depth32float",e.depthTexture=Pn.newInstance({label:"opaquePassDepth"}),e.depthTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:e.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});const u=e.depthTexture.createView("opaquePassDepthTexture");e.renderEncoder.setDepthTextureView(u)}e.renderEncoder.attachTextureViews(),t.setCurrentOperation("opaquePass"),n.setRenderEncoder(e.renderEncoder),n.traverse(t)},t.getColorTextureView=()=>e.renderEncoder.getColorTextureViews()[0],t.getDepthTextureView=()=>e.renderEncoder.getDepthTextureView(),t.createRenderEncoder=()=>{e.renderEncoder=Cr.newInstance({label:"OpaquePass"}),e.renderEncoder.setPipelineHash("op")}}const EG={renderEncoder:null,colorTexture:null,depthTexture:null};function iE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EG,n),Or.extend(t,e,n),L.get(t,e,["colorTexture","depthTexture"]),CG(t,e)}const wG=L.newInstance(iE,"vtkWebGPUOpaquePass");var OG={newInstance:wG,extend:iE};const RG=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));
  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;
  if (reveal == 1.0) { discard; }
  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);
  var total: f32 = max(tcolor.a, 0.01);
  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function mG(t,e){e.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r;const i=r.getDevice();if(e.translucentRenderEncoder)e.translucentColorTexture.resizeToMatch(e.colorTextureView.getTexture()),e.translucentAccumulateTexture.resizeToMatch(e.colorTextureView.getTexture());else{t.createRenderEncoder(),t.createFinalEncoder(),e.translucentColorTexture=Pn.newInstance({label:"translucentPassColor"}),e.translucentColorTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=e.translucentColorTexture.createView("oitpColorTexture");e.translucentRenderEncoder.setColorTextureView(0,o),e.translucentAccumulateTexture=Pn.newInstance({label:"translucentPassAccumulate"}),e.translucentAccumulateTexture.create(i,{width:r.getCanvas().width,height:r.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const u=e.translucentAccumulateTexture.createView("oitpAccumTexture");e.translucentRenderEncoder.setColorTextureView(1,u),e.fullScreenQuad=Ji.newInstance(),e.fullScreenQuad.setDevice(r.getDevice()),e.fullScreenQuad.setPipelineHash("oitpfsq"),e.fullScreenQuad.setTextureViews(e.translucentRenderEncoder.getColorTextureViews()),e.fullScreenQuad.setFragmentShaderTemplate(RG)}e.translucentRenderEncoder.setDepthTextureView(e.depthTextureView),e.translucentRenderEncoder.attachTextureViews(),t.setCurrentOperation("translucentPass"),n.setRenderEncoder(e.translucentRenderEncoder),n.traverse(t),t.finalPass(r,n)},t.finalPass=(n,r)=>{e.translucentFinalEncoder.setColorTextureView(0,e.colorTextureView),e.translucentFinalEncoder.attachTextureViews(),e.translucentFinalEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e.translucentFinalEncoder),e.fullScreenQuad.prepareAndDraw(e.translucentFinalEncoder),e.translucentFinalEncoder.end()},t.getTextures=()=>[e.translucentColorTexture,e.translucentAccumulateTexture],t.createRenderEncoder=()=>{e.translucentRenderEncoder=Cr.newInstance({label:"translucentRender"});const n=e.translucentRenderEncoder.getDescription();n.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],n.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},e.translucentRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor"),i.addOutput("f32","outAccum"),i.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let o=i.getCode();o=ve.substitute(o,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,i.setCode(o)}),e.translucentRenderEncoder.setPipelineHash("oitpr"),e.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcFactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createFinalEncoder=()=>{e.translucentFinalEncoder=Cr.newInstance({label:"translucentFinal"}),e.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e.translucentFinalEncoder.setReplaceShaderCodeFunction(n=>{const r=n.getShaderDescription("fragment");r.addOutput("vec4<f32>","outColor"),r.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");let i=r.getCode();i=ve.substitute(i,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,r.setCode(i)}),e.translucentFinalEncoder.setPipelineHash("oitpf"),e.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}const MG={colorTextureView:null,depthTextureView:null};function sE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MG,n),Or.extend(t,e,n),L.setGet(t,e,["colorTextureView","depthTextureView"]),mG(t,e)}const DG=L.newInstance(sE,"vtkWebGPUOrderIndependentTranslucentPass");var _G={newInstance:DG,extend:sE};const Wi={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4},LG=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::Volume::TraverseDec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

fn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32
{
  // todo multicomponent support
  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;
}

fn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>
{
  var result: vec4<f32>;

  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;
  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;
  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;
  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;
  result.w = 0.0;

  // divide by spacing as that is our delta
  result = result / volumeSSBO.values[vNum].spacing;
  // now we have a gradient in unit tcoords

  var grad: f32 = length(result.xyz);
  if (grad > 0.0)
  {
    // rotate to View Coords, needed for lighting and shading
    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;
    result = nMat * result;
    result = result / length(result);
  }

  // store gradient magnitude in .w
  result.w = grad;

  return result;
}

fn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>
{
  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);

  // convert to tcoords and reject if outside the volume
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;
  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||
      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }

  var scalar: f32 = getTextureValue(vTex, tpos);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);

  var gofactor: f32 = 1.0;
  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);
  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    normal = getGradient(vTex, tpos, vNum, scalar);
    if (componentSSBO.values[cNum].gomin <  1.0)
    {
      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,
      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);
    }
  }

  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;

  if (volumeSSBO.values[vNum].shade[0] > 0.0)
  {
    color = color*abs(normal.z);
  }

  outColor = vec4<f32>(color.rgb, gofactor * opacity);

  return outColor;
}

// adjust the start and end point of a raycast such that it intersects the unit cube.
// This function is used to take a raycast starting point and step vector
// and numSteps and return the startijng and ending steps for intersecting the
// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates
// that have valid values. So this funtion can be used to take a ray in texture coordinates
// and bound it to intersecting the texture.
//
fn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>
{
  var result: vec2<f32> = vec2<f32>(0.0, numSteps);
  var tpos2: vec4<f32> = tpos + tstep*numSteps;

  // move tpos to the start of the volume
  var adjust: f32 =
    min(
      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),
      min(
        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),
        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));
  if (adjust < 0.0)
  {
    result.x = result.x - adjust;
  }

  // adjust length to the end
  adjust =
    max(
      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),
      max(
        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),
        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));
  if (adjust > 0.0)
  {
    result.y = result.y - adjust;
  }

  return result;
}

fn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>
{
  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var coord: vec2<f32> =
    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,
      (0.5 + 2.0 * f32(vNum)) / tfunRows);
  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);
  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);
  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;
  return vec4<f32>(color.rgb, opacity);
}

fn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var maxVal: f32 = -1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar > maxVal)
    {
      maxVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);
}

fn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var minVal: f32 = 1.0e37;
  loop
  {
    var scalar: f32 = getTextureValue(vTex, tpos);
    if (scalar < minVal)
    {
      minVal = scalar;
    }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);
}

fn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var avgVal: f32 = 0.0;
  var sampleCount: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      avgVal = avgVal + sample;
      sampleCount = sampleCount + 1.0;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  if (sampleCount <= 0.0)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);
}

fn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)
{
  // convert to tcoords and reject if outside the volume
  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;
  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;
  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);
  var tstep: vec4<f32> = tpos2 - tpos;

  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);

  // did we hit anything
  if (rayBounds.x >= rayBounds.y)
  {
    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);
    return;
  }

  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;
  tpos = tpos + tstep*rayBounds.x;
  var curDist: f32 = rayBounds.x;
  var sumVal: f32 = 0.0;
  loop
  {
    var sample: f32 = getTextureValue(vTex, tpos);
    // right now leave filtering off until WebGL changes get merged
    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)
    // {
      sumVal = sumVal + sample;
    // }

    // increment position
    curDist = curDist + 1.0;
    tpos = tpos + tstep;

    // check if we have reached a terminating condition
    if (curDist > rayBounds.y) { break; }
  }

  // process to get the color and opacity
  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);
}

fn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>
{
  // initial ray position is at the beginning
  var rayPosSC: vec4<f32> = minPosSC;

  // how many rows (tfuns) do we have in our tfunTexture
  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);

  var curDist: f32 = 0.0;
  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);
  var sampleColor: vec4<f32>;
//VTK::Volume::TraverseCalls

  loop
  {
    // for each volume, sample and accumulate color
//VTK::Volume::CompositeCalls

    // increment position
    curDist = curDist + mapperUBO.SampleDistance;
    rayPosSC = rayPosSC + rayStepSC;

    // check if we have reached a terminating condition
    if (curDist > rayLengthSC) { break; }
    if (computedColor.a > 0.98) { break; }
  }
  return computedColor;
}

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;
  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;

  // discard empty rays
  if (rayMax <= rayMin) { discard; }
  else
  {
    // compute start and end ray positions in view coordinates
    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);
    minPosSC = minPosSC * (1.0 / minPosSC.w);
    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);
    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);

    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);
    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);
    rayStepSC.w = 0.0;

    var computedColor: vec4<f32>;

//VTK::Volume::Loop

//VTK::RenderEncoder::Impl
  }

  return output;
}
`,At=new Float64Array(16),Ir=new Float64Array(16);function VG(t,e){e.classHierarchy.push("vtkWebGPUVolumePassFSQ"),t.replaceShaderPosition=(i,o,u)=>{const f=o.getShaderDescription("vertex");f.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let l=f.getCode();l=ve.substitute(l,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,f.setCode(l),o.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderVolume=(i,o,u)=>{const f=o.getShaderDescription("fragment");let l=f.getCode();const g=[],d=[];for(let v=0;v<e.volumes.length;v++)e.volumes[v].getRenderable().getMapper().getBlendMode()===Wi.COMPOSITE_BLEND?(g.push(`    sampleColor = processVolume(volTexture${v}, ${v}, ${e.rowStarts[v]}, rayPosSC, tfunRows);`),g.push(`    computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`)):(d.push(`  sampleColor = traverseVals[${v}];`),d.push(`  computedColor = vec4<f32>(
          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,
          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);`));l=ve.substitute(l,"//VTK::Volume::CompositeCalls",g).result,l=ve.substitute(l,"//VTK::Volume::TraverseCalls",d).result,l=ve.substitute(l,"//VTK::Volume::TraverseDec",[`var<private> traverseVals: array<vec4<f32>,${e.volumes.length}>;`]).result;let p=!1;for(let v=0;v<e.volumes.length;v++){const T=e.volumes[v].getRenderable().getMapper().getBlendMode();T===Wi.COMPOSITE_BLEND?p=!0:T===Wi.MAXIMUM_INTENSITY_BLEND?l=ve.substitute(l,"//VTK::Volume::Loop",[`    traverseMax(volTexture${v}, ${v}, ${v}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${v}];`,"//VTK::Volume::Loop"]).result:T===Wi.MINIMUM_INTENSITY_BLEND?l=ve.substitute(l,"//VTK::Volume::Loop",[`    traverseMin(volTexture${v}, ${v}, ${v}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${v}];`,"//VTK::Volume::Loop"]).result:T===Wi.AVERAGE_INTENSITY_BLEND?l=ve.substitute(l,"//VTK::Volume::Loop",[`    traverseAverage(volTexture${v}, ${v}, ${v}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${v}];`,"//VTK::Volume::Loop"]).result:T===Wi.ADDITIVE_INTENSITY_BLEND&&(l=ve.substitute(l,"//VTK::Volume::Loop",[`    traverseAdditive(volTexture${v}, ${v}, ${v}, rayLengthSC, minPosSC, rayStepSC);`,`    computedColor = traverseVals[${v}];`,"//VTK::Volume::Loop"]).result)}p&&(l=ve.substitute(l,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),f.setCode(l)},e.shaderReplacements.set("replaceShaderVolume",t.replaceShaderVolume),t.updateLUTImage=i=>{let o=t.getMTime();for(let p=0;p<e.volumes.length;p++){const v=e.volumes[p].getRenderable(),T=v.getMapper().getInputData();o=Math.max(o,v.getMTime(),T.getMTime())}if(o<e.lutBuildTime.getMTime())return;e.numRows=0,e.rowStarts=[];for(let p=0;p<e.volumes.length;p++){e.rowStarts.push(e.numRows);const T=e.volumes[p].getRenderable(),E=T.getMapper(),S=T.getProperty(),C=E.getInputData(),D=(C.getPointData()&&C.getPointData().getScalars()).getNumberOfComponents(),O=S.getIndependentComponents()?D:1;e.numRows+=O}const u=new Uint8ClampedArray(e.numRows*2*e.rowLength*4),f=new Float32Array(e.numRows*2*e.rowLength);let l=0;const g=new Float32Array(e.rowLength*3),d=e.rowLength;for(let p=0;p<e.volumes.length;p++){const T=e.volumes[p].getRenderable(),E=T.getMapper(),S=T.getProperty(),C=E.getInputData(),D=(C.getPointData()&&C.getPointData().getScalars()).getNumberOfComponents(),O=S.getIndependentComponents()?D:1;for(let m=0;m<O;++m){const M=S.getRGBTransferFunction(m),U=M.getRange();M.getTable(U[0],U[1],d,g,1);let b=l*d*4;for(let K=0;K<d;++K){u[b+K*4]=255*g[K*3],u[b+K*4+1]=255*g[K*3+1],u[b+K*4+2]=255*g[K*3+2],u[b+K*4+3]=255;for(let Y=0;Y<4;Y++)u[b+(d+K)*4+Y]=u[b+K*4+Y]}const j=S.getScalarOpacity(m),z=e.sampleDist/S.getScalarOpacityUnitDistance(m),A=j.getRange();j.getTable(A[0],A[1],d,g,1),b=l*d;for(let K=0;K<d;++K)f[b+K]=1-(1-g[K])**z,f[b+K+d]=f[b+K];l+=2}}{const p={nativeArray:u,width:e.rowLength,height:e.numRows*2,depth:1,format:"rgba8unorm"},T=i.getTextureManager().getTexture(p).createView("tfunTexture");e.textureViews[2]=T}{const p={nativeArray:f,width:e.rowLength,height:e.numRows*2,depth:1,format:"r16float"},T=i.getTextureManager().getTexture(p).createView("ofunTexture");e.textureViews[3]=T}e.lutBuildTime.modified()},t.updateSSBO=i=>{let o=Math.max(t.getMTime(),e.WebGPURenderer.getStabilizedTime());for(let M=0;M<e.volumes.length;M++){const U=e.volumes[M].getRenderable(),b=U.getMapper(),j=b.getInputData();o=Math.max(o,U.getMTime(),j.getMTime(),b.getMTime())}if(o<e.SSBO.getSendTime())return;const u=e.WebGPURenderer.getStabilizedCenterByReference();e.SSBO.clearData(),e.SSBO.setNumberOfInstances(e.volumes.length);const f=new Float64Array(e.volumes.length*16),l=new Float64Array(e.volumes.length*16),g=new Float64Array(e.volumes.length*4),d=new Float64Array(e.volumes.length*4),p=new Float64Array(e.volumes.length*4),v=new Float64Array(e.volumes.length*4);for(let M=0;M<e.volumes.length;M++){const b=e.volumes[M].getRenderable(),z=b.getMapper().getInputData();Re(At),ct(At,At,u);const A=b.getMatrix();Qe(Ir,A),$t(Ir,Ir),yt(At,Ir,At);const K=z.getWorldToIndex();yt(At,K,At);const Y=z.getDimensions();Re(Ir),Xa(Ir,Ir,[1/Y[0],1/Y[1],1/Y[2]]),yt(At,Ir,At);for(let P=0;P<16;P++)f[M*16+P]=At[P];$t(At,At);for(let P=0;P<4;P++)l[M*16+P*4]=At[P*4],l[M*16+P*4+1]=At[P*4+1],l[M*16+P*4+2]=At[P*4+2],l[M*16+P*4+3]=0;g[M*4]=1/Y[0],g[M*4+1]=1/Y[1],g[M*4+2]=1/Y[2],g[M*4+3]=1,d[M*4]=b.getProperty().getShade()?1:0;const Z=z.getSpacing();p[M*4]=Z[0],p[M*4+1]=Z[1],p[M*4+2]=Z[2],p[M*4+3]=1;const se=e.textureViews[M+4].getTexture().getScale(),F=b.getProperty().getIpScalarRange();v[M*4]=F[0]/se,v[M*4+1]=F[1]/se,v[M*4+2]=b.getProperty().getFilterMode()}e.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),e.SSBO.addEntry("planeNormals","mat4x4<f32>"),e.SSBO.addEntry("shade","vec4<f32>"),e.SSBO.addEntry("tstep","vec4<f32>"),e.SSBO.addEntry("spacing","vec4<f32>"),e.SSBO.addEntry("ipScalarRange","vec4<f32>"),e.SSBO.setAllInstancesFromArray("SCTCMatrix",f),e.SSBO.setAllInstancesFromArray("planeNormals",l),e.SSBO.setAllInstancesFromArray("shade",d),e.SSBO.setAllInstancesFromArray("tstep",g),e.SSBO.setAllInstancesFromArray("spacing",p),e.SSBO.setAllInstancesFromArray("ipScalarRange",v),e.SSBO.send(i),e.componentSSBO.clearData(),e.componentSSBO.setNumberOfInstances(e.numRows);const T=new Float64Array(e.numRows),E=new Float64Array(e.numRows),S=new Float64Array(e.numRows),C=new Float64Array(e.numRows),R=new Float64Array(e.numRows),D=new Float64Array(e.numRows),w=new Float64Array(e.numRows),O=new Float64Array(e.numRows);let m=0;for(let M=0;M<e.volumes.length;M++){const b=e.volumes[M].getRenderable(),j=b.getMapper(),z=b.getProperty(),A=j.getInputData(),Y=(A.getPointData()&&A.getPointData().getScalars()).getNumberOfComponents(),Z=z.getIndependentComponents(),se=e.textureViews[M+4].getTexture().getFormat(),F=Ot.getDetailsFromTextureFormat(se),P=F.elementSize===2&&F.sampleType==="float",ie={scale:[255],offset:[0]};P&&(ie.scale[0]=1);for(let I=0;I<Y;I++){const B=Z?I:0,q=ie.scale[I],J=z.getScalarOpacity(B).getRange(),ue=q/(J[1]-J[0]),pe=(ie.offset[I]-J[0])/(J[1]-J[0]);C[m]=pe,S[m]=ue;const ze=z.getRGBTransferFunction(B).getRange();if(E[m]=(ie.offset[I]-ze[0])/(ze[1]-ze[0]),T[m]=q/(ze[1]-ze[0]),z.getUseGradientOpacity(B)){const et=z.getGradientOpacityMinimumOpacity(B),Bt=z.getGradientOpacityMaximumOpacity(B);R[m]=et,D[m]=Bt;const cn=[z.getGradientOpacityMinimumValue(B),z.getGradientOpacityMaximumValue(B)];O[m]=q*(Bt-et)/(cn[1]-cn[0]),w[m]=-cn[0]*(Bt-et)/(cn[1]-cn[0])+et}else R[m]=1,D[m]=1,O[m]=0,w[m]=1;m++}}e.componentSSBO.addEntry("cScale","f32"),e.componentSSBO.addEntry("cShift","f32"),e.componentSSBO.addEntry("oScale","f32"),e.componentSSBO.addEntry("oShift","f32"),e.componentSSBO.addEntry("goShift","f32"),e.componentSSBO.addEntry("goScale","f32"),e.componentSSBO.addEntry("gomin","f32"),e.componentSSBO.addEntry("gomax","f32"),e.componentSSBO.setAllInstancesFromArray("cScale",T),e.componentSSBO.setAllInstancesFromArray("cShift",E),e.componentSSBO.setAllInstancesFromArray("oScale",S),e.componentSSBO.setAllInstancesFromArray("oShift",C),e.componentSSBO.setAllInstancesFromArray("goScale",O),e.componentSSBO.setAllInstancesFromArray("goShift",w),e.componentSSBO.setAllInstancesFromArray("gomin",R),e.componentSSBO.setAllInstancesFromArray("gomax",D),e.componentSSBO.send(i)};const n=t.updateBuffers;t.updateBuffers=()=>{n();let i=e.volumes[0].getRenderable().getMapper().getSampleDistance();for(let o=0;o<e.volumes.length;o++){const l=e.volumes[o].getRenderable().getMapper().getSampleDistance();l<i&&(i=l)}e.sampleDist!==i&&(e.sampleDist=i,e.UBO.setValue("SampleDistance",i),e.UBO.sendIfNeeded(e.device));for(let o=0;o<e.volumes.length;o++){const g=e.volumes[o].getRenderable().getMapper().getInputData(),d=e.device.getTextureManager().getTextureForImageData(g);if(!e.textureViews[o+4]||e.textureViews[o+4].getTexture()!==d){const p=d.createView(`volTexture${o}`);e.textureViews[o+4]=p}}if(e.volumes.length<e.lastVolumeLength)for(let o=e.volumes.length;o<e.lastVolumeLength;o++)e.textureViews.pop();e.lastVolumeLength=e.volumes.length,t.updateLUTImage(e.device),t.updateSSBO(e.device),e.clampSampler||(e.clampSampler=Hh.newInstance({label:"clampSampler"}),e.clampSampler.create(e.device,{minFilter:"linear",magFilter:"linear"}))},t.computePipelineHash=()=>{e.pipelineHash="volfsq";for(let i=0;i<e.volumes.length;i++){const o=e.volumes[i].getRenderable().getMapper().getBlendMode();e.pipelineHash+=`${o}`}},t.setVolumes=i=>{if(!e.volumes||e.volumes.length!==i.length){e.volumes=[...i],t.modified();return}for(let o=0;o<i.length;o++)if(i[o]!==e.volumes[o]){e.volumes=[...i],t.modified();return}};const r=t.getBindables;t.getBindables=()=>{const i=r();return i.push(e.componentSSBO),i.push(e.clampSampler),i}}const BG={volumes:null,rowLength:1024,lastVolumeLength:0};function oE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BG,n),Ji.extend(t,e,n),e.fragmentShaderTemplate=LG,e.UBO=ja.newInstance({label:"mapperUBO"}),e.UBO.addEntry("SampleDistance","f32"),e.SSBO=Y0.newInstance({label:"volumeSSBO"}),e.componentSSBO=Y0.newInstance({label:"componentSSBO"}),e.lutBuildTime={},L.obj(e.lutBuildTime,{mtime:0}),VG(t,e)}const UG=L.newInstance(oE,"vtkWebGPUVolumePassFSQ");var NG={newInstance:UG,extend:oE};const{Representation:bG}=ns,{BufferUsage:jT,PrimitiveTypes:GG}=ei,x0=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],FG=`
//VTK::Renderer::Dec

//VTK::Select::Dec

//VTK::VolumePass::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Select::Impl

  //VTK::TCoord::Impl

  //VTK::VolumePass::Impl

  // use the maximum (closest) of the current value and the zbuffer
  // the blend func will then take the min to find the farthest stop value
  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));

  //VTK::RenderEncoder::Impl
  return output;
}
`,kG=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,
    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function zG(t,e){e.classHierarchy.push("vtkWebGPUVolumePass"),t.initialize=n=>{e._clearEncoder||t.createClearEncoder(n),e._mergeEncoder||t.createMergeEncoder(n),e._copyEncoder||t.createCopyEncoder(n),e._depthRangeEncoder||t.createDepthRangeEncoder(n),e.fullScreenQuad||(e.fullScreenQuad=NG.newInstance(),e.fullScreenQuad.setDevice(n.getDevice()),e.fullScreenQuad.setTextureViews([...e._depthRangeEncoder.getColorTextureViews()])),e._volumeCopyQuad||(e._volumeCopyQuad=Ji.newInstance(),e._volumeCopyQuad.setPipelineHash("volpassfsq"),e._volumeCopyQuad.setDevice(n.getDevice()),e._volumeCopyQuad.setFragmentShaderTemplate(kG),e._copyUBO=ja.newInstance({label:"mapperUBO"}),e._copyUBO.addEntry("tscale","vec2<f32>"),e._volumeCopyQuad.setUBO(e._copyUBO),e._volumeCopyQuad.setTextureViews([e._colorTextureView]))},t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=r,t.initialize(r),t.computeTiming(r),t.renderDepthBounds(n,r),e._firstGroup=!0;const i=r.getDevice(),o=i.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(e.volumes.length>o){const u=n.getRenderable().getActiveCamera().getPosition(),f=[];for(let p=0;p<e.volumes.length;p++){const v=e.volumes[p].getRenderable().getBounds(),T=[.5*(v[1]+v[0]),.5*(v[3]+v[2]),.5*(v[5]+v[4])];f[p]=qn(T,u)}const l=[...Array(e.volumes.length).keys()];l.sort((p,v)=>f[v]-f[p]);let g=[],d=l.length%o;for(let p=0;p<l.length;p++)g.push(e.volumes[l[p]]),g.length>=d&&(t.rayCastPass(r,n,g),g=[],d=o,e._firstGroup=!1)}else t.rayCastPass(r,n,e.volumes);if(e._volumeCopyQuad.setWebGPURenderer(n),e._useSmallViewport){const u=e._colorTextureView.getTexture().getWidth(),f=e._colorTextureView.getTexture().getHeight();e._copyUBO.setArray("tscale",[e._smallViewportWidth/u,e._smallViewportHeight/f])}else e._copyUBO.setArray("tscale",[1,1]);e._copyUBO.sendIfNeeded(i),e._copyEncoder.setColorTextureView(0,e.colorTextureView),e._copyEncoder.attachTextureViews(),e._copyEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(e._copyEncoder),e._volumeCopyQuad.prepareAndDraw(e._copyEncoder),e._copyEncoder.end()},t.delete=L.chain(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.computeTiming=n=>{const r=n.getRenderable().getInteractor();if(e._lastScale==null){const i=e.volumes[0].getRenderable().getMapper();e._lastScale=i.getInitialInteractionScale()||1}e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{const i=e.volumes[0].getRenderable().getMapper();if(i.getAutoAdjustSampleDistances()){const o=r.getRecentAnimationFrameRate(),u=e._lastScale*r.getDesiredUpdateRate()/o;e._lastScale=u,e._lastScale>400&&(e._lastScale=400)}else e._lastScale=i.getImageSampleDistance()*i.getImageSampleDistance();e._lastScale<1.5&&(e._lastScale=1.5)}))},t.rayCastPass=(n,r,i)=>{const o=e._firstGroup?e._clearEncoder:e._mergeEncoder;o.attachTextureViews(),o.begin(n.getCommandEncoder());let u=e._colorTextureView.getTexture().getWidth(),f=e._colorTextureView.getTexture().getHeight();if(e._useSmallViewport){const l=n.getCanvas(),g=1/Math.sqrt(e._lastScale);e._smallViewportWidth=Math.ceil(g*l.width),e._smallViewportHeight=Math.ceil(g*l.height),u=e._smallViewportWidth,f=e._smallViewportHeight}o.getHandle().setViewport(0,0,u,f,0,1),o.getHandle().setScissorRect(0,0,u,f),e.fullScreenQuad.setWebGPURenderer(r),e.fullScreenQuad.setVolumes(i),e.fullScreenQuad.prepareAndDraw(o),o.end()},t.renderDepthBounds=(n,r)=>{t.updateDepthPolyData(n);const i=e._boundsPoly,o=i.getPoints(),u=i.getPolys();let f={hash:`vp${u.getMTime()}`,usage:jT.Index,cells:u,numberOfPoints:o.getNumberOfPoints(),primitiveType:GG.Triangles,representation:bG.SURFACE};const l=r.getDevice().getBufferManager().getBuffer(f);e._mapper.getVertexInput().setIndexBuffer(l),f={usage:jT.PointArray,format:"float32x4",hash:`vp${o.getMTime()}${u.getMTime()}`,dataArray:o,indexBuffer:l,packExtra:!0};const g=r.getDevice().getBufferManager().getBuffer(f);e._mapper.getVertexInput().addBuffer(g,["vertexBC"]),e._mapper.setNumberOfVertices(g.getSizeInBytes()/g.getStrideInBytes()),t.drawDepthRange(n,r)},t.updateDepthPolyData=n=>{let r=!1;for(let d=0;d<e.volumes.length;d++){const p=e.volumes[d].getMTime();(!e._lastMTimes[d]||p!==e._lastMTimes[d])&&(r=!0,e._lastMTimes[d]=p)}const i=n.getStabilizedTime();if((e._lastMTimes.length<=e.volumes.length||i!==e._lastMTimes[e.volumes.length])&&(r=!0,e._lastMTimes[e.volumes.length]=i),!r)return;const o=n.getStabilizedCenterByReference(),u=e.volumes.length*8,f=new Float64Array(u*3),l=e.volumes.length*12,g=new Uint16Array(l*4);for(let d=0;d<e.volumes.length;d++){e.volumes[d].getBoundingCubePoints(f,d*24);let p=d*12*4;const v=d*8;for(let T=0;T<12;T++)g[p++]=3,g[p++]=v+x0[T][0],g[p++]=v+x0[T][1],g[p++]=v+x0[T][2]}for(let d=0;d<f.length;d+=3)f[d]-=o[0],f[d+1]-=o[1],f[d+2]-=o[2];e._boundsPoly.getPoints().setData(f,3),e._boundsPoly.getPoints().modified(),e._boundsPoly.getPolys().setData(g,1),e._boundsPoly.getPolys().modified(),e._boundsPoly.modified()},t.drawDepthRange=(n,r)=>{e._depthRangeTexture.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeTexture2.resizeToMatch(e.colorTextureView.getTexture()),e._depthRangeEncoder.attachTextureViews(),t.setCurrentOperation("volumeDepthRangePass"),n.setRenderEncoder(e._depthRangeEncoder),n.volumeDepthRangePass(!0),e._mapper.setWebGPURenderer(n),e._mapper.prepareToDraw(e._depthRangeEncoder),e._mapper.registerDrawCallback(e._depthRangeEncoder),n.volumeDepthRangePass(!1)},t.createDepthRangeEncoder=n=>{const r=n.getDevice();e._depthRangeEncoder=Cr.newInstance({label:"VolumePass DepthRange"}),e._depthRangeEncoder.setPipelineHash("volr"),e._depthRangeEncoder.setReplaceShaderCodeFunction(u=>{const f=u.getShaderDescription("fragment");f.addOutput("vec4<f32>","outColor1"),f.addOutput("vec4<f32>","outColor2");let l=f.getCode();l=ve.substitute(l,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,f.setCode(l)}),e._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),e._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcFactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcFactor:"one",dstFactor:"one",operation:"min"}}}]}}),e._depthRangeTexture=Pn.newInstance({label:"volumePassMaxDepth"}),e._depthRangeTexture.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const i=e._depthRangeTexture.createView("maxTexture");e._depthRangeEncoder.setColorTextureView(0,i),e._depthRangeTexture2=Pn.newInstance({label:"volumePassDepthMin"}),e._depthRangeTexture2.create(r,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});const o=e._depthRangeTexture2.createView("minTexture");e._depthRangeEncoder.setColorTextureView(1,o),e._mapper.setDevice(n.getDevice()),e._mapper.setTextureViews([e.depthTextureView])},t.createClearEncoder=n=>{e._colorTexture=Pn.newInstance({label:"volumePassColor"}),e._colorTexture.create(n.getDevice(),{width:n.getCanvas().width,height:n.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),e._colorTextureView=e._colorTexture.createView("volumePassColorTexture"),e._colorTextureView.addSampler(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._clearEncoder=Cr.newInstance({label:"VolumePass Clear"}),e._clearEncoder.setColorTextureView(0,e._colorTextureView),e._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),e._clearEncoder.setPipelineHash("volpf"),e._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createCopyEncoder=n=>{e._copyEncoder=Cr.newInstance({label:"volumePassCopy"}),e._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._copyEncoder.setPipelineHash("volcopypf"),e._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.createMergeEncoder=n=>{e._mergeEncoder=Cr.newInstance({label:"volumePassMerge"}),e._mergeEncoder.setColorTextureView(0,e._colorTextureView),e._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._mergeEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<f32>","outColor");let o=i.getCode();o=ve.substitute(o,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,i.setCode(o)}),e._mergeEncoder.setPipelineHash("volpf"),e._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},t.setVolumes=n=>{if(!e.volumes||e.volumes.length!==n.length){e.volumes=[...n],t.modified();return}for(let r=0;r<n.length;r++)if(n[r]!==e.volumes[r]){e.volumes=[...n],t.modified();return}}}const AG={colorTextureView:null,depthTextureView:null,volumes:null};function uE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AG,n),Or.extend(t,e,n),e._mapper=Ah.newInstance(),e._mapper.setFragmentShaderTemplate(FG),e._mapper.getShaderReplacements().set("replaceShaderVolumePass",(r,i,o)=>{i.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")}),e._boundsPoly=ua.newInstance(),e._lastMTimes=[],L.setGet(t,e,["colorTextureView","depthTextureView"]),zG(t,e)}const HG=L.newInstance(uE,"vtkWebGPUVolumePass");var $G={newInstance:HG,extend:uE};const WG=`
//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0.0),vec4<f32>(0.0),vec4<f32>(1.0));

  //VTK::RenderEncoder::Impl
  return output;
}
`;function jG(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t),e.opaquePass||(e.opaquePass=OG.newInstance());const i=n.getRenderable().getNumberOfLayers(),o=n.getChildren();for(let u=0;u<i;u++)for(let f=0;f<o.length;f++){const l=o[f],g=n.getRenderable().getRenderers()[f];g.getDraw()&&g.getLayer()===u&&(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumes=[],t.setCurrentOperation("queryPass"),l.traverse(t),t.setCurrentOperation("cameraPass"),l.traverse(t),e.opaquePass.traverse(l,n),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=_G.newInstance()),e.translucentPass.setColorTextureView(e.opaquePass.getColorTextureView()),e.translucentPass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.translucentPass.traverse(l,n)),e.volumes.length>0&&(e.volumePass||(e.volumePass=$G.newInstance()),e.volumePass.setColorTextureView(e.opaquePass.getColorTextureView()),e.volumePass.setDepthTextureView(e.opaquePass.getDepthTextureView()),e.volumePass.setVolumes(e.volumes),e.volumePass.traverse(l,n)),t.finalPass(n,l))}},t.finalPass=(n,r)=>{e._finalBlitEncoder||t.createFinalBlitEncoder(n),e._finalBlitOutputTextureView.createFromTextureHandle(n.getCurrentTexture(),{depth:1,format:n.getPresentationFormat()}),e._finalBlitEncoder.attachTextureViews(),e._finalBlitEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(e._finalBlitEncoder),e._fullScreenQuad.prepareAndDraw(e._finalBlitEncoder),e._finalBlitEncoder.end()},t.createFinalBlitEncoder=n=>{e._finalBlitEncoder=Cr.newInstance({label:"forwardPassBlit"}),e._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),e._finalBlitEncoder.setPipelineHash("fpf"),e._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:n.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),e._fsqSampler=Hh.newInstance({label:"finalPassSampler"}),e._fsqSampler.create(n.getDevice(),{minFilter:"linear",magFilter:"linear"}),e._fullScreenQuad=Ji.newInstance(),e._fullScreenQuad.setDevice(n.getDevice()),e._fullScreenQuad.setPipelineHash("fpfsq"),e._fullScreenQuad.setTextureViews([e.opaquePass.getColorTextureView()]),e._fullScreenQuad.setAdditionalBindables([e._fsqSampler]),e._fullScreenQuad.setFragmentShaderTemplate(WG),e._finalBlitOutputTextureView=OC.newInstance(),e._finalBlitEncoder.setColorTextureView(0,e._finalBlitOutputTextureView)},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.addVolume=n=>{e.volumes.push(n)}}const KG={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function cE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KG,n),Or.extend(t,e,n),L.setGet(t,e,["opaquePass","translucentPass","volumePass"]),jG(t,e)}const XG=L.newInstance(cE,"vtkForwardPass");var qG={newInstance:XG,extend:cE};const{VtkDataTypes:Ga}=je;function YG(t,e){e.classHierarchy.push("vtkWebGPUTextureManager");function n(i){if(i.imageData){i.dataArray=i.imageData.getPointData().getScalars(),i.time=i.dataArray.getMTime(),i.nativeArray=i.dataArray.getData();const o=i.imageData.getDimensions();switch(i.width=o[0],i.height=o[1],i.depth=o[2],i.dataArray.getNumberOfComponents()){case 1:i.format="r";break;case 2:i.format="rg";break;case 3:case 4:default:i.format="rgba";break}switch(i.dataArray.getDataType()){case Ga.UNSIGNED_CHAR:i.format+="8unorm";break;case Ga.FLOAT:case Ga.UNSIGNED_INT:case Ga.INT:case Ga.DOUBLE:case Ga.UNSIGNED_SHORT:case Ga.SHORT:default:i.format+="16float";break}}i.image&&(i.width=i.image.width,i.height=i.image.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.jsImageData&&(i.width=i.jsImageData.width,i.height=i.jsImageData.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.nativeArray=i.jsImageData.data,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.imageBitmap&&(i.width=i.imageBitmap.width,i.height=i.imageBitmap.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT),i.canvas&&(i.width=i.canvas.width,i.height=i.canvas.height,i.depth=1,i.format="rgba8unorm",i.flip=!0,i.usage=GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.RENDER_ATTACHMENT)}function r(i){const o=Pn.newInstance({label:i.label});return o.create(e.device,{width:i.width,height:i.height,depth:i.depth,format:i.format,usage:i.usage,mipLevel:i.mipLevel}),(i.nativeArray||i.image||i.canvas||i.imageBitmap)&&o.writeImageData(i),o}t.getTexture=i=>i.hash?e.device.getCachedObject(i.hash,r,i):r(i),t.getTextureForImageData=i=>{const o={time:i.getMTime()};return o.imageData=i,n(o),o.hash=o.time+o.format+o.mipLevel,e.device.getTextureManager().getTexture(o)},t.getTextureForVTKTexture=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const u={time:i.getMTime(),label:o};return i.getInputData()?u.imageData=i.getInputData():i.getImage()?u.image=i.getImage():i.getJsImageData()?u.jsImageData=i.getJsImageData():i.getImageBitmap()?u.imageBitmap=i.getImageBitmap():i.getCanvas()&&(u.canvas=i.getCanvas()),n(u),u.mipLevel=i.getMipLevel(),u.hash=u.time+u.format+u.mipLevel,e.device.getTextureManager().getTexture(u)}}const QG={handle:null,device:null};function fE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QG,n),L.obj(t,e),L.setGet(t,e,["device"]),YG(t,e)}const ZG=L.newInstance(fE);var JG={newInstance:ZG,extend:fE};class PG extends Map{constructor(){super(),this.registry=new FinalizationRegistry(e=>{const n=super.get(e);n&&n.deref&&n.deref()===void 0&&super.delete(e)})}getValue(e){const n=super.get(e);if(n){const r=n.deref();if(r!==void 0)return r;super.delete(e)}}setValue(e,n){let r;return n&&typeof n=="object"&&(r=new WeakRef(n),this.registry.register(n,e),super.set(e,r)),r}}function IG(t,e){e.classHierarchy.push("vtkWebGPUDevice"),t.initialize=n=>{e.handle=n},t.createCommandEncoder=()=>e.handle.createCommandEncoder(),t.submitCommandEncoder=n=>{e.handle.queue.submit([n.finish()])},t.getShaderModule=n=>e.shaderCache.getShaderModule(n),t.getBindGroupLayout=n=>{if(!n.entries)return null;for(let o=0;o<n.entries.length;o++){const u=n.entries[o];u.binding=u.binding||0,u.visibility=u.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}const r=JSON.stringify(n);for(let o=0;o<e.bindGroupLayouts.length;o++)if(e.bindGroupLayouts[o].sval===r)return e.bindGroupLayouts[o].layout;const i=e.handle.createBindGroupLayout(n);return e.bindGroupLayouts.push({sval:r,layout:i}),i},t.getBindGroupLayoutDescription=n=>{for(let r=0;r<e.bindGroupLayouts.length;r++)if(e.bindGroupLayouts[r].layout===n)return e.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},t.getPipeline=n=>n in e.pipelines?e.pipelines[n]:null,t.createPipeline=(n,r)=>{r.initialize(t,n),e.pipelines[n]=r},t.onSubmittedWorkDone=()=>e.handle.queue.onSubmittedWorkDone(),t.hasCachedObject=n=>e.objectCache.getValue(n),t.getCachedObject=function(n,r){if(!n)return vtkErrorMacro("attempt to cache an object without a hash"),null;const i=e.objectCache.getValue(n);if(i)return i;for(var o=arguments.length,u=new Array(o>2?o-2:0),f=2;f<o;f++)u[f-2]=arguments[f];const l=r(...u);return e.objectCache.setValue(n,l),l}}const eF={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function lE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eF,n),mt(t,e),vt(t,e,["handle"]),Wt(t,e,["bufferManager","shaderCache","textureManager"]),e.objectCache=new PG,e.shaderCache=ve.newInstance(),e.shaderCache.setDevice(t),e.bindGroupLayouts=[],e.bufferManager=ei.newInstance(),e.bufferManager.setDevice(t),e.textureManager=JG.newInstance(),e.textureManager.setDevice(t),e.pipelines={},IG(t,e)}const tF=Xe(lE,"vtkWebGPUDevice");var nF={newInstance:tF,extend:lE};function rF(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),t.traverse=(n,r)=>{if(e.deleted)return;e._currentParent=null,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getDevice();if(e.selectionRenderEncoder)e.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),e.depthTexture.resizeToMatch(e.colorTexture);else{t.createRenderEncoder(),e.colorTexture=Pn.newInstance({label:"hardwareSelectorColor"}),e.colorTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const o=e.colorTexture.createView("hardwareSelectColorTexture");e.selectionRenderEncoder.setColorTextureView(0,o),e.depthTexture=Pn.newInstance({label:"hardwareSelectorDepth"}),e.depthTexture.create(i,{width:n.getCanvas().width,height:n.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});const u=e.depthTexture.createView("hardwareSelectDepthTexture");e.selectionRenderEncoder.setDepthTextureView(u)}e.selectionRenderEncoder.attachTextureViews(),r.setRenderEncoder(e.selectionRenderEncoder),t.setCurrentOperation("cameraPass"),r.traverse(t),t.setCurrentOperation("opaquePass"),r.traverse(t)},t.createRenderEncoder=()=>{e.selectionRenderEncoder=Cr.newInstance({label:"HardwareSelectionPass"}),e.selectionRenderEncoder.setPipelineHash("sel"),e.selectionRenderEncoder.setReplaceShaderCodeFunction(r=>{const i=r.getShaderDescription("fragment");i.addOutput("vec4<u32>","outColor");let o=i.getCode();o=ve.substitute(o,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,i.setCode(o)});const n=e.selectionRenderEncoder.getDescription();n.colorAttachments[0].clearValue=[0,0,0,0],e.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}const aF={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function gE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aF,n),Or.extend(t,e,n),L.get(t,e,["colorTexture","depthTexture"]),rF(t,e)}const iF=L.newInstance(gE,"vtkWebGPUHardwareSelectionPass");var sF={newInstance:iF,extend:gE};const{SelectionContent:oF,SelectionField:KT}=cf,{FieldAssociations:XT}=Ia,{vtkErrorMacro:hE}=L;function uF(t){return`${t.propID} ${t.compositeID}`}function qT(t,e,n,r){const i=((n.height-e-1)*n.colorBufferWidth+t)*4+r;return n.colorValues[i]}function cF(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<0||e[0]>=t.width||e[1]<0||e[1]>=t.height)return null;const i=qT(e[0],e[1],t,0);if(i<=0)return null;const o={};o.propID=i;let u=qT(e[0],e[1],t,1);if((u<0||u>16777215)&&(u=0),o.compositeID=u,t.captureZValues){const f=(t.height-e[1]-1)*t.zbufferBufferWidth+e[0];o.zValue=t.depthValues[f],o.zValue=t.webGPURenderer.convertToOpenGLDepth(o.zValue),o.displayPosition=e}return o}}function fF(t,e,n){const r=[];let i=0;return e.forEach((o,u)=>{const f=cf.newInstance();switch(f.setContentType(oF.INDICES),t){case XT.FIELD_ASSOCIATION_CELLS:f.setFieldType(KT.CELL);break;case XT.FIELD_ASSOCIATION_POINTS:f.setFieldType(KT.POINT);break;default:hE("Unknown field association")}f.getProperties().propID=o.info.propID;const l=n.webGPURenderer.getPropFromID(o.info.propID);f.getProperties().prop=l.getRenderable(),f.getProperties().compositeID=o.info.compositeID,f.getProperties().pixelCount=o.pixelCount,n.captureZValues&&(f.getProperties().displayPosition=[o.info.displayPosition[0],o.info.displayPosition[1],o.info.zValue],f.getProperties().worldPosition=n.webGPURenderWindow.displayToWorld(o.info.displayPosition[0],o.info.displayPosition[1],o.info.zValue,n.renderer)),f.setSelectionList(o.attributeIDs),r[i]=f,i++}),r}function lF(t,e,n,r,i){const o=Math.floor(e),u=Math.floor(n),f=Math.floor(r),l=Math.floor(i),g=new Map,d=[0,0];for(let p=u;p<=l;p++)for(let v=o;v<=f;v++){const E=cF(t,[v,p],0,d);if(E){const S=uF(E);if(!g.has(S))g.set(S,{info:E,pixelCount:1,attributeIDs:[E.attributeID]});else{const C=g.get(S);C.pixelCount++,t.captureZValues&&E.zValue<C.info.zValue&&(C.info=E),C.attributeIDs.indexOf(E.attributeID)===-1&&C.attributeIDs.push(E.attributeID)}}}return fF(t.fieldAssociation,g,t)}function gF(t,e){e.classHierarchy.push("vtkWebGPUHardwareSelector"),t.endSelection=()=>{e.WebGPURenderer.setSelector(null)},t.getSourceDataAsync=async n=>{if(!n||!e._WebGPURenderWindow)return hE("Renderer and view must be set before calling Select."),!1;e._WebGPURenderWindow.getRenderable().preRender(),e._WebGPURenderWindow.getInitialized()||(e._WebGPURenderWindow.initialize(),await new Promise(T=>{e._WebGPURenderWindow.onInitialized(T)}));const r=e._WebGPURenderWindow.getViewNodeFor(n);if(!r)return!1;const i=r.getSuppressClear();r.setSuppressClear(!0),e._selectionPass.traverse(e._WebGPURenderWindow,r),r.setSuppressClear(i);const o=e._WebGPURenderWindow.getDevice(),u=e._selectionPass.getColorTexture(),f=e._selectionPass.getDepthTexture(),l={area:[0,0,u.getWidth()-1,u.getHeight()-1],captureZValues:e.captureZValues,fieldAssociation:e.fieldAssociation,renderer:n,webGPURenderer:r,webGPURenderWindow:e._WebGPURenderWindow,width:u.getWidth(),height:u.getHeight()};l.colorBufferWidth=16*Math.floor((l.width+15)/16),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*4*4;const g=Pi.newInstance({label:"hardwareSelectColorBuffer"});g.setDevice(o),g.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const d=e._WebGPURenderWindow.getCommandEncoder();d.copyTextureToBuffer({texture:u.getHandle()},{buffer:g.getHandle(),bytesPerRow:16*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1});let p;e.captureZValues&&(l.zbufferBufferWidth=64*Math.floor((l.width+63)/64),p=Pi.newInstance({label:"hardwareSelectDepthBuffer"}),p.setDevice(o),l.zbufferSizeInBytes=l.height*l.zbufferBufferWidth*4,p.create(l.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),d.copyTextureToBuffer({texture:f.getHandle(),aspect:"depth-only"},{buffer:p.getHandle(),bytesPerRow:4*l.zbufferBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1})),o.submitCommandEncoder(d);const v=g.mapAsync(GPUMapMode.READ);if(e.captureZValues){const T=p.mapAsync(GPUMapMode.READ);await Promise.all([v,T]),l.depthValues=new Float32Array(p.getMappedRange().slice()),p.unmap()}else await v;return l.colorValues=new Uint32Array(g.getMappedRange().slice()),g.unmap(),l.generateSelection=(T,E,S,C)=>lF(l,T,E,S,C),l}}const hF={};function pE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hF,n),WC.extend(t,e,n),e._selectionPass=sF.newInstance(),L.setGet(t,e,["_WebGPURenderWindow"]),L.moveToProtected(t,e,["WebGPURenderWindow"]),gF(t,e)}const pF=L.newInstance(pE,"vtkWebGPUHardwareSelector");var dE={newInstance:pF,extend:pE};const{vtkErrorMacro:YT}=L,dF={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function yF(t,e){e.classHierarchy.push("vtkWebGPURenderWindow"),t.getViewNodeFactory=()=>e.myFactory;const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1]),t.recreateSwapChain()),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.recreateSwapChain=()=>{e.context&&(e.context.unconfigure(),e.presentationFormat=navigator.gpu.getPreferredCanvasFormat(e.adapter),e.context.configure({device:e.device.getHandle(),format:e.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:e.size[0],height:e.size[1]}),e._configured=!0)},t.getCurrentTexture=()=>e.context.getCurrentTexture(),t.buildPass=u=>{if(u){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize()}else e.initialized&&(e._configured||t.recreateSwapChain(),e.commandEncoder=e.device.createCommandEncoder())},t.initialize=()=>{if(!e.initializing){if(e.initializing=!0,!navigator.gpu){YT("WebGPU is not enabled.");return}t.create3DContextAsync().then(()=>{e.initialized=!0,!e.deleted&&t.invokeInitialized()})}},t.setContainer=u=>{e.el&&e.el!==u&&(e.canvas.parentNode!==e.el&&YT("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==u&&(e.el=u,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:u,height:f}=e.el.getBoundingClientRect();e.containerSize=[u,f]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.size,t.create3DContextAsync=async()=>{if(e.adapter=await navigator.gpu.requestAdapter({powerPreference:"high-performance"}),!e.deleted){if(e.device=nF.newInstance(),e.device.initialize(await e.adapter.requestDevice()),e.deleted){e.device=null;return}e.context=e.canvas.getContext("webgpu")}},t.releaseGraphicsResources=()=>{const u=Or.newInstance();u.setCurrentOperation("Release"),u.traverse(t,null),e.adapter=null,e.device=null,e.context=null,e.initialized=!1,e.initializing=!1},t.setBackgroundImage=u=>{e.bgImage.src=u.src},t.setUseBackgroundImage=u=>{e.useBackgroundImage=u,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};async function i(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const f=document.createElement("canvas"),l=f.getContext("2d");f.width=e.canvas.width,f.height=e.canvas.height;const g=await t.getPixelsAsync(),d=new ImageData(g.colorValues,g.width,g.height);l.putImageData(d,0,0);const p=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(S=>{S.getViewProps().forEach(R=>{if(R.getContainer){const w=R.getContainer().getElementsByTagName("canvas");for(let O=0;O<w.length;O++){const m=w[O],M=m.getBoundingClientRect(),U=M.x-p.x,b=M.y-p.y;l.drawImage(m,U,b)}}})});const E=f.toDataURL(u);f.remove(),t.invokeImageReady(E)}t.captureNextImage=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:f=!1,size:l=null,scale:g=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=u;const d=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:l||g!==1?l||e.size.map(p=>p*g):null},new Promise((p,v)=>{const T=t.onImageReady(E=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=d,T.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(S=>{let{restoreParamsFn:C,arg:R}=S;return C(R)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),p(E);else{const S=document.createElement("img");if(S.style=dF,S.src=E,e._screenshot.placeHolder=e.el.appendChild(S),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),f){const C=f!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(R=>{const D=R.getActiveCamera(),w=D.get("focalPoint","position","parallelScale");return{resetCameraArgs:C?{renderer:R}:void 0,resetCameraFn:C?f:R.resetCamera,restoreParamsFn:D.set,arg:JSON.parse(JSON.stringify(w))}}),e._screenshot.cameras.forEach(R=>{let{resetCameraFn:D,resetCameraArgs:w}=R;return D(w)})}t.traverseAllPasses()}})})},t.traverseAllPasses=()=>{if(!e.deleted)if(e.initialized){if(e.renderPasses)for(let u=0;u<e.renderPasses.length;++u)e.renderPasses[u].traverse(t,null);e.commandEncoder&&(e.device.submitCommandEncoder(e.commandEncoder),e.commandEncoder=null,e.notifyStartCaptureImage&&e.device.onSubmittedWorkDone().then(()=>{i()}))}else{t.initialize();const u=t.onInitialized(()=>{u.unsubscribe(),t.traverseAllPasses()})}},t.setViewStream=u=>{if(e.viewStream===u)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=u,e.viewStream){const f=e.renderable.getRenderers()[0];f.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(l=>t.setBackgroundImage(l.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.getUniquePropID=()=>e.nextPropID++,t.getPropFromID=u=>{for(let f=0;f<e.children.length;f++){const l=e.children[f].getPropFromID(u);if(l!==null)return l}return null},t.getPixelsAsync=async()=>{const u=e.device,f=e.renderPasses[0].getOpaquePass().getColorTexture(),l={width:f.getWidth(),height:f.getHeight()};l.colorBufferWidth=32*Math.floor((l.width+31)/32),l.colorBufferSizeInBytes=l.colorBufferWidth*l.height*8;const g=Pi.newInstance();g.setDevice(u),g.create(l.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);const d=e.device.createCommandEncoder();d.copyTextureToBuffer({texture:f.getHandle()},{buffer:g.getHandle(),bytesPerRow:8*l.colorBufferWidth,rowsPerImage:l.height},{width:l.width,height:l.height,depthOrArrayLayers:1}),u.submitCommandEncoder(d),await g.mapAsync(GPUMapMode.READ),l.colorValues=new Uint16Array(g.getMappedRange().slice()),g.unmap();const v=new Uint8ClampedArray(l.height*l.width*4);for(let T=0;T<l.height;T++)for(let E=0;E<l.width;E++){const S=(T*l.width+E)*4,C=(T*l.colorBufferWidth+E)*4;v[S]=255*Nn.fromHalf(l.colorValues[C]),v[S+1]=255*Nn.fromHalf(l.colorValues[C+1]),v[S+2]=255*Nn.fromHalf(l.colorValues[C+2]),v[S+3]=255*Nn.fromHalf(l.colorValues[C+3])}return l.colorValues=v,l},t.createSelector=()=>{const u=dE.newInstance();return u.setWebGPURenderWindow(t),u};const o=t.setSize;t.setSize=(u,f)=>{const l=o(u,f);return l&&t.invokeWindowResizeEvent({width:u,height:f}),l},t.delete=L.chain(t.delete,t.setViewStream)}const vF={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function TF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vF,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",tE.extend(t,e,n),e.myFactory=AB.newInstance(),e.renderPasses[0]=qG.newInstance(),e.selector||(e.selector=dE.newInstance(),e.selector.setWebGPURenderWindow(t)),L.event(t,e,"imageReady"),L.event(t,e,"initialized"),L.get(t,e,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),L.setGet(t,e,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),L.setGetArray(t,e,["size"],2),L.event(t,e,"windowResizeEvent"),yF(t,e)}const yE=L.newInstance(TF,"vtkWebGPURenderWindow");$h("WebGPU",yE);er("vtkRenderWindow",yE);const SF=h4.extractURLParameters(),xF={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},CF={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function QT(t,e){Object.keys(e).forEach(n=>{t.style[n]=e[n]})}function EF(t,e){e.classHierarchy.push("vtkFullScreenRenderWindow");const n=document.querySelector("body");e.rootContainer||(e.rootContainer=n),e.container||(e.container=document.createElement("div"),QT(e.container,e.containerStyle||xF),e.rootContainer.appendChild(e.container)),e.rootContainer===n&&(document.documentElement.style.height="100%",n.style.height="100%",n.style.padding="0",n.style.margin="0"),e.renderWindow=Ab.newInstance(),e.renderer=Nb.newInstance(),e.renderWindow.addRenderer(e.renderer),e.apiSpecificRenderWindow=e.renderWindow.newAPISpecificView(SF.viewAPI??e.defaultViewAPI),e.apiSpecificRenderWindow.setContainer(e.container),e.renderWindow.addView(e.apiSpecificRenderWindow),e.interactor=UC.newInstance(),e.interactor.setInteractorStyle(FC.newInstance()),e.interactor.setView(e.apiSpecificRenderWindow),e.interactor.initialize(),e.interactor.bindEvents(e.container),t.setBackground=e.renderer.setBackground,t.removeController=()=>{const i=e.controlContainer;i&&i.parentNode.removeChild(i)},t.setControllerVisibility=i=>{e.controllerVisibility=i,e.controlContainer&&(i?e.controlContainer.style.display="block":e.controlContainer.style.display="none")},t.toggleControllerVisibility=()=>{t.setControllerVisibility(!e.controllerVisibility)};function r(i){String.fromCharCode(i.charCode)==="c"&&t.toggleControllerVisibility()}t.addController=i=>{e.controlContainer=document.createElement("div"),QT(e.controlContainer,e.controlPanelStyle||CF),e.rootContainer.appendChild(e.controlContainer),e.controlContainer.innerHTML=i,t.setControllerVisibility(e.controllerVisibility),e.rootContainer.addEventListener("keypress",r)},t.setBackground(...e.background),t.addRepresentation=i=>{i.getActors().forEach(o=>{e.renderer.addActor(o)})},t.removeRepresentation=i=>{i.getActors().forEach(o=>e.renderer.removeActor(o))},t.delete=L.chain(t.setContainer,e.apiSpecificRenderWindow.delete,()=>{e.rootContainer?.removeEventListener("keypress",r),window.removeEventListener("resize",t.resize)},t.delete),t.resize=()=>{const i=e.container.getBoundingClientRect(),o=window.devicePixelRatio||1;e.apiSpecificRenderWindow.setSize(Math.floor(i.width*o),Math.floor(i.height*o)),e.resizeCallback&&e.resizeCallback(i),e.renderWindow.render()},t.setResizeCallback=i=>{e.resizeCallback=i,t.resize()},e.listenWindowResize&&window.addEventListener("resize",t.resize),t.resize()}const wF={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function vE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wF,n),L.obj(t,e),L.get(t,e,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),EF(t,e)}const OF=L.newInstance(vE);var RF={newInstance:OF,extend:vE};function TE(t){return new TextDecoder("latin1").decode(t)}function mF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const r=TE(t),i=e.exec(r);if(!i)return{text:r};const o=i.index+i[0].length,u=r.substring(0,o);let f=null;const l=n?n.exec(r):null;if(l){const g=r.substr(l.index);f={text:u+g,binaryBuffer:t.slice(o,l.index)}}else f={text:u,binaryBuffer:t.slice(o)};return f}var ZT={arrayBufferToString:TE,extractBinary:mF};const qh={};function SE(t){return!!qh[t]}function MF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qh[t](e)}function xE(t,e){qh[t]=e}var DF={get:MF,has:SE,registerType:xE};const _F=t=>t,JT=1e-6;class CE{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=Re(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?LR:_F}rotateFromDirections(e,n){const r=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(16);Qn(r,e[0],e[1],e[2]),Qn(i,n[0],n[1],n[2]),sa(r,r),sa(i,i);const u=lh(r,i);return u>=1?this:(Xi(this.tmp,r,i),V0(this.tmp)<JT&&(Xi(this.tmp,[1,0,0],e),V0(this.tmp)<JT&&Xi(this.tmp,[0,1,0],e)),TS(o,Math.acos(u),this.tmp),yt(this.matrix,this.matrix,o),this)}rotate(e,n){return Qn(this.tmp,...n),sa(this.tmp,this.tmp),Dn(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return uh(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return ch(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return fh(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,n,r){return Qn(this.tmp,e,n,r),ct(this.matrix,this.matrix,this.tmp),this}scale(e,n,r){return Qn(this.tmp,e,n,r),Xa(this.matrix,this.matrix,this.tmp),this}multiply(e){return yt(this.matrix,this.matrix,e),this}multiply3x3(e){return yt(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return $t(this.matrix,this.matrix),this}identity(){return Re(this.matrix),this}apply(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Tx(PD,this.matrix))return this;const i=r===-1?e.length:n+r*3;for(let o=n;o<i;o+=3)Qn(this.tmp,e[o],e[o+1],e[o+2]),Ge(this.tmp,this.tmp,this.matrix),e[o]=this.tmp[0],e[o+1]=this.tmp[1],e[o+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&Lt(this.matrix,e),this}}function LF(){return new CE(!0)}function VF(){return new CE(!1)}var BF={buildFromDegree:LF,buildFromRadian:VF};function EE(){const t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}const UF=EE();function NF(t,e){if(e<2)return;const n=new Int8Array(t),r=n.length,i=[];for(let o=0;o<r;o+=e){for(let u=0;u<e;u++)i.push(n[o+u]);for(let u=0;u<e;u++)n[o+u]=i.pop()}}var C0={ENDIANNESS:UF,getEndianness:EE,swapBytes:NF};const{vtkErrorMacro:wE,vtkDebugMacro:bF}=L,Yh=()=>(wE("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let Ii=0;function ff(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(i=>{let[o,u]=i;return r.setRequestHeader(o,u)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function GF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,r)=>{const i=ff("GET",t,e);i.onreadystatechange=o=>{i.readyState===4&&(i.status===200||i.status===0?n(i.response):r({xhr:i,e:o}))},i.responseType="arraybuffer",i.send()})}function FF(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?Yh():n.ref&&!n.ref.pending?new Promise((i,o)=>{const u=[e,n.ref.basepath,n.ref.id].join("/"),f=ff("GET",u,r);f.onreadystatechange=l=>{f.readyState===1&&(n.ref.pending=!0,++Ii===1&&t?.invokeBusy&&t.invokeBusy(!0)),f.readyState===4&&(n.ref.pending=!1,f.status===200||f.status===0?(n.buffer=f.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(C0.ENDIANNESS!==n.ref.encode&&C0.ENDIANNESS&&(bF(`Swap bytes of ${n.name}`),C0.swapBytes(n.buffer,r2[n.dataType])),n.values=L.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&wE(`Error in FetchArray: ${n.name}, does not have the proper array size. Got ${n.values.length}, instead of ${n.size}`),delete n.ref,--Ii===0&&t?.invokeBusy&&t.invokeBusy(!1),t?.modified&&t.modified(),i(n)):o({xhr:f,e:l}))},f.responseType=n.dataType!=="string"?"arraybuffer":"text",f.send()}):Promise.resolve(n)}function kF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?Yh():new Promise((r,i)=>{const o=ff("GET",e,n);o.onreadystatechange=u=>{o.readyState===1&&++Ii===1&&t?.invokeBusy&&t.invokeBusy(!0),o.readyState===4&&(--Ii===0&&t?.invokeBusy&&t.invokeBusy(!1),o.status===200||o.status===0?r(JSON.parse(o.responseText)):i({xhr:o,e:u}))},o.responseType="text",o.send()})}function zF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?Yh():new Promise((r,i)=>{const o=ff("GET",e,n);o.onreadystatechange=u=>{o.readyState===1&&++Ii===1&&t?.invokeBusy&&t.invokeBusy(!0),o.readyState===4&&(--Ii===0&&t?.invokeBusy&&t.invokeBusy(!1),o.status===200||o.status===0?r(o.responseText):i({xhr:o,e:u}))},o.responseType="text",o.send()})}function AF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,i)=>{const o=new Image;n.crossOrigin&&(o.crossOrigin=n.crossOrigin),o.onload=()=>r(o),o.onerror=i,o.src=e})}const HF={fetchArray:FF,fetchJSON:kF,fetchText:zF,fetchBinary:GF,fetchImage:AF};SE("http")||xE("http",t=>HF);const{vtkErrorMacro:E0}=L;function $F(t){const n=t.split(" ").filter(i=>i.indexOf("=")>-1),r={};for(let i=0;i<n.length;++i){const u=n[i].split("=");u.length===2&&(r[u[0]]=u[1])}return r}function PT(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}function WF(t,e,n,r,i){const o=t[e];if(o===void 0)return-1;if(o.indexOf("endfacet")!==-1||o.indexOf("facet")===-1)return e+1;let u=0,f=2;const l=n.length/3,g=o.split(/[ \t]+/).filter(d=>d).slice(-3).map(Number);for(PT(g,i);t[e+f].indexOf("vertex")!==-1;){const p=t[e+f].split(/[ \t]+/).filter(v=>v).slice(-3).map(Number);PT(p,n),u++,f++}r.push(u);for(let d=0;d<u;d++)r.push(l+d);for(;t[e+f]&&t[e+f].indexOf("endfacet")!==-1;)f++;return e+f+2}function jF(t,e){e.classHierarchy.push("vtkSTLReader"),e.dataAccessHelper||(e.dataAccessHelper=DF.get("http"));function n(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=o.compression!==void 0?o.compression:e.compression,f=o.progressCallback!==void 0?o.progressCallback:e.progressCallback;return o.binary?e.dataAccessHelper.fetchBinary(i,{compression:u,progressCallback:f}):e.dataAccessHelper.fetchText(t,i,{compression:u,progressCallback:f})}function r(i){const o=e.output[0],u=o.getPoints().getData(),f=o.getPolys().getData();if(!u||!f){console.warn("No valid polydata.");return}const l=new Map,g=new Map;let d=0,p=!1;for(let v=0;v<u.length;v+=3){const T=(u[v]*10**i).toFixed(0),E=(u[v+1]*10**i).toFixed(0),S=(u[v+2]*10**i).toFixed(0),C=`${T},${E},${S}`;l.get(C)!==void 0?(g.set(v/3,l.get(C)),p=!0):(g.set(v/3,d),l.set(C,d),d++)}if(p){const v=new Float32Array(l.size*3),T=Array.from(l.keys());for(let S=0;S<T.length;S++){const C=T[S],R=l.get(C)*3,D=C.split(",").map(w=>+w*10**-i);v[R]=D[0],v[R+1]=D[1],v[R+2]=D[2]}const E=new Int32Array(f.length);for(let S=0;S<f.length;S+=4)E[S]=3,E[S+1]=g.get(f[S+1]),E[S+2]=g.get(f[S+2]),E[S+3]=g.get(f[S+3]);o.getPoints().setData(v),o.getPolys().setData(E),o.modified()}}t.setUrl=function(i){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=i;const u=i.split("/");return u.pop(),e.baseURL=u.join("/"),t.loadData(o)},t.loadData=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const o=n(e.url,i);return o.then(t.parse),o},t.parse=i=>{typeof i=="string"?t.parseAsText(i):t.parseAsArrayBuffer(i)},t.parseAsArrayBuffer=i=>{if(!i)return;if(i!==e.parseData)t.modified();else return;e.parseData=i;let o=!1;if(o=84+new DataView(i,0,84).getUint32(80,!0)*50===i.byteLength,!o){t.parseAsText(ZT.arrayBufferToString(i));return}const l=i.slice(0,80),g=ZT.arrayBufferToString(l),d=$F(g),p=new DataView(i,84),v=(i.byteLength-84)/50,T=new Float32Array(v*9),E=new Float32Array(v*3),S=new Uint32Array(v*4),C=new Uint16Array(v);let R=0;for(let O=0;O<v;O++){const m=O*50;E[O*3+0]=p.getFloat32(m+0,!0),E[O*3+1]=p.getFloat32(m+4,!0),E[O*3+2]=p.getFloat32(m+8,!0),T[O*9+0]=p.getFloat32(m+12,!0),T[O*9+1]=p.getFloat32(m+16,!0),T[O*9+2]=p.getFloat32(m+20,!0),T[O*9+3]=p.getFloat32(m+24,!0),T[O*9+4]=p.getFloat32(m+28,!0),T[O*9+5]=p.getFloat32(m+32,!0),T[O*9+6]=p.getFloat32(m+36,!0),T[O*9+7]=p.getFloat32(m+40,!0),T[O*9+8]=p.getFloat32(m+44,!0),S[R++]=3,S[R++]=O*3+0,S[R++]=O*3+1,S[R++]=O*3+2,C[O]=p.getUint16(m+48,!0)}const D="SPACE";if(D in d&&d[D]!=="LPS"){const O=d[D],m=new Float32Array(16);switch(m[15]=1,O[0]){case"L":m[0]=1;break;case"R":m[0]=-1;break;default:E0(`Can not convert STL file from ${O} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(O[1]){case"P":m[5]=1;break;case"A":m[5]=-1;break;default:E0(`Can not convert STL file from ${O} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(O[2]){case"S":m[10]=1;break;case"I":m[10]=-1;break;default:E0(`Can not convert STL file from ${O} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}BF.buildFromDegree().setMatrix(m).apply(T).apply(E)}const w=ua.newInstance();w.getPoints().setData(T,3),w.getPolys().setData(S),w.getCellData().setScalars(je.newInstance({name:"Attribute",values:C})),w.getCellData().setNormals(je.newInstance({name:"Normals",values:E,numberOfComponents:3})),e.output[0]=w,e.removeDuplicateVertices>=0&&r(e.removeDuplicateVertices)},t.parseAsText=i=>{if(!i)return;if(i!==e.parseData)t.modified();else return;e.parseData=i;const o=i.split(`
`);let u=1;const f=[],l=[],g=[];for(;u!==-1;)u=WF(o,u,f,l,g);const d=ua.newInstance();d.getPoints().setData(Float32Array.from(f),3),d.getPolys().setData(Uint32Array.from(l)),d.getCellData().setNormals(je.newInstance({name:"Normals",values:Float32Array.from(g),numberOfComponents:3})),e.output[0]=d,e.removeDuplicateVertices>=0&&r(e.removeDuplicateVertices)},t.requestData=(i,o)=>{t.parse(e.parseData)}}const KF={removeDuplicateVertices:-1};function OE(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KF,n),L.obj(t,e),L.get(t,e,["url","baseURL"]),L.setGet(t,e,["dataAccessHelper","removeDuplicateVertices"]),L.algo(t,e,0,1),jF(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}const XF=L.newInstance(OE,"vtkSTLReader");var qF={extend:OE,newInstance:XF};function YF({stlData:t,stlUrl:e,width:n=800,height:r=600,className:i}){const o=un.useRef(null),u=un.useRef(null),[f,l]=un.useState(!1),[g,d]=un.useState(null),[p,v]=un.useState(!1);un.useEffect(()=>{if(!o.current)return;d(null);const S=RF.newInstance({background:[.1,.1,.1],container:o.current}),C=S.getRenderer(),R=S.getRenderWindow();return u.current=R,R.getInteractor().setInteractorStyle(FC.newInstance()),(async()=>{if(!(!t&&!e)){l(!0),v(!1);try{const O=qF.newInstance();if(t)O.parseAsArrayBuffer(t);else if(e){const U=await fetch(e);if(!U.ok)throw new Error(`Failed to load STL: ${U.statusText}`);const b=await U.arrayBuffer();O.parseAsArrayBuffer(b)}const m=Za.newInstance();m.setInputConnection(O.getOutputPort());const M=Qa.newInstance();M.setMapper(m),M.getProperty().setColor(.2,.8,1),C.addActor(M),C.resetCamera(),R.render(),v(!0),d(null)}catch(O){d(O instanceof Error?O.message:"Failed to load 3D model"),v(!1)}finally{l(!1)}}})(),()=>{u.current&&u.current.delete()}},[t,e]);const T=()=>{if(u.current){const S=u.current.getRenderer?u.current.getRenderer():u.current.getRenderers()[0];S&&(S.resetCamera(),u.current.render())}},E=t||e;return fe.jsxs("div",{className:`${Mn.container} ${i||""}`,style:{width:`${n}px`,height:`${r}px`},children:[fe.jsx("div",{ref:o,className:Mn.viewer,style:{width:"100%",height:"100%"}}),f&&fe.jsxs("div",{className:Mn.loading,children:[fe.jsx("div",{className:Mn.spinner}),"Loading 3D model..."]}),g&&fe.jsxs("div",{className:Mn.error,style:{width:"100%",height:"100%"},children:[fe.jsx("div",{className:Mn.errorIcon,children:""}),fe.jsx("div",{children:"Failed to load 3D model"}),fe.jsx("div",{style:{fontSize:"12px",opacity:.8},children:g})]}),!E&&!f&&!g&&fe.jsxs("div",{className:Mn.placeholder,style:{width:"100%",height:"100%"},children:[fe.jsx("div",{className:Mn.placeholderIcon,children:""}),fe.jsx("div",{children:"No 3D model loaded"}),fe.jsx("div",{style:{fontSize:"12px",opacity:.7},children:"Generate a model to see it here"})]}),p&&fe.jsx("div",{className:Mn.modelInfo,children:" 3D Model Loaded"}),p&&fe.jsx("div",{className:Mn.controls,children:fe.jsx("button",{className:Mn.controlButton,onClick:T,title:"Reset camera view",children:" Reset View"})})]})}function RE(t,e){return function(){return t.apply(e,arguments)}}const{toString:QF}=Object.prototype,{getPrototypeOf:Qh}=Object,{iterator:lf,toStringTag:mE}=Symbol,gf=(t=>e=>{const n=QF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=t=>(t=t.toLowerCase(),e=>gf(e)===t),hf=t=>e=>typeof e===t,{isArray:as}=Array,Do=hf("undefined");function No(t){return t!==null&&!Do(t)&&t.constructor!==null&&!Do(t.constructor)&&Zt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ME=Gn("ArrayBuffer");function ZF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ME(t.buffer),e}const JF=hf("string"),Zt=hf("function"),DE=hf("number"),bo=t=>t!==null&&typeof t=="object",PF=t=>t===!0||t===!1,Nc=t=>{if(gf(t)!=="object")return!1;const e=Qh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mE in t)&&!(lf in t)},IF=t=>{if(!bo(t)||No(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ek=Gn("Date"),tk=Gn("File"),nk=Gn("Blob"),rk=Gn("FileList"),ak=t=>bo(t)&&Zt(t.pipe),ik=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Zt(t.append)&&((e=gf(t))==="formdata"||e==="object"&&Zt(t.toString)&&t.toString()==="[object FormData]"))},sk=Gn("URLSearchParams"),[ok,uk,ck,fk]=["ReadableStream","Request","Response","Headers"].map(Gn),lk=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Go(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),as(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(No(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),u=o.length;let f;for(r=0;r<u;r++)f=o[r],e.call(null,t[f],f,t)}}function _E(t,e){if(No(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const $a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,LE=t=>!Do(t)&&t!==$a;function J0(){const{caseless:t}=LE(this)&&this||{},e={},n=(r,i)=>{const o=t&&_E(e,i)||i;Nc(e[o])&&Nc(r)?e[o]=J0(e[o],r):Nc(r)?e[o]=J0({},r):as(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Go(arguments[r],n);return e}const gk=(t,e,n,{allOwnKeys:r}={})=>(Go(e,(i,o)=>{n&&Zt(i)?t[o]=RE(i,n):t[o]=i},{allOwnKeys:r}),t),hk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),pk=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},dk=(t,e,n,r)=>{let i,o,u;const f={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)u=i[o],(!r||r(u,t,e))&&!f[u]&&(e[u]=t[u],f[u]=!0);t=n!==!1&&Qh(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},yk=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},vk=t=>{if(!t)return null;if(as(t))return t;let e=t.length;if(!DE(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Tk=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Qh(Uint8Array)),Sk=(t,e)=>{const r=(t&&t[lf]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},xk=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Ck=Gn("HTMLFormElement"),Ek=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),IT=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),wk=Gn("RegExp"),VE=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Go(n,(i,o)=>{let u;(u=e(i,o,t))!==!1&&(r[o]=u||i)}),Object.defineProperties(t,r)},Ok=t=>{VE(t,(e,n)=>{if(Zt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Zt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Rk=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return as(t)?r(t):r(String(t).split(e)),n},mk=()=>{},Mk=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Dk(t){return!!(t&&Zt(t.append)&&t[mE]==="FormData"&&t[lf])}const _k=t=>{const e=new Array(10),n=(r,i)=>{if(bo(r)){if(e.indexOf(r)>=0)return;if(No(r))return r;if(!("toJSON"in r)){e[i]=r;const o=as(r)?[]:{};return Go(r,(u,f)=>{const l=n(u,i+1);!Do(l)&&(o[f]=l)}),e[i]=void 0,o}}return r};return n(t,0)},Lk=Gn("AsyncFunction"),Vk=t=>t&&(bo(t)||Zt(t))&&Zt(t.then)&&Zt(t.catch),BE=((t,e)=>t?setImmediate:e?((n,r)=>($a.addEventListener("message",({source:i,data:o})=>{i===$a&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),$a.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Zt($a.postMessage)),Bk=typeof queueMicrotask<"u"?queueMicrotask.bind($a):typeof process<"u"&&process.nextTick||BE,Uk=t=>t!=null&&Zt(t[lf]),Q={isArray:as,isArrayBuffer:ME,isBuffer:No,isFormData:ik,isArrayBufferView:ZF,isString:JF,isNumber:DE,isBoolean:PF,isObject:bo,isPlainObject:Nc,isEmptyObject:IF,isReadableStream:ok,isRequest:uk,isResponse:ck,isHeaders:fk,isUndefined:Do,isDate:ek,isFile:tk,isBlob:nk,isRegExp:wk,isFunction:Zt,isStream:ak,isURLSearchParams:sk,isTypedArray:Tk,isFileList:rk,forEach:Go,merge:J0,extend:gk,trim:lk,stripBOM:hk,inherits:pk,toFlatObject:dk,kindOf:gf,kindOfTest:Gn,endsWith:yk,toArray:vk,forEachEntry:Sk,matchAll:xk,isHTMLForm:Ck,hasOwnProperty:IT,hasOwnProp:IT,reduceDescriptors:VE,freezeMethods:Ok,toObjectSet:Rk,toCamelCase:Ek,noop:mk,toFiniteNumber:Mk,findKey:_E,global:$a,isContextDefined:LE,isSpecCompliantForm:Dk,toJSONObject:_k,isAsyncFn:Lk,isThenable:Vk,setImmediate:BE,asap:Bk,isIterable:Uk};function Te(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Q.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const UE=Te.prototype,NE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{NE[t]={value:t}});Object.defineProperties(Te,NE);Object.defineProperty(UE,"isAxiosError",{value:!0});Te.from=(t,e,n,r,i,o)=>{const u=Object.create(UE);return Q.toFlatObject(t,u,function(l){return l!==Error.prototype},f=>f!=="isAxiosError"),Te.call(u,t.message,e,n,r,i),u.cause=t,u.name=t.name,o&&Object.assign(u,o),u};const Nk=null;function P0(t){return Q.isPlainObject(t)||Q.isArray(t)}function bE(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function eS(t,e,n){return t?t.concat(e).map(function(i,o){return i=bE(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function bk(t){return Q.isArray(t)&&!t.some(P0)}const Gk=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function pf(t,e,n){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,C){return!Q.isUndefined(C[S])});const r=n.metaTokens,i=n.visitor||d,o=n.dots,u=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(i))throw new TypeError("visitor must be a function");function g(E){if(E===null)return"";if(Q.isDate(E))return E.toISOString();if(Q.isBoolean(E))return E.toString();if(!l&&Q.isBlob(E))throw new Te("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(E)||Q.isTypedArray(E)?l&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function d(E,S,C){let R=E;if(E&&!C&&typeof E=="object"){if(Q.endsWith(S,"{}"))S=r?S:S.slice(0,-2),E=JSON.stringify(E);else if(Q.isArray(E)&&bk(E)||(Q.isFileList(E)||Q.endsWith(S,"[]"))&&(R=Q.toArray(E)))return S=bE(S),R.forEach(function(w,O){!(Q.isUndefined(w)||w===null)&&e.append(u===!0?eS([S],O,o):u===null?S:S+"[]",g(w))}),!1}return P0(E)?!0:(e.append(eS(C,S,o),g(E)),!1)}const p=[],v=Object.assign(Gk,{defaultVisitor:d,convertValue:g,isVisitable:P0});function T(E,S){if(!Q.isUndefined(E)){if(p.indexOf(E)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(E),Q.forEach(E,function(R,D){(!(Q.isUndefined(R)||R===null)&&i.call(e,R,Q.isString(D)?D.trim():D,S,v))===!0&&T(R,S?S.concat(D):[D])}),p.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return T(t),e}function tS(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Zh(t,e){this._pairs=[],t&&pf(t,this,e)}const GE=Zh.prototype;GE.append=function(e,n){this._pairs.push([e,n])};GE.toString=function(e){const n=e?function(r){return e.call(this,r,tS)}:tS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Fk(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function FE(t,e,n){if(!e)return t;const r=n&&n.encode||Fk;Q.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=Q.isURLSearchParams(e)?e.toString():new Zh(e,n).toString(r),o){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class nS{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(r){r!==null&&e(r)})}}const kE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kk=typeof URLSearchParams<"u"?URLSearchParams:Zh,zk=typeof FormData<"u"?FormData:null,Ak=typeof Blob<"u"?Blob:null,Hk={isBrowser:!0,classes:{URLSearchParams:kk,FormData:zk,Blob:Ak},protocols:["http","https","file","blob","url","data"]},Jh=typeof window<"u"&&typeof document<"u",I0=typeof navigator=="object"&&navigator||void 0,$k=Jh&&(!I0||["ReactNative","NativeScript","NS"].indexOf(I0.product)<0),Wk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jk=Jh&&window.location.href||"http://localhost",Kk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Jh,hasStandardBrowserEnv:$k,hasStandardBrowserWebWorkerEnv:Wk,navigator:I0,origin:jk},Symbol.toStringTag,{value:"Module"})),Gt={...Kk,...Hk};function Xk(t,e){return pf(t,new Gt.classes.URLSearchParams,{visitor:function(n,r,i,o){return Gt.isNode&&Q.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function qk(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Yk(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function zE(t){function e(n,r,i,o){let u=n[o++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),l=o>=n.length;return u=!u&&Q.isArray(i)?i.length:u,l?(Q.hasOwnProp(i,u)?i[u]=[i[u],r]:i[u]=r,!f):((!i[u]||!Q.isObject(i[u]))&&(i[u]=[]),e(n,r,i[u],o)&&Q.isArray(i[u])&&(i[u]=Yk(i[u])),!f)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const n={};return Q.forEachEntry(t,(r,i)=>{e(qk(r),i,n,0)}),n}return null}function Qk(t,e,n){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Fo={transitional:kE,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=Q.isObject(e);if(o&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return i?JSON.stringify(zE(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Xk(e,this.formSerializer).toString();if((f=Q.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return pf(f?{"files[]":e}:e,l&&new l,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),Qk(e)):e}],transformResponse:[function(e){const n=this.transitional||Fo.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(r&&!this.responseType||i)){const u=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(f){if(u)throw f.name==="SyntaxError"?Te.from(f,Te.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gt.classes.FormData,Blob:Gt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{Fo.headers[t]={}});const Zk=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jk=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(u){i=u.indexOf(":"),n=u.substring(0,i).trim().toLowerCase(),r=u.substring(i+1).trim(),!(!n||e[n]&&Zk[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},rS=Symbol("internals");function go(t){return t&&String(t).trim().toLowerCase()}function bc(t){return t===!1||t==null?t:Q.isArray(t)?t.map(bc):String(t)}function Pk(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Ik=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function w0(t,e,n,r,i){if(Q.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Q.isString(e)){if(Q.isString(r))return e.indexOf(r)!==-1;if(Q.isRegExp(r))return r.test(e)}}function ez(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function tz(t,e){const n=Q.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,u){return this[r].call(this,e,i,o,u)},configurable:!0})})}let Jt=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(f,l,g){const d=go(l);if(!d)throw new Error("header name must be a non-empty string");const p=Q.findKey(i,d);(!p||i[p]===void 0||g===!0||g===void 0&&i[p]!==!1)&&(i[p||l]=bc(f))}const u=(f,l)=>Q.forEach(f,(g,d)=>o(g,d,l));if(Q.isPlainObject(e)||e instanceof this.constructor)u(e,n);else if(Q.isString(e)&&(e=e.trim())&&!Ik(e))u(Jk(e),n);else if(Q.isObject(e)&&Q.isIterable(e)){let f={},l,g;for(const d of e){if(!Q.isArray(d))throw TypeError("Object iterator must return a key-value pair");f[g=d[0]]=(l=f[g])?Q.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}u(f,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=go(e),e){const r=Q.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Pk(i);if(Q.isFunction(n))return n.call(this,i,r);if(Q.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=go(e),e){const r=Q.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||w0(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(u){if(u=go(u),u){const f=Q.findKey(r,u);f&&(!n||w0(r,r[f],f,n))&&(delete r[f],i=!0)}}return Q.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||w0(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return Q.forEach(this,(i,o)=>{const u=Q.findKey(r,o);if(u){n[u]=bc(i),delete n[o];return}const f=e?ez(o):String(o).trim();f!==o&&delete n[o],n[f]=bc(i),r[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Q.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Q.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[rS]=this[rS]={accessors:{}}).accessors,i=this.prototype;function o(u){const f=go(u);r[f]||(tz(i,u),r[f]=!0)}return Q.isArray(e)?e.forEach(o):o(e),this}};Jt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Jt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Q.freezeMethods(Jt);function O0(t,e){const n=this||Fo,r=e||n,i=Jt.from(r.headers);let o=r.data;return Q.forEach(t,function(f){o=f.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function AE(t){return!!(t&&t.__CANCEL__)}function is(t,e,n){Te.call(this,t??"canceled",Te.ERR_CANCELED,e,n),this.name="CanceledError"}Q.inherits(is,Te,{__CANCEL__:!0});function HE(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Te("Request failed with status code "+n.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function nz(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rz(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,u;return e=e!==void 0?e:1e3,function(l){const g=Date.now(),d=r[o];u||(u=g),n[i]=l,r[i]=g;let p=o,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),g-u<e)return;const T=d&&g-d;return T?Math.round(v*1e3/T):void 0}}function az(t,e){let n=0,r=1e3/e,i,o;const u=(g,d=Date.now())=>{n=d,i=null,o&&(clearTimeout(o),o=null),t(...g)};return[(...g)=>{const d=Date.now(),p=d-n;p>=r?u(g,d):(i=g,o||(o=setTimeout(()=>{o=null,u(i)},r-p)))},()=>i&&u(i)]}const tf=(t,e,n=3)=>{let r=0;const i=rz(50,250);return az(o=>{const u=o.loaded,f=o.lengthComputable?o.total:void 0,l=u-r,g=i(l),d=u<=f;r=u;const p={loaded:u,total:f,progress:f?u/f:void 0,bytes:l,rate:g||void 0,estimated:g&&f&&d?(f-u)/g:void 0,event:o,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(p)},n)},aS=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},iS=t=>(...e)=>Q.asap(()=>t(...e)),iz=Gt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Gt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Gt.origin),Gt.navigator&&/(msie|trident)/i.test(Gt.navigator.userAgent)):()=>!0,sz=Gt.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const u=[t+"="+encodeURIComponent(e)];Q.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),Q.isString(r)&&u.push("path="+r),Q.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oz(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function uz(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function $E(t,e,n){let r=!oz(e);return t&&(r||n==!1)?uz(t,e):e}const sS=t=>t instanceof Jt?{...t}:t;function Ja(t,e){e=e||{};const n={};function r(g,d,p,v){return Q.isPlainObject(g)&&Q.isPlainObject(d)?Q.merge.call({caseless:v},g,d):Q.isPlainObject(d)?Q.merge({},d):Q.isArray(d)?d.slice():d}function i(g,d,p,v){if(Q.isUndefined(d)){if(!Q.isUndefined(g))return r(void 0,g,p,v)}else return r(g,d,p,v)}function o(g,d){if(!Q.isUndefined(d))return r(void 0,d)}function u(g,d){if(Q.isUndefined(d)){if(!Q.isUndefined(g))return r(void 0,g)}else return r(void 0,d)}function f(g,d,p){if(p in e)return r(g,d);if(p in t)return r(void 0,g)}const l={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(g,d,p)=>i(sS(g),sS(d),p,!0)};return Q.forEach(Object.keys({...t,...e}),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Q.isUndefined(v)&&p!==f||(n[d]=v)}),n}const WE=t=>{const e=Ja({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:u,auth:f}=e;e.headers=u=Jt.from(u),e.url=FE($E(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let l;if(Q.isFormData(n)){if(Gt.hasStandardBrowserEnv||Gt.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((l=u.getContentType())!==!1){const[g,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];u.setContentType([g||"multipart/form-data",...d].join("; "))}}if(Gt.hasStandardBrowserEnv&&(r&&Q.isFunction(r)&&(r=r(e)),r||r!==!1&&iz(e.url))){const g=i&&o&&sz.read(o);g&&u.set(i,g)}return e},cz=typeof XMLHttpRequest<"u",fz=cz&&function(t){return new Promise(function(n,r){const i=WE(t);let o=i.data;const u=Jt.from(i.headers).normalize();let{responseType:f,onUploadProgress:l,onDownloadProgress:g}=i,d,p,v,T,E;function S(){T&&T(),E&&E(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let C=new XMLHttpRequest;C.open(i.method.toUpperCase(),i.url,!0),C.timeout=i.timeout;function R(){if(!C)return;const w=Jt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),m={data:!f||f==="text"||f==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:w,config:t,request:C};HE(function(U){n(U),S()},function(U){r(U),S()},m),C=null}"onloadend"in C?C.onloadend=R:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(R)},C.onabort=function(){C&&(r(new Te("Request aborted",Te.ECONNABORTED,t,C)),C=null)},C.onerror=function(){r(new Te("Network Error",Te.ERR_NETWORK,t,C)),C=null},C.ontimeout=function(){let O=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const m=i.transitional||kE;i.timeoutErrorMessage&&(O=i.timeoutErrorMessage),r(new Te(O,m.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,C)),C=null},o===void 0&&u.setContentType(null),"setRequestHeader"in C&&Q.forEach(u.toJSON(),function(O,m){C.setRequestHeader(m,O)}),Q.isUndefined(i.withCredentials)||(C.withCredentials=!!i.withCredentials),f&&f!=="json"&&(C.responseType=i.responseType),g&&([v,E]=tf(g,!0),C.addEventListener("progress",v)),l&&C.upload&&([p,T]=tf(l),C.upload.addEventListener("progress",p),C.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(d=w=>{C&&(r(!w||w.type?new is(null,t,C):w),C.abort(),C=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const D=nz(i.url);if(D&&Gt.protocols.indexOf(D)===-1){r(new Te("Unsupported protocol "+D+":",Te.ERR_BAD_REQUEST,t));return}C.send(o||null)})},lz=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(g){if(!i){i=!0,f();const d=g instanceof Error?g:this.reason;r.abort(d instanceof Te?d:new is(d instanceof Error?d.message:d))}};let u=e&&setTimeout(()=>{u=null,o(new Te(`timeout ${e} of ms exceeded`,Te.ETIMEDOUT))},e);const f=()=>{t&&(u&&clearTimeout(u),u=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(o):g.removeEventListener("abort",o)}),t=null)};t.forEach(g=>g.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>Q.asap(f),l}},gz=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},hz=async function*(t,e){for await(const n of pz(t))yield*gz(n,e)},pz=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},oS=(t,e,n,r)=>{const i=hz(t,e);let o=0,u,f=l=>{u||(u=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:g,value:d}=await i.next();if(g){f(),l.close();return}let p=d.byteLength;if(n){let v=o+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(g){throw f(g),g}},cancel(l){return f(l),i.return()}},{highWaterMark:2})},df=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jE=df&&typeof ReadableStream=="function",dz=df&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KE=(t,...e)=>{try{return!!t(...e)}catch{return!1}},yz=jE&&KE(()=>{let t=!1;const e=new Request(Gt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),uS=64*1024,eh=jE&&KE(()=>Q.isReadableStream(new Response("").body)),nf={stream:eh&&(t=>t.body)};df&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!nf[e]&&(nf[e]=Q.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Te(`Response type '${e}' is not supported`,Te.ERR_NOT_SUPPORT,r)})})})(new Response);const vz=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(Gt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await dz(t)).byteLength},Tz=async(t,e)=>{const n=Q.toFiniteNumber(t.getContentLength());return n??vz(e)},Sz=df&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:o,timeout:u,onDownloadProgress:f,onUploadProgress:l,responseType:g,headers:d,withCredentials:p="same-origin",fetchOptions:v}=WE(t);g=g?(g+"").toLowerCase():"text";let T=lz([i,o&&o.toAbortSignal()],u),E;const S=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let C;try{if(l&&yz&&n!=="get"&&n!=="head"&&(C=await Tz(d,r))!==0){let m=new Request(e,{method:"POST",body:r,duplex:"half"}),M;if(Q.isFormData(r)&&(M=m.headers.get("content-type"))&&d.setContentType(M),m.body){const[U,b]=aS(C,tf(iS(l)));r=oS(m.body,uS,U,b)}}Q.isString(p)||(p=p?"include":"omit");const R="credentials"in Request.prototype;E=new Request(e,{...v,signal:T,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:R?p:void 0});let D=await fetch(E,v);const w=eh&&(g==="stream"||g==="response");if(eh&&(f||w&&S)){const m={};["status","statusText","headers"].forEach(j=>{m[j]=D[j]});const M=Q.toFiniteNumber(D.headers.get("content-length")),[U,b]=f&&aS(M,tf(iS(f),!0))||[];D=new Response(oS(D.body,uS,U,()=>{b&&b(),S&&S()}),m)}g=g||"text";let O=await nf[Q.findKey(nf,g)||"text"](D,t);return!w&&S&&S(),await new Promise((m,M)=>{HE(m,M,{data:O,headers:Jt.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:E})})}catch(R){throw S&&S(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,t,E),{cause:R.cause||R}):Te.from(R,R&&R.code,t,E)}}),th={http:Nk,xhr:fz,fetch:Sz};Q.forEach(th,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const cS=t=>`- ${t}`,xz=t=>Q.isFunction(t)||t===null||t===!1,XE={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let o=0;o<e;o++){n=t[o];let u;if(r=n,!xz(n)&&(r=th[(u=String(n)).toLowerCase()],r===void 0))throw new Te(`Unknown adapter '${u}'`);if(r)break;i[u||"#"+o]=r}if(!r){const o=Object.entries(i).map(([f,l])=>`adapter ${f} `+(l===!1?"is not supported by the environment":"is not available in the build"));let u=e?o.length>1?`since :
`+o.map(cS).join(`
`):" "+cS(o[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:th};function R0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new is(null,t)}function fS(t){return R0(t),t.headers=Jt.from(t.headers),t.data=O0.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),XE.getAdapter(t.adapter||Fo.adapter)(t).then(function(r){return R0(t),r.data=O0.call(t,t.transformResponse,r),r.headers=Jt.from(r.headers),r},function(r){return AE(r)||(R0(t),r&&r.response&&(r.response.data=O0.call(t,t.transformResponse,r.response),r.response.headers=Jt.from(r.response.headers))),Promise.reject(r)})}const qE="1.11.0",yf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{yf[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const lS={};yf.transitional=function(e,n,r){function i(o,u){return"[Axios v"+qE+"] Transitional option '"+o+"'"+u+(r?". "+r:"")}return(o,u,f)=>{if(e===!1)throw new Te(i(u," has been removed"+(n?" in "+n:"")),Te.ERR_DEPRECATED);return n&&!lS[u]&&(lS[u]=!0,console.warn(i(u," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,u,f):!0}};yf.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Cz(t,e,n){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],u=e[o];if(u){const f=t[o],l=f===void 0||u(f,o,t);if(l!==!0)throw new Te("option "+o+" must be "+l,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+o,Te.ERR_BAD_OPTION)}}const Gc={assertOptions:Cz,validators:yf},Kn=Gc.validators;let Ka=class{constructor(e){this.defaults=e||{},this.interceptors={request:new nS,response:new nS}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ja(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Gc.assertOptions(r,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),i!=null&&(Q.isFunction(i)?n.paramsSerializer={serialize:i}:Gc.assertOptions(i,{encode:Kn.function,serialize:Kn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Gc.assertOptions(n,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=o&&Q.merge(o.common,o[n.method]);o&&Q.forEach(["delete","get","head","post","put","patch","common"],E=>{delete o[E]}),n.headers=Jt.concat(u,o);const f=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,f.unshift(S.fulfilled,S.rejected))});const g=[];this.interceptors.response.forEach(function(S){g.push(S.fulfilled,S.rejected)});let d,p=0,v;if(!l){const E=[fS.bind(this),void 0];for(E.unshift(...f),E.push(...g),v=E.length,d=Promise.resolve(n);p<v;)d=d.then(E[p++],E[p++]);return d}v=f.length;let T=n;for(p=0;p<v;){const E=f[p++],S=f[p++];try{T=E(T)}catch(C){S.call(this,C);break}}try{d=fS.call(this,T)}catch(E){return Promise.reject(E)}for(p=0,v=g.length;p<v;)d=d.then(g[p++],g[p++]);return d}getUri(e){e=Ja(this.defaults,e);const n=$E(e.baseURL,e.url,e.allowAbsoluteUrls);return FE(n,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){Ka.prototype[e]=function(n,r){return this.request(Ja(r||{},{method:e,url:n,data:(r||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function n(r){return function(o,u,f){return this.request(Ja(f||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Ka.prototype[e]=n(),Ka.prototype[e+"Form"]=n(!0)});let Ez=class YE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(f=>{r.subscribe(f),o=f}).then(i);return u.cancel=function(){r.unsubscribe(o)},u},e(function(o,u,f){r.reason||(r.reason=new is(o,u,f),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new YE(function(i){e=i}),cancel:e}}};function wz(t){return function(n){return t.apply(null,n)}}function Oz(t){return Q.isObject(t)&&t.isAxiosError===!0}const nh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nh).forEach(([t,e])=>{nh[e]=t});function QE(t){const e=new Ka(t),n=RE(Ka.prototype.request,e);return Q.extend(n,Ka.prototype,e,{allOwnKeys:!0}),Q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QE(Ja(t,i))},n}const Pe=QE(Fo);Pe.Axios=Ka;Pe.CanceledError=is;Pe.CancelToken=Ez;Pe.isCancel=AE;Pe.VERSION=qE;Pe.toFormData=pf;Pe.AxiosError=Te;Pe.Cancel=Pe.CanceledError;Pe.all=function(e){return Promise.all(e)};Pe.spread=wz;Pe.isAxiosError=Oz;Pe.mergeConfig=Ja;Pe.AxiosHeaders=Jt;Pe.formToJSON=t=>zE(Q.isHTMLForm(t)?new FormData(t):t);Pe.getAdapter=XE.getAdapter;Pe.HttpStatusCode=nh;Pe.default=Pe;const{Axios:i6,AxiosError:s6,CanceledError:o6,isCancel:u6,CancelToken:c6,VERSION:f6,all:l6,Cancel:g6,isAxiosError:h6,spread:p6,toFormData:d6,AxiosHeaders:y6,HttpStatusCode:v6,formToJSON:T6,getAdapter:S6,mergeConfig:x6}=Pe,m0="http://localhost:8765/api";class M0{static async generateFromPrompt(e){try{return(await Pe.post(`${m0}/generate`,{prompt:e,output_format:"stl"})).data}catch(n){return{success:!1,error:n instanceof Error?n.message:"Generation failed"}}}static async renderScript(e,n){try{return(await Pe.post(`${m0}/render`,{script:e,output_filename:n,timeout_secs:60})).data}catch(r){throw new Error(r instanceof Error?r.message:"Render failed")}}static async downloadSTL(e){return(await Pe.get(`http://localhost:8765/files/${e}`,{responseType:"arraybuffer"})).data}static getFileUrl(e){return`http://localhost:8765/files/${e}`}static async checkHealth(){try{return(await Pe.get(`${m0}/health`)).data}catch{return{status:"offline",frontend_available:!1}}}}const Rz="_app_1eu0l_1",mz="_container_1eu0l_8",Mz="_header_1eu0l_13",Dz="_title_1eu0l_18",_z="_subtitle_1eu0l_26",Lz="_inputSection_1eu0l_33",Vz="_inputForm_1eu0l_41",Bz="_inputGroup_1eu0l_47",Uz="_label_1eu0l_51",Nz="_input_1eu0l_33",bz="_generateButton_1eu0l_81",Gz="_mainContent_1eu0l_110",Fz="_statusPanel_1eu0l_116",kz="_viewerPanel_1eu0l_123",zz="_panelTitle_1eu0l_130",Az="_statusContent_1eu0l_140",Hz="_statusGenerating_1eu0l_145",$z="_statusSuccess_1eu0l_152",Wz="_statusError_1eu0l_156",jz="_statusIdle_1eu0l_160",Kz="_spinner_1eu0l_164",Xz="_progressBar_1eu0l_179",qz="_progressFill_1eu0l_187",Yz="_fileInfo_1eu0l_193",Qz="_fileInfoTitle_1eu0l_202",Zz="_fileName_1eu0l_208",Jz="_viewerContainer_1eu0l_214",Pz="_placeholderViewer_1eu0l_220",Iz="_placeholderIcon_1eu0l_234",e6="_errorMessage_1eu0l_239",Be={app:Rz,container:mz,header:Mz,title:Dz,subtitle:_z,inputSection:Lz,inputForm:Vz,inputGroup:Bz,label:Uz,input:Nz,generateButton:bz,mainContent:Gz,statusPanel:Fz,viewerPanel:kz,panelTitle:zz,statusContent:Az,statusGenerating:Hz,statusSuccess:$z,statusError:Wz,statusIdle:jz,spinner:Kz,progressBar:Xz,progressFill:qz,fileInfo:Yz,fileInfoTitle:Qz,fileName:Zz,viewerContainer:Jz,placeholderViewer:Pz,placeholderIcon:Iz,errorMessage:e6};function t6(){const[t,e]=un.useState(""),[n,r]=un.useState(!1),[i,o]=un.useState(null),[u,f]=un.useState(null),[l,g]=un.useState(0);un.useEffect(()=>{const E=new URLSearchParams(window.location.search).get("model");if(E){d(E);const S=E.replace(".stl","").replace(/_/g," ");e(`Generated: ${S}`)}},[]);const d=async T=>{try{const E=await M0.downloadSTL(T);f(E),o({success:!0,output_path:T,message:"Model loaded from server"})}catch(E){console.error("Failed to load model:",E),o({success:!1,error:`Failed to load model: ${E instanceof Error?E.message:"Unknown error"}`})}},p=async()=>{if(!t.trim())return;r(!0),o(null),f(null),g(0);const T=setInterval(()=>{g(E=>Math.min(E+Math.random()*15,90))},500);try{const E=await M0.generateFromPrompt(t);if(o(E),E.success&&E.output_path){const S=await M0.downloadSTL(E.output_path);f(S),g(100)}else g(0)}catch(E){o({success:!1,error:E instanceof Error?E.message:"Unknown error occurred"}),g(0)}finally{clearInterval(T),r(!1)}},v=T=>{T.key==="Enter"&&!n&&p()};return fe.jsx("div",{className:Be.app,children:fe.jsxs("div",{className:Be.container,children:[fe.jsxs("header",{className:Be.header,children:[fe.jsx("h1",{className:Be.title,children:" C3D AI CAD Viewer"}),fe.jsx("p",{className:Be.subtitle,children:"Generate 3D CAD models from natural language descriptions"})]}),fe.jsx("section",{className:Be.inputSection,children:fe.jsxs("div",{className:Be.inputForm,children:[fe.jsxs("div",{className:Be.inputGroup,children:[fe.jsx("label",{htmlFor:"prompt",className:Be.label,children:"Describe what you want to create"}),fe.jsx("input",{id:"prompt",type:"text",value:t,onChange:T=>e(T.target.value),onKeyPress:v,placeholder:"e.g., 'a gear with 12 teeth', 'a coffee mug with handle', 'a simple bracket'",className:Be.input,disabled:n})]}),fe.jsx("button",{onClick:p,disabled:n||!t.trim(),className:Be.generateButton,children:n?fe.jsxs(fe.Fragment,{children:[fe.jsx("span",{className:Be.spinner}),"Generating..."]}):" Generate"})]})}),fe.jsxs("main",{className:Be.mainContent,children:[fe.jsxs("section",{className:Be.statusPanel,children:[fe.jsx("h2",{className:Be.panelTitle,children:" Generation Status"}),fe.jsxs("div",{className:Be.statusContent,children:[n&&fe.jsxs("div",{className:Be.statusGenerating,children:[fe.jsx("span",{className:Be.spinner}),"AI is creating your 3D model...",fe.jsx("div",{className:Be.progressBar,children:fe.jsx("div",{className:Be.progressFill,style:{width:`${l}%`}})}),fe.jsxs("div",{style:{fontSize:"14px",opacity:.8},children:[l<30&&"Analyzing your description...",l>=30&&l<60&&"Generating CAD code...",l>=60&&l<90&&"Creating 3D model...",l>=90&&"Finishing up..."]})]}),i&&!n&&fe.jsx("div",{className:i.success?Be.statusSuccess:Be.statusError,children:i.success?fe.jsxs("div",{children:[fe.jsx("div",{children:" Generation Complete!"}),i.output_path&&fe.jsxs("div",{className:Be.fileInfo,children:[fe.jsx("div",{className:Be.fileInfoTitle,children:"Generated File:"}),fe.jsx("div",{className:Be.fileName,children:i.output_path})]}),i.message&&fe.jsx("div",{style:{marginTop:"8px",fontSize:"14px",opacity:.8},children:i.message})]}):fe.jsxs("div",{children:[fe.jsx("div",{children:" Generation Failed"}),i.error&&fe.jsx("div",{className:Be.errorMessage,children:i.error})]})}),!n&&!i&&fe.jsx("div",{className:Be.statusIdle,children:"Enter a description above to generate a 3D CAD model"})]})]}),fe.jsxs("section",{className:Be.viewerPanel,children:[fe.jsx("h2",{className:Be.panelTitle,children:" 3D Preview"}),fe.jsx("div",{className:Be.viewerContainer,children:u?fe.jsx(YF,{stlData:u,width:500,height:400,className:Be.viewer}):fe.jsxs("div",{className:Be.placeholderViewer,children:[fe.jsx("div",{className:Be.placeholderIcon,children:""}),fe.jsx("div",{children:"No 3D model loaded"}),fe.jsx("div",{style:{fontSize:"14px",opacity:.7},children:"Generate a model to see it here"})]})})]})]})]})})}DR.createRoot(document.getElementById("root")).render(fe.jsx(un.StrictMode,{children:fe.jsx(t6,{})}));
